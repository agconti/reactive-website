(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3427],{56948:function(n,i,r){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/!function(){var n="undefined"!=typeof window?window:r.g,o={};for(var s in(function(n,i,r){function aa(n){var i=0;return function(){return i<n.length?{done:!1,value:n[i++]}:{done:!0}}}var o,s,u,p,m,y,x,A,I,M="function"==typeof Object.defineProperties?Object.defineProperty:function(n,i,r){return n==Array.prototype||n==Object.prototype||(n[i]=r.value),n},j=function(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof n&&n,"object"==typeof self&&self,"object"==typeof i&&i];for(var o=0;o<r.length;++o){var s=r[o];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}(this);function fa(n,i){if(i)e:{var r=j;n=n.split(".");for(var o=0;o<n.length-1;o++){var s=n[o];if(!(s in r))break e;r=r[s]}(i=i(o=r[n=n[n.length-1]]))!=o&&null!=i&&M(r,n,{configurable:!0,writable:!0,value:i})}}function ha(n){return(n={next:n})[Symbol.iterator]=function(){return this},n}function t(n){var i="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return i?i.call(n):{next:aa(n)}}function w(n){if(!(n instanceof Array)){n=t(n);for(var i,r=[];!(i=n.next()).done;)r.push(i.value);n=r}return n}fa("Symbol",function(n){function c(n,i){this.g=n,M(this,"description",{configurable:!0,writable:!0,value:i})}if(n)return n;c.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function b(n){if(this instanceof b)throw TypeError("Symbol is not a constructor");return new c(i+(n||"")+"_"+r++,n)}}),fa("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<i.length;r++){var o=j[i[r]];"function"==typeof o&&"function"!=typeof o.prototype[n]&&M(o.prototype,n,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return n});var D,R,P="function"==typeof Object.create?Object.create:function(n){function b(){}return b.prototype=n,new b};if("function"==typeof Object.setPrototypeOf)R=Object.setPrototypeOf;else{e:{var L={};try{L.__proto__={a:!0},o=L.a;break e}catch(n){}o=!1}R=o?function(n,i){if(n.__proto__=i,n.__proto__!==i)throw TypeError(n+" is not extensible");return n}:null}var _=R;function oa(n,i){if(n.prototype=P(i.prototype),n.prototype.constructor=n,_)_(n,i);else for(var r in i)if("prototype"!=r){if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(n,r,o)}else n[r]=i[r]}n.ej=i.prototype}function pa(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function qa(n){if(n.o)throw TypeError("Generator is already running");n.o=!0}function ra(n,i){n.i={Mf:i,Xf:!0},n.g=n.m||n.j}function C(n,i,r){return n.g=r,{value:i}}function E(n){n.g=0}function sa(n,i,r){n.m=i,void 0!=r&&(n.j=r)}function ta(n,i){n.m=0,n.j=i||0}function ua(n,i,r){n.g=i,n.m=r||0}function va(n,i){return n.m=i||0,i=n.i.Mf,n.i=null,i}function wa(n){n.u=[n.i],n.m=0,n.j=0}function ya(n,i){var r=n.u.splice(0)[0];(r=n.i=n.i||r)?r.Xf?n.g=n.m||n.j:void 0!=r.B&&n.j<r.B?(n.g=r.B,n.i=null):n.g=n.j:n.g=i}function za(n){this.g=new pa,this.h=n}function Ba(n,i,r,o){try{var s=i.call(n.g.l,r);if(!(s instanceof Object))throw TypeError("Iterator result "+s+" is not an object");if(!s.done)return n.g.o=!1,s;var u=s.value}catch(i){return n.g.l=null,ra(n.g,i),Ca(n)}return n.g.l=null,o.call(n.g,u),Ca(n)}function Ca(n){for(;n.g.g;)try{var i=n.h(n.g);if(i)return n.g.o=!1,{value:i.value,done:!1}}catch(i){n.g.h=void 0,ra(n.g,i)}if(n.g.o=!1,n.g.i){if(i=n.g.i,n.g.i=null,i.Xf)throw i.Mf;return{value:i.return,done:!0}}return{value:void 0,done:!0}}function Da(n){this.next=function(i){return qa(n.g),n.g.l?i=Ba(n,n.g.l.next,i,n.g.s):(n.g.s(i),i=Ca(n)),i},this.throw=function(i){return qa(n.g),n.g.l?i=Ba(n,n.g.l.throw,i,n.g.s):(ra(n.g,i),i=Ca(n)),i},this.return=function(i){var r;return qa(n.g),(r=n.g.l)?Ba(n,"return"in r?r.return:function(n){return{value:n,done:!0}},i,n.g.return):(n.g.return(i),Ca(n))},this[Symbol.iterator]=function(){return this}}function K(n){return function(n){function b(i){return n.next(i)}function c(i){return n.throw(i)}return new Promise(function(i,r){!function f(n){n.done?i(n.value):Promise.resolve(n.value).then(b,c).then(f,r)}(n.next())})}(new Da(new za(n)))}function Fa(){for(var n=Number(this),i=[],r=n;r<arguments.length;r++)i[r-n]=arguments[r];return i}function Ga(n,i){return Object.prototype.hasOwnProperty.call(n,i)}function Ha(n,i,r){n instanceof String&&(n=String(n));for(var o=n.length,s=0;s<o;s++){var u=n[s];if(i.call(r,u,s,n))return{Uf:s,v:u}}return{Uf:-1,v:void 0}}function Ia(n,i,r){if(null==n)throw TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(i instanceof RegExp)throw TypeError("First argument to String.prototype."+r+" must not be a regular expression");return n+""}function Ja(n,i){n instanceof String&&(n+="");var r=0,o=!1,s={next:function(){if(!o&&r<n.length){var s=r++;return{value:i(s,n[s]),done:!1}}return o=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}pa.prototype.s=function(n){this.h=n},pa.prototype.return=function(n){this.i={return:n},this.g=this.j},pa.prototype.B=function(n){this.g=n},fa("Promise",function(n){function b(n){this.h=0,this.i=void 0,this.g=[],this.o=!1;var i=this.j();try{n(i.resolve,i.reject)}catch(n){i.reject(n)}}function c(){this.g=null}function d(n){return n instanceof b?n:new b(function(i){i(n)})}if(n)return n;c.prototype.h=function(n){if(null==this.g){this.g=[];var i=this;this.i(function(){i.l()})}this.g.push(n)};var i=j.setTimeout;c.prototype.i=function(n){i(n,0)},c.prototype.l=function(){for(;this.g&&this.g.length;){var n=this.g;this.g=[];for(var i=0;i<n.length;++i){var r=n[i];n[i]=null;try{r()}catch(n){this.j(n)}}}this.g=null},c.prototype.j=function(n){this.i(function(){throw n})},b.prototype.j=function(){function g(r){return function(o){i||(i=!0,r.call(n,o))}}var n=this,i=!1;return{resolve:g(this.F),reject:g(this.l)}},b.prototype.F=function(n){if(n===this)this.l(TypeError("A Promise cannot resolve to itself"));else if(n instanceof b)this.H(n);else{switch(typeof n){case"object":var i=null!=n;break;case"function":i=!0;break;default:i=!1}i?this.C(n):this.m(n)}},b.prototype.C=function(n){var i=void 0;try{i=n.then}catch(n){this.l(n);return}"function"==typeof i?this.I(i,n):this.m(n)},b.prototype.l=function(n){this.s(2,n)},b.prototype.m=function(n){this.s(1,n)},b.prototype.s=function(n,i){if(0!=this.h)throw Error("Cannot settle("+n+", "+i+"): Promise already settled in state"+this.h);this.h=n,this.i=i,2===this.h&&this.G(),this.u()},b.prototype.G=function(){var n=this;i(function(){if(n.A()){var i=j.console;void 0!==i&&i.error(n.i)}},1)},b.prototype.A=function(){if(this.o)return!1;var n=j.CustomEvent,i=j.Event,r=j.dispatchEvent;return void 0===r||("function"==typeof n?n=new n("unhandledrejection",{cancelable:!0}):"function"==typeof i?n=new i("unhandledrejection",{cancelable:!0}):(n=j.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,n),n.promise=this,n.reason=this.i,r(n))},b.prototype.u=function(){if(null!=this.g){for(var n=0;n<this.g.length;++n)r.h(this.g[n]);this.g=null}};var r=new c;return b.prototype.H=function(n){var i=this.j();n.rd(i.resolve,i.reject)},b.prototype.I=function(n,i){var r=this.j();try{n.call(i,r.resolve,r.reject)}catch(n){r.reject(n)}},b.prototype.then=function(n,i){function k(n,i){return"function"==typeof n?function(i){try{r(n(i))}catch(n){o(n)}}:i}var r,o,s=new b(function(n,i){r=n,o=i});return this.rd(k(n,r),k(i,o)),s},b.prototype.catch=function(n){return this.then(void 0,n)},b.prototype.rd=function(n,i){function k(){switch(o.h){case 1:n(o.i);break;case 2:i(o.i);break;default:throw Error("Unexpected state: "+o.h)}}var o=this;null==this.g?r.h(k):this.g.push(k),this.o=!0},b.resolve=d,b.reject=function(n){return new b(function(i,r){r(n)})},b.race=function(n){return new b(function(i,r){for(var o=t(n),s=o.next();!s.done;s=o.next())d(s.value).rd(i,r)})},b.all=function(n){var i=t(n),r=i.next();return r.done?d([]):new b(function(n,o){var s=[],u=0;do s.push(void 0),u++,d(r.value).rd(function(i){return function(r){s[i]=r,0==--u&&n(s)}}(s.length-1),o),r=i.next();while(!r.done)})},b}),fa("WeakMap",function(n){function b(n){if(this.g=(r+=Math.random()+1).toString(),n){n=t(n);for(var i;!(i=n.next()).done;)i=i.value,this.set(i[0],i[1])}}function c(){}function d(n){var i=typeof n;return"object"===i&&null!==n||"function"===i}function e(n){Ga(n,i)||M(n,i,{value:new c})}function f(n){var i=Object[n];i&&(Object[n]=function(n){return n instanceof c?n:(Object.isExtensible(n)&&e(n),i(n))})}if(function(){if(!n||!Object.seal)return!1;try{var i=Object.seal({}),r=Object.seal({}),o=new n([[i,2],[r,3]]);if(2!=o.get(i)||3!=o.get(r))return!1;return o.delete(i),o.set(r,4),!o.has(i)&&4==o.get(r)}catch(n){return!1}}())return n;var i="$jscomp_hidden_"+Math.random();f("freeze"),f("preventExtensions"),f("seal");var r=0;return b.prototype.set=function(n,r){if(!d(n))throw Error("Invalid WeakMap key");if(e(n),!Ga(n,i))throw Error("WeakMap key fail: "+n);return n[i][this.g]=r,this},b.prototype.get=function(n){return d(n)&&Ga(n,i)?n[i][this.g]:void 0},b.prototype.has=function(n){return d(n)&&Ga(n,i)&&Ga(n[i],this.g)},b.prototype.delete=function(n){return!!(d(n)&&Ga(n,i)&&Ga(n[i],this.g))&&delete n[i][this.g]},b}),fa("Map",function(n){function b(){var n={};return n.sb=n.next=n.head=n}function c(n,i){var r=n.g;return ha(function(){if(r){for(;r.head!=n.g;)r=r.sb;for(;r.next!=r.head;)return{done:!1,value:i(r=r.next)};r=null}return{done:!0,value:void 0}})}function d(n,o){var s=o&&typeof o;"object"==s||"function"==s?i.has(o)?s=i.get(o):(s=""+ ++r,i.set(o,s)):s="p_"+o;var u=n.h[s];if(u&&Ga(n.h,s))for(n=0;n<u.length;n++){var p=u[n];if(o!=o&&p.key!=p.key||o===p.key)return{id:s,list:u,index:n,entry:p}}return{id:s,list:u,index:-1,entry:void 0}}function e(n){if(this.h={},this.g=b(),this.size=0,n){n=t(n);for(var i;!(i=n.next()).done;)i=i.value,this.set(i[0],i[1])}}if(function(){if(!n||"function"!=typeof n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),r=new n(t([[i,"s"]]));if("s"!=r.get(i)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var o=r.entries(),s=o.next();if(s.done||s.value[0]!=i||"s"!=s.value[1])return!1;return!(s=o.next()).done&&4==s.value[0].x&&"t"==s.value[1]&&!!o.next().done}catch(n){return!1}}())return n;var i=new WeakMap;e.prototype.set=function(n,i){var r=d(this,n=0===n?0:n);return r.list||(r.list=this.h[r.id]=[]),r.entry?r.entry.value=i:(r.entry={next:this.g,sb:this.g.sb,head:this.g,key:n,value:i},r.list.push(r.entry),this.g.sb.next=r.entry,this.g.sb=r.entry,this.size++),this},e.prototype.delete=function(n){return!!(n=d(this,n)).entry&&!!n.list&&(n.list.splice(n.index,1),n.list.length||delete this.h[n.id],n.entry.sb.next=n.entry.next,n.entry.next.sb=n.entry.sb,n.entry.head=null,this.size--,!0)},e.prototype.clear=function(){this.h={},this.g=this.g.sb=b(),this.size=0},e.prototype.has=function(n){return!!d(this,n).entry},e.prototype.get=function(n){return(n=d(this,n).entry)&&n.value},e.prototype.entries=function(){return c(this,function(n){return[n.key,n.value]})},e.prototype.keys=function(){return c(this,function(n){return n.key})},e.prototype.values=function(){return c(this,function(n){return n.value})},e.prototype.forEach=function(n,i){for(var r,o=this.entries();!(r=o.next()).done;)r=r.value,n.call(i,r[1],r[0],this)},e.prototype[Symbol.iterator]=e.prototype.entries;var r=0;return e}),fa("Set",function(n){function b(n){if(this.g=new Map,n){n=t(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return!function(){if(!n||"function"!=typeof n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),r=new n(t([i]));if(!r.has(i)||1!=r.size||r.add(i)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var o=r.entries(),s=o.next();if(s.done||s.value[0]!=i||s.value[1]!=i)return!1;return!(s=o.next()).done&&s.value[0]!=i&&4==s.value[0].x&&s.value[1]==s.value[0]&&o.next().done}catch(n){return!1}}()?(b.prototype.add=function(n){return n=0===n?0:n,this.g.set(n,n),this.size=this.g.size,this},b.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},b.prototype.clear=function(){this.g.clear(),this.size=0},b.prototype.has=function(n){return this.g.has(n)},b.prototype.entries=function(){return this.g.entries()},b.prototype.values=function(){return this.g.values()},b.prototype.keys=b.prototype.values,b.prototype[Symbol.iterator]=b.prototype.values,b.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},b):n}),fa("Array.prototype.findIndex",function(n){return n||function(n,i){return Ha(this,n,i).Uf}}),fa("Object.is",function(n){return n||function(n,i){return n===i?0!==n||1/n==1/i:n!=n&&i!=i}}),fa("Array.prototype.includes",function(n){return n||function(n,i){var r=this;r instanceof String&&(r=String(r));var o=r.length;for(0>(i=i||0)&&(i=Math.max(i+o,0));i<o;i++){var s=r[i];if(s===n||Object.is(s,n))return!0}return!1}}),fa("String.prototype.includes",function(n){return n||function(n,i){return -1!==Ia(this,n,"includes").indexOf(n,i||0)}}),fa("Array.prototype.find",function(n){return n||function(n,i){return Ha(this,n,i).v}}),fa("String.prototype.startsWith",function(n){return n||function(n,i){var r=Ia(this,n,"startsWith"),o=r.length,s=n.length;i=Math.max(0,Math.min(0|i,r.length));for(var u=0;u<s&&i<o;)if(r[i++]!=n[u++])return!1;return u>=s}}),fa("Array.prototype.keys",function(n){return n||function(){return Ja(this,function(n){return n})}}),fa("WeakSet",function(n){function b(n){if(this.g=new WeakMap,n){n=t(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return!function(){if(!n||!Object.seal)return!1;try{var i=Object.seal({}),r=Object.seal({}),o=new n([i]);if(!o.has(i)||o.has(r))return!1;return o.delete(i),o.add(r),!o.has(i)&&o.has(r)}catch(n){return!1}}()?(b.prototype.add=function(n){return this.g.set(n,!0),this},b.prototype.has=function(n){return this.g.has(n)},b.prototype.delete=function(n){return this.g.delete(n)},b):n}),fa("Array.from",function(n){return n||function(n,i,r){i=null!=i?i:function(n){return n};var o=[],s="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];if("function"==typeof s){n=s.call(n);for(var u=0;!(s=n.next()).done;)o.push(i.call(r,s.value,u++))}else for(s=n.length,u=0;u<s;u++)o.push(i.call(r,n[u],u));return o}});var B="function"==typeof Object.assign?Object.assign:function(n,i){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o)for(var s in o)Ga(o,s)&&(n[s]=o[s])}return n};fa("Object.assign",function(n){return n||B}),fa("Array.prototype.values",function(n){return n||function(){return Ja(this,function(n,i){return i})}}),fa("Promise.prototype.finally",function(n){return n||function(n){return this.then(function(i){return Promise.resolve(n()).then(function(){return i})},function(i){return Promise.resolve(n()).then(function(){throw i})})}}),fa("Array.prototype.entries",function(n){return n||function(){return Ja(this,function(n,i){return[n,i]})}}),fa("String.prototype.repeat",function(n){return n||function(n){var i=Ia(this,null,"repeat");if(0>n||1342177279<n)throw RangeError("Invalid count value");n|=0;for(var r="";n;)1&n&&(r+=i),(n>>>=1)&&(i+=i);return r}}),fa("Number.isNaN",function(n){return n||function(n){return"number"==typeof n&&isNaN(n)}}),fa("Number.isFinite",function(n){return n||function(n){return"number"==typeof n&&!isNaN(n)&&1/0!==n&&-1/0!==n}}),fa("Object.values",function(n){return n||function(n){var i,r=[];for(i in n)Ga(n,i)&&r.push(n[i]);return r}}),fa("Math.log2",function(n){return n||function(n){return Math.log(n)/Math.LN2}}),fa("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),fa("Math.trunc",function(n){return n||function(n){if(isNaN(n=Number(n))||1/0===n||-1/0===n||0===n)return n;var i=Math.floor(Math.abs(n));return 0>n?-i:i}}),fa("Object.entries",function(n){return n||function(n){var i,r=[];for(i in n)Ga(n,i)&&r.push([i,n[i]]);return r}});var z=this||self;function N(n,i){n=n.split(".");var r,o=z;for((n[0]in o)||void 0===o.execScript||o.execScript("var "+n[0]);n.length&&(r=n.shift());)n.length||void 0===i?o=o[r]&&o[r]!==Object.prototype[r]?o[r]:o[r]={}:o[r]=i}function Ma(n){this.g=Math.exp(Math.log(.5)/n),this.i=this.h=0}function Na(n){return n.h/(1-Math.pow(n.g,n.i))}function Pa(){this.h=new Ma(2),this.j=new Ma(5),this.g=0,this.i=128e3,this.l=16e3}function Qa(){}function Ra(){}function Sa(){}function Ta(n){var i=Fa.apply(1,arguments);q.has(n)||(q.add(n),Sa.apply(Qa,w(i)))}function Va(){}Ma.prototype.sample=function(n,i){var r=Math.pow(this.g,n);isNaN(i=i*(1-r)+r*this.h)||(this.h=i,this.i+=n)},Pa.prototype.configure=function(n){this.i=n.minTotalBytes,this.l=n.minBytes,this.h.g=Math.exp(Math.log(.5)/n.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/n.slowHalfLife)},Pa.prototype.sample=function(n,i){if(!(i<this.l)){var r=8e3*i/n;n/=1e3,this.g+=i,this.h.sample(n,r),this.j.sample(n,r)}},Pa.prototype.getBandwidthEstimate=function(n){return this.g<this.i?n:Math.min(Na(this.h),Na(this.j))};var q=new Set;function Za(i){if(V.has(i))return V.get(i);if(n.ManagedMediaSource){var r=ManagedMediaSource.isTypeSupported(i);return V.set(i,r),r}return!!n.MediaSource&&(r=MediaSource.isTypeSupported(i),V.set(i,r),r)}function bb(){return!!n.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}n.console&&(Sa=function(){return console.warn.apply(console,w(Fa.apply(0,arguments)))},Ra=function(){console.error.apply(console,w(Fa.apply(0,arguments)))});var V=new Map;function cb(){}function db(){}function eb(){}function fb(n,i){if(!n&&!i)return!0;if(!n||!i||n.byteLength!=i.byteLength)return!1;if(gb(n)==gb(i)&&(n.byteOffset||0)==(i.byteOffset||0))return!0;var r=hb(n);i=hb(i);for(var o=0;o<n.byteLength;o++)if(r[o]!=i[o])return!1;return!0}function gb(n){return n instanceof ArrayBuffer?n:n.buffer}function kb(n){return n instanceof ArrayBuffer?n:0==n.byteOffset&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function hb(n,i,r){return lb(n,void 0===i?0:i,r=void 0===r?1/0:r,Uint8Array)}function mb(n,i,r){return lb(n,void 0===i?0:i,r=void 0===r?1/0:r,Uint16Array)}function nb(n,i,r){return lb(n,void 0===i?0:i,r=void 0===r?1/0:r,DataView)}function lb(n,i,r,o){var s=gb(n),u=1;"BYTES_PER_ELEMENT"in o&&(u=o.BYTES_PER_ELEMENT);var p=((n.byteOffset||0)+n.byteLength)/u;return n=Math.floor(Math.max(0,Math.min(((n.byteOffset||0)+i)/u,p))),new o(s,n,Math.floor(Math.min(n+Math.max(r,0),p))-n)}function ob(){}function pb(n){this.l=new db,(n=H[n.toLowerCase()])&&(this.l=n()),this.g=new cb,(n=G)&&(this.g=n())}cb.prototype.extract=function(){},cb.prototype.decode=function(){return[]},cb.prototype.clear=function(){},cb.prototype.getStreams=function(){return[]},db.prototype.init=function(){},db.prototype.parse=function(){return[]},N("shaka.util.BufferUtils",eb),eb.toDataView=nb,eb.toUint16=mb,eb.toUint8=hb,eb.toArrayBuffer=kb,eb.equal=fb,ob.prototype.init=function(){},ob.prototype.i=function(){},ob.prototype.h=function(){},ob.prototype.j=function(){},N("shaka.media.IClosedCaptionParser",ob),pb.prototype.init=function(n){this.l.init(n)},pb.prototype.i=function(n){n=t(n=this.l.parse(n));for(var i=n.next();!i.done;i=n.next()){var r=hb((i=i.value).packet);0<r.length&&this.g.extract(r,i.pts)}return this.g.decode()},pb.prototype.h=function(){this.g.clear()},pb.prototype.j=function(){return this.g.getStreams()},N("shaka.media.ClosedCaptionParser",pb),pb.findDecoder=function(){return G},pb.unregisterDecoder=function(){G=null},pb.registerDecoder=function(n){G=n},pb.findParser=function(n){return H[n]},pb.unregisterParser=function(n){delete H[n]},pb.registerParser=function(n,i){H[n]=i};var H={},G=null;function sb(n,i){return!!("number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))||n===i}function tb(n,i){-1<(i=n.indexOf(i))&&n.splice(i,1)}function ub(n,i,r){if(r||(r=sb),n.length!=i.length)return!1;i=i.slice();var o={};n=t(n);for(var s=n.next();!s.done;o={ae:o.ae},s=n.next()){if(o.ae=s.value,-1==(s=i.findIndex(function(n){return function(i){return r(n.ae,i)}}(o))))return!1;i[s]=i[i.length-1],i.pop()}return 0==i.length}function xb(n,i,r){if(r||(r=sb),n.length!=i.length)return!1;for(var o=0;o<n.length;o++)if(!r(n[o],i[o]))return!1;return!0}function yb(n,i,r){this.startTime=n,this.endTime=i,this.payload=r,this.region=new zb,this.position=null,this.positionAlign=X,this.size=0,this.textAlign=J,this.direction=ea,this.writingMode=eo,this.lineInterpretation=eu,this.line=null,this.lineHeight="",this.lineAlign=ec,this.displayAlign=ee,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ew,this.fontStyle=ex,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Kb:32,rows:15}}function Kb(n,i){return(n=new yb(n,i,"")).lineBreak=!0,n}function Lb(n,i){if(n.startTime!=i.startTime||n.endTime!=i.endTime||n.payload!=i.payload)return!1;for(var r in n)if("startTime"!=r&&"endTime"!=r&&"payload"!=r){if("nestedCues"==r){if(!xb(n.nestedCues,i.nestedCues,Lb))return!1}else if("region"==r||"cellResolution"==r){for(var o in n[r])if(n[r][o]!=i[r][o])return!1}else if(Array.isArray(n[r])){if(!xb(n[r],i[r]))return!1}else if(n[r]!=i[r])return!1}return!0}yb.prototype.clone=function(){var n,i=new yb(0,0,"");for(n in this)i[n]=this[n],i[n]&&i[n].constructor==Array&&(i[n]=i[n].slice());return i},N("shaka.text.Cue",yb),yb.equal=Lb,yb.prototype.clone=yb.prototype.clone;var X="auto";yb.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:X};var J="center",$={LEFT:"left",RIGHT:"right",CENTER:J,START:"start",END:"end"};yb.textAlign=$;var ee="after",en={BEFORE:"before",CENTER:"center",AFTER:ee};yb.displayAlign=en;var ea="ltr";yb.direction={HORIZONTAL_LEFT_TO_RIGHT:ea,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var eo="horizontal-tb";yb.writingMode={HORIZONTAL_TOP_TO_BOTTOM:eo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var eu=0;yb.lineInterpretation={LINE_NUMBER:eu,PERCENTAGE:1};var ec="start",ep={CENTER:"center",START:ec,END:"end"};yb.lineAlign=ep;var em={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};yb.defaultTextColor=em;var ev={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};yb.defaultTextBackgroundColor=ev;var ew=400;yb.fontWeight={NORMAL:ew,BOLD:700};var ex="normal",eT={NORMAL:ex,ITALIC:"italic",OBLIQUE:"oblique"};function zb(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=eS,this.scroll=eC}yb.fontStyle=eT,yb.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},N("shaka.text.CueRegion",zb);var eS=1;zb.units={PX:0,PERCENTAGE:eS,LINES:2};var eC="";function Xb(){}function Yb(n,i,r){ek[n.toLowerCase().split(";")[0]+"-"+r]={priority:r,Vd:i}}function $b(n,i){for(var r=n.toLowerCase().split(";")[0],o=t([eD,eM,eI,eE]),s=o.next();!s.done;s=o.next())if(s=ek[r+"-"+s.value]){var u=s.Vd(),p=u.isSupported(n,i);if(u.destroy(),p)return s.Vd}return null}zb.scrollMode={NONE:eC,UP:"up"},Xb.prototype.destroy=function(){},N("shaka.transmuxer.TransmuxerEngine",Xb),Xb.findTransmuxer=$b,Xb.unregisterTransmuxer=function(n,i){delete ek[n.toLowerCase().split(";")[0]+"-"+i]},Xb.registerTransmuxer=Yb,Xb.prototype.destroy=Xb.prototype.destroy;var ek={},eE=1,eI=2,eM=3,eD=4;Xb.PluginPriority={FALLBACK:eE,PREFERRED_SECONDARY:eI,PREFERRED:eM,APPLICATION:eD};var eN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function fc(n){var i;n instanceof fc?(gc(this,n.ab),this.Wb=n.Wb,hc(this,n.ob),ic(this,n.nc),this.Ga=n.Ga,jc(this,n.g.clone()),this.Lb=n.Lb):n&&(i=String(n).match(eN))?(gc(this,i[1]||"",!0),this.Wb=kc(i[2]||""),hc(this,i[3]||"",!0),ic(this,i[4]),this.Ga=kc(i[5]||"",!0),jc(this,i[6]||"",!0),this.Lb=kc(i[7]||"")):this.g=new lc(null)}function gc(n,i,r){n.ab=r?kc(i,!0):i,n.ab&&(n.ab=n.ab.replace(/:$/,""))}function hc(n,i,r){n.ob=r?kc(i,!0):i}function ic(n,i){if(i){if(isNaN(i=Number(i))||0>i)throw Error("Bad port number "+i);n.nc=i}else n.nc=null}function jc(n,i,r){i instanceof lc?n.g=i:(r||(i=mc(i,eL)),n.g=new lc(i))}function kc(n,i){return n?i?decodeURI(n):decodeURIComponent(n):""}function mc(n,i,r){return null!=n?(n=encodeURI(n).replace(i,sc),r&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sc(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}(D=fc.prototype).ab="",D.Wb="",D.ob="",D.nc=null,D.Ga="",D.Lb="",D.toString=function(){var n=[],i=this.ab;if(i&&n.push(mc(i,eR,!0),":"),i=this.ob){n.push("//");var r=this.Wb;r&&n.push(mc(r,eR,!0),"@"),n.push(encodeURIComponent(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.nc)&&n.push(":",String(i))}return(i=this.Ga)&&(this.ob&&"/"!=i.charAt(0)&&n.push("/"),n.push(mc(i,"/"==i.charAt(0)?eP:eO,!0))),(i=this.g.toString())&&n.push("?",i),(i=this.Lb)&&n.push("#",mc(i,eU)),n.join("")},D.resolve=function(n){var i=this.clone();"data"===i.ab&&(i=new fc);var r=!!n.ab;r?gc(i,n.ab):r=!!n.Wb,r?i.Wb=n.Wb:r=!!n.ob,r?hc(i,n.ob):r=null!=n.nc;var o=n.Ga;if(r)ic(i,n.nc);else if(r=!!n.Ga){if("/"!=o.charAt(0)){if(this.ob&&!this.Ga)o="/"+o;else{var s=i.Ga.lastIndexOf("/");-1!=s&&(o=i.Ga.substr(0,s+1)+o)}}if(".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){s=0==o.lastIndexOf("/",0),o=o.split("/");for(var u=[],p=0;p<o.length;){var m=o[p++];"."==m?s&&p==o.length&&u.push(""):".."==m?((1<u.length||1==u.length&&""!=u[0])&&u.pop(),s&&p==o.length&&u.push("")):(u.push(m),s=!0)}o=u.join("/")}}return r?i.Ga=o:r=""!==n.g.toString(),r?jc(i,n.g.clone()):r=!!n.Lb,r&&(i.Lb=n.Lb),i},D.clone=function(){return new fc(this)};var eR=/[#\/\?@]/g,eO=/[#\?:]/g,eP=/[#\?]/g,eL=/[#\?@]/g,eU=/#/g;function lc(n){this.g=n||null}function uc(n){if(!n.xa&&(n.xa={},n.Nc=0,n.g))for(var i=n.g.split("&"),r=0;r<i.length;r++){var o=i[r].indexOf("="),s=null;if(0<=o){var u=i[r].substring(0,o);s=i[r].substring(o+1)}else u=i[r];u=decodeURIComponent(u.replace(/\+/g," ")),s=s||"",n.add(u,decodeURIComponent(s.replace(/\+/g," ")))}}function O(n,i,r){var o=Fa.apply(3,arguments);if(this.severity=n,this.category=i,this.code=r,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code,e_)try{throw Error(this.message||"Shaka Error")}catch(n){this.stack=n.stack}}(D=lc.prototype).xa=null,D.Nc=null,D.add=function(n,i){uc(this),this.g=null;var r=this.xa.hasOwnProperty(n)?this.xa[n]:null;return r||(this.xa[n]=r=[]),r.push(i),this.Nc++,this},D.set=function(n,i){return uc(this),this.g=null,this.xa.hasOwnProperty(n)?this.xa[n]=[i]:this.add(n,i),this},D.get=function(n){return uc(this),this.xa[n]||[]},D.toString=function(){if(this.g)return this.g;if(!this.xa)return"";var n,i=[];for(n in this.xa)for(var r=encodeURIComponent(n),o=this.xa[n],s=0;s<o.length;s++){var u=r;""!==o[s]&&(u+="="+encodeURIComponent(o[s])),i.push(u)}return this.g=i.join("&")},D.clone=function(){var n=new lc;if(n.g=this.g,this.xa){var i,r={};for(i in this.xa)r[i]=this.xa[i].concat();n.xa=r,n.Nc=this.Nc}return n},O.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},N("shaka.util.Error",O);var e_=!0;function xc(n,i){if(0==i.length)return n;if(1==n.length&&1==i.length){var r=new fc(n[0]);return i=new fc(i[0]),[r.resolve(i).toString()]}i=i.map(function(n){return new fc(n)}),r=[],n=t(n);for(var o=n.next();!o.done;o=n.next()){o=new fc(o.value);for(var s=t(i),u=s.next();!u.done;u=s.next())r.push(o.resolve(u.value).toString())}return r}function yc(n,i){return{keySystem:n,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i||[],keyIds:new Set}}function zc(n,i){if(1==i.length)return i[0];if(null!=(n=Bc(n,i)))return n;throw new O(2,4,4025,i)}function Bc(n,i){for(var r=t(eB[n]),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=t(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.test(u.trim()))return u.trim()}return n==eK?"":null}O.Severity={RECOVERABLE:1,CRITICAL:2},O.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},O.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};var eK="text",eF={$:"video",P:"audio",na:eK,he:"image",fi:"application"},eB={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Fc(){}function Gc(n,i){var r=n;return i&&!eq.includes(n)&&(r+='; codecs="'+i+'"'),r}function Ic(n,i){return i&&(n+='; codecs="'+i+'"'),n}function Jc(n,i,r){var o=Gc(n,i);return $b(i=Ic(n,i))?(n=$b(i))?(r=(n=n()).convertCodecs(r,i),n.destroy()):r=i:r="video/mp2t"!=n&&"audio"==r?o.replace("video","audio"):o,r}function Kc(n){var i=Lc(n);switch(n=i[0],i=i[1].toLowerCase(),!0){case"mp4a"===n&&"69"===i:case"mp4a"===n&&"6b"===i:case"mp4a"===n&&"40.34"===i:return"mp3";case"mp4a"===n&&"66"===i:case"mp4a"===n&&"67"===i:case"mp4a"===n&&"68"===i:case"mp4a"===n&&"40.2"===i:case"mp4a"===n&&"40.02"===i:case"mp4a"===n&&"40.5"===i:case"mp4a"===n&&"40.05"===i:case"mp4a"===n&&"40.29"===i:case"mp4a"===n&&"40.42"===i:return"aac";case"mp4a"===n&&"a5"===i:return"ac-3";case"mp4a"===n&&"a6"===i:return"ec-3";case"mp4a"===n&&"b2"===i:return"dtsx";case"mp4a"===n&&"a9"===i:return"dtsc";case"avc1"===n:case"avc3"===n:return"avc";case"hvc1"===n:case"hev1"===n:return"hevc";case"dvh1"===n:case"dvhe"===n:return"dovi"}return n}function Mc(n){var i=[];n=t(n.split(","));for(var r=n.next();!r.done;r=n.next())i.push((r=Lc(r.value))[0]);return i.sort().join(",")}function Nc(n){return n.split(";")[0]}function Oc(n){return(n=n.split(/ *; */)).shift(),(n=n.find(function(n){return n.startsWith("codecs=")}))?n.split("=")[1].replace(/^"|"$/g,""):""}function Lc(n){var i=(n=n.split("."))[0];return n.shift(),[i,n.join(".")]}N("shaka.util.MimeUtils",Fc),Fc.getFullTypeWithAllCodecs=Ic,Fc.getFullType=Gc,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var eq=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Pc(n){this.i=null,this.j=n,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.A="",this.o=new Map}function Qc(n){return!!eW[n]||("application/cea-608"==n||"application/cea-708"==n)&&!!G}function Uc(n,i,r){if(n.A=i,i=n.o.get(i))for(var o=t(i.keys()),s=o.next();!s.done;s=o.next())(s=i.get(s.value).filter(function(n){return n.endTime<=r}))&&n.j.append(s)}Pc.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()},Pc.prototype.remove=function(n,i){var r=this;return K(function(o){if(1==o.g)return C(o,Promise.resolve(),2);!r.j||!r.j.remove(n,i)||null==r.g||i<=r.g||n>=r.h||(n<=r.g&&i>=r.h?r.g=r.h=null:n<=r.g&&i<r.h?r.g=i:n>r.g&&i>=r.h&&(r.h=n)),E(o)})},N("shaka.text.TextEngine",Pc),Pc.prototype.destroy=Pc.prototype.destroy,Pc.findParser=function(n){return eW[n]},Pc.unregisterParser=function(n){delete eW[n]},Pc.registerParser=function(n,i){eW[n]=i};var eW={};function Zc(n,i){return n.concat(i)}function $c(){}function ad(n){return null!=n}function bd(){}function cd(n,i){return n=dd(n),i=dd(i),n.split("-")[0]==i.split("-")[0]}function ed(n,i){return n=dd(n),i=dd(i),n=n.split("-"),i=i.split("-"),n[0]==i[0]&&1==n.length&&2==i.length}function fd(n,i){return n=dd(n),i=dd(i),n=n.split("-"),i=i.split("-"),2==n.length&&2==i.length&&n[0]==i[0]}function dd(n){var i=(n=t(n.split("-x-"))).next().value;i=void 0===i?"":i,n=void 0===(n=n.next().value)?"":n;var r=t(i.split("-"));return i=void 0===(i=r.next().value)?"":i,r=void 0===(r=r.next().value)?"":r,n=n?"x-"+n:"",i=i.toLowerCase(),i=eV.get(i)||i,((r=r.toUpperCase())?i+"-"+r:i)+(n?"-"+n:"")}function id(n,i){return n=dd(n),(i=dd(i))==n?4:ed(i,n)?3:fd(i,n)?2:ed(n,i)?1:0}function jd(n){var i=n.indexOf("-");return n=(n=0<=i?n.substring(0,i):n).toLowerCase(),n=eV.get(n)||n}function kd(n){return n.language?dd(n.language):n.audio&&n.audio.language?dd(n.audio.language):n.video&&n.video.language?dd(n.video.language):"und"}function ld(n,i){n=dd(n);var r=new Set,o=t(i);for(i=o.next();!i.done;i=o.next())r.add(dd(i.value));for(i=(o=t(r)).next();!i.done;i=o.next())if((i=i.value)==n)return i;for(i=(o=t(r)).next();!i.done;i=o.next())if(ed(i=i.value,n))return i;for(i=(o=t(r)).next();!i.done;i=o.next())if(fd(i=i.value,n))return i;for(i=(r=t(r)).next();!i.done;i=r.next())if(ed(n,i=i.value))return i;return null}N("shaka.util.LanguageUtils",bd),bd.findClosestLocale=ld,bd.getLocaleForVariant=kd,bd.getLocaleForText=function(n){return dd(n.language||"und")},bd.getBase=jd,bd.relatedness=id,bd.areSiblings=function(n,i){var r=jd(n),o=jd(i);return n!=r&&i!=o&&r==o},bd.normalize=dd,bd.isSiblingOf=fd,bd.isParentOf=ed,bd.areLanguageCompatible=cd,bd.areLocaleCompatible=function(n,i){return(n=dd(n))==(i=dd(i))};var eV=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function md(){this.g={}}function nd(n){var i=new WeakSet;return function b(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(i.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;i.add(n);var o,s=r?[]:{};for(o in n)s[o]=b(n[o]);return r&&(s.length=n.length),s}}(n)}function od(n){var i,r={};for(i in n)r[i]=n[i];return r}function pd(n){this.h=n,this.g=null}function qd(n){this.h=n,this.g=null}function rd(){var i=n.ManagedMediaSource||n.MediaSource;return!!i&&!!i.isTypeSupported}function sd(n){return""!=td().canPlayType(n)}function ud(){return!!navigator.userAgent.match(/Edge?\//)}function vd(){return wd("Xbox One")}function xd(){return wd("Tizen")}function yd(){return wd("Tizen 3")}function zd(){return wd("Tizen 2")}function Ad(){return wd("Web0S")&&wd("Chrome/38.0.2125.122 Safari/537.36")}function Bd(){return wd("CrKey")}function Cd(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!xd()&&!wd("PC=EOS")&&!wd("PC=APL")&&!wd("VirginMedia")&&!wd("SOPOpenBrowser")&&!Dd()&&!wd("AFT")&&!wd("WPE")}function Dd(){return wd("PlayStation 4")}function Id(){if(!Cd())return null;var n=navigator.userAgent.match(/Version\/(\d+)/);return n?parseInt(n[1],10):(n=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(n[1],10):null}function wd(n){return(navigator.userAgent||"").includes(n)}function td(){return eG||(eH||(eH=new qd(function(){eG=null})),(eG=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(eG=document.createElement("video")),eH.U(1)),eG}(D=md.prototype).push=function(n,i){this.g.hasOwnProperty(n)?this.g[n].push(i):this.g[n]=[i]},D.get=function(n){return(n=this.g[n])?n.slice():null},D.remove=function(n,i){n in this.g&&(this.g[n]=this.g[n].filter(function(n){return n!=i}),0==this.g[n].length&&delete this.g[n])},D.forEach=function(n){for(var i in this.g)n(i,this.g[i])},D.size=function(){return Object.keys(this.g).length},D.keys=function(){return Object.keys(this.g)},pd.prototype.U=function(i){var r=this;this.stop();var o=!0,s=null;return this.g=function(){n.clearTimeout(s),o=!1},s=n.setTimeout(function(){o&&r.h()},1e3*i),this},pd.prototype.stop=function(){this.g&&(this.g(),this.g=null)},qd.prototype.qc=function(){return this.stop(),this.h(),this},qd.prototype.U=function(n){var i=this;return this.stop(),this.g=new pd(function(){i.h()}).U(n),this},qd.prototype.$a=function(n){var i=this;return this.stop(),this.g=new pd(function(){i.g.U(n),i.h()}).U(n),this},qd.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},N("shaka.util.Timer",qd),qd.prototype.stop=qd.prototype.stop,qd.prototype.tickEvery=qd.prototype.$a,qd.prototype.tickAfter=qd.prototype.U,qd.prototype.tickNow=qd.prototype.qc;var eH=null,eG=null;function Ld(){}function Md(n,i,r,o){var s=n.variants;if((i.length||r.length)&&(s=function(n,i,r){var o={};i=t(i);for(var s=i.next();!s.done;o={ge:o.ge},s=i.next())if(o.ge=s.value,(s=n.filter(function(n){return function(i){return i.video&&i.video.codecs.startsWith(n.ge)}}(o))).length){n=s;break}for(o={},i=(r=t(r)).next();!i.done;o={$d:o.$d},i=r.next())if(o.$d=i.value,(i=n.filter(function(n){return function(i){return i.audio&&i.audio.codecs.startsWith(n.$d)}}(o))).length){n=i;break}return n}(s,i,r)),o.length){for(i=new md,s=(r=t(s)).next();!s.done;s=r.next())s=s.value,i.push(String(s.video.width||0),s);var u=[];i.forEach(function(n,i){n=0;var r=[],s={};i=t(i);for(var p=i.next();!p.done;s={Gc:s.Gc},p=i.next())s.Gc=p.value,(p=o.filter(function(n){return function(i){return n.Gc.decodingInfos[0][i]}}(s)).length)>n?(n=p,r=[s.Gc]):p==n&&r.push(s.Gc);u.push.apply(u,w(r))}),s=u}r=new Set,i=new Set;var p=t(s);for(s=p.next();!s.done;s=p.next())(s=s.value).audio&&r.add(s.audio),s.video&&i.add(s.video);r=Array.from(r).sort(function(n,i){return n.bandwidth-i.bandwidth});var m=[];for(s=new Map,p=(r=t(r)).next();!p.done;p=r.next()){var y=(p=p.value).language+(p.channelsCount||0)+(p.audioSamplingRate||0)+p.roles.join(",")+p.label+p.groupId+p.fastSwitching,x=s.get(y)||[];if(x.length){var A=x[x.length-1],I=Kc(A.codecs),M=Kc(p.codecs);I==M&&p.bandwidth>A.bandwidth&&(x.push(p),m.push(p.id))}else x.push(p),m.push(p.id);s.set(y,x)}r=Array.from(i).sort(function(n,i){return n.bandwidth&&i.bandwidth?n.bandwidth-i.bandwidth:n.width-i.width}),i=bb();var j=[];for(s=new Map,p=(r=t(r)).next();!p.done;p=r.next()){if(y=Math.round((p=p.value).frameRate||0)+(p.hdr||"")+p.fastSwitching,(x=s.get(y)||[]).length){if(A=x[x.length-1],!i&&(I=Kc(A.codecs))!==(M=Kc(p.codecs)))continue;p.width>A.width||p.height>A.height?(x.push(p),j.push(p.id)):p.width==A.width&&p.height==A.height&&(I=Kc(A.codecs))==(M=Kc(p.codecs))&&p.bandwidth>A.bandwidth&&(x.push(p),j.push(p.id))}else x.push(p),j.push(p.id);s.set(y,x)}n.variants=n.variants.filter(function(n){var i=n.audio;return n=n.video,(!i||!!m.includes(i.id))&&(!n||!!j.includes(n.id))})}function Pd(n,i,r){var o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_=n.video;return(!_||!_.width||!_.height||(o=_.width,s=i.minWidth,u=Math.min(i.maxWidth,r.width),o>=s&&o<=u&&(p=_.height,m=i.minHeight,y=Math.min(i.maxHeight,r.height),p>=m&&p<=y)&&(x=_.width*_.height,A=i.minPixels,I=i.maxPixels,x>=A&&x<=I)))&&(!n||!n.video||!n.video.frameRate||(M=n.video.frameRate,j=i.minFrameRate,D=i.maxFrameRate,M>=j&&M<=D))&&(R=n.bandwidth,P=i.minBandwidth,L=i.maxBandwidth,R>=P&&R<=L)}function Qd(n,i,r){var o=!1;n=t(n);for(var s=n.next();!s.done;s=n.next()){var u=(s=s.value).allowedByApplication;s.allowedByApplication=Pd(s,i,r),u!=s.allowedByApplication&&(o=!0)}return o}function Sd(n,i,r){var o,s,u,p,m;return K(function(y){if(1==y.g)return C(y,Vd(i.variants,r,!1,[]),2);o=null,n&&(s=n.g)&&(o=s.keySystem),u=eF,p=vd(),m=wd("Firefox")&&wd("Android"),i.variants=i.variants.filter(function(n){var i=n.video,r=i&&i.width||0,s=i&&i.height||0;if(p&&i&&(1920<r||1080<s)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3.")))return Wd(n),!1;if(i){if(r=Xd(i.codecs),i.codecs.includes(",")){if(s=i.codecs.split(","),r=Xd(r=zc(u.$,s)),s=Yd(s=zc(u.P,s)),!Za(Jc(i.mimeType,s,u.P)))return!1;r=[r,s].join()}if(!Za(s=Jc(i.mimeType,r,u.$)))return!1;i.codecs=r}if(i=n.audio,m&&i&&i.encrypted&&i.codecs.toLowerCase().includes("opus"))return Wd(n),!1;if(i){if(r=Yd(i.codecs),!Za(s=Jc(i.mimeType,r,u.P)))return!1;i.codecs=r}return(i=n.decodingInfos.some(function(n){return!!n.supported&&(!o||!(n=n.keySystemAccess)||n.keySystem==o)}))||Wd(n),i}),E(y)})}function $d(n,i){var r,o,s,u,p,m,y;return K(function(x){if(1==x.g)return r=function Zd(n){var i=[];for(r in n)i.push(r);i.sort();var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=o.value;o=JSON.stringify(s),s=(s=n[s])instanceof Object?Zd(s):JSON.stringify(s),r.push(o+":"+s)}return"{"+r.join(",")+"}"}(i),(o=eX)[r]?(n.decodingInfos.push(o[r]),x.B(0)):C(x,function(n){var i=[""];n.video&&(i=Oc(n.video.contentType).split(","));var r=[""];n.audio&&(r=Oc(n.audio.contentType).split(","));var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;for(var u={},p=t(r),m=p.next();!m.done;u={Gb:u.Gb},m=p.next())m=m.value,u.Gb=nd(n),n.video&&(u.Gb.video.contentType=Gc(Nc(u.Gb.video.contentType),s)),n.audio&&(u.Gb.audio.contentType=Gc(Nc(u.Gb.audio.contentType),m)),o.push(new Promise(function(n){return function(i,r){navigator.mediaCapabilities.decodingInfo(n.Gb).then(function(n){i(n)}).catch(r)}}(u)))}return Promise.all(o).catch(function(){return JSON.stringify(n),null})}(i),3);if((s=x.h)&&s.length){for(u=null,m=(p=t(s)).next();!m.done;m=p.next())y=m.value,u?(u.supported=u.supported&&y.supported,u.powerEfficient=u.powerEfficient&&y.powerEfficient,u.smooth=u.smooth&&y.smooth,y.keySystemAccess||(u.keySystemAccess=null)):u=y;u&&(o[r]=u,n.decodingInfos.push(u))}E(x)})}function Vd(n,i,r,o){var s,u,p,m,y,x,A,I,M,j,D,R,P,L;return K(function(_){switch(_.g){case 1:if(n.some(function(n){return n.decodingInfos.length}))return _.return();s={},p=(u=t(o)).next();case 2:if(p.done){_.B(4);break}s.be=p.value,m=!1,x=(y=t(n)).next();case 5:var B;if(x.done){_.B(7);break}M=(I=t(ce(A=x.value,i,r).filter((B=s,function(n){return(n.keySystemConfiguration&&n.keySystemConfiguration.keySystem)===B.be})))).next();case 8:if(M.done){_.B(10);break}return j=M.value,C(_,$d(A,j),9);case 9:M=I.next(),_.B(8);break;case 10:A.decodingInfos.length&&(m=!0),x=y.next(),_.B(5);break;case 7:if(m)return _.return();s={be:s.be},p=u.next(),_.B(2);break;case 4:x=(D=t(n)).next();case 12:if(x.done){_.B(0);break}M=(P=t(ce(R=x.value,i,r).filter(function(n){return!(n=n.keySystemConfiguration&&n.keySystemConfiguration.keySystem)||!o.includes(n)}))).next();case 15:if(M.done){x=D.next(),_.B(12);break}return L=M.value,C(_,$d(R,L),16);case 16:M=P.next(),_.B(15)}})}function ce(n,i,r){var o=n.audio,s=n.video;if(r={type:r?"file":"media-source"},s){var u=s.codecs;if(s.codecs.includes(",")){var p=s.codecs.split(",");u=Xd(u=zc("video",p)),p=Yd(p=zc("audio",p)),p=Jc(s.mimeType,p,"audio"),r.audio={contentType:p,channels:2,bitrate:n.bandwidth||1,samplerate:1,spatialRendering:!1}}if(u=Xd(u),u=Jc(s.mimeType,u,"video"),r.video={contentType:u,width:s.width||64,height:s.height||64,bitrate:s.bandwidth||n.bandwidth||1,framerate:s.frameRate||1},s.hdr)switch(s.hdr){case"SDR":r.video.transferFunction="srgb";break;case"PQ":r.video.transferFunction="pq";break;case"HLG":r.video.transferFunction="hlg"}}if(o&&(u=Yd(o.codecs),u=Jc(o.mimeType,u,"audio"),r.audio={contentType:u,channels:o.channelsCount||2,bitrate:o.bandwidth||n.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio}),!(p=(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[])).length)return[r];n=[],u=new Map,p=t(p);for(var m=p.next();!m.done;m=p.next()){var y=m.value;u.get(y.keySystem)||u.set(y.keySystem,[]),u.get(y.keySystem).push(y)}p=i?"required":"optional",i=i?["persistent-license"]:["temporary"],y=t(u.keys());for(var x=y.next();!x.done;x=y.next()){var A=x.value;x=Object.assign({},r);var I=u.get(A);for(A={keySystem:A,initDataType:"cenc",persistentState:p,distinctiveIdentifier:"optional",sessionTypes:i},m=(I=t(I)).next();!m.done;m=I.next()){if((m=m.value).initData&&m.initData.length){for(var M=new Set,j=t(m.initData),D=j.next();!D.done;D=j.next())M.add(D.value.initDataType);A.initDataType=m.initData[0].initDataType}m.distinctiveIdentifierRequired&&(A.distinctiveIdentifier="required"),m.persistentStateRequired&&(A.persistentState="required"),m.sessionType&&(A.sessionTypes=[m.sessionType]),o&&(""!=m.audioRobustness?A.audio?A.audio.robustness=A.audio.robustness||m.audioRobustness:A.audio={robustness:m.audioRobustness}:A.audio||(A.audio={})),s&&(""!=m.videoRobustness?A.video?A.video.robustness=A.video.robustness||m.videoRobustness:A.video={robustness:m.videoRobustness}:A.video||(A.video={}))}x.keySystemConfiguration=A,n.push(x)}return n}function Yd(n){return"fLaC"!==n||Id()?"Opus"===n?"opus":n:"flac"}function Xd(n){if(n.includes("avc1")){var i=n.split(".");if(3==i.length)return n=i.shift()+"."+parseInt(i.shift(),10).toString(16)+("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}else if("vp9"==n)return"vp09.00.41.08";return n}function ge(n){var i=n.audio,r=n.video,o=i?i.mimeType:null,s=r?r.mimeType:null,u=i?i.codecs:null,p=r?r.codecs:null,m=[];p&&m.push(p),u&&m.push(u);var y=[];r&&y.push(r.mimeType),i&&y.push(i.mimeType),y=y[0]||null;var x=[];i&&x.push(i.kind),r&&x.push(r.kind),x=x[0]||null;var A=new Set;if(i)for(var I=t(i.roles),M=I.next();!M.done;M=I.next())A.add(M.value);if(r)for(M=(I=t(r.roles)).next();!M.done;M=I.next())A.add(M.value);return n={id:n.id,active:!1,type:"variant",bandwidth:n.bandwidth,language:n.language,label:null,kind:x,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:y,audioMimeType:o,videoMimeType:s,codecs:m.join(", "),audioCodec:u,videoCodec:p,primary:n.primary,roles:Array.from(A),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},r&&(n.videoId=r.id,n.originalVideoId=r.originalId,n.width=r.width||null,n.height=r.height||null,n.frameRate=r.frameRate||null,n.pixelAspectRatio=r.pixelAspectRatio||null,n.videoBandwidth=r.bandwidth||null,n.hdr=r.hdr||null,n.videoLayout=r.videoLayout||null),i&&(n.audioId=i.id,n.originalAudioId=i.originalId,n.channelsCount=i.channelsCount,n.audioSamplingRate=i.audioSamplingRate,n.audioBandwidth=i.bandwidth||null,n.spatialAudio=i.spatialAudio,n.label=i.label,n.audioRoles=i.roles,n.accessibilityPurpose=i.accessibilityPurpose,n.originalLanguage=i.originalLanguage),n}function he(n){return{id:n.id,active:!1,type:eK,bandwidth:0,language:n.language,label:n.label,kind:n.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:n.mimeType,audioMimeType:null,videoMimeType:null,codecs:n.codecs||null,audioCodec:null,videoCodec:null,primary:n.primary,roles:n.roles,audioRoles:null,forced:n.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:n.originalId,originalImageId:null,accessibilityPurpose:n.accessibilityPurpose,originalLanguage:n.originalLanguage}}function ie(n){var i=n.width||null,r=n.height||null,o=null;n.segmentIndex&&(o=n.segmentIndex.get(0));var s=n.tilesLayout;return o&&(s=o.tilesLayout||s),s&&null!=i&&(i/=Number(s.split("x")[0])),s&&null!=r&&(r/=Number(s.split("x")[1])),{id:n.id,active:!1,type:"image",bandwidth:n.bandwidth||0,language:"",label:null,kind:null,width:i,height:r,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:n.mimeType,audioMimeType:null,videoMimeType:null,codecs:n.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:s||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:n.originalId,accessibilityPurpose:null,originalLanguage:null}}function je(n){return n.__shaka_id||(n.__shaka_id=eY++),n.__shaka_id}function le(n){var i=me(n);return i.active="disabled"!=n.mode,i.type="text",i.originalTextId=n.id,"captions"==n.kind&&(i.mimeType="application/cea-608"),"subtitles"==n.kind&&(i.mimeType="text/vtt"),n.kind&&(i.roles=[n.kind]),"forced"==n.kind&&(i.forced=!0),i}function ne(n){var i=me(n);return i.active=n.enabled,i.type="variant",i.originalAudioId=n.id,"main"==n.kind&&(i.primary=!0),n.kind&&(i.roles=[n.kind],i.audioRoles=[n.kind],i.label=n.label),i}function me(n){var i=n.language;return{id:je(n),active:!1,type:"",bandwidth:0,language:dd(i||"und"),label:n.label,kind:n.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:i}}function oe(n){return n.allowedByApplication&&n.allowedByKeySystem&&0==n.disabledUntilTime}function pe(n){return n.filter(function(n){return oe(n)})}function qe(n,i,r,o){var s=n,u=n.filter(function(n){return n.primary});u.length&&(s=u);var p=s.length?s[0].language:"";if(s=s.filter(function(n){return n.language==p}),i){var m=ld(dd(i),n.map(function(n){return n.language}));m&&(s=n.filter(function(n){return dd(n.language)==m}))}if(s=s.filter(function(n){return n.forced==o}),r){if((n=re(s,r)).length)return n}else if((n=s.filter(function(n){return 0==n.roles.length})).length)return n;return(n=s.map(function(n){return n.roles}).reduce(Zc,[])).length?re(s,n[0]):s}function re(n,i){return n.filter(function(n){return n.roles.includes(i)})}function Wd(n){var i=[];return n.audio&&i.push(se(n.audio)),n.video&&i.push(se(n.video)),i.join(", ")}function se(n){return"audio"==n.type?"type=audio codecs="+n.codecs+" bandwidth="+n.bandwidth+" channelsCount="+n.channelsCount+" audioSamplingRate="+n.audioSamplingRate:"video"==n.type?"type=video codecs="+n.codecs+" bandwidth="+n.bandwidth+" frameRate="+n.frameRate+" width="+n.width+" height="+n.height:"unexpected stream type"}N("shaka.util.StreamUtils",Ld),Ld.meetsRestrictions=Pd;var eX={},eY=0,eZ=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),eQ=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function te(){var n=this;this.s=null,this.o=!1,this.i=new Pa,this.A=null,navigator.connection&&navigator.connection.addEventListener&&(this.A=function(){if(n.o&&n.g.useNetworkInformation){n.i=new Pa,n.g&&n.i.configure(n.g.advanced);var i=n.chooseVariant();i&&navigator.onLine&&n.s(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.A)),this.m=[],this.C=1,this.G=!1,this.h=this.l=this.g=this.u=null,this.F=new qd(function(){if(n.g.restrictToElementSize){var i=n.chooseVariant();i&&n.s(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}}),this.j=null}function we(n){if(n.G){if(Date.now()-n.u<1e3*n.g.switchInterval)return}else{var i=n.i;if(!(i.g>=i.i))return;n.G=!0}i=n.chooseVariant(),n.getBandwidthEstimate(),i&&n.s(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}function ue(n,i,r,o,s){if(n.j){var u=n.j.Rf();u&&(r=r.filter(function(n){return!n.bandwidth||!u||n.bandwidth<=u}))}return i&&(r=r.filter(function(n){return Pd(n,i,{width:s,height:o})})),r.sort(function(n,i){return n.bandwidth-i.bandwidth})}(D=te.prototype).stop=function(){this.s=null,this.o=!1,this.m=[],this.C=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.F.stop(),this.j=null},D.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.A),this.A=null),this.F=null},D.init=function(n){this.s=n},D.chooseVariant=function(i){i=void 0!==i&&i;var r=1/0,o=1/0;if(this.g.restrictToScreenSize&&(o=this.g.ignoreDevicePixelRatio?1:n.devicePixelRatio,r=n.screen.height*o,o*=n.screen.width),this.h&&this.g.restrictToElementSize){var s=this.g.ignoreDevicePixelRatio?1:n.devicePixelRatio;r=Math.min(r,this.l.clientHeight*s),o=Math.min(o,this.l.clientWidth*s)}var u=this.m.filter(function(n){return!(n.audio&&n.audio.fastSwitching||n.video&&n.video.fastSwitching)});if(u.length||(u=this.m),s=u,i&&u.length!=this.m.length&&(s=this.m.filter(function(n){return!!n.audio&&!!n.audio.fastSwitching||!!n.video&&!!n.video.fastSwitching})),i=ue(this,this.g.restrictions,s,1/0,1/0),1/0!=r||1/0!=o){for(u=(i=t(i=function(n){var i=[];n=t(n);for(var r=n.next();!r.done;r=n.next())(r=r.value.video)&&r.height&&r.width&&i.push({height:r.height,width:r.width});return i.sort(function(n,i){return n.width-i.width})}(i))).next();!u.done;u=i.next())if((u=u.value).height>=r&&u.width>=o){r=u.height,o=u.width;break}i=ue(this,this.g.restrictions,s,r,o)}for(r=this.getBandwidthEstimate(),s.length&&!i.length&&(i=[(i=ue(this,null,s,1/0,1/0))[0]]),o=i[0]||null,s=0;s<i.length;s++){u=i[s];for(var p=isNaN(this.C)?1:Math.abs(this.C),m=p*u.bandwidth/this.g.bandwidthDowngradeTarget,y={bandwidth:1/0},x=s+1;x<i.length;x++)if(u.bandwidth!=i[x].bandwidth){y=i[x];break}p=p*y.bandwidth/this.g.bandwidthUpgradeTarget,r>=m&&r<=p&&o.bandwidth!=u.bandwidth&&(o=u)}return this.u=Date.now(),o},D.enable=function(){this.o=!0},D.disable=function(){this.o=!1},D.segmentDownloaded=function(n,i,r){this.i.sample(n,i),r&&null!=this.u&&this.o&&we(this)},D.trySuggestStreams=function(){null!=this.u&&this.o&&we(this)},D.getBandwidthEstimate=function(){var n=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(n=1e6*navigator.connection.downlink),n=this.i.getBandwidthEstimate(n),this.j?this.j.getBandwidthEstimate(n):n},D.setVariants=function(n){this.m=n},D.playbackRateChanged=function(n){this.C=n},D.setMediaElement=function(i){var r=this;this.l=i,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in n&&(this.h=new ResizeObserver(function(){r.F.U(eJ)}),this.h.observe(this.l))},D.setCmsdManager=function(n){this.j=n},D.configure=function(n){this.g=n,this.i&&this.g&&this.i.configure(this.g.advanced)},N("shaka.abr.SimpleAbrManager",te),te.prototype.configure=te.prototype.configure,te.prototype.setCmsdManager=te.prototype.setCmsdManager,te.prototype.setMediaElement=te.prototype.setMediaElement,te.prototype.playbackRateChanged=te.prototype.playbackRateChanged,te.prototype.setVariants=te.prototype.setVariants,te.prototype.getBandwidthEstimate=te.prototype.getBandwidthEstimate,te.prototype.trySuggestStreams=te.prototype.trySuggestStreams,te.prototype.segmentDownloaded=te.prototype.segmentDownloaded,te.prototype.disable=te.prototype.disable,te.prototype.enable=te.prototype.enable,te.prototype.chooseVariant=te.prototype.chooseVariant,te.prototype.init=te.prototype.init,te.prototype.release=te.prototype.release,te.prototype.stop=te.prototype.stop;var eJ=1;function ye(n,i){this.g=n,this.h=i}function ze(n,i){var r=new ye(5,0),o=e$,s=o.g,u=r.h-s.h;(0<(r.g-s.g||u)?o.i:o.h)(o.g,r,n,i)}function Be(n,i,r,o){Sa([r,"has been deprecated and will be removed in",i,". We are currently at version",n,". Additional information:",o].join(" "))}function Ce(n,i,r,o){Ra([r,"has been deprecated and has been removed in",i,". We are now at version",n,". Additional information:",o].join(" "))}ye.prototype.toString=function(){return"v"+this.g+"."+this.h};var e$=null;function De(n,i,r,o){for(r=void 0===r||r,o=void 0!==o&&o,this.h=n,this.g=new Set([n]),i=(n=t(i=i||[])).next();!i.done;i=n.next())this.add(i.value,r,o)}function Ee(n,i,r,o){var s;if(!(s=!!n.audio!=!!i.audio||!!n.video!=!!i.video||n.language!=i.language)&&(s=n.audio&&i.audio)){s=n.audio;var u=i.audio;s=!!((!s.channelsCount||!u.channelsCount||2<s.channelsCount||2<u.channelsCount)&&s.channelsCount!=u.channelsCount||r&&!Ge(s,u)||!He(s.roles,u.roles)||o&&s.groupId!==u.groupId)}return!(o=s)&&(o=n.video&&i.video)&&(n=n.video,i=i.video,o=!((!r||Ge(n,i))&&He(n.roles,i.roles))),!o}function Ge(n,i){if(n.mimeType!=i.mimeType||(n=n.codecs.split(",").map(function(n){return Mc(n)}),i=i.codecs.split(",").map(function(n){return Mc(n)}),n.length!=i.length))return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function He(n,i){if(n=new Set(n),i=new Set(i),n.delete("main"),i.delete("main"),n.size!=i.size)return!1;n=t(n);for(var r=n.next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Ie(n,i,r){i=void 0===i?"reload":i,r=void 0!==r&&r,this.i=n,this.h=i,this.g=r,this.j=new Je(n.language,"",n.audio&&n.audio.channelsCount?n.audio.channelsCount:0,"",!1,"","","",i,r)}function Je(n,i,r,o,s,u,p,m,y,x){this.s=n,this.u=i,this.h=r,this.i=o,this.A=s,this.l=u,this.g=void 0===p?"":p,this.j=void 0===m?"":m,this.m=void 0===y?"reload":y,this.o=void 0!==x&&x}function Se(){this.g=e1,this.h=(new Map).set(e1,2).set(e0,1)}function Ve(n,i,r){n.h.set(e1,r).set(e0,i)}N("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),N("shaka.config.CodecSwitchingStrategy",{Hi:"reload",yg:"smooth"}),De.prototype.add=function(n,i,r){return!!Ee(this.h,n,void 0===i||i,void 0!==r&&r)&&(this.g.add(n),!0)},De.prototype.values=function(){return this.g.values()},Ie.prototype.create=function(n){var i=this,r="smooth"==this.h&&bb(),o=n.filter(function(n){return Ee(i.i,n,!r,i.g)});return o.length?new De(o[0],o,!r,this.g):this.j.create(n)},Je.prototype.create=function(i){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B=[];r=i,B=(s=ld(dd(this.s),r.map(function(n){return kd(n)})))?r.filter(function(n){return s==kd(n)}):[];var z=i.filter(function(n){return n.primary});return(u=B=B.length?B:z.length?z:i,p=this.u,i=u.filter(function(n){return!!n.audio&&(p?n.audio.roles.includes(p):0==n.audio.roles.length)})).length&&(B=i),this.l&&(m=B,y=this.l,i=m.filter(function(n){return!n.video||!n.video.videoLayout||n.video.videoLayout==y})).length&&(B=i),this.i&&(x=B,"AUTO"==(A=this.i)&&(A=n.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),i=x.filter(function(n){return!n.video||!n.video.hdr||n.video.hdr==A})).length&&(B=i),this.h&&(I=B,M=this.h,i=I.filter(function(n){return!n.audio||!n.audio.channelsCount||n.audio.channelsCount==M})).length&&(B=i),this.g&&(j=B,D=this.g,i=j.filter(function(n){return!!n.audio&&!!n.audio.label&&n.audio.label.toLowerCase()==D.toLowerCase()})).length&&(B=i),this.j&&(R=B,P=this.j,i=R.filter(function(n){return!!n.video&&!!n.video.label&&n.video.label.toLowerCase()==P.toLowerCase()})).length&&(B=i),(L=B,_=this.A,i=L.filter(function(n){return!n.audio||n.audio.spatialAudio==_})).length&&(B=i),new De(B[0],B,!("smooth"==this.m&&bb()),this.o)};var e0=0,e1=1;function We(n,i){var r=Xe();this.l=null==n.maxAttempts?r.maxAttempts:n.maxAttempts,this.j=null==n.baseDelay?r.baseDelay:n.baseDelay,this.o=null==n.fuzzFactor?r.fuzzFactor:n.fuzzFactor,this.m=null==n.backoffFactor?r.backoffFactor:n.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==i&&i)&&(this.g=1)}function Ye(n){var i,r;return K(function(o){if(1==o.g){if(n.g>=n.l){if(n.i)n.g=1,n.h=n.j;else throw new O(2,7,1010)}return(i=n.g,n.g++,0==i)?o.return():(r=n.h*(1+(2*Math.random()-1)*n.o),C(o,new Promise(function(n){new qd(n).U(r/1e3)}),2))}n.h*=n.m,E(o)})}function Xe(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Ze(){var n,i,r=new Promise(function(r,o){n=r,i=o});return r.resolve=n,r.reject=i,r}function $e(n,i){this.promise=n,this.i=i,this.g=!1}function af(n){return new $e(Promise.reject(n),function(){return Promise.resolve()})}function bf(){var n=Promise.reject(new O(2,7,7001));return n.catch(function(){}),new $e(n,function(){return Promise.resolve()})}function cf(n){return new $e(Promise.resolve(n),function(){return Promise.resolve()})}function df(n){return new $e(n,function(){return n.catch(function(){})})}function ef(n){return new $e(Promise.all(n.map(function(n){return n.promise})),function(){return Promise.all(n.map(function(n){return n.abort()}))})}function Q(i,r){if(r){if(r instanceof Map)for(var o=t(r.keys()),s=o.next();!s.done;s=o.next())Object.defineProperty(this,s=s.value,{value:r.get(s),writable:!0,enumerable:!0});else for(o in r)Object.defineProperty(this,o,{value:r[o],writable:!0,enumerable:!0})}this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=n.performance&&n.performance.now?n.performance.now():Date.now(),this.type=i,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function gf(n){var i,r=new Q(n.type);for(i in n)Object.defineProperty(r,i,{value:n[i],writable:!0,enumerable:!0});return r}Ze.prototype.resolve=function(){},Ze.prototype.reject=function(){},$e.prototype.abort=function(){return this.g=!0,this.i()},$e.prototype.finally=function(n){return this.promise.then(function(){return n(!0)},function(){return n(!1)}),this},$e.prototype.pa=function(n,i){function c(u){return function(p){if(r.g&&u)o.reject(s);else{var m=u?n:i;m?d=function(n,i,r){try{var o=n(i);if(o&&o.promise&&o.abort)return r.resolve(o.promise),function(){return o.abort()};return r.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})}}catch(n){return r.reject(n),function(){return Promise.resolve()}}}(m,p,o):(u?o.resolve:o.reject)(p)}}}function d(){return o.reject(s),r.abort()}var r=this,o=new Ze,s=new O(2,7,7001);return this.promise.then(c(!0),c(!1)),new $e(o,function(){return d()})},N("shaka.util.AbortableOperation",$e),$e.prototype.chain=$e.prototype.pa,$e.prototype.finally=$e.prototype.finally,$e.all=ef,$e.prototype.abort=$e.prototype.abort,$e.notAbortable=df,$e.completed=cf,$e.aborted=bf,$e.failed=af,Q.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Q.prototype.stopImmediatePropagation=function(){this.g=!0},Q.prototype.stopPropagation=function(){},N("shaka.util.FakeEvent",Q);var e2={hi:"abrstatuschanged",ii:"adaptation",ji:"buffering",ki:"complete",li:"downloadfailed",mi:"downloadheadersreceived",ni:"drmsessionupdate",pi:"emsg",Gi:"prft",Error:"error",ri:"expirationupdated",si:"firstquartile",ti:"gapjumped",wi:"keystatuschanged",yi:"loaded",zi:"loading",Bi:"manifestparsed",Ci:"manifestupdated",Di:"mediaqualitychanged",Metadata:"metadata",Ei:"midpoint",Fi:"onstatechange",Ii:"ratechange",Ji:"segmentappended",Ki:"sessiondata",Li:"stalldetected",Mi:"started",Ni:"statechanged",Oi:"streaming",Pi:"textchanged",Qi:"texttrackvisibility",Ri:"thirdquartile",Si:"timelineregionadded",Ti:"timelineregionenter",Ui:"timelineregionexit",Vi:"trackschanged",Xi:"unloading",Zi:"variantchanged"};function jf(){this.ka=new md,this.zd=this}function kf(){this.g=[]}function lf(n,i){n.g.push(i.finally(function(){tb(n.g,i)}))}function mf(n,i,r,o,s){jf.call(this),this.i=!1,this.m=new kf,this.g=new Set,this.h=new Set,this.l=n||null,this.j=i||null,this.s=r||null,this.u=o||null,this.A=s||null,this.o=!1}function nf(n,i,r,o){r=r||e3;var s=e5[n];(!s||r>=s.priority)&&(e5[n]={priority:r,Vd:i,Ih:void 0!==o&&o})}function qf(n,i,r){return{uris:n,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:i,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===r?null:r}}function xf(n){if(n){var i=n.segment;if(n=n.stream,i&&n&&n.fastSwitching&&i.Zc)return!1}return!0}function rf(){this.g=0}function sf(n,i,r){$e.call(this,n,i),this.h=r}jf.prototype.addEventListener=function(n,i){this.ka&&this.ka.push(n,i)},jf.prototype.removeEventListener=function(n,i){this.ka&&this.ka.remove(n,i)},jf.prototype.dispatchEvent=function(n){if(!this.ka)return!0;var i=this.ka.get(n.type)||[],r=this.ka.get("All");for(r&&(i=i.concat(r)),r=(i=t(i)).next();!r.done;r=i.next()){r=r.value,n.target=this.zd,n.currentTarget=this.zd;try{r.handleEvent?r.handleEvent(n):r.call(this,n)}catch(n){}if(n.g)break}return n.defaultPrevented},jf.prototype.release=function(){this.ka=null},kf.prototype.destroy=function(){for(var n=[],i=t(this.g),r=i.next();!r.done;r=i.next())(r=r.value).promise.catch(function(){}),n.push(r.abort());return this.g=[],Promise.all(n)},oa(mf,jf),(D=mf.prototype).nf=function(n){this.o=n},D.Jh=function(n){this.g.add(n)},D.bi=function(n){this.g.delete(n)},D.Hg=function(){this.g.clear()},D.Kh=function(n){this.h.add(n)},D.ci=function(n){this.h.delete(n)},D.Ig=function(){this.h.clear()},D.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),jf.prototype.release.call(this),this.m.destroy()},D.request=function(n,i,r){var o=this,s=new rf;if(this.i){var u=Promise.reject(new O(2,7,7001));return u.catch(function(){}),new sf(u,function(){return Promise.resolve()},s)}i.method=i.method||"GET",i.headers=i.headers||{},i.retryParameters=i.retryParameters?nd(i.retryParameters):Xe(),i.uris=nd(i.uris);var p=(u=function(n,i,r,o){function e(n){s=s.pa(function(){return r.body&&(r.body=kb(r.body)),n(i,r,o)})}var s=cf(void 0);n.u&&e(n.u),n=t(n.g);for(var u=n.next();!u.done;u=n.next())e(u.value);return s.pa(void 0,function(n){if(n instanceof O&&7001==n.code)throw n;throw new O(2,1,1006,n)})}(this,n,i,r)).pa(function(){return function uf(n,i,r,o,s,u,p,m){n.o&&(r.uris[u]=r.uris[u].replace("http://","https://")),0<u&&n.A&&n.A(i,o,r.uris[u],r.uris[u-1]);var y=new fc(r.uris[u]),x=y.ab,A=!1;x||(gc(y,x=(x=location.protocol).slice(0,-1)),r.uris[u]=y.toString());var I=(x=e5[x=x.toLowerCase()])?x.Vd:null;if(!I)return af(new O(2,1,1e3,y));var M,j=x.Ih,D=null,R=null,P=!1,L=!1;return df(Ye(s)).pa(function(){if(n.i)return bf();M=Date.now();var s=I(r.uris[u],r,i,function(r,s,u){D&&D.stop(),R&&R.U(y/1e3),n.l&&i==e4&&(n.l(r,s,xf(o)),A=!0,m.g=u)},function(o){n.j&&n.j(o,r,i),L=!0});if(!j)return s;var p=r.retryParameters.connectionTimeout;p&&(D=new qd(function(){P=!0,s.abort()})).U(p/1e3);var y=r.retryParameters.stallTimeout;return y&&(R=new qd(function(){P=!0,s.abort()})),s}).pa(function(o){D&&D.stop(),R&&R.stop(),void 0==o.timeMs&&(o.timeMs=Date.now()-M);var s={response:o,qh:A};return!L&&n.j&&n.j(o.headers,r,i),s},function(y){if(D&&D.stop(),R&&R.stop(),n.s){var x=null,A=0;y instanceof O&&(x=y,1001==y.code&&(A=y.data[1])),n.s(r,x,A,P)}if(n.i)return bf();if(P&&(y=new O(1,1,1003,r.uris[u],i)),y instanceof O){if(7001==y.code)throw y;if(1010==y.code)throw p;if(1==y.severity)return x=(new Map).set("error",y),x=new Q("retry",x),n.dispatchEvent(x),u=(u+1)%r.uris.length,uf(n,i,r,o,s,u,y,m)}throw y})}(o,n,i,r,new We(i.retryParameters,!1),0,null,s)}),m=p.pa(function(i){return function(n,i,r,o){var s=cf(void 0),u={};n=t(n.h);for(var p=n.next();!p.done;u={de:u.de},p=n.next())u.de=p.value,s=s.pa(function(n){return function(){var s=r.response;return s.data&&(s.data=kb(s.data)),n.de(i,s,o)}}(u));return s.pa(function(){return r},function(n){var i=2;if(n instanceof O){if(7001==n.code)throw n;i=n.severity}throw new O(i,1,1007,n)})}(o,n,i,r)}),y=Date.now(),x=0;u.promise.then(function(){x=Date.now()-y},function(){});var A=0;p.promise.then(function(){A=Date.now()},function(){});var I=m.pa(function(s){var u=Date.now()-A,p=s.response;return p.timeMs+=x,p.timeMs+=u,s.qh||!o.l||p.fromCache||"HEAD"==i.method||n!=e4||o.l(p.timeMs,p.data.byteLength,xf(r)),p},function(n){throw n&&(n.severity=2),n});return u=new sf(I.promise,function(){return I.abort()},s),lf(this.m,u),u},N("shaka.net.NetworkingEngine",mf),mf.prototype.request=mf.prototype.request,mf.prototype.destroy=mf.prototype.destroy,mf.makeRequest=qf,mf.defaultRetryParameters=function(){return Xe()},mf.prototype.clearAllResponseFilters=mf.prototype.Ig,mf.prototype.unregisterResponseFilter=mf.prototype.ci,mf.prototype.registerResponseFilter=mf.prototype.Kh,mf.prototype.clearAllRequestFilters=mf.prototype.Hg,mf.prototype.unregisterRequestFilter=mf.prototype.bi,mf.prototype.registerRequestFilter=mf.prototype.Jh,mf.unregisterScheme=function(n){delete e5[n]},mf.registerScheme=nf,mf.prototype.setForceHTTPS=mf.prototype.nf,mf.NumBytesRemainingClass=rf,oa(sf,$e),mf.PendingRequest=sf;var e4=1;mf.RequestType={MANIFEST:0,SEGMENT:e4,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},mf.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var e3=3;mf.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:e3};var e5={};function yf(n){this.g=!1,this.h=new Ze,this.i=n}function zf(n,i){if(n.g){if(i instanceof O&&7003==i.code)throw i;throw new O(2,7,7003,i)}}function Af(){this.g=new md}function Bf(n,i,r,o){this.target=n,this.type=i,this.listener=r,this.g=function(n,i){if(void 0==i)return!1;if("boolean"==typeof i)return i;var r=new Set(["passive","capture"]);return Object.keys(i).filter(function(n){return!r.has(n)}),!function(n){var i=e8;if(void 0==i){i=!1;try{var r={},o={get:function(){return i=!0,!1}};Object.defineProperty(r,"passive",o),Object.defineProperty(r,"capture",o),o=function(){},n.addEventListener("test",o,r),n.removeEventListener("test",o,r)}catch(n){i=!1}e8=i}return i||!1}(n)?i.capture||!1:i}(n,o),this.target.addEventListener(i,r,this.g)}yf.prototype.destroy=function(){var n=this;return this.g?this.h:(this.g=!0,this.i().then(function(){n.h.resolve()},function(){n.h.resolve()}))},(D=Af.prototype).release=function(){this.Za(),this.g=null},D.D=function(n,i,r,o){this.g&&(n=new Bf(n,i,r,o),this.g.push(i,n))},D.ja=function(n,i,r,o){var s=this;this.D(n,i,function e(o){s.Vb(n,i,e),r(o)},o)},D.Vb=function(n,i,r){if(this.g){var o=this.g.get(i)||[];o=t(o);for(var s=o.next();!s.done;s=o.next())(s=s.value).target!=n||r!=s.listener&&r||(s.Vb(),this.g.remove(i,s))}},D.Za=function(){if(this.g){var n,i=this.g,r=[];for(n in i.g)r.push.apply(r,w(i.g[n]));for(r=(i=t(r)).next();!r.done;r=i.next())r.value.Vb();this.g.g={}}},N("shaka.util.EventManager",Af),Af.prototype.removeAll=Af.prototype.Za,Af.prototype.unlisten=Af.prototype.Vb,Af.prototype.listenOnce=Af.prototype.ja,Af.prototype.listen=Af.prototype.D,Af.prototype.release=Af.prototype.release,Bf.prototype.Vb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var e8=void 0;function Ff(n,i){var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next())r.push(i(o.value));return r}function Hf(n){this.h=n,this.g=void 0}function If(n){for(var i=new Map,r=t(Object.keys(n)),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,n[o]);return i}function Jf(n){var i={};return n.forEach(function(n,r){i[r]=n}),i}function Kf(){}function Nf(i){if(!i)return"";if(239==(i=hb(i))[0]&&187==i[1]&&191==i[2]&&(i=i.subarray(3)),n.TextDecoder&&!Dd())return(i=(new TextDecoder).decode(i)).includes("")&&Ra('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),i;for(var r="",o=0;o<i.length;++o){var s=65533;if(0==(128&i[o])?s=i[o]:i.length>=o+2&&192==(224&i[o])&&128==(192&i[o+1])?(s=(31&i[o])<<6|63&i[o+1],o+=1):i.length>=o+3&&224==(240&i[o])&&128==(192&i[o+1])&&128==(192&i[o+2])?(s=(15&i[o])<<12|(63&i[o+1])<<6|63&i[o+2],o+=2):i.length>=o+4&&240==(241&i[o])&&128==(192&i[o+1])&&128==(192&i[o+2])&&128==(192&i[o+3])&&(s=(7&i[o])<<18|(63&i[o+1])<<12|(63&i[o+2])<<6|63&i[o+3],o+=3),65535>=s)r+=String.fromCharCode(s);else{var u=1023&(s-=65536);r+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(56320+u)}}return r}function Of(n,i,r){if(!n)return"";if(!r&&0!=n.byteLength%2)throw new O(2,2,2004);r=Math.floor(n.byteLength/2);var o=new Uint16Array(r);n=nb(n);for(var s=0;s<r;s++)o[s]=n.getUint16(2*s,i);return e6.value()(o)}function Qf(n){function b(n){return i.byteLength<=n||32<=i[n]&&126>=i[n]}if(!n)return"";var i=hb(n);if(239==i[0]&&187==i[1]&&191==i[2])return Nf(i);if(254==i[0]&&255==i[1])return Of(i.subarray(2),!1);if(255==i[0]&&254==i[1])return Of(i.subarray(2),!0);if(0==i[0]&&0==i[2])return Of(n,!1);if(0==i[1]&&0==i[3])return Of(n,!0);if(b(0)&&b(1)&&b(2)&&b(3))return Nf(n);throw new O(2,2,2003)}function Rf(i){if(n.TextEncoder&&!Dd()){var r=new TextEncoder;return kb(r.encode(i))}i=unescape(i=encodeURIComponent(i)),r=new Uint8Array(i.length);for(var o=0;o<i.length;o++)r[o]=i[o].charCodeAt(0);return kb(r)}function Sf(n,i){for(var r=new ArrayBuffer(2*n.length),o=new DataView(r),s=0;s<n.length;++s)o.setUint16(2*s,n.charCodeAt(s),i);return r}Hf.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},N("shaka.util.StringUtils",Kf),Kf.resetFromCharCode=function(){e6.g=void 0},Kf.toUTF16=Sf,Kf.toUTF8=Rf,Kf.fromBytesAutoDetect=Qf,Kf.fromUTF16=Of,Kf.fromUTF8=Nf;var e6=new Hf(function(){for(var n={yb:65536};0<n.yb;n={yb:n.yb},n.yb/=2)if(function(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch(n){return!1}}(n.yb))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.yb)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.yb));return r}}(n);return null});function Tf(n,i){this.h=nb(n),this.i=i==e9,this.g=0}function Vf(){return new O(2,3,3e3)}(D=Tf.prototype).ia=function(){return this.g<this.h.byteLength},D.qa=function(){return this.g},D.getLength=function(){return this.h.byteLength},D.ga=function(){try{var n=this.h.getUint8(this.g);return this.g+=1,n}catch(n){throw Vf()}},D.Ea=function(){try{var n=this.h.getUint16(this.g,this.i);return this.g+=2,n}catch(n){throw Vf()}},D.L=function(){try{var n=this.h.getUint32(this.g,this.i);return this.g+=4,n}catch(n){throw Vf()}},D.fg=function(){try{var n=this.h.getInt32(this.g,this.i);return this.g+=4,n}catch(n){throw Vf()}},D.oc=function(){try{if(this.i)var n=this.h.getUint32(this.g,!0),i=this.h.getUint32(this.g+4,!0);else i=this.h.getUint32(this.g,!1),n=this.h.getUint32(this.g+4,!1)}catch(n){throw Vf()}if(2097151<i)throw new O(2,3,3001);return this.g+=8,4294967296*i+n},D.ub=function(n){if(this.g+n>this.h.byteLength)throw Vf();var i=hb(this.h,this.g,n);return this.g+=n,i},D.skip=function(n){if(this.g+n>this.h.byteLength)throw Vf();this.g+=n},D.Rh=function(n){if(this.g<n)throw Vf();this.g-=n},D.seek=function(n){if(0>n||n>this.h.byteLength)throw Vf();this.g=n},D.ad=function(){for(var n=this.g;this.ia()&&0!=this.h.getUint8(this.g);)this.g+=1;return n=hb(this.h,n,this.g-n),this.g+=1,Nf(n)},N("shaka.util.DataViewReader",Tf),Tf.prototype.readTerminatedString=Tf.prototype.ad,Tf.prototype.seek=Tf.prototype.seek,Tf.prototype.rewind=Tf.prototype.Rh,Tf.prototype.skip=Tf.prototype.skip,Tf.prototype.readBytes=Tf.prototype.ub,Tf.prototype.readUint64=Tf.prototype.oc,Tf.prototype.readInt32=Tf.prototype.fg,Tf.prototype.readUint32=Tf.prototype.L,Tf.prototype.readUint16=Tf.prototype.Ea,Tf.prototype.readUint8=Tf.prototype.ga,Tf.prototype.getLength=Tf.prototype.getLength,Tf.prototype.getPosition=Tf.prototype.qa,Tf.prototype.hasMoreData=Tf.prototype.ia;var e9=1;function Wf(){this.i=[],this.h=[],this.g=!1}function ag(n){for(var i=bg(n);n.reader.ia()&&!n.parser.g;)n.parser.Yc(n.start+i,n.reader,n.partialOkay)}function cg(n){for(var i=bg(n),r=n.reader.L(),o=0;o<r&&(n.parser.Yc(n.start+i,n.reader,n.partialOkay),!n.parser.g);o++);}function dg(n){var i=bg(n);for(n.reader.skip(78);n.reader.ia()&&!n.parser.g;)n.parser.Yc(n.start+i,n.reader,n.partialOkay)}function eg(n){return function(i){n(i.reader.ub(i.reader.getLength()-i.reader.qa()))}}function Xf(n){var i=0;n=t(n);for(var r=n.next();!r.done;r=n.next())i=i<<8|r.value.charCodeAt(0);return i}function $f(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}function bg(n){return 8+(n.has64BitSize?8:0)+(null!=n.flags?4:0)}Tf.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:e9},(D=Wf.prototype).box=function(n,i){return n=Xf(n),this.i[n]=e7,this.h[n]=i,this},D.O=function(n,i){return n=Xf(n),this.i[n]=tr,this.h[n]=i,this},D.stop=function(){this.g=!0},D.parse=function(n,i,r){for(n=new Tf(n,0),this.g=!1;n.ia()&&!this.g;)this.Yc(0,n,i,r)},D.Yc=function(n,i,r,o){var s=i.qa();if(o&&s+8>i.getLength())this.g=!0;else{var u=i.L(),p=i.L(),m=$f(p),y=!1;switch(u){case 0:u=i.getLength()-s;break;case 1:if(o&&i.qa()+8>i.getLength()){this.g=!0;return}u=i.oc(),y=!0}var x=this.h[p];if(x){var A=null,I=null;if(this.i[p]==tr){if(o&&i.qa()+4>i.getLength()){this.g=!0;return}A=(I=i.L())>>>24,I&=16777215}p=s+u,r&&p>i.getLength()&&(p=i.getLength()),o&&p>i.getLength()?this.g=!0:(i=0<(o=p-i.qa())?i.ub(o):new Uint8Array(0),x({name:m,parser:this,partialOkay:r||!1,version:A,flags:I,reader:i=new Tf(i,0),size:u,start:s+n,has64BitSize:y}))}else i.skip(Math.min(s+u-i.qa(),i.getLength()-i.qa()))}},N("shaka.util.Mp4Parser",Wf),Wf.headerSize=bg,Wf.typeToString=$f,Wf.allData=eg,Wf.visualSampleEntry=dg,Wf.sampleDescription=cg,Wf.children=ag,Wf.prototype.parseNext=Wf.prototype.Yc,Wf.prototype.parse=Wf.prototype.parse,Wf.prototype.stop=Wf.prototype.stop,Wf.prototype.fullBox=Wf.prototype.O,Wf.prototype.box=Wf.prototype.box;var e7=0,tr=1;function fg(){}function gg(n){return n=hb(n),btoa(n=e6.value()(n))}function hg(n,i){return i=void 0==i||i,n=gg(n).replace(/\+/g,"-").replace(/\//g,"_"),i?n:n.replace(/[=]*$/,"")}function ig(i){i=n.atob(i.replace(/-/g,"+").replace(/_/g,"/"));for(var r=new Uint8Array(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}function jg(i){for(var r=i.length/2,o=new Uint8Array(r),s=0;s<r;s++)o[s]=n.parseInt(i.substr(2*s,2),16);return o}function kg(n){var i=hb(n);n="",i=t(i);for(var r=i.next();!r.done;r=i.next())1==(r=(r=r.value).toString(16)).length&&(r="0"+r),n+=r;return n}function lg(){for(var n=Fa.apply(0,arguments),i=0,r=0;r<n.length;++r)i+=n[r].byteLength;i=new Uint8Array(i);for(var o=r=0;o<n.length;++o){var s=n[o];s instanceof Uint8Array?i.set(s,r):i.set(hb(s),r),r+=s.byteLength}return i}function mg(n){var i=this;this.g=[],this.h=[],this.data=[],(new Wf).box("moov",ag).box("moof",ag).O("pssh",function(n){if(!(1<n.version)){var r=hb(n.reader.h,-12,n.size);if(i.data.push(r),i.g.push(kg(n.reader.ub(16))),0<n.version){r=n.reader.L();for(var o=0;o<r;o++){var s=kg(n.reader.ub(16));i.h.push(s)}}}}).parse(n)}function ng(n,i,r,o){var s=n.length,u=i.length+16+s;0<o&&(u+=4+16*r.size);var p=new Uint8Array(u),m=nb(p),y=0;if(m.setUint32(y,u),y+=4,m.setUint32(y,1886614376),y+=4,1>o?m.setUint32(y,0):m.setUint32(y,16777216),y+=4,p.set(i,y),y+=i.length,0<o)for(m.setUint32(y,r.size),y+=4,r=(i=t(r)).next();!r.done;r=i.next())r=jg(r.value),p.set(r,y),y+=r.length;return m.setUint32(y,s),p.set(n,y+4),p}function og(n,i){return 1!=(n=pg(n,i)).length?null:n[0]}function qg(n,i,r){return 1!=(n=rg(n,i,r)).length?null:n[0]}function pg(n,i){var r=[];n=t(n.childNodes);for(var o=n.next();!o.done;o=n.next())(o=o.value)instanceof Element&&o.tagName==i&&r.push(o);return r}function rg(n,i,r){var o=[];n=t(n.childNodes);for(var s=n.next();!s.done;s=n.next())(s=s.value)instanceof Element&&s.localName==r&&s.namespaceURI==i&&o.push(s);return o}function tg(n,i,r){return n.hasAttributeNS(i,r)?n.getAttributeNS(i,r):null}function ug(n,i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())if(o=o.value,n.hasAttributeNS(o,r))return n.getAttributeNS(o,r);return null}function vg(n){return Array.from(n.childNodes).every(wg)?n.textContent.trim():null}function wg(n){return n.nodeType==Node.TEXT_NODE||n.nodeType==Node.CDATA_SECTION_NODE}function xg(n,i,r,o){o=void 0===o?null:o;var s=null;return null!=(n=n.getAttribute(i))&&(s=r(n)),null==s?o:s}function yg(n){return n?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),isNaN(n=Date.parse(n))?null:n/1e3):null}function zg(n){return n&&(n=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(n))&&isFinite(n=31536e3*Number(n[1]||null)+2592e3*Number(n[2]||null)+86400*Number(n[3]||null)+3600*Number(n[4]||null)+60*Number(n[5]||null)+Number(n[6]||null))?n:null}function Ag(n){var i=/([0-9]+)-([0-9]+)/.exec(n);return i&&isFinite(n=Number(i[1]))&&isFinite(i=Number(i[2]))?{start:n,end:i}:null}function Bg(n){return 0==(n=Number(n))%1?n:null}function Cg(n){return 0==(n=Number(n))%1&&0<n?n:null}function Dg(n){return 0==(n=Number(n))%1&&0<=n?n:null}function Eg(n){return isNaN(n=Number(n))?null:n}function Fg(n){return!!n&&"true"===n.toLowerCase()}function Gg(n){var i,r=(i=n.match(/^(\d+)\/(\d+)$/))?Number(i[1])/Number(i[2]):Number(n);return isNaN(r)?null:r}function Hg(n,i){var r=new DOMParser,o=ts.value()(n);n=null;try{n=r.parseFromString(o,"text/xml")}catch(n){return null}if(!(r=n.documentElement)||r.getElementsByTagName("parsererror").length||r.tagName!=i)return null;if(!("createNodeIterator"in document))return r;for(i=document.createNodeIterator(n,NodeFilter.SHOW_ALL);n=i.nextNode();)if(n instanceof HTMLElement||n instanceof SVGElement)return null;return r}function Jg(n,i){try{var r=Qf(n);return Hg(r,i)}catch(n){return null}}N("shaka.util.Uint8ArrayUtils",fg),fg.concat=lg,fg.toHex=kg,fg.fromHex=jg,fg.fromBase64=ig,fg.toBase64=hg,fg.toStandardBase64=gg;var ts=new Hf(function(){if("undefined"!=typeof trustedTypes){var n=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(n){return n}});return function(i){return n.createHTML(i)}}return function(n){return n}});function Kg(n,i){var r=this;i=void 0===i?1:i,this.C=n,this.H=new Set,this.m=this.s=null,this.ma=this.da=!1,this.I=0,this.g=null,this.A=new Af,this.i=new Map,this.u=new Map,this.l=new Ze,this.h=null,this.o=function(i){2==i.severity&&r.l.reject(i),n.onError(i)},this.V=new Map,this.ea=new Map,this.W=new qd(function(){var n,i,o;return i=(n=r).V,void((o=n.ea).clear(),i.forEach(function(n,i){return o.set(i,n)}),(i=Array.from(o.values())).length&&i.every(function(n){return"expired"==n})&&n.o(new O(2,6,6014)),n.C.Ud(Jf(o)))}),this.K=!1,this.J=[],this.N=!1,this.ka=new qd(function(){(function(n){n.i.forEach(function(i,r){var o=i.$e,s=r.expiration;isNaN(s)&&(s=1/0),s!=o&&(n.C.onExpirationUpdated(r.sessionId,s),i.$e=s)})})(r)}).$a(i),this.l.catch(function(){}),this.j=new yf(function(){var n;return n=r,K(function(i){switch(i.g){case 1:return n.A.release(),n.A=null,n.l.reject(),n.ka.stop(),n.ka=null,n.W.stop(),n.W=null,C(i,Og(n),2);case 2:if(!n.m){i.B(3);break}return sa(i,4),C(i,n.m.setMediaKeys(null),6);case 6:ua(i,5);break;case 4:va(i);case 5:n.m=null;case 3:n.g=null,n.H.clear(),n.s=null,n.u=new Map,n.h=null,n.o=function(){},n.C=null,n.Y=!1,n.G=null,E(i)}})}),this.Y=!1,this.F=this.G=null}function Rg(n,i,r){n.u=new Map,r=t(r);for(var o=r.next();!o.done;o=r.next())n.u.set(o.value,{initData:null,initDataType:null});for(o=(r=t(n.h.persistentSessionsMetadata)).next();!o.done;o=r.next())o=o.value,n.u.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return n.K=0<n.u.size,Qg(n,i)}function Qg(i,r){var o,s,u,p,m,y,x,A,I,M,j,D;return K(function(R){if(1==R.g){if(o=function(i){if(0==(i=If(i.h.clearKeys)).size)return null;var r=[],o=[];i.forEach(function(n,i){var s=i;22!=s.length&&(s=hg(jg(i),!1)),22!=(i=n).length&&(i=hg(jg(n),!1)),n={kty:"oct",kid:s,k:i},r.push(n),o.push(n.kid)}),i=JSON.stringify({keys:r});var s=JSON.stringify({kids:o});return s=[{initData:hb(Rf(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+n.btoa(i),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(o)}}(i))for(u=(s=t(r)).next();!u.done;u=s.next())(p=u.value).video&&(p.video.drmInfos=[o]),p.audio&&(p.audio.drmInfos=[o]);for((m=r.some(function(n){return!!n.video&&!!n.video.drmInfos.length||!!n.audio&&!!n.audio.drmInfos.length}))||function(n,i){var r=[];for(i.forEach(function(n,i){r.push({keySystem:i,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),i=(n=t(n)).next();!i.done;i=n.next())(i=i.value).video&&(i.video.drmInfos=r),i.audio&&(i.audio.drmInfos=r)}(r,If(i.h.servers)),y=new Set,u=(x=t(r)).next();!u.done;u=x.next())for(I=(A=t(Wg(u.value))).next();!I.done;I=A.next())M=I.value,y.add(M);for(I=(j=t(y)).next();!I.done;I=j.next())!function(i,r,o,s){var u=i.keySystem;u&&("org.w3.clearkey"!=u||!i.licenseServerUri)&&(r.size&&(r=r.get(u)||"",i.licenseServerUri=r),i.keyIds||(i.keyIds=new Set),(o=o.get(u))&&(i.distinctiveIdentifierRequired||(i.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),i.persistentStateRequired||(i.persistentStateRequired=o.persistentStateRequired),i.videoRobustness||(i.videoRobustness=o.videoRobustness),i.audioRobustness||(i.audioRobustness=o.audioRobustness),i.serverCertificate||(i.serverCertificate=o.serverCertificate),o.sessionType&&(i.sessionType=o.sessionType),i.serverCertificateUri||(i.serverCertificateUri=o.serverCertificateUri)),s[u]&&(i.keySystem=s[u]),n.cast&&n.cast.__platform__&&"com.microsoft.playready"==u&&(i.keySystem="com.chromecast.playready"))}(I.value,If(i.h.servers),If(i.h.advanced||{}),i.h.keySystemsMapping);return C(R,Vd(r,i.K,i.Y,i.h.preferredKeySystems),2)}return m||Object.keys(i.h.servers).length?(D=Tg(i,void 0,r),R.return(m?D:D.catch(function(){}))):(i.da=!0,R.return(Promise.resolve()))})}function Yg(n){var i;return K(function(r){switch(r.g){case 1:if(n.m.mediaKeys)return r.return();if(!n.G){r.B(2);break}return C(r,n.G,3);case 3:return zf(n.j),r.return();case 2:return sa(r,4),n.G=n.m.setMediaKeys(n.s),C(r,n.G,6);case 6:ua(r,5);break;case 4:i=va(r),n.o(new O(2,6,6003,i.message));case 5:zf(n.j),E(r)}})}function bh(n){var i,r,o,s;return K(function(u){if(1==u.g)return n.u.size?(n.u.forEach(function(i,r){eh(n,r,i)}),C(u,n.l,3)):u.B(2);if(2!=u.g){if(0<(n.g&&n.g.keyIds||new Set([])).size&&function(n){for(var i=t(n.g&&n.g.keyIds||new Set([])),r=i.next();!r.done;r=i.next())if("usable"!==n.V.get(r.value))return!1;return!0}(n))return u.return(n.l);n.l=new Ze,n.l.catch(function(){})}for(o=(r=t(i=(n.g?n.g.initData:[])||[])).next();!o.done;o=r.next())$g(n,(s=o.value).initDataType,s.initData);return i.length||n.l.resolve(),u.return(n.l)})}function $g(n,i,r){if(r.length){var o=n.i.values();o=t(o);for(var s=o.next();!s.done;s=o.next())if(fb(r,s.value.initData)&&n.h.ignoreDuplicateInitData)return;0<n.i.size&&gh(n)&&(n.l.resolve(),n.l=new Ze,n.l.catch(function(){})),function(n,i,r,o){try{var s=n.s.createSession(o)}catch(i){n.o(new O(2,6,6005,i.message));return}n.A.D(s,"message",function(i){n.m&&n.h.delayLicenseRequestUntilPlayed&&n.m.paused&&!n.N?n.J.push(i):ah(n,i)}),n.A.D(s,"keystatuseschange",function(i){return qh(n,i)}),n.i.set(s,{initData:r,initDataType:i,loaded:!1,$e:1/0,hb:null,type:o});try{r=n.h.initDataTransform(r,i,n.g)}catch(r){i=r,r instanceof O||(i=new O(2,6,6016,r)),n.o(i);return}n.h.logLicenseExchange&&hg(r),s.generateRequest(i,r).catch(function(i){if(!n.j.g){n.i.delete(s);var r=i.errorCode;if(r&&r.systemCode){var o=r.systemCode;0>o&&(o+=4294967296),o="0x"+o.toString(16)}n.o(new O(2,6,6006,i.message,i,o))}})}(n,i,r,n.g.sessionType)}}function ih(n){return!!n&&!!n.match(/^com\.(microsoft|chromecast)\.playready/)}function jh(n){return Array.from(n=Ff(n=n.i.keys(),function(n){return n.sessionId}))}function Tg(n,i,r){var o,s,u,p,m,y,x,A,I,M,j,D,R,P;return K(function(L){switch(L.g){case 1:var _,B,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec;if(o=new Map,r.length){s=function(n,i,r){for(var o=t(i),s=o.next();!s.done;s=o.next()){var u=t(Wg(s.value));for(s=u.next();!s.done;s=u.next())s=s.value,r.has(s.keySystem)||r.set(s.keySystem,[]),r.get(s.keySystem).push(s)}if(1==r.size&&r.has(""))throw new O(2,6,6e3);for(o={},s=(n=t(n.h.preferredKeySystems)).next();!s.done;o={ce:o.ce},s=n.next())for(o.ce=s.value,s=(u=t(i)).next();!s.done;s=u.next())if(s=s.value.decodingInfos.find(function(n){return function(i){return i.supported&&null!=i.keySystemAccess&&i.keySystemAccess.keySystem==n.ce}}(o)))return s.keySystemAccess;for(s=(n=t([!0,!1])).next();!s.done;s=n.next())for(o=s.value,s=(u=t(i)).next();!s.done;s=u.next()){var p=t(s.value.decodingInfos);for(s=p.next();!s.done;s=p.next()){var m=s.value;if(m.supported&&m.keySystemAccess){var y=t(s=r.get(m.keySystemAccess.keySystem));for(s=y.next();!s.done;s=y.next())if(!!s.value.licenseServerUri==o)return m.keySystemAccess}}}return null}(n,r,o),L.B(2);break}return C(L,(_=n,B=i,K(function(n){switch(n.g){case 1:if(1==B.size&&B.has(""))throw new O(2,6,6e3);for(V=(q=t(B.values())).next();!V.done;V=q.next())0==(H=V.value).audioCapabilities.length&&delete H.audioCapabilities,0==H.videoCapabilities.length&&delete H.videoCapabilities;X=(G=t(_.h.preferredKeySystems)).next();case 2:if(X.done){n.B(4);break}if(J=X.value,!B.has(J)){n.B(3);break}return $=B.get(J),sa(n,6),C(n,navigator.requestMediaKeySystemAccess(J,[$]),8);case 8:return z=n.h,n.return(z);case 6:va(n);case 7:zf(_.j);case 3:X=G.next(),n.B(2);break;case 4:en=(ee=t([!0,!1])).next();case 9:if(en.done){n.B(11);break}ea=en.value,X=(eo=t(B.keys())).next();case 12:if(X.done){en=ee.next(),n.B(9);break}if(eu=X.value,(ec=B.get(eu)).drmInfos.some(function(n){return!!n.licenseServerUri})!=ea){n.B(13);break}return sa(n,15),C(n,navigator.requestMediaKeySystemAccess(eu,[ec]),17);case 17:return z=n.h,n.return(z);case 15:va(n);case 16:zf(_.j);case 13:X=eo.next(),n.B(12);break;case 11:return n.return(z)}})),3);case 3:s=L.h;case 2:if(!(u=s))throw new O(2,6,6001);for(zf(n.j),sa(L,4),n.H.clear(),m=(p=u.getConfiguration()).audioCapabilities||[],y=p.videoCapabilities||[],A=(x=t(m)).next();!A.done;A=x.next())I=A.value,n.H.add(I.contentType.toLowerCase());for(A=(M=t(y)).next();!A.done;A=M.next())j=A.value,n.H.add(j.contentType.toLowerCase());if(r.length){var ep,em,ev,ew,ex=u.keySystem,eT=o.get(u.keySystem),eS=[],eC=[],ek=[],eE=[],eI=new Set;mh(eT,eS,ek,eC,eE,eI);var eM=n.K?"persistent-license":"temporary";for(ex={keySystem:ex,licenseServerUri:eS[0],distinctiveIdentifierRequired:eT[0].distinctiveIdentifierRequired,persistentStateRequired:eT[0].persistentStateRequired,sessionType:eT[0].sessionType||eM,audioRobustness:eT[0].audioRobustness||"",videoRobustness:eT[0].videoRobustness||"",serverCertificate:ek[0],serverCertificateUri:eC[0],initData:eE,keyIds:eI},eS=(eT=t(eT)).next();!eS.done;eS=eT.next())(eS=eS.value).distinctiveIdentifierRequired&&(ex.distinctiveIdentifierRequired=eS.distinctiveIdentifierRequired),eS.persistentStateRequired&&(ex.persistentStateRequired=eS.persistentStateRequired);eT=ex}else eT=u.keySystem,ex=i.get(u.keySystem),eS=[],eC=[],ek=[],eE=[],eI=new Set,mh(ex.drmInfos,eS,ek,eC,eE,eI),eT={keySystem:eT,licenseServerUri:eS[0],distinctiveIdentifierRequired:"required"==ex.distinctiveIdentifier,persistentStateRequired:"required"==ex.persistentState,sessionType:ex.sessionTypes[0]||"temporary",audioRobustness:(ex.audioCapabilities?ex.audioCapabilities[0].robustness:"")||"",videoRobustness:(ex.videoCapabilities?ex.videoCapabilities[0].robustness:"")||"",serverCertificate:ek[0],serverCertificateUri:eC[0],initData:eE,keyIds:eI};if(n.g=eT,!n.g.licenseServerUri)throw new O(2,6,6012,n.g.keySystem);return C(L,u.createMediaKeys(),6);case 6:if(D=L.h,zf(n.j),n.s=D,!(""!=n.h.minHdcpVersion&&"getStatusForPolicy"in n.s)){L.B(7);break}return sa(L,8),C(L,n.s.getStatusForPolicy({minHdcpVersion:n.h.minHdcpVersion}),10);case 10:if("usable"!=L.h)throw new O(2,6,6018);zf(n.j),ua(L,7,4);break;case 8:if((R=va(L,4))instanceof O)throw R;throw new O(2,6,6019,R.message);case 7:return n.da=!0,C(L,K(function(i){switch(i.g){case 1:if(!n.s||!n.g)return i.return();if(!n.g.serverCertificateUri||n.g.serverCertificate&&n.g.serverCertificate.length){i.B(2);break}return ep=qf([n.g.serverCertificateUri],n.h.retryParameters),sa(i,3),C(i,n.C.Tb.request(5,ep).promise,5);case 5:em=i.h,n.g.serverCertificate=hb(em.data),ua(i,4);break;case 3:throw ev=va(i),new O(2,6,6017,ev);case 4:if(n.j.g)return i.return();case 2:if(!n.g.serverCertificate||!n.g.serverCertificate.length)return i.return();return sa(i,6),C(i,n.s.setServerCertificate(n.g.serverCertificate),8);case 8:ua(i,0);break;case 6:throw ew=va(i),new O(2,6,6004,ew.message)}}),11);case 11:zf(n.j),ua(L,0);break;case 4:if(P=va(L),zf(n.j,P),n.g=null,n.H.clear(),P instanceof O)throw P;throw new O(2,6,6002,P.message)}})}function nh(n){gh(n)&&n.l.resolve()}function oh(n,i){new qd(function(){i.loaded=!0,nh(n)}).U(tl)}function eh(n,i,r){var o,s,u,p,m,y,x;return K(function(A){switch(A.g){case 1:try{o=n.s.createSession("persistent-license")}catch(i){return s=new O(2,6,6005,i.message),n.o(s),A.return(Promise.reject(s))}return n.A.D(o,"message",function(i){n.m&&n.h.delayLicenseRequestUntilPlayed&&n.m.paused&&!n.N?n.J.push(i):ah(n,i)}),n.A.D(o,"keystatuseschange",function(i){return qh(n,i)}),u={initData:r.initData,initDataType:r.initDataType,loaded:!1,$e:1/0,hb:null,type:"persistent-license"},n.i.set(o,u),sa(A,2),C(A,o.load(i),4);case 4:return p=A.h,zf(n.j),p||(n.i.delete(o),m=n.h.persistentSessionOnlinePlayback?1:2,n.o(new O(m,6,6013)),u.loaded=!0),oh(n,u),nh(n),A.return(o);case 2:y=va(A),zf(n.j,y),n.i.delete(o),x=n.h.persistentSessionOnlinePlayback?1:2,n.o(new O(x,6,6005,y.message)),u.loaded=!0,nh(n);case 3:return A.return(Promise.resolve())}})}function ah(n,i){var r,o,s,u,p,m,y,x,A,I,M,j;K(function(D){switch(D.g){case 1:if(r=i.target,n.h.logLicenseExchange&&hg(i.message),o=n.i.get(r),s=n.g.licenseServerUri,u=n.h.advanced[n.g.keySystem],"individualization-request"==i.messageType&&u&&u.individualizationServer&&(s=u.individualizationServer),(p=qf([s],n.h.retryParameters)).body=i.message,p.method="POST",p.licenseRequestType=i.messageType,p.sessionId=r.sessionId,p.drmInfo=n.g,o&&(p.initData=o.initData,p.initDataType=o.initDataType),ih(n.g.keySystem)){var R=Of(p.body,!0,!0);if(R.includes("PlayReadyKeyMessage")){R=Hg(R,"PlayReadyKeyMessage");for(var P=t(R.getElementsByTagName("HttpHeader")),L=P.next();!L.done;L=P.next())L=L.value,p.headers[L.getElementsByTagName("name")[0].textContent]=L.getElementsByTagName("value")[0].textContent;p.body=ig(R.getElementsByTagName("Challenge")[0].textContent)}else p.headers["Content-Type"]="text/xml; charset=utf-8"}return m=Date.now(),sa(D,2),C(D,n.C.Tb.request(2,p).promise,4);case 4:y=D.h,ua(D,3);break;case 2:return x=va(D),A=new O(2,6,6007,x),n.o(A),o&&o.hb&&o.hb.reject(A),D.return();case 3:if(n.j.g)return D.return();return n.I+=(Date.now()-m)/1e3,n.h.logLicenseExchange&&hg(y.data),sa(D,5),C(D,r.update(y.data),7);case 7:ua(D,6);break;case 5:return I=va(D),M=new O(2,6,6008,I.message),n.o(M),o&&o.hb&&o.hb.reject(M),D.return();case 6:if(n.j.g)return D.return();j=new Q("drmsessionupdate"),n.C.onEvent(j),o&&(o.hb&&o.hb.resolve(),oh(n,o)),E(D)}})}function qh(n,i){i=i.target;var r=n.i.get(i),o=!1;i.keyStatuses.forEach(function(i,s){if("string"==typeof s){var u=s;s=i,i=u}if(ih(n.g.keySystem)&&16==s.byteLength&&(ud()||Dd())){var p=(u=nb(s)).getUint32(0,!0),m=u.getUint16(4,!0),y=u.getUint16(6,!0);u.setUint32(0,p,!1),u.setUint16(4,m,!1),u.setUint16(6,y,!1)}"status-pending"!=i&&(r.loaded=!0),"expired"==i&&(o=!0),s=kg(s).slice(0,32),n.V.set(s,i)});var s=i.expiration-Date.now();(0>s||o&&1e3>s)&&r&&!r.hb&&(n.i.delete(i),i.close().catch(function(){})),gh(n)&&(n.l.resolve(),n.W.U(tc))}function Og(n){var i;return K(function(r){return i=Array.from(n.i.entries()),n.i.clear(),C(r,Promise.all(i.map(function(i){var r=(i=t(i)).next().value,o=i.next().value;return K(function(i){if(1==i.g){var s;return sa(i,2),n.ma||n.u.has(r.sessionId)||"persistent-license"!==o.type||n.h.persistentSessionOnlinePlayback?C(i,K(function(n){return 1==n.g?(s=new Promise(function(n,i){new qd(i).U(tu)}),sa(n,2),C(n,Promise.race([Promise.all([r.close(),r.closed]),s]),4)):2!=n.g?ua(n,0):void(va(n),E(n))}),5):C(i,r.remove(),5)}if(2!=i.g)return ua(i,0);va(i),E(i)})})),0)})}function vh(n,i){return!n.length||!i.length||n===i||0<wh(n,i).length}function wh(n,i){if(!n.length)return i;if(!i.length)return n;var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;for(var s=t(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.keySystem==u.keySystem){s=new Map;for(var p=t((o.initData||[]).concat(u.initData||[])),m=p.next();!m.done;m=p.next())m=m.value,s.set(m.keyId,m);s=Array.from(s.values()),p=o.keyIds&&u.keyIds?new Set([].concat(w(o.keyIds),w(u.keyIds))):o.keyIds||u.keyIds,r.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||u.persistentStateRequired,videoRobustness:o.videoRobustness||u.videoRobustness,audioRobustness:o.audioRobustness||u.audioRobustness,serverCertificate:o.serverCertificate||u.serverCertificate,serverCertificateUri:o.serverCertificateUri||u.serverCertificateUri,initData:s,keyIds:p});break}}return r}function Wg(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[])}function gh(n){return function(n,i){n=t(n);for(var r=n.next();!r.done;r=n.next())if(!i(r.value))return!1;return!0}(n=n.i.values(),function(n){return n.loaded})}function mh(n,i,r,o,s,u){var p={};n=t(n);for(var m=n.next();!m.done;p={Fa:p.Fa},m=n.next()){if(p.Fa=m.value,i.includes(p.Fa.licenseServerUri)||i.push(p.Fa.licenseServerUri),o.includes(p.Fa.serverCertificateUri)||o.push(p.Fa.serverCertificateUri),p.Fa.serverCertificate&&(r.some(function(n){return function(i){return fb(i,n.Fa.serverCertificate)}}(p))||r.push(p.Fa.serverCertificate)),p.Fa.initData){m={};for(var y=t(p.Fa.initData),x=y.next();!x.done;m={kd:m.kd},x=y.next())m.kd=x.value,s.some(function(n){return function(i){var r=n.kd;return!!i.keyId&&i.keyId==r.keyId||i.initDataType==r.initDataType&&fb(i.initData,r.initData)}}(m))||s.push(m.kd)}if(p.Fa.keyIds)for(y=(m=t(p.Fa.keyIds)).next();!y.done;y=m.next())u.add(y.value)}}(D=Kg.prototype).destroy=function(){return this.j.destroy()},D.configure=function(n){this.h=n},D.Ic=function(n){var i=this;return K(function(r){if(1==r.g)return i.s?(i.m=n,i.A.ja(i.m,"play",function(){for(var n=t(i.J),r=n.next();!r.done;r=n.next())ah(i,r.value);i.N=!0,i.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in i.m&&i.A.D(i.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Og(i)}),i.F=i.g&&i.g.initData.find(function(n){return 0<n.initData.length})||null,i.F||"com.apple.fps"!==i.g.keySystem||i.u.size?C(r,Yg(i),2):r.B(2)):(i.A.ja(n,"encrypted",function(){i.o(new O(2,6,6010))}),r.return());bh(i).catch(function(){}),i.F||i.u.size||i.h.parseInbandPsshEnabled||i.A.D(i.m,"encrypted",function(n){return K(function(r){if(1==r.g)return C(r,Yg(i),2);$g(i,n.initDataType,hb(n.initData)),E(r)})}),E(r)})},D.Fe=function(){var n=this,i=this.i.keys();return Array.from(i=Ff(i,function(i){var r=n.i.get(i);return{sessionId:i.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}))},D.Qc=function(){var n=1/0,i=this.i.keys();i=t(i);for(var r=i.next();!r.done;r=i.next())isNaN((r=r.value).expiration)||(n=Math.min(n,r.expiration));return n},D.Bd=function(){return Jf(this.ea)};var tu=1,tl=5,tc=.5,th=new Hf(function(){return kb(new Uint8Array([0]))});function yh(){}function zh(n,i){if(i){var r=tf[i.toLowerCase()];if(r)return r}throw new O(2,4,4e3,n,i)}N("shaka.media.ManifestParser",yh),yh.unregisterParserByMime=function(n){delete tf[n]},yh.registerParserByMime=function(n,i){tf[n]=i},yh.registerParserByExtension=function(){ze("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},yh.AccessibilityPurpose={Yi:"visually impaired",ui:"hard of hearing"};var tf={};function Fh(n,i,r){0!=(i=(n=nb(n,i)).getUint32(0))&&(1==i?(n.setUint32(8,r>>32),n.setUint32(12,4294967295&r)):n.setUint32(0,r))}var tp=new Hf(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Gh(n,i,r,o,s,u,p){this.Z=n,this.Qa=i,this.wa=r,this.Ve=void 0===o?null:o,this.timescale=void 0===s?null:s,this.g=void 0===u?null:u,this.aes128Key=void 0===p?null:p,this.mimeType=this.codecs=null}function Hh(n,i){return n===i||(n&&i?n.ic()==i.ic()&&n.fc()==i.fc()&&xb(n.Z().sort(),i.Z().sort())&&fb(n.g,i.g):n==i)}function S(n,i,r,o,s,u,p,m,y,x,A,I,M,j,D,R){for(x=void 0===x?[]:x,j=void 0===j?tm:j,this.startTime=n,this.h=this.endTime=i,this.A=r,this.Qa=o,this.wa=s,this.aa=u,this.timestampOffset=p,this.appendWindowStart=m,this.appendWindowEnd=y,this.g=x,this.tilesLayout=void 0===A?"":A,this.u=void 0===I?null:I,this.ca=void 0===M?null:M,this.status=j,this.l=!1,this.j=!0,this.m=!1,this.aes128Key=void 0===D?null:D,this.s=null,this.i=0,this.o=void 0!==R&&R,this.Md=this.Zc=!1,i=(n=t(this.g)).next();!i.done;i=n.next())i.value.ag();this.o&&this.g.length&&this.g[this.g.length-1].$f(),this.mimeType=this.codecs=null}Gh.prototype.ic=function(){return this.Qa},Gh.prototype.fc=function(){return this.wa},N("shaka.media.InitSegmentReference",Gh),Gh.prototype.getEndByte=Gh.prototype.fc,Gh.prototype.getStartByte=Gh.prototype.ic,(D=S.prototype).Z=function(){return this.A()},D.getStartTime=function(){return this.startTime},D.Ug=function(){return this.endTime},D.ic=function(){return this.Qa},D.fc=function(){return this.wa},D.lh=function(){return this.tilesLayout},D.kh=function(){return this.u},D.Pb=function(){return this.status},D.Bh=function(){this.status=tw},D.Ue=function(){this.l=!0},D.xh=function(){return this.l},D.Od=function(){this.j=!1},D.uh=function(){return this.j},D.ag=function(){this.Zc=!0},D.wh=function(){return this.Zc},D.$f=function(){this.Md=!0},D.vh=function(){return this.Md},D.Zf=function(){this.m=!0},D.rh=function(){return this.m},D.pg=function(n){this.s=n},D.jh=function(){return this.s},D.offset=function(n){this.startTime+=n,this.endTime+=n,this.h+=n;for(var i=t(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.startTime+=n,r.endTime+=n,r.h+=n},D.tf=function(n){null==this.ca?Ra("Sync attempted without sync time!"):.001<=Math.abs(n=this.ca-n-this.startTime)&&this.offset(n)},N("shaka.media.SegmentReference",S),S.prototype.syncAgainst=S.prototype.tf,S.prototype.offset=S.prototype.offset,S.prototype.getThumbnailSprite=S.prototype.jh,S.prototype.setThumbnailSprite=S.prototype.pg,S.prototype.hasByterangeOptimization=S.prototype.rh,S.prototype.markAsByterangeOptimization=S.prototype.Zf,S.prototype.isLastPartial=S.prototype.vh,S.prototype.markAsLastPartial=S.prototype.$f,S.prototype.isPartial=S.prototype.wh,S.prototype.markAsPartial=S.prototype.ag,S.prototype.isIndependent=S.prototype.uh,S.prototype.markAsNonIndependent=S.prototype.Od,S.prototype.isPreload=S.prototype.xh,S.prototype.markAsPreload=S.prototype.Ue,S.prototype.markAsUnavailable=S.prototype.Bh,S.prototype.getStatus=S.prototype.Pb,S.prototype.getTileDuration=S.prototype.kh,S.prototype.getTilesLayout=S.prototype.lh,S.prototype.getEndByte=S.prototype.fc,S.prototype.getStartByte=S.prototype.ic,S.prototype.getEndTime=S.prototype.Ug,S.prototype.getStartTime=S.prototype.getStartTime,S.prototype.getUris=S.prototype.Z;var tm=0,tw=1;function Kh(n){return!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:n.length?n.end(n.length-1):null}function Lh(n,i){return!(!n||!n.length||1==n.length&&1e-6>n.end(0)-n.start(0)||i>n.end(n.length-1))&&i>=n.start(0)}function Mh(n,i){if(!n||!n.length||1==n.length&&1e-6>n.end(0)-n.start(0))return 0;var r=0;n=t(Nh(n));for(var o=n.next();!o.done;o=n.next()){var s=o.value;o=s.start,(s=s.end)>i&&(r+=s-Math.max(o,i))}return r}function Nh(n){if(!n)return[];for(var i=[],r=0;r<n.length;r++)i.push({start:n.start(r),end:n.end(r)});return i}function Ph(){}function Qh(n,i){return i+10<=n.length&&73===n[i]&&68===n[i+1]&&51===n[i+2]&&255>n[i+3]&&255>n[i+4]&&128>n[i+6]&&128>n[i+7]&&128>n[i+8]&&128>n[i+9]}function Rh(n,i){return i+10<=n.length&&51===n[i]&&68===n[i+1]&&73===n[i+2]&&255>n[i+3]&&255>n[i+4]&&128>n[i+6]&&128>n[i+7]&&128>n[i+8]&&128>n[i+9]}function Sh(n,i){var r=(127&n[i])<<21;return r|=(127&n[i+1])<<14,(r|=(127&n[i+2])<<7)|127&n[i+3]}function Uh(n){for(var i=0,r=[];Qh(n,i);){var o=Sh(n,i+6);for(n[i+5]>>6&1&&(i+=10),i+=10,o=i+o;i+10<o;){var s=n.subarray(i),u=Sh(s,4);(u=function(n){var i={key:n.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===n.type){if(2>n.size||3!==n.data[0])return null;var r=n.data.subarray(1).indexOf(0);if(-1===r)return null;var o=Nf(hb(n.data,1,r)),s=n.data[2+r],u=n.data.subarray(3+r).indexOf(0);if(-1===u)return null;var p,m=Nf(hb(n.data,3+r,u));return p="-->"===o?Nf(hb(n.data,4+r+u)):kb(n.data.subarray(4+r+u)),i.mimeType=o,i.pictureType=s,i.description=m,i.data=p,i}return"TXXX"===n.type||"WXXX"===n.type?2>n.size||3!==n.data[0]||-1===(o=n.data.subarray(1).indexOf(0))?null:(r=Nf(hb(n.data,1,o)),n=Nf(hb(n.data,2+o)).replace(/\0*$/,""),i.description=r,i.data=n,i):"PRIV"===n.type?2>n.size||-1===(r=n.data.indexOf(0))?null:(r=Nf(hb(n.data,0,r)),i.description=r,"com.apple.streaming.transportStreamTimestamp"==r?(n=1&(r=n.data.subarray(r.length+1))[3],r=((r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7])/45,n&&(r+=47721858.84),i.data=r):(n=kb(n.data.subarray(r.length+1)),i.data=n),i):"T"===n.type[0]?2>n.size||3!==n.data[0]?null:(n=Nf(n.data.subarray(1)).replace(/\0*$/,""),i.data=n,i):"W"===n.type[0]?(n=Nf(n.data).replace(/\0*$/,""),i.data=n,i):n.data?(i.data=kb(n.data),i):null}(s={type:String.fromCharCode(s[0],s[1],s[2],s[3]),size:u,data:s.subarray(10,10+u)}))&&r.push(u),i+=s.size+10}Rh(n,i)&&(i+=10)}return r}function Vh(n,i){for(var r=i=void 0===i?0:i,o=0;Qh(n,i);)n[i+5]>>6&1&&(o+=10),o+=10+Sh(n,i+6),Rh(n,i+10)&&(o+=10),i+=o;return 0<o?n.subarray(r,r+o):new Uint8Array([])}function Wh(n,i){var r=null,o=null,s=null,u=n.L();return 1&i&&(s=n.oc()),2&i&&n.skip(4),8&i&&(r=n.L()),16&i&&(o=n.L()),{trackId:u,Kf:r,Mg:o,$i:s}}function Xh(n,i){return 1==i?{baseMediaDecodeTime:4294967296*(i=n.L())+(n=n.L())}:{baseMediaDecodeTime:n.L()}}function Yh(n,i){return 1==i?(n.skip(8),n.skip(8)):(n.skip(4),n.skip(4)),i=n.L(),n.skip(4),{timescale:i,language:String.fromCharCode(((n=n.Ea())>>10)+96)+String.fromCharCode(((960&n)>>5)+96)+String.fromCharCode((31&n)+96)}}function Zh(n,i,r){var o=n.L(),s=[],u=null;1&r&&(u=n.L()),4&r&&n.skip(4);for(var p=0;p<o;p++){var m={hf:null,sampleSize:null,Wd:null};256&r&&(m.hf=n.L()),512&r&&(m.sampleSize=n.L()),1024&r&&n.skip(4),2048&r&&(m.Wd=0==i?n.L():n.fg()),s.push(m)}return{dj:o,ig:s,Lg:u}}function $h(n,i){1==i?(n.skip(8),n.skip(8)):(n.skip(4),n.skip(4));var r=n.L();return 1==i?n.skip(8):n.skip(4),n.skip(4),n.skip(8),n.skip(2),n.skip(2),n.skip(2),n.skip(2),n.skip(36),{trackId:r,width:i=n.Ea()+n.Ea()/16,height:n=n.Ea()+n.Ea()/16}}function bi(n,i){return n.skip(87),{ha:i+"."+this.g(n.ga())+this.g(n.ga())+this.g(n.ga())}}function ci(n){return{ha:$f(n=n.L())}}function di(n,i){if(this.j=n,void 0===i?0:i){i=new Uint8Array(n.byteLength);for(var r=0,o=0;o<n.byteLength;o++)2<=o&&3==n[o]&&0==n[o-1]&&0==n[o-2]||(i[r]=n[o],r++);this.j=hb(i,0,r)}this.i=this.j.byteLength,this.g=this.h=0}function ei(n){var i=n.j.byteLength-n.i,r=new Uint8Array(4),o=Math.min(4,n.i);0!==o&&(r.set(n.j.subarray(i,i+o)),n.h=new Tf(r,0).L(),n.g=8*o,n.i-=o)}function fi(n,i){if(n.g<=i){var r=Math.floor((i-=n.g)/8);i-=8*r,n.g-=r,ei(n)}n.h<<=i,n.g-=i}function gi(n,i){var r=Math.min(n.g,i),o=n.h>>>32-r;return n.g-=r,0<n.g?n.h<<=r:0<n.i&&ei(n),0<(r=i-r)?o<<r|gi(n,r):o}function hi(n){var i;for(i=0;i<n.g;++i)if(0!=(n.h&2147483648>>>i))return n.h<<=i,n.g-=i,i;return ei(n),i+hi(n)}function ii(n){fi(n,1+hi(n))}function T(n){var i=hi(n);return gi(n,i+1)-1}function ji(n){return 1&(n=T(n))?1+n>>>1:-1*(n>>>1)}function U(n){return 1===gi(n,1)}function ki(n){return gi(n,8)}function li(n,i){for(var r=8,o=8,s=0;s<i;s++)0!==o&&(o=(r+(o=ji(n))+256)%256),r=0===o?r:o}function ni(){this.A=null,this.C=!1,this.m=this.F=null,this.j=[],this.g=[],this.o=this.s=null,this.i=[],this.h=[],this.u=null,this.l=[]}function pi(n){if(1!=(n[0]<<16|n[1]<<8|n[2]))return null;var i={data:new Uint8Array(0),packetLength:n[4]<<8|n[5],pts:null,dts:null,nalus:[]};if(i.packetLength&&i.packetLength>n.byteLength-6)return null;var r=n[7];return(192&r&&(i.pts=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,i.dts=i.pts,64&r&&(i.dts=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)),r=n[8]+9,n.byteLength<=r)?null:(i.data=n.subarray(r),i)}function ti(n){return!(0>oi(n))}function oi(n){for(var i=Math.min(1e3,n.length-564),r=0;r<i;){if(71==n[r]&&71==n[r+188]&&71==n[r+376])return r;r++}return -1}S.Status={gi:tm,Wi:tw,Ai:2},N("shaka.util.Id3Utils",Ph),Ph.getID3Data=Vh,Ph.getID3Frames=Uh,N("shaka.util.ExpGolomb",di),(D=ni.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},D.parse=function(n){if(564>n.length)return this;for(var i=Math.max(0,oi(n)),r=n.length-(n.length+i)%188,o=!1,s=i;s<r;s+=188)if(71==n[s]){var u=!!(64&n[s+1]),p=((31&n[s+1])<<8)+n[s+2];if(1<(48&n[s+3])>>4){var m=s+5+n[s+4];if(m==s+188)continue}else m=s+4;switch(p){case 0:u&&(m+=n[m]+1),this.A=(31&n[m+10])<<8|n[m+11];break;case 17:case 8191:break;case this.A:u&&(m+=n[m]+1),p={audio:-1,video:-1,Jd:-1,audioCodec:"",videoCodec:""};var y=m+3+((15&(u=n)[m+1])<<8|u[m+2])-4;for(m+=12+((15&u[m+10])<<8|u[m+11]);m<y;){var x=(31&u[m+1])<<8|u[m+2],A=(15&u[m+3])<<8|u[m+4];switch(u[m]){case 6:if(-1==p.audio&&0<A)for(var I=m+5,M=A;2<M;){switch(u[I]){case 106:p.audio=x,p.audioCodec="ac3";break;case 122:p.audio=x,p.audioCodec="ec3"}var j=u[I+1]+2;I+=j,M-=j}break;case 15:-1==p.audio&&(p.audio=x,p.audioCodec="aac");break;case 21:-1==p.Jd&&(p.Jd=x);break;case 27:-1==p.video&&(p.video=x,p.videoCodec="avc");break;case 3:case 4:-1==p.audio&&(p.audio=x,p.audioCodec="mp3");break;case 36:-1==p.video&&(p.video=x,p.videoCodec="hvc");break;case 129:-1==p.audio&&(p.audio=x,p.audioCodec="ac3");break;case 132:case 135:-1==p.audio&&(p.audio=x,p.audioCodec="ec3")}m+=A+5}-1!=(u=p).video&&(this.F=u.video,this.m=u.videoCodec),-1!=u.audio&&(this.s=u.audio,this.o=u.audioCodec),-1!=u.Jd&&(this.u=u.Jd),o&&!this.C&&(o=!1,s=i-188),this.C=!0;break;case this.F:m=n.subarray(m,s+188),u?this.j.push([m]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(m);break;case this.s:m=n.subarray(m,s+188),u?this.i.push([m]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(m);break;case this.u:m=n.subarray(m,s+188),u?this.l.push([m]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(m);break;default:o=!0}}return this},D.Hh=function(n){return ze("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.cf(n)},D.cf=function(n,i,r){var o=n.pts?n.pts/9e4:null,s=(n=n.data).byteLength,u=1;"hvc"==this.m&&(u=2);for(var p,m=r||0,y=[],x=-1,A=0,I=0;I<s;++I){var M=n[I];if(M){if(2<=m&&1==M){if(i&&!y.length&&-1==x&&(M=I-(3<m?3:m),r&&0!=M&&(M=n.subarray(0,M),i.data=lg(i.data,M),i.fullData=lg(i.fullData,M))),0<=x?(m=I-((3<m?3:m)+1),y.push({data:n.subarray(x+u,m+1),fullData:n.subarray(x,m+1),type:A,time:o})):i&&!y.length&&0<(x=I-m)&&(x=n.subarray(0,x),i.data=lg(i.data,x),i.fullData=lg(i.fullData,x)),I>=s-u)return y;x=++I,A="hvc"==this.m?n[I]>>1&63:31&n[I]}m=0}else m++;I>=s-1&&0<=x&&0<=m&&(p={data:n.subarray(x+u,s),fullData:n.subarray(x,s),type:A,time:o})}return p&&y.push(p),!y.length&&i&&(i.data=lg(i.data,n),i.fullData=lg(i.fullData,n)),y},D.getMetadata=function(){for(var n=[],i=t(this.l),r=i.next();!r.done;r=i.next())(r=pi(r=lg.apply(fg,w(r.value))))&&n.push({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:Uh(r.data),dts:r.dts,pts:r.pts});return n},D.Mb=function(){if(this.i.length&&!this.h.length){for(var n=!1,i=t(this.i),r=i.next();!r.done;r=i.next()){var o=lg.apply(fg,w(r.value)),s=pi(o);r=this.h.length?this.h[this.h.length-1]:null,s&&null!=s.pts&&null!=s.dts&&(!r||r.pts!=s.pts&&r.dts!=s.dts)?(this.h.length&&s.dts<(r.dts||0)&&(n=!0),this.h.push(s)):this.h.length&&(o=s?s.data:o)&&((r=this.h.pop()).data=lg(r.data,o),this.h.push(r))}n&&(this.h=this.h.sort(function(n,i){var r=(n.pts||0)-(i.pts||0);return(n.dts||0)-(i.dts||0)||r}))}return this.h},D.kc=function(n){if(n=void 0===n||n,this.j.length&&!this.g.length){for(var i,r=!1,o=t(this.j),s=o.next();!s.done;s=o.next()){var u=lg.apply(fg,w(s.value)),p=pi(u);s=this.g.length?this.g[this.g.length-1]:null,p&&null!=p.pts&&null!=p.dts&&(!s||s.pts!=p.pts&&s.dts!=p.dts)?(this.g.length&&p.dts<(s.dts||0)&&(r=!0),this.g.push(p)):this.g.length&&(u=p?p.data:u)&&((s=this.g.pop()).data=lg(s.data,u),this.g.push(s))}if(n){for(s=(o=t(this.g)).next();!s.done;s=o.next())(s=s.value).nalus=this.cf(s,i,void 0),s.nalus.length&&(i=s.nalus[s.nalus.length-1]);this.g=this.g.filter(function(n){return n.nalus.length})}r&&(this.g=this.g.sort(function(n,i){var r=(n.pts||0)-(i.pts||0);return(n.dts||0)-(i.dts||0)||r}))}return n?this.g:(n=this.g,this.g=[],n)},D.getStartTime=function(n){if("audio"==n){n=null;var i=this.Mb();return i.length&&(n=Math.min((n=i[0]).dts,n.pts)/9e4),n}return"video"==n?(n=null,(i=this.kc(!1)).length&&(n=Math.min((n=i[0]).dts,n.pts)/9e4),n):null},D.Pc=function(){return{audio:this.o,video:this.m}},D.Fd=function(){for(var n=[],i=t(this.kc()),r=i.next();!r.done;r=i.next())n.push.apply(n,w(r.value.nalus));return n},D.oh=function(){ze("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var n=this.Je();return{height:n.height,width:n.width}},D.Je=function(){return"hvc"==this.m?function(n){var i={height:null,width:null,ha:null};if(!(n=n.Fd()).length||!(n=n.find(function(n){return 33==n.type})))return i;var r=new di(n.fullData,!0);ki(r),ki(r),gi(r,4);var o=gi(r,3);U(r);var s=gi(r,2),u=gi(r,1),p=gi(r,5),m=gi(r,32);n=ki(r);for(var y=ki(r),x=ki(r),A=ki(r),I=ki(r),M=ki(r),j=ki(r),D=[],R=[],P=0;P<o;P++)D.push(U(r)),R.push(U(r));if(0<o)for(P=o;8>P;P++)gi(r,2);for(P=0;P<o;P++)D[P]&&gi(r,88),R[P]&&ki(r);T(r),3==(o=T(r))&&gi(r,1),D=T(r),R=T(r);var L=P=0,_=0,B=0;return U(r)&&(P+=T(r),L+=T(r),_+=T(r),B+=T(r)),i.width=String(D-(P+L)*(1===o||2===o?2:1)),i.height=String(R-(_+B)*(1===o?2:1)),r=function(n){for(var i=0,r=0;32>r;r++)i|=(n>>r&1)<<31-r;return i>>>0}(m),u=1==u?"H":"L",s="hvc1."+["","A","B","C"][s]+p+"."+r.toString(16).toUpperCase()+"."+u+j,M&&(s+="."+M.toString(16).toUpperCase()),I&&(s+="."+I.toString(16).toUpperCase()),A&&(s+="."+A.toString(16).toUpperCase()),x&&(s+="."+x.toString(16).toUpperCase()),y&&(s+="."+y.toString(16).toUpperCase()),n&&(s+="."+n.toString(16).toUpperCase()),i.ha=s,i}(this):function(n){var i={height:null,width:null,ha:null};if(!(n=n.Fd()).length||!(n=n.find(function(n){return 7==n.type})))return i;var r=ki(n=new di(n.data)),o=ki(n),s=ki(n);if(ii(n),tT.includes(r)){var u=T(n);if(3===u&&fi(n,1),ii(n),ii(n),fi(n,1),U(n)){u=3!==u?8:12;for(var p=0;p<u;p++)U(n)&&(6>p?li(n,16):li(n,64))}}if(ii(n),0===(u=T(n)))T(n);else if(1===u)for(fi(n,1),ii(n),ii(n),u=T(n),p=0;p<u;p++)ii(n);ii(n),fi(n,1),u=T(n),p=T(n);var m=gi(n,1);0===m&&fi(n,1),fi(n,1);var y=0,x=0,A=0,I=0;return U(n)&&(y=T(n),x=T(n),A=T(n),I=T(n)),i.height=String((2-m)*(p+1)*16-2*A-2*I),i.width=String(16*(u+1)-2*y-2*x),i.ha="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2),i}(this)},N("shaka.util.TsParser",ni),ni.syncOffset=oi,ni.probe=ti,ni.prototype.getVideoInfo=ni.prototype.Je,ni.prototype.getVideoResolution=ni.prototype.oh,ni.prototype.getVideoNalus=ni.prototype.Fd,ni.prototype.getCodecs=ni.prototype.Pc,ni.prototype.getStartTime=ni.prototype.getStartTime,ni.prototype.getVideoData=ni.prototype.kc,ni.prototype.getAudioData=ni.prototype.Mb,ni.prototype.getMetadata=ni.prototype.getMetadata,ni.prototype.parseNalus=ni.prototype.cf,ni.prototype.parseAvcNalus=ni.prototype.Hh,ni.prototype.parse=ni.prototype.parse,ni.prototype.clearData=ni.prototype.clearData,ni.Timescale=9e4;var tT=[100,110,122,244,44,83,86,118,128,138,139,134];function ui(n,i,r){this.g=null,this.o=-1,this.l=n,this.i=i,this.m=r,this.j=!1;e:{if("undefined"==typeof libDPIModule&&Sa("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else if("undefined"!=typeof LcevcDil)this.h=LcevcDil,this.j=!0,ze("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Sa("Could not find LCEVC Library on this page"),n=!1;break e}void 0===this.h.SupportObject?(Sa("Could not find LCEVC Library on this page"),n=!1):(this.h.SupportObject.SupportStatus||Sa(this.h.SupportObject.SupportError),n=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}n&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function vi(n){n.g&&n.i.classList.add("shaka-hidden")}function wi(n,i,r){var o=tS,s=tM;switch(i.mimeType){case"video/webm":o=tA;break;case"video/mp4":o=tC}switch(r){case"DASH":s=tI;break;case"HLS":s=tE}n.g&&(n.o=i.id,n.g.setLevelSwitching(i.id,!0),n.g.setContainerFormat(o),n.j||n.g.setStreamingFormat(s))}ui.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},N("shaka.lcevc.Dec",ui),ui.prototype.release=ui.prototype.release;var tS=0,tA=1,tC=2,tE=0,tI=1,tM=-1;function Di(n,i,r,o){var s=this;this.i=n,this.C=null,this.F=i,this.g={},this.G={},this.ma={},this.h=null,this.Y=!1,this.Aa=r||function(){},this.N=o||null,this.j={},this.s=new Af,this.m={},this.H=null,this.J=new Ze,this.K="",this.da=!1,this.l=Ei(this,this.J),this.A=!1,this.I=new yf(function(){var n,i,r,o,u,p,m,y;return n=s,K(function(s){if(1==s.g){for(r in i=[],n.j)for(u=(o=n.j[r])[0],n.j[r]=o.slice(0,1),u&&i.push(u.p.catch($c)),m=(p=t(o.slice(1))).next();!m.done;m=p.next())m.value.p.reject(new O(2,7,7003,void 0));for(y in n.h&&i.push(n.h.destroy()),n.F&&i.push(n.F.destroy()),n.m)i.push(n.m[y].destroy());return C(s,Promise.all(i),2)}n.s&&(n.s.release(),n.s=null),n.i&&(n.i.removeAttribute("src"),n.i.load(),n.i=null),n.C=null,n.l=null,n.h=null,n.F=null,n.g={},n.m={},n.H=null,n.j={},n.N=null,E(s)})}),this.u=!1,this.W="UNKNOWN",this.ka=this.za=!1,this.Ba=new Ze,this.o=!1,this.ea=!0,this.V=null}function Ei(i,r){if(n.ManagedMediaSource){i.i.disableRemotePlayback=!0;var o=new ManagedMediaSource;return i.s.D(o,"startstreaming",function(){i.ea=!0}),i.s.D(o,"endstreaming",function(){i.ea=!1}),i.s.ja(o,"sourceopen",function(){URL.revokeObjectURL(i.K),r.resolve()}),i.s.ja(i.i,"playing",function(){i.da=!0}),i.K=tD(o),i.i.src=i.K,o}return o=new MediaSource,i.s.ja(o,"sourceopen",function(){URL.revokeObjectURL(i.K),r.resolve()}),i.s.ja(i.i,"playing",function(){i.da=!0}),i.K=tD(o),i.i.src=i.K,o}function Hi(n,i,r,o,s){s=void 0!==s&&s;var u=Gc(r.mimeType,o);if(i==eK)Ii(n,u,n.u,r.external);else{var p=n.C.forceTransmux||s;if((!Za(u)||!n.u&&eq.includes(u))&&(p=!0),s=Ic(r.mimeType,o),p){if(p=Bc("audio",(o||"").split(",")),o=Bc("video",(o||"").split(",")),p&&o){n.o=!0,Hi(n,"audio",r,p,!0),Hi(n,"video",r,o,!0);return}(o=$b(s))&&(u=o(),n.m[i]=u,u=u.convertCodecs(i,s))}s=u+n.C.sourceBufferExtraFeatures,zf(n.I);try{var m=n.l.addSourceBuffer(s)}catch(i){throw new O(2,3,3015,i,"The mediaSource_ status was "+n.l.readyState+" expected 'open'")}n.u&&(m.mode=tN),n.s.D(m,"error",function(){n.j[i][0].p.reject(new O(2,3,3014,n.i.error?n.i.error.code:0))}),n.s.D(m,"updateend",function(){return Ki(n,i)}),n.g[i]=m,n.G[i]=u,n.ma[i]=!!r.drmInfos.length}}function Ii(n,i,r,o){n.h||(n.h=new Pc(n.F));var s=n.h;o=o||n.Y,n=n.W,"application/cea-608"==i||"application/cea-708"==i?s.i=null:(s.i=(0,eW[i])(),s.i.setSequenceMode?s.i.setSequenceMode(r):Sa('Text parsers should have a "setSequenceMode" method!'),s.i.setManifestType?s.i.setManifestType(n):Sa('Text parsers should have a "setManifestType" method!'),s.u=o)}function Li(n){return!n.A&&(!n.l||"ended"==n.l.readyState)}function Mi(n,i){return n=n.A||!Object.keys(n.g).length?null:i==eK?n.h.g:!(n=Ni(n,i))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null}function Oi(n,i){return n.A?null:i==eK?n.h.h:Kh(Ni(n,i))}function Ni(n,i){try{return n.g[i].buffered}catch(n){return null}}function Ri(n,i,r,o,s,u,p,m,y,x){var A,I,M,j,D,R,P,L,_,B;return p=void 0!==p&&p,m=void 0!==m&&m,y=void 0!==y&&y,x=void 0!==x&&x,K(function(z){var q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec;switch(z.g){case 1:if(i!=(A=eF).na){z.B(2);break}if(!n.u){z.B(3);break}return C(z,n.Ba,4);case 4:I=z.h,n.h.s=I;case 3:return C(z,(q=n.h,V=r,H=o?o.startTime:null,G=o?o.endTime:null,X=o?o.Z()[0]:null,K(function(n){return 1==n.g?C(n,Promise.resolve(),2):q.i&&q.j?null==H||null==G?(q.i.parseInit(hb(V)),n.return()):void(J=q.u?H:q.s,$={periodStart:q.s,segmentStart:H,segmentEnd:G,vttOffset:J},ee=q.i.parseMedia(hb(V),$,X).filter(function(n){return n.startTime>=q.l&&n.startTime<q.m}),q.j.append(ee),null==q.g&&(q.g=Math.max(H,q.l)),q.h=Math.min(G,q.m),E(n)):n.return()})),5);case 5:case 8:return z.return();case 2:if(x||!n.o){z.B(6);break}return C(z,Ri(n,A.P,r,o,s,u,p,m,y,!0),7);case 7:return C(z,Ri(n,A.$,r,o,s,u,p,m,y,!0),8);case 6:if(!n.g[i])return z.return();if(M=n.g[i].timestampOffset,j=n.G[i],n.m[i]&&(j=n.m[i].getOriginalMimeType()),o&&null!=(D=function(n,i,r,o,s,u){var p=null,m=hb(r);if(eq.includes(s))(u=Uh(m)).length&&o&&((i=u.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&i.data&&(p=Math.round(i.data)/1e3),n.Aa([{cueTime:o.startTime,data:m,frames:u,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(s.includes("/mp4")&&o&&0==o.timestampOffset&&o.aa&&o.aa.timescale){var y=o.aa.timescale;if(!isNaN(y)){var x=0,A=!1;(new Wf).box("moof",ag).box("traf",ag).O("tfdt",function(n){x=Xh(n.reader,n.version).baseMediaDecodeTime/y,A=!0,n.parser.stop()}).parse(r,!0),A&&(p=x)}}else s.includes("/mp4")||s.includes("/webm")||!ti(m)||(null!=(i=(m=(new ni).parse(m)).getStartTime(i))&&(p=i),(m=m.getMetadata()).length&&n.Aa(m,u,o?o.endTime:null));return p}(n,i,r,o,j,M))&&(R=o.startTime-D,(.001<=Math.abs(M-R)||p||m)&&(!y||0<R||!M)&&(M=R,n.ka&&(Si(n,i,function(){return Ti(n,i)}),Si(n,i,function(){return Ui(n,i,M)}))),P=i==A.$||!(A.$ in n.g),n.u&&P&&n.Ba.resolve(M)),u&&i==A.$&&(n.h||Ii(n,"application/cea-608",n.u,!1),n.H||(L=j.split(";",1)[0],n.H=new pb(L)),o?(_=n.H.i(r)).length&&function(n,i,r,o,s){var u=r+" "+o,p=new Map;i=t(i);for(var m=i.next();!m.done;m=i.next()){var y=m.value;m=y.stream,y=y.cue,p.has(m)||p.set(m,new Map),p.get(m).has(u)||p.get(m).set(u,[]),function Vc(n,i,r){i.startTime+=r,i.endTime+=r,i=t(i.nestedCues);for(var o=i.next();!o.done;o=i.next())Vc(n,o.value,r)}(n,y,s),y.startTime>=n.l&&y.startTime<n.m&&(p.get(m).get(u).push(y),m==n.A&&n.j.append([y]))}for(u=(s=t(p.keys())).next();!u.done;u=s.next())for(u=u.value,n.o.has(u)||n.o.set(u,new Map),m=(i=t(p.get(u).keys())).next();!m.done;m=i.next())m=m.value,y=p.get(u).get(m),n.o.get(u).set(m,y);n.g=null==n.g?Math.max(r,n.l):Math.min(n.g,Math.max(r,n.l)),n.h=Math.max(n.h,Math.min(o,n.m))}(n.h,_,o.startTime,o.endTime,M):n.H.init(r)),!n.m[i]){z.B(9);break}return C(z,n.m[i].transmux(r,s,o,n.l.duration,i),10);case 10:r=z.h;case 9:return en=n,ea=r,eo=o?o.startTime:null,eu=i,ec=en.ma[eu],en.C.insertFakeEncryptionInInit&&null==eo&&ec&&(xd()||vd()||wd("SOPOpenBrowser"))&&"mp4"==en.G[eu].split(";")[0].split("/")[1]&&(ea=function(n){function b(){r=!0}function c(n){o.push(n),ag(n)}n=hb(n);var i,r=!1,o=[],s=[];if((new Wf).box("moov",c).box("trak",c).box("mdia",c).box("minf",c).box("stbl",c).O("stsd",function(n){i=n,o.push(n),cg(n)}).O("encv",b).O("enca",b).O("dvav",function(n){s.push({box:n,Ma:1701733238})}).O("dva1",function(n){s.push({box:n,Ma:1701733238})}).O("dvh1",function(n){s.push({box:n,Ma:1701733238})}).O("dvhe",function(n){s.push({box:n,Ma:1701733238})}).O("hev1",function(n){s.push({box:n,Ma:1701733238})}).O("hvc1",function(n){s.push({box:n,Ma:1701733238})}).O("avc1",function(n){s.push({box:n,Ma:1701733238})}).O("avc3",function(n){s.push({box:n,Ma:1701733238})}).O("ac-3",function(n){s.push({box:n,Ma:1701733217})}).O("ec-3",function(n){s.push({box:n,Ma:1701733217})}).O("ac-4",function(n){s.push({box:n,Ma:1701733217})}).O("mp4a",function(n){s.push({box:n,Ma:1701733217})}).parse(n),r)return n;if(0==s.length||!i)throw kg(n),new O(2,3,3019);s.reverse();for(var u=t(s),p=u.next();!p.done;p=u.next())p=p.value,n=function(n,i,r,o,s){var u=tp.value(),p=n.subarray(r.start,r.start+r.size),m=nb(p),y=new Uint8Array(r.size+u.byteLength);for(y.set(p,0),(p=nb(y)).setUint32(4,s),y.set(u,r.size),s=m.getUint32(4),p.setUint32(r.size+16,s),Fh(y,0,y.byteLength),s=new Uint8Array(n.byteLength+y.byteLength),r=vd()?r.start:r.start+r.size,u=n.subarray(r),s.set(n.subarray(0,r)),s.set(y,r),s.set(u,r+y.byteLength),o=(n=t(o)).next();!o.done;o=n.next())Fh(s,(o=o.value).start,o.size+y.byteLength);return y=nb(s,i.start),i=bg(i),n=y.getUint32(i),y.setUint32(i,n+1),s}(n,i,p.box,o,p.Ma);return n}(ea)),r=ea,o&&n.u&&i!=A.na&&(p||m)&&(B=o.startTime,Si(n,i,function(){return Ti(n,i)}),Si(n,i,function(){return Ui(n,i,B)})),C(z,Si(n,i,function(){var o=r;if("video"==i&&n.N){var s=n.N;s.g&&s.g.appendBuffer(o,"video",s.o,-M)}n.g[i].appendBuffer(o)}),11);case 11:E(z)}})}function Zi(n,i){var r;return K(function(o){return 1==o.g?i==(r=eF).na?n.h?C(o,n.h.remove(0,1/0),0):o.return():C(o,Si(n,i,function(){return Yi(n,i,0,n.l.duration)}),4):n.o?C(o,Si(n,r.P,function(){return Yi(n,r.P,0,n.l.duration)}),0):o.B(0)})}function Yi(n,i,r,o){o<=r?Ki(n,i):n.g[i].remove(r,o)}function Ti(n,i){var r=n.g[i].appendWindowStart,o=n.g[i].appendWindowEnd;n.g[i].abort(),n.g[i].appendWindowStart=r,n.g[i].appendWindowEnd=o,Ki(n,i)}function Ui(n,i,r){0>r&&(r+=.001),n.g[i].timestampOffset=r,Ki(n,i)}function Ki(n,i){if(!n.A){var r=n.j[i][0];r&&(r.p.resolve(),dj(n,i))}}function Si(n,i,r){return zf(n.I),r={start:r,p:new Ze},n.j[i].push(r),1==n.j[i].length&&ej(n,i),r.p}function cj(n,i){var r,o,s,u,p,m;return K(function(y){switch(y.g){case 1:for(s in zf(n.I),r=[],o={},n.g)o.yc=new Ze,u={start:function(n){return function(){return n.yc.resolve()}}(o),p:o.yc},n.j[s].push(u),r.push(o.yc),1==n.j[s].length&&u.start(),o={yc:o.yc};return sa(y,2),C(y,Promise.all(r),4);case 4:ua(y,3);break;case 2:throw va(y);case 3:return sa(y,5,6),C(y,i(),6);case 6:for(p in wa(y),n.g)dj(n,p);ya(y,0);break;case 5:throw m=va(y),new O(2,3,3015,m,n.i.error||"No error in the media element")}})}function dj(n,i){n.j[i].shift(),ej(n,i)}function ej(n,i){var r=n.j[i][0];if(r)try{r.start()}catch(o){"QuotaExceededError"==o.name?r.p.reject(new O(2,3,3017,i)):r.p.reject(new O(2,3,3015,o,n.i.error||"No error in the media element")),dj(n,i)}}function hj(n,i){return cj(n,function(){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H;return K(function(G){switch(G.g){case 1:for(m in r=eF,n.A=!0,n.o=!1,o=n.i.currentTime,s=n.i.autoplay,u=n.i.paused,n.da&&(n.i.autoplay=!1),ta(G,2),n.s.Za(),p=[],n.m)p.push(n.m[m].destroy());for(y in n.j)for(A=(x=n.j[y])[0],n.j[y]=x.slice(0,1),A&&p.push(A.p.catch($c)),M=(I=t(x.slice(1))).next();!M.done;M=I.next())M.value.p.reject(new O(2,7,7003,void 0));for(j in n.g){D=n.g[j];try{n.l.removeSourceBuffer(D)}catch(n){}}return C(G,Promise.all(p),4);case 4:return n.m={},n.g={},R=n.l.duration,n.J=new Ze,n.l=Ei(n,n.J),C(G,n.J,5);case 5:for(!isNaN(R)&&R?n.l.duration=R:!isNaN(n.V)&&n.V&&(n.l.duration=n.V),P=new Ze,L=n.l.sourceBuffers,_=i.size,B=0,n.s.D(L,"addsourcebuffer",function(){++B===_&&P.resolve()}),q=(z=t(i.keys())).next();!q.done;q=z.next())V=q.value,H=i.get(V),Hi(n,V,H,H.codecs),n.o?(n.j[r.P]=[],n.j[r.$]=[]):n.j[V]=[];return n.i.currentTime=o,C(G,P,2);case 2:wa(G),n.A=!1,zf(n.I),n.s.ja(n.i,"canplaythrough",function(){zf(n.I),n.i.autoplay=s,u||n.i.play()}),ya(G,0)}})})}(D=Di.prototype).destroy=function(){return this.I.destroy()},D.init=function(n,i,r,o){i=void 0!==i&&i,r=void 0===r?"UNKNOWN":r,o=void 0!==o&&o;var s,u,p,m,y,x=this;return K(function(A){if(1==A.g)return s=eF,C(A,x.J,2);for(x.u=i,x.W=r,x.za=o,x.ka=!x.u&&"HLS"==x.W&&!x.za,p=(u=t(n.keys())).next();!p.done;p=u.next())m=p.value,y=n.get(m),Hi(x,m,y,y.codecs),x.o?(x.j[s.P]=[],x.j[s.$]=[]):x.j[m]=[];E(A)})},D.configure=function(n){this.C=n},D.pb=function(){var n={total:this.A?[]:Nh(this.i.buffered),audio:this.A?[]:Nh(Ni(this,"audio")),video:this.A?[]:Nh(Ni(this,"video")),text:[]};if(this.h){var i=this.h.g,r=this.h.h;null!=i&&null!=r&&n.text.push({start:i,end:r})}return n},D.remove=function(n,i,r){var o,s=this;return K(function(u){return 1==u.g?n==(o=eF).na?C(u,s.h.remove(i,r),0):C(u,Si(s,n,function(){return Yi(s,n,i,r)}),4):s.o?C(u,Si(s,o.P,function(){return Yi(s,o.P,i,r)}),0):u.B(0)})},D.flush=function(n){var i,r=this;return K(function(o){return 1==o.g?n==(i=eF).na?o.return():C(o,Si(r,n,function(){r.i.currentTime-=.001,Ki(r,n)}),2):r.o?C(o,Si(r,i.P,function(){var n=i.P;r.i.currentTime-=.001,Ki(r,n)}),0):o.B(0)})},D.endOfStream=function(n){var i=this;return K(function(r){return C(r,cj(i,function(){Li(i)||"closed"===i.l.readyState||(n?i.l.endOfStream(n):i.l.endOfStream())}),0)})},D.Pa=function(n){var i=this;return K(function(r){return C(r,cj(i,function(){if(n<i.l.duration)for(var r in i.g){var o={start:function(){},p:new Ze};i.j[r].unshift(o)}i.l.duration=n,i.V=n}),0)})},D.getDuration=function(){return this.l.duration};var tD=n.URL.createObjectURL,tN="sequence";function jj(n,i,r){this.i=n,this.o=i,this.u=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.C=!0,this.F=0,this.A=void 0===r||r,this.G=0,this.m=!1}function kj(n,i,r){this.j=r,this.l=n,this.s=lj(n),this.g=n.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=i,this.i=function(){}}function nj(n){this.g=n}function lj(n){if(n.g.paused||0==n.g.buffered.length)var i=!1;else e:{i=n.g.currentTime,n=t(Nh(n.g.buffered));for(var r=n.next();!r.done;r=n.next())if(!(i<(r=r.value).start-.1||i>r.end-.5)){i=!0;break e}i=!1}return i}function oj(n,i,r,o,s){var u=this;this.u=s,this.g=n,this.A=i,this.s=r,this.l=new Af,this.j=!1,this.F=n.readyState,this.C=this.i=0,this.h=o,this.o=!1,this.l.D(n,"waiting",function(){return pj(u)}),this.m=new qd(function(){pj(u)}).$a(this.s.gapJumpTimerTime)}function pj(n){if(0!=n.g.readyState){if(n.g.seeking){if(!n.j)return}else n.j=!1;if(!n.g.paused||n.g.currentTime==n.i&&(n.g.autoplay||n.g.currentTime!=n.i)){if(n.g.readyState!=n.F&&(n.F=n.g.readyState),!(s=!n.h)){var i,r,o,s,u=(s=n.h).l,p=lj(u),m=u.g.currentTime,y=Date.now()/1e3;(s.g!=m||s.s!=p)&&(s.m=y,s.g=m,s.s=p,s.h=!1),(p=(m=y-s.m)>=s.u&&p&&!s.h)&&(s.i(s.g,m),s.h=!0,s.g=u.g.currentTime,s.o++,s.j(new Q("stalldetected"))),s=!p}s&&(s=n.g.currentTime,i=u=n.g.buffered,r=s,o=n.s.gapDetectionThreshold,null==(p=!i||!i.length||1==i.length&&1e-6>i.end(0)-i.start(0)?null:0<=(i=Nh(i).findIndex(function(n,i,s){return n.start>r&&(0==i||s[i-1].end-r<=o)}))?i:null)||0==p&&!n.o||(m=u.start(p))>=n.A.qb()||.001>m-s||(0!=p&&u.end(p-1),n.g.currentTime=m,s==n.i&&(n.i=m),n.C++,n.u(new Q("gapjumped"))))}}}function qj(n,i,r,o){i==HTMLMediaElement.HAVE_NOTHING||n.readyState>=i?o():(i=tR.value().get(i),r.ja(n,i,o))}(D=jj.prototype).getDuration=function(){return this.j},D.$g=function(){return this.g},D.qf=function(n){this.i=n},D.Pa=function(n){this.j=n},D.eh=function(){return this.i},D.mg=function(n){this.s=n},D.pc=function(n){this.C=n},D.Xd=function(n){this.u=n},D.ng=function(n){this.o=n},D.Tg=function(){return this.o},D.dg=function(n,i){if(0!=n.length){var r=n[n.length-1].end+i;this.Sd(n[0].start+i),this.g=n.reduce(function(n,i){return Math.max(n,i.end-i.start)},this.g),this.h=Math.max(this.h,r),null!=this.i&&this.A&&!this.m&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},D.Xc=function(n){if(0!=n.length){var i=n[0].startTime,r=n[0].endTime,o=(Date.now()+this.s)/1e3;n=t(n);for(var s=n.next();!s.done;s=n.next())o<(s=s.value).startTime||(i=Math.min(i,s.startTime),r=Math.max(r,s.endTime),this.g=Math.max(this.g,s.endTime-s.startTime));this.Sd(i),this.h=Math.max(this.h,r),null!=this.i&&this.A&&!this.m&&(this.i=o-this.h-this.g)}},D.Nd=function(){this.m=!0},D.yh=function(){return this.m},D.Sd=function(n){this.l=null==this.l?n:Math.min(this.l,n)},D.Ye=function(n){this.g=Math.max(this.g,n)},D.offset=function(n){null!=this.l&&(this.l+=n),null!=this.h&&(this.h+=n)},D.R=function(){return 1/0==this.j&&!this.C},D.Rb=function(){return 1/0!=this.j&&!this.C},D.eb=function(){return Math.max(this.F,this.Bb()-this.u)},D.qg=function(n){this.F=n},D.Bb=function(){return this.R()||this.Rb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j},D.Rc=function(n){var i=Math.max(this.l,this.F);return 1/0==this.u?Math.ceil(1e3*i)/1e3:Math.max(i,Math.min(this.Bb()-this.u+n,this.qb()))},D.hc=function(){return this.Rc(0)},D.qb=function(){return Math.max(0,this.Bb()-(this.R()||this.Rb()?this.o:0))},D.ug=function(){return null!=this.i&&(null==this.h||!this.A)},D.lg=function(n){this.G=n},N("shaka.media.PresentationTimeline",jj),jj.prototype.setAvailabilityTimeOffset=jj.prototype.lg,jj.prototype.usingPresentationStartTime=jj.prototype.ug,jj.prototype.getSeekRangeEnd=jj.prototype.qb,jj.prototype.getSeekRangeStart=jj.prototype.hc,jj.prototype.getSafeSeekRangeStart=jj.prototype.Rc,jj.prototype.getSegmentAvailabilityEnd=jj.prototype.Bb,jj.prototype.setUserSeekStart=jj.prototype.qg,jj.prototype.getSegmentAvailabilityStart=jj.prototype.eb,jj.prototype.isInProgress=jj.prototype.Rb,jj.prototype.isLive=jj.prototype.R,jj.prototype.offset=jj.prototype.offset,jj.prototype.notifyMaxSegmentDuration=jj.prototype.Ye,jj.prototype.notifyMinSegmentStartTime=jj.prototype.Sd,jj.prototype.isStartTimeLocked=jj.prototype.yh,jj.prototype.lockStartTime=jj.prototype.Nd,jj.prototype.notifySegments=jj.prototype.Xc,jj.prototype.notifyTimeRange=jj.prototype.dg,jj.prototype.getDelay=jj.prototype.Tg,jj.prototype.setDelay=jj.prototype.ng,jj.prototype.setSegmentAvailabilityDuration=jj.prototype.Xd,jj.prototype.setStatic=jj.prototype.pc,jj.prototype.setClockOffset=jj.prototype.mg,jj.prototype.getPresentationStartTime=jj.prototype.eh,jj.prototype.setDuration=jj.prototype.Pa,jj.prototype.setPresentationStartTime=jj.prototype.qf,jj.prototype.getMaxSegmentDuration=jj.prototype.$g,jj.prototype.getDuration=jj.prototype.getDuration,kj.prototype.release=function(){this.j=this.l=null,this.i=function(){}},oj.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.A=this.u=null},oj.prototype.af=function(){this.o=!0,pj(this)};var tR=new Hf(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function sj(n,i,r,o){var s=this;this.g=n,this.m=i,this.s=r,this.l=null,this.j=function(){return null==s.l&&(s.l=o()),s.l},this.o=!1,this.h=new Af,this.i=new tj(n),qj(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){uj(s,s.j())})}function vj(n){return n.o?n.g.currentTime:n.j()}function wj(n,i){0<n.g.readyState?xj(n.i,i):qj(n.g,HTMLMediaElement.HAVE_METADATA,n.h,function(){uj(n,n.j())})}function uj(n,i){.001>Math.abs(n.g.currentTime-i)?yj(n):(n.h.ja(n.g,"seeking",function(){yj(n)}),xj(n.i,n.g.currentTime&&0!=n.g.currentTime?n.g.currentTime:i))}function yj(n){n.o=!0,n.h.D(n.g,"seeking",function(){return n.m()}),n.s(n.g.currentTime)}function tj(n){var i=this;this.h=n,this.m=10,this.l=this.j=this.i=0,this.g=new qd(function(){0>=i.i?i.g.stop():i.h.currentTime!=i.j?i.g.stop():(i.h.currentTime=i.l,i.i--)})}function xj(n,i){n.j=n.h.currentTime,n.l=i,n.i=n.m,n.h.currentTime=i,n.g.$a(.1)}function zj(n){this.g=n,this.j=!1,this.h=null,this.i=new Af}function Aj(n,i,r,o,s,u){var p=this;this.i=n,this.g=i.presentationTimeline,this.A=i.minBufferTime||0,this.l=r,this.u=s,this.s=null,this.o=function(n,i,r){if(!i.stallEnabled)return null;var o=i.stallSkip;return(i=new kj(new nj(n),i.stallThreshold,r)).i=function(){o?n.currentTime+=o:(n.pause(),n.play())},i}(n,r,u),this.j=new oj(n,i.presentationTimeline,r,this.o,u),this.h=new sj(n,function(){e:{var n=p.j;n.j=!0,n.o=!1;var i=vj(p.h);if(.001<Math.abs((n=Cj(p,i))-i)&&(i=Date.now()/1e3,!p.s||p.s<i-1)){p.s=i,wj(p.h,n),n=void 0;break e}p.u(),n=void 0}return n},function(n){var i=p.j;i.g.seeking&&!i.j&&(i.j=!0,i.i=n)},function(){var n=o;return null==n?n=1/0>p.g.getDuration()?p.g.hc():p.g.qb():0>n&&(n=p.g.qb()+n),Dj(p,Ej(p,n))}),this.m=new qd(function(){if(0!=p.i.readyState&&!p.i.paused){var n=vj(p.h),i=p.g.hc(),r=p.g.qb();3>r-i&&(i=r-3),n<i&&(n=Cj(p,n),p.i.currentTime=n)}})}function Dj(n,i){var r=n.g.getDuration();return i>=r?r-n.l.durationBackoff:i}function Cj(n,i){var r=Math.max(n.A,n.l.rebufferingGoal),o=n.l.safeSeekOffset,s=n.g.hc(),u=n.g.qb(),p=n.g.getDuration();3>u-s&&(s=u-3);var m=n.g.Rc(r),y=n.g.Rc(o);return r=n.g.Rc(r+o),i>=p?Dj(n,i):i>u?u:i<s?Lh(n.i.buffered,y)?y:r:i>=m||Lh(n.i.buffered,i)?i:r}function Ej(n,i){var r=n.g.hc();return i<r?r:i>(n=n.g.qb())?n:i}function Fj(n){this.g=n,this.m=null,this.j=0,this.o=!1}function Gj(n,i){n=t(n.g);for(var r=n.next();!r.done;r=n.next())i(r.value)}function Ij(n,i,r){return n=new S(n,n+i,function(){return r},0,null,null,n,n,n+i),new Fj([n])}function Hj(n,i,r){this.i=n,this.g=i,this.h=r}function Jj(){Fj.call(this,[]),this.h=[]}function Kj(n){var i=this;this.g=n,this.h=this.g.Ed(),this.i=new qd(function(){i.g.bg(.25*i.h)})}function Lj(n){var i=this;this.h=n,this.g=new Set,this.i=new qd(function(){Mj(i,!1)}).$a(.25)}function Mj(n,i){for(var r=t(n.g),o=r.next();!o.done;o=r.next())o.value.j(n.h.currentTime,i)}function Nj(n){jf.call(this),this.g=new Map,this.h=n}function Rj(n){jf.call(this);var i=this;this.g=new Set,this.i=n,this.h=new qd(function(){for(var n=i.i(),r=t(i.g),o=r.next();!o.done;o=r.next())(o=o.value).endTime<n.start&&(i.g.delete(o),o=new Q("regionremove",new Map([["region",o]])),i.dispatchEvent(o))}).$a(2)}function Sj(n,i){jf.call(this);var r=this;this.i=n,this.l=i,this.g=new Map,this.m=[{Yb:null,Xb:tP,Qb:function(n,i){return Uj(r,"enter",n,i)}},{Yb:tO,Xb:tP,Qb:function(n,i){return Uj(r,"enter",n,i)}},{Yb:tL,Xb:tP,Qb:function(n,i){return Uj(r,"enter",n,i)}},{Yb:tP,Xb:tO,Qb:function(n,i){return Uj(r,"exit",n,i)}},{Yb:tP,Xb:tL,Qb:function(n,i){return Uj(r,"exit",n,i)}},{Yb:tO,Xb:tL,Qb:function(n,i){return Uj(r,"skip",n,i)}},{Yb:tL,Xb:tO,Qb:function(n,i){return Uj(r,"skip",n,i)}}],this.h=new Af,this.h.D(this.i,"regionremove",function(n){r.g.delete(n.region)})}function Uj(n,i,r,o){i=new Q(i,new Map([["region",r],["seeking",o]])),n.dispatchEvent(i)}sj.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},tj.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(D=zj.prototype).ie=function(){var n=this;qj(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){null==n.h||0==n.h?n.j=!0:(n.i.ja(n.g,"seeking",function(){n.j=!0}),n.g.currentTime=Math.max(0,n.g.currentTime+n.h))})},D.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},D.je=function(n){this.h=this.j?this.h:n},D.qd=function(){return(this.j?this.g.currentTime:this.h)||0},D.Bf=function(){return 0},D.Af=function(){return 0},D.cg=function(){},(D=Aj.prototype).ie=function(){this.m.$a(.25)},D.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},D.je=function(n){wj(this.h,n)},D.qd=function(){var n=vj(this.h);return 0<this.i.readyState&&!this.i.paused?Ej(this,n):n},D.Bf=function(){return this.o?this.o.o:0},D.Af=function(){return this.j.C},D.cg=function(){this.j.af()},(D=Fj.prototype).Ab=function(){return this.g.length},D.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},D.Ch=function(){this.o=!0},D.find=function(n){for(var i=this.g.length-1,r=i;0<=r;--r){var o=this.g[r],s=r<i?this.g[r+1].startTime:o.endTime;if(n>=o.startTime&&n<s)return r+this.j}return this.g.length&&n<this.g[0].startTime?this.j:null},D.get=function(n){return 0==this.g.length?null:0>(n-=this.j)||n>=this.g.length?null:this.g[n]},D.offset=function(n){if(!this.o)for(var i=t(this.g),r=i.next();!r.done;r=i.next())r.value.offset(n)},D.Qd=function(n){if(!this.o&&n.length){var i=Math.round(1e3*n[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<i}),this.g.push.apply(this.g,w(n))}},D.Wc=function(n,i){var r=this;n=n.filter(function(n){return n.endTime>i&&(0==r.g.length||n.endTime>r.g[0].startTime)}),this.Qd(n),this.bb(i)},D.bb=function(n){if(!this.o){var i=this.g.length;this.g=this.g.filter(function(i){return i.endTime>n}),this.j+=i-this.g.length}},D.bc=function(n,i,r){if(r=void 0!==r&&r,!this.o){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=i)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=n)this.g.shift(),r||this.j++;else break;0!=this.g.length&&(n=this.g[this.g.length-1],this.g[this.g.length-1]=new S(n.startTime,i,n.A,n.Qa,n.wa,n.aa,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd,n.g,n.tilesLayout,n.u,n.ca,n.status,n.aes128Key),this.g[this.g.length-1].i=n.i)}},D.Yd=function(n,i){var r=this;this.o||(this.m&&this.m.stop(),this.m=new qd(function(){var n=i();n?r.g.push.apply(r.g,w(n)):(r.m.stop(),r.m=null)}),this.m.$a(n))},Fj.prototype[Symbol.iterator]=function(){return this.Nb(0)},Fj.prototype.Nb=function(n){var i=this.find(n);if(null==i)return null;i--;var r=this.get(i+1),o=-1;if(r&&0<r.g.length)for(var s=r.g.length-1;0<=s;--s){var u=r.g[s];if(n>=u.startTime&&n<u.endTime){for(;s&&!u.j;)s--,u=r.g[s];if(!u.j)return Ra("No independent partial segment found!"),null;i++,o=s-1;break}}return new Hj(this,i,o)},N("shaka.media.SegmentIndex",Fj),Fj.forSingleSegment=Ij,Fj.prototype.getIteratorForTime=Fj.prototype.Nb,Fj.prototype.updateEvery=Fj.prototype.Yd,Fj.prototype.fit=Fj.prototype.bc,Fj.prototype.evict=Fj.prototype.bb,Fj.prototype.mergeAndEvict=Fj.prototype.Wc,Fj.prototype.offset=Fj.prototype.offset,Fj.prototype.get=Fj.prototype.get,Fj.prototype.find=Fj.prototype.find,Fj.prototype.markImmutable=Fj.prototype.Ch,Fj.prototype.release=Fj.prototype.release,Hj.prototype.Kg=function(){return this.g},Hj.prototype.current=function(){var n=this.i.get(this.g);return n&&0<n.g.length&&n.o&&this.h>=n.g.length&&(this.g++,this.h=0,n=this.i.get(this.g)),n&&0<n.g.length?n.g[this.h]:n},Hj.prototype.next=function(){var n=this.i.get(this.g);return n&&0<n.g.length?(this.h++,n.o&&this.h==n.g.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:n=this.current(),done:!n}},N("shaka.media.SegmentIterator",Hj),Hj.prototype.next=Hj.prototype.next,Hj.prototype.current=Hj.prototype.current,Hj.prototype.currentPosition=Hj.prototype.Kg,oa(Jj,Fj),(D=Jj.prototype).clone=function(){var n=new Jj;return n.h=this.h.slice(),n},D.release=function(){for(var n=t(this.h),i=n.next();!i.done;i=n.next())i.value.release();this.h=[]},D.find=function(n){for(var i=0,r=t(this.h),o=r.next();!o.done;o=r.next()){var s=(o=o.value).find(n);if(null!=s)return s+i;i+=o.j+o.Ab()}return null},D.get=function(n){for(var i=0,r=t(this.h),o=r.next();!o.done;o=r.next()){var s=(o=o.value).get(n-i);if(s)return s;i+=o.j+o.Ab()}return null},D.offset=function(){},D.Qd=function(){},D.bb=function(){},D.Wc=function(){},D.bc=function(){},D.Yd=function(){},N("shaka.media.MetaSegmentIndex",Jj),Jj.prototype.updateEvery=Jj.prototype.Yd,Jj.prototype.fit=Jj.prototype.bc,Jj.prototype.mergeAndEvict=Jj.prototype.Wc,Jj.prototype.evict=Jj.prototype.bb,Jj.prototype.merge=Jj.prototype.Qd,Jj.prototype.offset=Jj.prototype.offset,Jj.prototype.get=Jj.prototype.get,Jj.prototype.find=Jj.prototype.find,Jj.prototype.release=Jj.prototype.release,Kj.prototype.release=function(){this.set(this.ec()),this.i&&(this.i.stop(),this.i=null),this.g=null},Kj.prototype.set=function(n){if(this.h!=n)e:{if(this.h=n,this.i.stop(),0<=this.h)try{var i=this.h;this.g.Ed()!=i&&this.g.rf(i);break e}catch(n){}this.i.$a(.25),0!=this.g.Ed()&&this.g.rf(0)}},Kj.prototype.ec=function(){return this.g.ec()},Lj.prototype.release=function(){this.i.stop();for(var n=t(this.g),i=n.next();!i.done;i=n.next())i.value.release();this.g.clear()},oa(Nj,jf),Nj.prototype.release=function(){this.g.clear(),jf.prototype.release.call(this)},Nj.prototype.j=function(n){for(var i=t(this.g.values()),r=i.next();!r.done;r=i.next()){r=r.value;e:{for(var o=r.$c,s=o.length-1;0<=s;s--){var u=o[s];if(u.position<=n){o=u.Ve;break e}}o=null}if((s=o)&&(s=!((s=r.If)===o||s&&o&&s.bandwidth==o.bandwidth&&s.audioSamplingRate==o.audioSamplingRate&&s.codecs==o.codecs&&s.contentType==o.contentType&&s.frameRate==o.frameRate&&s.height==o.height&&s.mimeType==o.mimeType&&s.channelsCount==o.channelsCount&&s.pixelAspectRatio==o.pixelAspectRatio&&s.width==o.width)),s)e:{if(s=n,u=o.contentType,(u=this.h()[u])&&0<u.length){var p=u[u.length-1].end;if(s>=u[0].start&&s<p){s=!0;break e}}s=!1}s&&(r.If=o,JSON.stringify(o),r=new Q("qualitychange",new Map([["quality",o],["position",n]])),this.dispatchEvent(r))}},oa(Rj,jf),Rj.prototype.release=function(){this.g.clear(),this.h.stop(),jf.prototype.release.call(this)},oa(Sj,jf),Sj.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,jf.prototype.release.call(this)},Sj.prototype.j=function(n,i){if(!this.l||0!=n){this.l=!1;for(var r=t(this.i.g),o=r.next();!o.done;o=r.next()){o=o.value;var s=this.g.get(o),u=n<o.startTime?tO:n>o.endTime?tL:tP;this.g.set(o,u);for(var p=t(this.m),m=p.next();!m.done;m=p.next())(m=m.value).Yb==s&&m.Xb==u&&m.Qb(o,i)}}};var tO=1,tP=2,tL=3;function Xj(n,i,r){this.i=n,this.h=i,this.j=0,this.l=r,this.g=new Map}function Yj(n,i,r){if(r=void 0!==r&&r,n.h.segmentIndex){var o=n.h.segmentIndex.Nb(Math.max(i.startTime,n.j));if(o){var s=i;for(r&&(s=o.next().value)&&s.startTime==i.startTime&&s.endTime==i.endTime&&(s=null);n.g.size<n.i&&null!=s&&(i=!0,s.l&&null!=s.wa&&(i=!1),2==s.Pb()&&(i=!1),i&&!n.g.has(s)&&(ak(i=new Zj(n.l),s,n.h),n.g.set(s,i)),n.j=s.startTime,!n.h.fastSwitching||!s.Zc||!s.Md);)s=o.next().value}}}function ck(n){if(0!==n.g.size){for(var i=t(n.g.keys()),r=i.next();!r.done;r=i.next())(r=r.value)&&dk(n,r);n.j=0}}function dk(n,i){var r=n.g.get(i);n.g.delete(i),r&&r.abort()}function Zj(n){this.i=n,this.g=this.h=null}function ak(n,i,r){var o=new Uint8Array(0);n.g=n.i(i,r,function(i){return K(function(r){if(1==r.g)return o=0<o.byteLength?lg(o,i):i,n.h?C(r,n.h(o),3):r.B(0);o=new Uint8Array(0),E(r)})})}function fk(n,i,r,o,s){return n=qf(n,o,s),(0!=i||null!=r)&&(n.headers.Range=r?"bytes="+i+"-"+r:"bytes="+i+"-"),n}function gk(n,i){var r=this;this.g=i,this.m=n,this.h=null,this.u=1,this.o=this.j=null,this.F=0,this.C=!1,this.i=new Map,this.A=!1,this.G=null,this.s=!1,this.l=new yf(function(){var n,i,o,s,u;return n=r,K(function(r){if(1==r.g){for(i=[],s=(o=t(n.i.values())).next();!s.done;s=o.next())ik(u=s.value),i.push(jk(u));return C(r,Promise.all(i),2)}n.i.clear(),n.g=null,n.m=null,n.h=null,E(r)})}),this.H=Date.now()/1e3}function qk(n,i){var r=n.i.get("video");if(r){var o=r.stream;o&&(i?(i=o.trickModeVideo)&&!r.Ub&&(rk(n,i,!1,0,!1),r.Ub=o):(o=r.Ub)&&(r.Ub=null,rk(n,o,!0,0,!1)))}}function sk(n,i,r,o,s,u){r=void 0!==r&&r,o=void 0===o?0:o,s=void 0!==s&&s,u=void 0!==u&&u,n.j=i,n.A&&(i.video&&rk(n,i.video,r,o,s,u),i.audio&&rk(n,i.audio,r,o,s,u))}function tk(n,i){K(function(r){if(1==r.g)return n.o=i,n.A?i.segmentIndex?r.B(2):C(r,i.createSegmentIndex(),2):r.return();rk(n,i,!0,0,!1),E(r)})}function rk(n,i,r,o,s,u){var p,m,y,x,A,I,M,j,D,R,P,L,_=n.i.get(i.type);_||i.type!=eK?_&&(_.Ub&&(i.trickModeVideo?(_.Ub=i,i=i.trickModeVideo):_.Ub=null),_.stream!=i||s)&&(_.ra&&(A=_.ra,(I=i)&&I!==A.h&&(ck(A),A.h=I)),i.type==eK&&(s=Gc(i.mimeType,i.codecs),Ii(n.g.T,s,n.m.sequenceMode,i.external)),_.stream.closeSegmentIndex&&_.stream.closeSegmentIndex(),_.stream=i,_.X=null,_.Cf=!!u,r&&(_.Lc?_.Zd=!0:_.Da?(_.wb=!0,_.vd=o,_.Zd=!0):(ik(_),uk(n,_,!0,o).catch(function(i){n.g&&n.g.onError(i)}))),(p=n,m=_,K(function(n){if(1==n.g)return m.Na?(y=m.stream,x=m.Na,y.segmentIndex?n.B(2):C(n,y.createSegmentIndex(),2)):n.return();if(m.Na!=x||m.stream!=y)return n.return();var i=p.g.Dd(),r=Oi(p.g.T,m.type),o=m.stream.segmentIndex.find(m.Ca?m.Ca.endTime:i),s=null==o?null:m.stream.segmentIndex.get(o);o=s&&s.wa?s.wa-s.Qa:null,s&&!o&&(o=(s.endTime-s.getStartTime())*(m.stream.bandwidth||0)/8),o?((s=s.aa)&&(o+=(s.wa?s.wa-s.Qa:null)||0),i=8*o/(s=p.g.getBandwidthEstimate())<(r||0)-i-Math.max(p.m.minBufferTime||0,p.h.rebufferingGoal)||m.Na.h.g>o):i=!1,i&&m.Na.abort(),E(n)})).catch(function(i){n.g&&n.g.onError(i)})):(M=i,K(function(i){switch(i.g){case 1:return j=eF,n.F++,D=n.F,sa(i,2),C(i,Zi(n.g.T,j.na),4);case 4:ua(i,3);break;case 2:R=va(i),n.g&&n.g.onError(R);case 3:P=Gc(M.mimeType,M.codecs),Ii(n.g.T,P,n.m.sequenceMode,M.external),(n.g.T.F.isTextVisible()||n.h.alwaysStreamText)&&n.F==D&&(L=nk(n,M),n.i.set(j.na,L),ok(n,L,0)),E(i)}}))}function wk(n,i){i.Lc||i.wb||(i.Da?(i.wb=!0,i.vd=0):null==Mi(n.g.T,i.type)?null==i.ib&&ok(n,i,0):(ik(i),uk(n,i,!1,0).catch(function(i){n.g&&n.g.onError(i)})))}function nk(n,i){return{stream:i,type:i.type,X:null,ra:kk(n,i),Ca:null,Db:null,Re:null,Pe:null,Oe:null,Ub:null,endOfStream:!1,Da:!1,ib:null,wb:!1,vd:0,Zd:!1,Lc:!1,dd:!0,Xe:!1,ff:!1,Tc:!1,Na:null}}function kk(n,i){return"video"!==i.type&&"audio"!==i.type?null:0<n.h.segmentPrefetchLimit?new Xj(n.h.segmentPrefetchLimit,i,function(i,r,o){return xk(n,i,r,o)}):null}function Hk(n,i,r,o,s,u,p){var m,y,x,A,I,M;return p=void 0!==p&&p,K(function(j){switch(j.g){case 1:var D,R,P,L,_,B;return m=o.closedCaptions&&0<o.closedCaptions.size,x=null!=o.emsgSchemeIdUris&&0<o.emsgSchemeIdUris.length||n.h.dispatchAllEmsgBoxes,A=n.h.parsePrftBox&&!n.C,(x||A)&&(y=new Wf),x&&y.O("emsg",function(i){var r=o.emsgSchemeIdUris;if(0===i.version)var u=i.reader.ad(),p=i.reader.ad(),m=i.reader.L(),y=i.reader.L(),x=i.reader.L(),A=i.reader.L(),I=s.startTime+y/m;else m=i.reader.L(),y=(I=i.reader.oc()/m+s.timestampOffset)-s.startTime,x=i.reader.L(),A=i.reader.L(),u=i.reader.ad(),p=i.reader.ad();i=i.reader.ub(i.reader.getLength()-i.reader.qa()),(r&&r.includes(u)||n.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==u?n.g.Fh():(r=(new Map).set("detail",{startTime:I,endTime:I+x/m,schemeIdUri:u,value:p,timescale:m,presentationTimeDelta:y,eventDuration:x,id:A,messageData:i}),(r=new Q("emsg",r)).cancelable=!0,n.g.onEvent(r),r.defaultPrevented||"https://aomedia.org/emsg/ID3"!=u&&"https://developer.apple.com/streaming/emsg-id3"!=u||(u=Uh(i)).length&&s&&n.g.Gh([{cueTime:s.startTime,data:i,frames:u,dts:s.startTime,pts:s.startTime}],0,s.endTime)))}),A&&y.O("prft",function(i){if(!n.C&&s.aa.timescale){var r=i.reader,o=i.version;r.L(),i=1e3*(i=r.L())+r.L()/4294967296*1e3,r=0===o?r.L():4294967296*(o=r.L())+(r=r.L()),i=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+i).getTime(),r=(new Map).set("detail",{wallClockTime:i,programStartDate:new Date(i-r/s.aa.timescale*1e3)}),r=new Q("prft",r),n.g.onEvent(r),n.C=!0}}),(x||A)&&y.parse(u),C(j,(D=n,R=i,P=r,K(function(n){if(1==n.g)return(L=Math.max(D.h.bufferBehind,D.m.presentationTimeline.g),null==(_=Mi(D.g.T,R.type)))?n.return():1>=(B=P-_-L)?n.return():C(n,D.g.T.remove(R.type,_,_+B),2);zf(D.l),E(n)})),2);case 2:return zf(n.l),I=i.dd,i.dd=!1,M=i.Cf,i.Cf=!1,C(j,n.g.Ef(i.type,u),3);case 3:return C(j,Ri(n.g.T,i.type,u,s,o,m,I,M,p),4);case 4:zf(n.l),E(j)}})}function Bk(n){return n&&n.type==eK&&("application/cea-608"==n.stream.mimeType||"application/cea-708"==n.stream.mimeType)}function Ik(i,r,o,s){var u,p,m,y,x;return K(function(A){switch(A.g){case 1:if(o instanceof Gh&&(u=o.g))return A.return(u);if(p=null,r.ra){var I,M,j,D,R,P,L,_=r.ra;if(_.g.has(o)){var B=_.g.get(o);s&&(B.h=s),_.g.delete(o),p=B.g}else p=null}return p||(p=xk(i,o,r.stream,s)),m=0,r.X&&(m=r.X.g),r.Na=p,C(A,p.promise,2);case 2:if(y=A.h,r.Na=null,x=y.data,!o.aes128Key){A.B(3);break}return C(A,(I=x,M=o.aes128Key,j=m,K(function(i){if(1==i.g)return(D=M).cryptoKey?i.B(2):C(i,D.fetchKey(),3);if(!(R=D.iv))for(R=hb(new ArrayBuffer(16)),P=D.firstMediaSequenceNumber+j,L=R.byteLength-1;0<=L;L--)R[L]=255&P,P>>=8;return i.return(n.crypto.subtle.decrypt({name:"AES-CBC",iv:R},D.cryptoKey,I))})),4);case 4:x=A.h;case 3:return A.return(x)}})}function xk(n,i,r,o){var s=i instanceof S?i:void 0;return i=fk(i.Z(),i.Qa,i.wa,n.h.retryParameters,o),n.g.Tb.request(e4,i,{type:s?1:0,stream:r,segment:s})}function uk(n,i,r,o){var s,u;return K(function(p){return 1==p.g?(i.wb=!1,i.Zd=!1,i.vd=0,i.Lc=!0,i.Ca=null,i.Db=null,i.X=null,i.ra&&ck(i.ra),o?(s=n.g.Dd(),u=n.g.T.getDuration(),C(p,n.g.T.remove(i.type,s+o,u),3)):C(p,Zi(n.g.T,i.type),4)):3!=p.g?(zf(n.l),r?C(p,n.g.T.flush(i.type),3):p.B(3)):void(zf(n.l),i.Lc=!1,i.endOfStream=!1,i.Da||i.ib||ok(n,i,0),E(p))})}function ok(i,r,o){var s=r.type;(s!=eK||i.i.has(s))&&(r.ib=new pd(function(){var o;return K(function(s){if(1==s.g){var u,p,m,y,x;return sa(s,2),C(s,K(function(o){switch(o.g){case 1:if(zf(i.l),r.Da||null==r.ib||r.Lc)return o.return();if(r.ib=null,!r.wb){o.B(2);break}return C(o,uk(i,r,r.Zd,r.vd),3);case 3:return o.return();case 2:if(r.stream.segmentIndex){o.B(4);break}return u=r.stream,C(o,r.stream.createSegmentIndex(),5);case 5:if(u!=r.stream)return u.closeSegmentIndex&&u.closeSegmentIndex(),r.Da||r.ib||ok(i,r,0),o.return();case 4:sa(o,6),null!=(p=function(i,r){if(Bk(r))return z=i.g.T,q=r.stream.originalId||"",V=Oi(z,"video")||0,Uc(z.h,q,V),null;if(r.type==eK&&(H=i.g.T).h&&Uc(H.h,"",0),!i.g.T.ea&&r.type!=eK)return i.h.updateIntervalSeconds/2;var o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J=i.g.Dd(),$=r.Ca?r.Ca.endTime:J,ee=(G=i.g.T,X=r.type,G.A?0:X==eK?null==(G=G.h).h||G.h<J?0:G.h-Math.max(J,G.g):Mh(G=Ni(G,X),J)),en=Math.max(1,Math.max(i.m.minBufferTime||0,i.h.rebufferingGoal,i.h.bufferingGoal)*i.u),ea=i.m.presentationTimeline.getDuration()-$,eo=Oi(i.g.T,r.type);if(1e-6>ea&&eo)return r.endOfStream=!0,"video"==r.type&&(i=i.i.get(eK))&&Bk(i)&&(i.endOfStream=!0),null;if(r.endOfStream=!1,ee>=en)return i.h.updateIntervalSeconds/2;if(!(ee=function(n,i,r,o){if(i.X)return i.X.current();if(i.Ca||o)return r=i.Ca?i.Ca.endTime:o,i.Xe=!0,i.X=i.stream.segmentIndex.Nb(r),i.X&&i.X.next().value;o=Math.max(r-(n=n.h.inaccurateManifestTolerance),0);var s=null;return n&&(i.X=i.stream.segmentIndex.Nb(o),s=i.X&&i.X.next().value),s||(i.X=i.stream.segmentIndex.Nb(r),s=i.X&&i.X.next().value),s}(i,r,J,eo)))return i.h.updateIntervalSeconds;for(en=1/0,eo=(ea=t(ea=Array.from(i.i.values()))).next();!eo.done;eo=ea.next())Bk(eo=eo.value)||eo.X&&!eo.X.current()||(en=Math.min(en,eo.Ca?eo.Ca.endTime:J));return $>=en+i.m.presentationTimeline.g?i.h.updateIntervalSeconds:(r.ra&&r.X&&(!($=ee.aa)||r.Ca&&Hh($,r.Db)||function(n,i){if(n.h.segmentIndex&&n.g.size<n.i&&!n.g.has(i)){var r=new Zj(n.l);ak(r,i,n.h),n.g.set(i,r)}}(r.ra,$),Yj(r.ra,ee)),(o=i,s=r,u=J,p=ee,K(function(i){switch(i.g){case 1:var r,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec,ep;if(m=eF,y=s.stream,x=s.X,s.Da=!0,sa(i,2),2==p.Pb())throw new O(1,1,1011);return C(i,(r=o,z=s,q=p,K(function(n){var i,o,s,u;return 1==n.g?(V=eF,H=[],G=Math.max(0,q.appendWindowStart-.1),X=q.appendWindowEnd+.01,J=Mc(z.stream.codecs),$=Nc(z.stream.mimeType),(ee=q.timestampOffset)==z.Re&&G==z.Pe&&X==z.Oe&&J==z.Qe&&$==z.Yf)?n.B(2):((en=z.Qe&&z.Yf&&function(n,i,r){if(i==eK)var o=!1;else{o=Mc(Oc(n.G[i]));var s=Nc(n.G[i]),u=Gc(r.mimeType,r.codecs),p=n.C.forceTransmux;(!Za(u)||!n.u&&eq.includes(u)||r.codecs.includes(","))&&(p=!0),r=Ic(r.mimeType,r.codecs),p&&(p=$b(r))&&(u=(p=p()).convertCodecs(i,r),p.destroy()),i=Mc(Oc(u)),u=Nc(u),o=o!==i||s!==u}return!!o&&("smooth"!==n.C.codecSwitchingStrategy||!bb()||n.o)}(r.g.T,z.type,z.stream))&&(ea=null,z.type===V.$?ea=r.i.get(V.P):z.type===V.P&&(ea=r.i.get(V.$)),ea&&(ea.Db=null,wk(r,ea),jk(ea).catch(function(){}))),eo=function(){var n,i,o,s;return K(function(u){if(1==u.g){var p,m,y,x,A,I;return n=new Map,r.j.audio&&n.set(V.P,r.j.audio),r.j.video&&n.set(V.$,r.j.video),sa(u,2),z.Pe=G,z.Oe=X,z.Qe=J,z.Yf=$,z.Re=ee,i=r.m.sequenceMode||"HLS"==r.m.type,C(u,(p=r.g.T,m=z.type,y=q.mimeType||z.stream.mimeType,x=q.codecs||z.stream.codecs,K(function(r){if(1==r.g){var o,s,u,M,j,D,R,P,L,_,B,z,q,V,H,J,$,en,ea,eo,eu;return m==(A=eF).na?(i||(p.h.s=ee),(o=p.h).l=G,o.m=X,r.return()):(I=[],C(r,(s=p,u=m,M=y,j=x,D=n,K(function(n){if(1==n.g){if(u==(R=eF).na||(P=Mc(Oc(s.G[u])),L=Nc(s.G[u]),B=!1,z=Gc(M,j),q=s.C.forceTransmux,(!Za(z)||!s.u&&eq.includes(z)||j.includes(","))&&(q=!0),q&&(H=$b(V=Ic(M,j)))&&(_=H(),J=Bc(R.P,(j||"").split(",")),$=Bc(R.$,(j||"").split(",")),J&&$?(B=!0,en=$,u==R.P&&(en=J),z=_.convertCodecs(u,Ic(M,en))):z=_.convertCodecs(u,V)),ea=Mc(Oc(z)),eo=Nc(z),P===ea&&L===eo))return n.return(!1);if(eu=!0,(s.o||B&&_&&!s.m[u])&&(eu=!1),eu&&"smooth"===s.C.codecSwitchingStrategy&&bb()){var i,r;return C(n,(i=z,r=_,Si(s,u,function(){u!==eK&&(bb()&&(s.m[u]&&(s.m[u].destroy(),delete s.m[u]),r&&(s.m[u]=r),s.g[u].changeType(i+s.C.sourceBufferExtraFeatures),s.G[u]=i),Ki(s,u))})),3)}return _&&_.destroy(),C(n,hj(s,D),3)}return n.return(!0)})),2))}return r.h||(I.push(Si(p,m,function(){return Ti(p,m)})),p.o&&I.push(Si(p,A.P,function(){return Ti(p,A.P)}))),i||(I.push(Si(p,m,function(){return Ui(p,m,ee)})),p.o&&I.push(Si(p,A.P,function(){return Ui(p,A.P,ee)}))),I.push(Si(p,m,function(){p.g[m].appendWindowStart=0,p.g[m].appendWindowEnd=X,p.g[m].appendWindowStart=G,Ki(p,m)})),p.o&&I.push(Si(p,A.P,function(){var n=A.P;p.g[n].appendWindowStart=0,p.g[n].appendWindowEnd=X,p.g[n].appendWindowStart=G,Ki(p,n)})),C(r,Promise.all(I),0)})),4)}if(2!=u.g)return en&&(o=null,z.type===V.$?o=r.i.get(V.P):z.type===V.P&&(o=r.i.get(V.$)),o&&(o.wb=!1,o.Da=!1,wk(r,o))),ua(u,0);throw s=va(u),z.Pe=null,z.Oe=null,z.Qe=null,z.Re=null,s})},C(n,eo(),2)):(Hh(q.aa,z.Db)||(z.Db=q.aa,q.j&&q.aa&&(eu=Ik(r,z,q.aa),ec=function(){var n,i,o,s,u;return K(function(p){switch(p.g){case 1:return sa(p,2),C(p,eu,4);case 4:return n=p.h,zf(r.l),i=null,o=new Map,(new Wf).box("moov",ag).box("trak",ag).box("mdia",ag).O("mdhd",function(n){i=Yh(n.reader,n.version).timescale}).box("hdlr",function(n){(n=n.reader).skip(8);var r=String.fromCharCode((n=n.ub(4))[0]);switch(r+=String.fromCharCode(n[1])+String.fromCharCode(n[2])+String.fromCharCode(n[3])){case"soun":o.set(V.P,i);break;case"vide":o.set(V.$,i)}i=null}).parse(n),o.has(z.type)?q.aa.timescale=o.get(z.type):null!=i&&(q.aa.timescale=i),s=z.stream.closedCaptions&&0<z.stream.closedCaptions.size,C(p,r.g.Ef(z.type,n),5);case 5:return C(p,Ri(r.g.T,z.type,n,null,z.stream,s),6);case 6:ua(p,0);break;case 2:throw u=va(p),z.Db=null,u}})},r.g.Eh(q.startTime,q.aa),H.push(ec()))),r.m.sequenceMode&&(ep=z.Ca?z.Ca.i:null,q.i!=ep||z.Xe)&&(z.Xe=!1,H.push((i=r.g.T,o=z.type,s=q.startTime,K(function(n){return 1==n.g?o==(u=eF).na?n.return():(Si(i,o,function(){return Ti(i,o)}),i.o&&Si(i,u.P,function(){return Ti(i,u.P)}),C(n,Si(i,o,function(){return Ui(i,o,s)}),2)):i.o?C(n,Si(i,u.P,function(){return Ui(i,u.P,s)}),0):n.B(0)})))),C(n,Promise.all(H),0))})),4);case 4:if(zf(o.l),o.s)return i.return();if(A="video/mp4"==y.mimeType||"audio/mp4"==y.mimeType,I=n.ReadableStream,o.h.lowLatencyMode&&I&&A&&("HLS"!=o.m.type||p.m))return j=new Uint8Array(0),R=D=!1,L=function(n){var i,r,m;return K(function(x){switch(x.g){case 1:var A,I,M;if(D||(R=!0,zf(o.l),o.s))return x.return();if(sa(x,2),A=j,I=n,(M=new Uint8Array(A.length+I.length)).set(A),M.set(I,A.length),j=M,i=!1,r=0,(new Wf).box("mdat",function(n){r=n.size+n.start,i=!0}).parse(j,!1,!0),!i){x.B(4);break}return m=j.subarray(0,r),j=j.subarray(r),C(x,Hk(o,s,u,y,p,m,!0),5);case 5:s.ra&&s.X&&Yj(s.ra,p,!0);case 4:ua(x,0);break;case 2:P=va(x),E(x)}})},C(i,Ik(o,s,p,L),9);return C(i,Ik(o,s,p),7);case 7:if(M=i.h,zf(o.l),o.s)return i.return();return zf(o.l),s.wb?(s.Da=!1,ok(o,s,0),i.return()):C(i,Hk(o,s,u,y,p,M),6);case 9:if(_=i.h,P)throw P;if(R){i.B(10);break}return D=!0,zf(o.l),o.s?i.return():s.wb?(s.Da=!1,ok(o,s,0),i.return()):C(i,Hk(o,s,u,y,p,_),10);case 10:s.ra&&s.X&&Yj(s.ra,p,!0);case 6:if(zf(o.l),o.s)return i.return();s.Ca=p,x.next(),s.Da=!1,s.ff=!1,JSON.stringify(o.g.T.pb()[s.type]),s.wb||o.g.af(p,s.stream),ok(o,s,0),ua(i,0);break;case 2:if(B=va(i),zf(o.l,B),o.s)return i.return();if(s.Da=!1,7001==B.code)s.Da=!1,ik(s),ok(o,s,0),i.B(0);else if(s.type==m.na&&o.h.ignoreTextStreamFailures)o.i.delete(m.na),i.B(0);else{if(3017!=B.code)return s.Tc=!0,B.severity=2,C(i,Ak(o,s,B),0);(function(n,i,r){if(!Array.from(n.i.values()).some(function(n){return n!=i&&n.ff})){if(0<n.h.maxDisabledTime&&n.g.wd(i.stream,n.h.maxDisabledTime))return;var o=Math.round(100*n.u);if(20<o)n.u-=.2;else if(4<o)n.u-=.04;else{i.Tc=!0,n.s=!0,n.g.onError(r);return}i.ff=!0}ok(n,i,4)})(o,s,B),i.B(0)}}})).catch(function(){}),null)}(i,r))&&(ok(i,r,p),r.Tc=!1),ua(o,7);break;case 6:return m=va(o),C(o,Ak(i,r,m),8);case 8:return o.return();case 7:if(y=Array.from(i.i.values()),!i.A||!y.every(function(n){return n.endOfStream})){o.B(0);break}return C(o,i.g.T.endOfStream(),10);case 10:zf(i.l),0!=(x=i.g.T.getDuration())&&x<i.m.presentationTimeline.getDuration()&&i.m.presentationTimeline.Pa(x),E(o)}}),4)}if(2!=s.g)return ua(s,0);o=va(s),i.g&&i.g.onError(o),E(s)})}).U(o))}function ik(n){null!=n.ib&&(n.ib.stop(),n.ib=null)}function jk(n){return K(function(i){return n.Na?C(i,n.Na.abort(),0):i.B(0)})}function Ak(n,i,r){var o;return K(function(s){if(1==s.g)return C(s,Ye(n.G),2);zf(n.l),o=0===n.h.maxDisabledTime&&1011==r.code?1:n.h.maxDisabledTime,1===r.category&&0<o&&(r.handled=n.g.wd(i.stream,o),r.handled&&(r.severity=1)),n.g.onError(r),r.handled||n.h.failureCallback(r),E(s)})}function Nk(n,i,r){var o,s,u,p;return K(function(m){switch(m.g){case 1:var y=new fc(n).Ga.split("/").pop().split(".");if(o=tU[1==y.length?"":y.pop().toLowerCase()])return m.return(o);return s=0,u=qf([n],r),sa(m,2),u.method="HEAD",C(m,i.request(s,u).promise,4);case 4:o=m.h.headers["content-type"],ua(m,3);break;case 2:if(!(p=va(m))||1002!=p.code&&1001!=p.code){m.B(3);break}return u.method="GET",C(m,i.request(s,u).promise,6);case 6:o=m.h.headers["content-type"];case 3:return m.return(o?o.toLowerCase().split(";").shift():"")}})}Zj.prototype.abort=function(){this.g&&this.g.abort()},(D=gk.prototype).destroy=function(){return this.l.destroy()},D.configure=function(n){this.h=n,this.G=new We({maxAttempts:Math.max(n.retryParameters.maxAttempts,2),baseDelay:n.retryParameters.baseDelay,backoffFactor:n.retryParameters.backoffFactor,fuzzFactor:n.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var i=t(this.i.keys()),r=i.next();!r.done;r=i.next())if((r=this.i.get(r.value)).ra){var o=r.ra,s=n.segmentPrefetchLimit;o.i=s;for(var u=Array.from(o.g.keys());u.length>s;){var p=u.pop();p&&dk(o,p)}0<n.segmentPrefetchLimit||(r.ra=null)}else 0<n.segmentPrefetchLimit&&(r.ra=kk(this,r.stream))},D.start=function(){var n=this;return K(function(i){if(1==i.g){var r,o,s,u,p,m,y,x,A;return C(i,(r=n,K(function(n){if(1==n.g){if(o=eF,!r.j)throw new O(2,5,5006);return s=new Map,u=new Set,r.j.audio&&(s.set(o.P,r.j.audio),u.add(r.j.audio)),r.j.video&&(s.set(o.$,r.j.video),u.add(r.j.video)),r.o&&(s.set(o.na,r.o),u.add(r.o)),C(n,r.g.T.init(s,r.m.sequenceMode,r.m.type,r.m.ignoreManifestTimestampsInSegmentsMode),2)}for(zf(r.l),r.updateDuration(),m=(p=t(s.keys())).next();!m.done;m=p.next())y=m.value,x=s.get(y),r.i.has(y)||(A=nk(r,x),r.i.set(y,A),ok(r,A,0));E(n)})),2)}zf(n.l),n.A=!0,E(i)})},D.dd=function(){if(this.g)for(var n=this.g.Dd(),i=t(this.i.keys()),r=i.next();!r.done;r=i.next()){var o=r.value;r=this.i.get(o);var s=null;r.X&&(s=r.X.current()),(!s||s.startTime>n||s.endTime<n)&&(r.X=null),(s=!(s=this.g.T).A&&(o==eK?null!=(s=s.h).g&&null!=s.h&&n>=s.g&&n<s.h:Lh(s=Ni(s,o),n)))||((null!=Oi(this.g.T,o)||r.Da)&&wk(this,r),r.Na&&(r.Na.abort(),r.Na=null),o===eK&&(o=this.g.T).H&&o.H.h(),r.dd=!0)}},D.updateDuration=function(){var n=this.m.presentationTimeline.getDuration();1/0>n?this.g.T.Pa(n):this.g.T.Pa(4294967296)};var tU={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Qk(n){var i=(n=n.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(i?n="#"+(256|parseInt(i[1],10)).toString(16).slice(1)+(256|parseInt(i[2],10)).toString(16).slice(1)+(256|parseInt(i[3],10)).toString(16).slice(1):n.startsWith("#")&&7<n.length&&(n=n.slice(0,7)),n){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Rk(n,i){var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next())if((o=o.value).isContainer)r.push.apply(r,w(Rk(o.nestedCues,o)));else{var s=o.clone();s.nestedCues=[],s.payload=function Pk(n,i){if(n.lineBreak)return"\n";if(n.nestedCues.length)return n.nestedCues.map(function(i){return Pk(i,n)}).join("");var r=[],o=700<=n.fontWeight,s="italic"==n.fontStyle,u=n.textDecoration.includes("underline");return o&&r.push(["b"]),s&&r.push(["i"]),u&&r.push(["u"]),""==(s=n.color)&&i&&(s=i.color),o="",(s=Qk(s))&&(o+="."+s),""==(s=n.backgroundColor)&&i&&(s=i.backgroundColor),(i=Qk(s))&&(o+=".bg_"+i),o&&r.push(["c",o]),r.reduceRight(function(n,i){var r=t(i);return"<"+(i=r.next().value)+(void 0===(r=r.next().value)?"":r)+">"+n+"</"+i+">"},n.payload)}(o,i),r.push(s)}return r}function Sk(n,i){this.g=null;for(var r=t(Array.from(n.textTracks)),o=r.next();!o.done;o=r.next())(o=o.value).mode="disabled",o.label==i&&(this.g=o);this.g||(this.g=n.addTextTrack("subtitles",i)),this.g.mode="hidden"}function Tk(n,i){var r=n.mode;n.mode="showing"==r?"showing":"hidden";for(var o=t(Array.from(n.cues)),s=o.next();!s.done;s=o.next())(s=s.value)&&i(s)&&n.removeCue(s);n.mode=r}function Vk(){}function Wk(){}function Xk(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Yk(i,r){var o=this;this.m=!1,this.i=[],this.A=i,this.s=r,this.j=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),this.C=new qd(function(){Zk(o)}).$a(.25),this.h=new Map,this.l=new Af,this.l.D(document,"fullscreenchange",function(){Zk(o,!0)}),this.l.D(this.A,"resize",function(){var n=o.A,i=n.videoWidth;n=n.videoHeight,i&&n?o.j=i/n:o.j=null}),this.o=null,"ResizeObserver"in n&&(this.o=new ResizeObserver(function(){Zk(o,!0)}),this.o.observe(this.g)),this.u=new Map}function Zk(n,i){if(n.g){var r=n.A.currentTime;if(!n.m||(void 0===i?0:i)){i=t(n.u.values());for(var o=i.next();!o.done;o=i.next())Xk(o.value);Xk(n.g),n.h.clear(),n.u.clear()}if(n.m){i=new Map,o=t(n.h.keys());for(var s=o.next();!s.done;s=o.next())s=s.value,i.set(s,n.h.get(s));!function al(n,i,r,o,s){var u=!1,p=[],m=[];i=t(i);for(var y=i.next();!y.done;y=i.next()){y=y.value,s.push(y);var x=n.h.get(y),A=y.startTime<=o&&y.endTime>o,I=x?x.wg:null;x&&(p.push(x.pe),x.bd&&p.push(x.bd),A||(u=!0,n.h.delete(y),x=null)),A&&(m.push(y),x?function(n,i){for(;null!=i;){if(i==n.g)return!0;i=i.parentElement}return!1}(n,I)||(u=!0):(function(n,i,r){var o=1<r.length,s=o?"span":"div";i.lineBreak&&(s="br"),i.rubyTag&&(s=i.rubyTag),o=!o&&0<i.nestedCues.length;var u=document.createElement(s);if("br"!=s&&function(n,i,r,o,s){var u,p,m,y=i.style,x=0==r.nestedCues.length,A=1<o.length;y.whiteSpace="pre-wrap";var I=r.payload.replace(/\s+$/g,function(n){return"\xa0".repeat(n.length)});if(y.webkitTextStrokeColor=r.textStrokeColor,y.webkitTextStrokeWidth=r.textStrokeWidth,y.color=r.color,y.direction=r.direction,y.opacity=r.opacity,y.paddingLeft=el(r.linePadding,r,n.s),y.paddingRight=el(r.linePadding,r,n.s),y.textCombineUpright=r.textCombineUpright,y.textShadow=r.textShadow,r.backgroundImage)y.backgroundImage="url('"+r.backgroundImage+"')",y.backgroundRepeat="no-repeat",y.backgroundSize="contain",y.backgroundPosition="center",y.width="100%",y.height="100%";else{if(r.nestedCues.length)var M=i;else M=document.createElement("span"),i.appendChild(M);r.border&&(M.style.border=r.border),!s&&((i=fl(o,function(n){return n.backgroundColor}))?M.style.backgroundColor=i:I&&(M.style.backgroundColor="rgba(0, 0, 0, 0.8)"),i=fl(o,function(n){return n.fontFamily}))&&(M.style.fontFamily=i),I&&(M.textContent=I)}A&&!o[o.length-1].isContainer?y.display="inline":(y.display="flex",y.flexDirection="column",y.alignItems="center",y.justifyContent="before"==r.displayAlign?"flex-start":"center"==r.displayAlign?"center":"flex-end"),x||(y.margin="0"),y.fontFamily=r.fontFamily,y.fontWeight=r.fontWeight.toString(),y.fontStyle=r.fontStyle,y.letterSpacing=r.letterSpacing,y.fontSize=el(r.fontSize,r,n.s),null!=(o=r.line)&&((x=r.lineInterpretation)==eu&&(x=1,A=16,n.j&&1>n.j&&(A=32),o=0>o?100+o/A*100:o/A*100),1==x&&(y.position="absolute",r.writingMode==eo?(y.width="100%",r.lineAlign==ec?y.top=o+"%":"end"==r.lineAlign&&(y.bottom=100-o+"%")):"vertical-lr"==r.writingMode?(y.height="100%",r.lineAlign==ec?y.left=o+"%":"end"==r.lineAlign&&(y.right=100-o+"%")):(y.height="100%",r.lineAlign==ec?y.right=o+"%":"end"==r.lineAlign&&(y.left=100-o+"%")))),y.lineHeight=r.lineHeight,null!=r.position&&(r.writingMode==eo?y.paddingLeft=r.position:y.paddingTop=r.position),p=(u=r).direction,m=u.positionAlign,u=u.textAlign,"line-left"==(n=m!==X?m:"left"===u||"start"===u&&p===ea||"end"===u&&"rtl"===p?"line-left":"right"===u||"start"===u&&"rtl"===p||"end"===u&&p===ea?"line-right":"center")?y.cssFloat="left":"line-right"==n&&(y.cssFloat="right"),y.textAlign=r.textAlign,y.textDecoration=r.textDecoration.join(" "),y.writingMode=r.writingMode,"writingMode"in document.documentElement.style&&y.writingMode==r.writingMode||(y.webkitWritingMode=r.writingMode),r.size&&(r.writingMode==eo?y.width=r.size+"%":y.height=r.size+"%")}(n,u,i,r,o),r=null,i.region&&i.region.id){r=i.region,s=n.j===4/3?2.5:1.9;var p=r.id+"_"+r.width+"x"+r.height+(r.heightUnits==eS?"%":"px")+"-"+r.viewportAnchorX+"x"+r.viewportAnchorY+(r.viewportAnchorUnits==eS?"%":"px");if(n.u.has(p))r=n.u.get(p);else{var m=document.createElement("span"),y=r.heightUnits==eS?"%":"px",x=r.widthUnits==eS?"%":"px",A=r.viewportAnchorUnits==eS?"%":"px";m.id="shaka-text-region---"+p,m.classList.add("shaka-text-region"),m.style.position="absolute",2===r.heightUnits&&2===r.widthUnits?(m.style.height=5.33*r.height+"%",m.style.width=r.width*s+"%"):(m.style.height=r.height+y,m.style.width=r.width+x),2===r.viewportAnchorUnits?(y=r.viewportAnchorY/75*100,x=r.viewportAnchorX/(n.j===4/3?160:210)*100,y-=r.regionAnchorY*r.height*5.33/100,x-=r.regionAnchorX*r.width*s/100,m.style.top=y+"%",m.style.left=x+"%"):(m.style.top=r.viewportAnchorY-r.regionAnchorY*r.height/100+A,m.style.left=r.viewportAnchorX-r.regionAnchorX*r.width/100+A),m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="center",m.style.justifyContent="before"==i.displayAlign?"flex-start":"center"==i.displayAlign?"center":"flex-end",n.u.set(p,m),r=m}}s=u,o&&((s=document.createElement("span")).classList.add("shaka-text-wrapper"),s.style.backgroundColor=i.backgroundColor,s.style.lineHeight="normal",u.appendChild(s)),n.h.set(i,{pe:u,wg:s,bd:r})}(n,y,s),I=(x=n.h.get(y)).wg,u=!0)),0<y.nestedCues.length&&I&&al(n,y.nestedCues,I,o,s),s.pop()}if(u){for(s=(o=t(p)).next();!s.done;s=o.next())(s=s.value).parentElement&&s.parentElement.removeChild(s);for(m.sort(function(n,i){return n.startTime!=i.startTime?n.startTime-i.startTime:n.endTime-i.endTime}),y=(m=t(m)).next();!y.done;y=m.next())(o=n.h.get(y.value)).bd?(r.appendChild(o.bd),o.bd.appendChild(o.pe)):r.appendChild(o.pe)}}(n,n.i,n.g,r,[])}}}function el(n,i,r){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(n))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return n;var s=o.value;switch(o.unit){case"%":return s/100*r.clientHeight/i.cellResolution.rows+"px";case"c":return r.clientHeight*s/i.cellResolution.rows+"px";default:return n}}function fl(n,i){for(var r=n.length-1;0<=r;r--){var o=i(n[r]);if(o||0===o)return o}return null}function hl(n,i){this.h=n,this.g=i,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function jl(i){return i.g.sessionId||(i.g.sessionId=n.crypto.randomUUID()),{v:1,sf:i.m,sid:i.g.sessionId,cid:i.g.contentId,mtp:i.h.getBandwidthEstimate()/1e3}}function pl(n,i,r){r=void 0===r?{}:r;var o=void 0===o?n.g.useHeaders:o;if(n.g.enabled){Object.assign(r,jl(n)),r.pr=n.h.Cd();var s=r.ot===t_||r.ot===tK;if(n.j&&s&&(r.bs=!0,r.su=!0,n.j=!1),null==r.su&&(r.su=n.l),o)Object.keys(n=function(n){var i=Object.keys(n),r={},o=["Object","Request","Session","Status"],s=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};i=t(i);for(var p=i.next();!p.done;p=i.next())s[null!=u[p=p.value]?u[p]:1][p]=n[p];for(n=0;n<s.length;n++)(u=nl(s[n]))&&(r["CMCD-"+o[n]]=u);return r}(r)).length&&Object.assign(i.headers,n);else{var u=nl(r);u&&(i.uris=i.uris.map(function(n){return ol(n,u)}))}}}function nl(n){function b(n){return 100*c(n/100)}function c(n){return Math.round(n)}var i=[],r={br:c,d:c,bl:b,dl:b,mtp:b,nor:function(n){return encodeURIComponent(n)},rtp:b,tb:c},o=Object.keys(n||{}).sort();o=t(o);for(var s=o.next();!s.done;s=o.next()){var u,p=n[s=s.value];if(!Number.isNaN(u=p)&&null!=u&&""!==u&&!1!==u&&("v"!==s||1!==p)&&("pr"!=s||1!==p)){var m=r[s];m&&(p=m(p));var y=void 0;y="string"==(m=typeof p)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(p):"boolean"===m?s:"symbol"===m?s+"="+p.description:s+"="+p,i.push(y)}}return i.join(",")}function ol(n,i){return!i||n.includes("offline:")?n:((n=new fc(n)).g.set("CMCD",i),n.toString())}(D=Sk.prototype).remove=function(n,i){return!!this.g&&(Tk(this.g,function(r){return r.startTime<i&&r.endTime>n}),!0)},D.append=function(n){var i=Rk(n),r=[];n=this.g.cues?Array.from(this.g.cues):[];var o={};i=t(i);for(var s=i.next();!s.done;o={Zb:o.Zb},s=i.next())o.Zb=s.value,n.some(function(n){return function(i){return i.startTime==n.Zb.startTime&&i.endTime==n.Zb.endTime&&i.text==n.Zb.payload}}(o))||(s=function(n){if(n.startTime>=n.endTime)return null;var i=new VTTCue(n.startTime,n.endTime,n.payload);i.lineAlign=n.lineAlign,i.positionAlign=n.positionAlign,n.size&&(i.size=n.size);try{i.align=n.textAlign}catch(n){}return"center"==n.textAlign&&"center"!=i.align&&(i.align="middle"),"vertical-lr"==n.writingMode?i.vertical="lr":"vertical-rl"==n.writingMode&&(i.vertical="rl"),1==n.lineInterpretation&&(i.snapToLines=!1),null!=n.line&&(i.line=n.line),null!=n.position&&(i.position=n.position),i}(o.Zb))&&r.push(s);for(o=(n=t(n=r.slice().sort(function(n,i){return n.startTime!=i.startTime?n.startTime-i.startTime:n.endTime!=i.endTime?n.endTime-i.startTime:("line"in VTTCue.prototype)?r.indexOf(i)-r.indexOf(n):r.indexOf(n)-r.indexOf(i)}))).next();!o.done;o=n.next())this.g.addCue(o.value)},D.destroy=function(){return this.g&&(Tk(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},D.isTextVisible=function(){return"showing"==this.g.mode},D.setTextVisibility=function(n){this.g.mode=n?"showing":"hidden"},N("shaka.text.SimpleTextDisplayer",Sk),Sk.prototype.setTextVisibility=Sk.prototype.setTextVisibility,Sk.prototype.isTextVisible=Sk.prototype.isTextVisible,Sk.prototype.destroy=Sk.prototype.destroy,Sk.prototype.append=Sk.prototype.append,Sk.prototype.remove=Sk.prototype.remove,(D=Vk.prototype).remove=function(){},D.append=function(){},D.destroy=function(){},D.isTextVisible=function(){return!1},D.setTextVisibility=function(){},N("shaka.text.StubTextDisplayer",Vk),Vk.prototype.setTextVisibility=Vk.prototype.setTextVisibility,Vk.prototype.isTextVisible=Vk.prototype.isTextVisible,Vk.prototype.destroy=Vk.prototype.destroy,Vk.prototype.append=Vk.prototype.append,Vk.prototype.remove=Vk.prototype.remove,N("shaka.util.Dom",Wk),Wk.removeAllChildren=Xk,(D=Yk.prototype).append=function(n){var i=[].concat(w(this.i)),r={};n=t(n);for(var o=n.next();!o.done;r={jd:r.jd},o=n.next())r.jd=o.value,i.some(function(n){return function(i){return Lb(i,n.jd)}}(r))||this.i.push(r.jd);Zk(this)},D.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.l&&(this.l.release(),this.l=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},D.remove=function(n,i){if(!this.g)return!1;var r=this.i.length;return this.i=this.i.filter(function(r){return r.startTime<n||r.endTime>=i}),Zk(this,r>this.i.length),!0},D.isTextVisible=function(){return this.m},D.setTextVisibility=function(n){this.m=n},N("shaka.text.UITextDisplayer",Yk),Yk.prototype.setTextVisibility=Yk.prototype.setTextVisibility,Yk.prototype.isTextVisible=Yk.prototype.isTextVisible,Yk.prototype.remove=Yk.prototype.remove,Yk.prototype.destroy=Yk.prototype.destroy,Yk.prototype.append=Yk.prototype.append,N("shaka.text.WebVttGenerator",function(){}),hl.prototype.configure=function(n){this.g=n};var t_="v",tK="av";function yl(n){this.h=n,this.g=null}function Dl(n){return!n||"false"!==n.toLowerCase()&&(/^[-0-9]/.test(n)?parseInt(n,10):n.replace(/["]+/g,""))}N("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",yg:"s",OTHER:"o"}),(D=yl.prototype).configure=function(n){this.h=n},D.Rf=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(tB)?1e3*this.g.get(tB):null},D.Qf=function(){return this.h.enabled&&this.g&&this.g.has(tF)?1e3*this.g.get(tF):null},D.fh=function(){return this.h.enabled&&this.g&&this.g.has(tz)?this.g.get(tz):null},D.gh=function(){return this.h.enabled&&this.g&&this.g.has(tW)?this.g.get(tW):null},D.getBandwidthEstimate=function(n){var i=this.Qf();if(!i)return n;var r=this.h.estimatedThroughputWeightRatio;return 0<r&&1>=r?n*(1-r)+i*r:n},N("shaka.util.CmsdManager",yl),yl.prototype.getBandwidthEstimate=yl.prototype.getBandwidthEstimate,yl.prototype.getRoundTripTime=yl.prototype.gh,yl.prototype.getResponseDelay=yl.prototype.fh,yl.prototype.getEstimatedThroughput=yl.prototype.Qf,yl.prototype.getMaxBitrate=yl.prototype.Rf;var tF="etp",tB="mb",tz="rd",tW="rtt";function El(){}function Fl(n,i,r,o,s){var u,p=s in o,m=!0;for(u in i){var y=s+"."+u,x=p?o[s]:r[u];p||u in r?void 0===i[u]?void 0===x||p?delete n[u]:n[u]=nd(x):x.constructor==Object&&i[u]&&i[u].constructor==Object?(n[u]||(n[u]=nd(x)),y=Fl(n[u],i[u],x,o,y),m=m&&y):typeof i[u]!=typeof x||null==i[u]||"function"!=typeof i[u]&&i[u].constructor!=x.constructor?(Ra("Invalid config, wrong type for "+y),m=!1):("function"==typeof r[u]&&r[u].length!=i[u].length&&Sa("Unexpected number of arguments for "+y),n[u]=i[u]):(Ra("Invalid config, unrecognized key "+y),m=!1)}return m}function Gl(n,i){for(var r={},o=r,s=0,u=0;!(0>(s=n.indexOf(".",s)));)(0==s||"\\"!=n[s-1])&&(o[u=n.substring(u,s).replace(/\\\./g,".")]={},o=o[u],u=s+1),s+=1;return o[n.substring(u).replace(/\\\./g,".")]=i,r}function Il(){this.g=null,this.h=[]}function Jl(n,i){return K(function(r){if(1==r.g)return n.g?C(r,new Promise(function(i){return n.h.push(i)}),2):r.B(2);n.g=i,E(r)})}function Kl(){}function Ll(n){return n=Qf(n),new fc(n).ob}function Ml(n,i,r){function d(n){nb(s).setUint32(u,n.byteLength,!0),u+=4,s.set(hb(n),u),u+=n.byteLength}if(!r||!r.byteLength)throw new O(2,6,6015);o="string"==typeof i?Sf(i,!0):i,n=Sf(n=Qf(n),!0);var o,s=new Uint8Array(12+n.byteLength+o.byteLength+r.byteLength),u=0;return d(n),d(o),d(r),s}function Nl(n,i,r){return"skd"!==i?n:(i=r.serverCertificate,r=Qf(n).split("skd://").pop(),Ml(n,r,i))}function Ol(n,i){2===n&&(i.headers["Content-Type"]="application/octet-stream")}function Pl(){}function Ql(){var i=1/0;navigator.connection&&navigator.connection.saveData&&(i=360);var r={retryParameters:Xe(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(i,r,o){return n.shakaMediaKeysPolyfill&&"skd"==r&&(r=o.serverCertificate,o=Ll(i),i=Ml(i,o,r)),i},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:vd(),minHdcpVersion:"",ignoreDuplicateInitData:!zd()},o="reload",s=!1;zd()||yd()||wd("Tizen 4")||Ad()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(o="smooth",s=!0),s={retryParameters:Xe(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(n){return n},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:s},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(yd()||zd()||Ad()||Dd()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(n){return n},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:Xe(),failureCallback:function(n){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(wd("Web0S")||xd()||Bd()||wd("Hisense")||wd("VIDAA"))&&(u.stallSkip=0);var p={trackSelectionCallback:function(n){return K(function(i){return i.return(n)})},downloadSizeCallback:function(n){var i;return K(function(r){return 1==r.g?navigator.storage&&navigator.storage.estimate?C(r,navigator.storage.estimate(),3):r.return(!0):(i=r.h,r.return(i.usage+n<.95*i.quota))})},progressCallback:function(n,i){},usePersistentLicense:!0,numberOfParallelDownloads:5},m={drm:r,manifest:s,streaming:u,mediaSource:{codecSwitchingStrategy:o,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:p,abrFactory:function(){return new te},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:i,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return p.trackSelectionCallback=function(i){return K(function(r){return r.return(function(i,r,o){var s=o;"AUTO"==s&&(s=n.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=i.filter(function(n){return"variant"==n.type&&(!n.hdr||n.hdr==s)});o=[];var p=ld(r,u.map(function(n){return n.language}));p&&(o=u.filter(function(n){return dd(n.language)==p})),0==o.length&&(o=u.filter(function(n){return n.primary})),0==o.length&&(u.map(function(n){return n.language}),o=u);var m=o.filter(function(n){return n.height&&480>=n.height});for(m.length&&(m.sort(function(n,i){return i.height-n.height}),o=m.filter(function(n){return n.height==m[0].height})),r=[],o.length&&(u=Math.floor(o.length/2),o.sort(function(n,i){return n.bandwidth-i.bandwidth}),r.push(o[u])),o=(i=t(i)).next();!o.done;o=i.next())(o=o.value).type!=eK&&"image"!=o.type||r.push(o);return r}(i,m.preferredAudioLanguage,m.preferredVideoHdrLevel))})},m}function Sl(n,i,r){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Fl(n,i,r||Ql(),o,"")}function Tl(){this.g=null,this.h=[]}function Ul(n,i){var r=0;n.g&&n.g.state==i&&(r+=n.g.duration),n=t(n.h);for(var o=n.next();!o.done;o=n.next())r+=(o=o.value).state==i?o.duration:0;return r}function Wl(){this.i=this.h=null,this.g=[]}function Xl(n,i,r){n.i!=i&&(n.i=i,n.g.push({timestamp:Date.now()/1e3,id:i.id,type:"text",fromAdaptation:r,bandwidth:null}))}function Yl(){this.u=this.A=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.K=this.N=this.H=this.I=this.J=this.l=this.o=NaN,this.g=new Tl,this.h=new Wl}function W(i,r){jf.call(this);var o,s,u=this;this.l=tH,this.xd=this.h=null,this.da=!1,this.Gd=new Af,this.sc=new Af,this.o=new Af,this.Ba=new Af,this.C=this.G=this.m=this.H=null,this.Kd=0,this.W=new Il,this.ma=this.ea=this.i=this.Ld=this.F=this.j=this.za=this.J=this.eg=this.Y=this.V=this.Aa=this.K=this.I=this.$b=null,this.mb=!1,this.Ne=this.s=null,this.We=1e9,this.Oc=[],this.N=NaN,this.g=$l(this),this.Id={width:1/0,height:1/0},this.u=null,this.kb=new Je(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.lb=this.g.preferredTextLanguage,this.Kc=this.g.preferredTextRole,this.Jc=this.g.preferForcedSubs,this.Hc=[],r&&r(this),this.V=(o=this,new hl({getBandwidthEstimate:function(){return o.s?o.s.getBandwidthEstimate():NaN},pb:function(){return o.pb()},getCurrentTime:function(){return o.h?o.h.currentTime:0},Cd:function(){return o.Cd()},Ob:function(){return o.Ob()},Cb:function(){return o.Cb()},R:function(){return o.R()}},o.g.cmcd)),this.Y=new yl(this.g.cmsd),this.H=(s=this,new mf(function(n,i,r){s.s&&s.s.segmentDownloaded(n,i,r)},function(n,i,r){if(i=(new Map).set("headers",n).set("request",i).set("requestType",r),s.dispatchEvent(hm("downloadheadersreceived",i)),s.Y&&(i=s.Y).h.enabled){if(r=n["cmsd-static"])try{var o=new Map,u=r.split(",");for(r=0;r<u.length;r++){var p=u[r].split("=");o.set(p[0],Dl(p[1]))}}catch(n){}if(n=n["cmsd-dynamic"]){try{var m=new Map,y=n.split(";");for(n=1;n<y.length;n++){var x=y[n].split("=");m.set(x[0],Dl(x[1]))}var A=m}catch(n){A=null}A&&(i.g=A)}}},function(n,i,r,o){n=(new Map).set("request",n).set("error",i).set("httpResponseCode",r).set("aborted",o),s.dispatchEvent(hm("downloadfailed",n))},function(n,i,r){var o=s.V;if(r=void 0===r?{}:r,o.g.enabled){if("HEAD"===i.method)pl(o,i);else switch(n){case 0:try{if(o.g.enabled){if(r.type){e:{switch(r.type){case 4:var u="d";break e;case 3:case 2:u="h";break e;case 5:u="s";break e}u=void 0}o.m=u}pl(o,i,{ot:"m",su:!o.i})}}catch(n){Ta("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",n)}break;case e4:n=r;try{if(o.g.enabled){var p=n.segment;u=0,p&&(u=p.endTime-p.startTime);var m={d:1e3*u,st:o.h.R()?"l":"v"};m.ot=function(n){if(0===n.type)return"i";if(n=n.stream){var i=n.type;if("video"==i)return n.codecs&&n.codecs.includes(",")?tK:t_;if("audio"==i)return"a";if("text"==i)return"application/mp4"===n.mimeType?"tt":"c"}}(n);var y=m.ot===t_||"a"===m.ot||m.ot===tK||"tt"===m.ot,x=n.stream;x&&(y&&(m.bl=function(n,i){if(!(i=n.h.pb()[i]).length)return NaN;var r=n.h.getCurrentTime();return(n=i.find(function(n){return n.start<=r&&n.end>=r}))?1e3*(n.end-r):NaN}(o,x.type)),x.bandwidth&&(m.br=x.bandwidth/1e3)),y&&"tt"!==m.ot&&(m.tb=function(n,i){var r=n.h.Cb();if(!r.length)return NaN;n=r[0],r=t(r);for(var o=r.next();!o.done;o=r.next())"variant"===(o=o.value).type&&o.bandwidth>n.bandwidth&&(n=o);switch(i){case t_:return n.videoBandwidth||NaN;case"a":return n.audioBandwidth||NaN;default:return n.bandwidth}}(o,m.ot)/1e3),pl(o,i,m)}}catch(n){Ta("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",n)}break;case 2:case 5:case 6:pl(o,i,{ot:"k"});break;case 4:pl(o,i,{ot:"o"})}}},function(n,i,r,o){s.F&&s.F.banLocation&&s.F.banLocation(o)})),this.H.nf(this.g.streaming.forceHTTPS),this.A=null,tQ&&(this.A=tQ(),this.A.configure(this.g.ads)),this.Gd.D(n,"online",function(){dm(u),u.gf()}),this.yd=new qd(function(){return function(n){for(var i=Date.now()/1e3,r=!1,o=t(n.i.variants),s=o.next();!s.done;s=o.next())0<(s=s.value).disabledUntilTime&&s.disabledUntilTime<=i&&(s.disabledUntilTime=0,r=!0,function(n){var i="";n.video&&(i+="video:"+n.video.id),n.audio&&(i=i+(i?"&":"")+"audio:"+n.audio.id)}(s));n.i.variants.every(function(n){return 0===n.disabledUntilTime})&&n.yd.stop(),r&&jn(n,!0,void 0,!1,!1)}(u)}),i&&(ze("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Ic(i,!0))}function fm(n){null!=n.J&&(vi(n.J),n.J.release(),n.J=null)}function hm(n,i){return new Q(n,i)}function jm(n,i){n.dispatchEvent(hm("onstatechange",(new Map).set("state",i)))}function km(n,i){var r;return K(function(o){return 1==o.g?(r=++n.Kd,C(o,Jl(n.W,i),2)):r!=n.Kd?(n.W.release(),o.return(!0)):o.return(!1)})}function nm(n){var i,r,o,s;return K(function(u){if(1==u.g){var p,m,y,x;return jm(n,"media-source"),r=(i=n.g.textDisplayFactory)(),n.Te=i,(p=n.h,m=r,y=function(i,r,o){xm(n,i,r,o)},x=n.J,o=new Di(p,m,y,x)).configure(n.g.mediaSource),s=n.g.manifest.segmentRelativeVttTiming,o.Y=s,C(u,o.J,2)}n.G=o,E(u)})}function xm(n,i,r,o){i=t(i);for(var s=i.next();!s.done;s=i.next())if((s=s.value).data&&s.cueTime&&s.frames){var u=s.cueTime+r,p=o;p&&u>p&&(p=u);for(var m=t(s.frames),y=m.next();!y.done;y=m.next())dn(n,u,p,"org.id3",y.value);n.A&&n.A.onHlsTimedMetadata(s,u)}}function dn(n,i,r,o,s){i=(new Map).set("startTime",i).set("endTime",r).set("metadataType",o).set("payload",s),n.dispatchEvent(hm("metadata",i))}function Nm(n,i){if(i&&"chapters"==i.kind){i.mode="hidden";var r=new qd(function(){i.mode="hidden"}).qc().U(.5);n.Hc.push(function(){r.stop()})}}function Dm(n,i){return new Kg(i,n.g.drm.updateExpirationTime)}function Rm(n,i,r){n.K=new Se,n.K.g=e0,Ve(n.K,r,Math.min(.5,r/2)),om(n),n.o.D(i,"waiting",function(){return fn(n)}),n.o.D(i,"stalled",function(){return fn(n)}),n.o.D(i,"canplaythrough",function(){return fn(n)}),n.o.D(i,"progress",function(){return fn(n)})}function fn(n){switch(n.l){case tX:if(n.h.ended)var i=!0;else{var r=Kh(n.h.buffered);i=null!=r&&r>=n.h.duration-1}break;case tG:e:if(n.h.ended||Li(n.G))i=!0;else{if(n.i.presentationTimeline.R()){r=n.i.presentationTimeline.Bb();var o=Kh(n.h.buffered);if(null!=o&&o>=r){i=!0;break e}}i=!1}break;default:i=!1}o=Mh(n.h.buffered,n.h.currentTime);var s=i,u=(r=n.K).h.get(r.g);i=r.g,o=s||o>=u?e1:e0,r.g=o,i!=o&&om(n)}function gn(n){if(n.F){var i=nd(n.g.manifest);n.h&&"AUDIO"===n.h.nodeName&&(i.disableVideo=!0),n.F.configure(i)}if(n.m&&n.m.configure(n.g.drm),n.j){n.j.configure(n.g.streaming);try{hn(n,n.i)}catch(i){mm(n,i)}n.s&&Wm(n),(i=n.j.j)&&(!i.allowedByApplication||!i.allowedByKeySystem)&&jn(n)}if(n.H&&n.H.nf(n.g.streaming.forceHTTPS),n.G&&(n.G.configure(n.g.mediaSource),n.G.Y=n.g.manifest.segmentRelativeVttTiming,i=n.g.textDisplayFactory,n.Te!=i)){var r=i(),o=n.G,s=o.F;o.F=r,s&&(r.setTextVisibility(s.isTextVisible()),s.destroy()),o.h&&(o.h.j=r),n.Te=i,n.j&&(r=(i=n.j).i.get(eK))&&rk(i,r.stream,!0,0,!0)}n.s&&(n.s.configure(n.g.abr),n.g.abr.enabled?n.s.enable():n.s.disable(),Vm(n)),n.K&&(i=n.g.streaming.rebufferingGoal,n.i&&(i=Math.max(i,n.i.minBufferTime)),Ve(n.K,i,Math.min(.5,i/2))),n.i&&Jm(n.i.presentationTimeline,n.g.playRangeStart,n.g.playRangeEnd),n.A&&n.A.configure(n.g.ads),n.V&&n.V.configure(n.g.cmcd),n.Y&&n.Y.configure(n.g.cmsd)}function kn(n){return n&&(n=/(\d+)x(\d+)/.exec(n))?{Kb:parseInt(n[1],10),rows:parseInt(n[2],10)}:null}function bn(n){return Array.from(n.h.textTracks).filter(function(n){return"metadata"!=n.kind&&"chapters"!=n.kind&&"Shaka Player TextTrack"!=n.label})}function pn(n){return Array.from(n.h.textTracks).filter(function(n){return"chapters"==n.kind})}function qn(n,i){var r;return K(function(o){switch(o.g){case 1:return sa(o,2),C(o,Nk(i,n.H,n.g.streaming.retryParameters),4);case 4:r=o.h,ua(o,3);break;case 2:va(o);case 3:if(r)return o.return(r);throw new O(1,2,2011,i)}})}function rn(n,i,r,o,s,u,p){var m,y;return K(function(x){if(1==x.g)return"text/vtt"!=s||p.length?C(x,sn(n,i,n.H,n.g.streaming.retryParameters),3):x.B(2);2!=x.g&&(m=tn(n,x.h,s,p),i=tD(new Blob([m],{type:"text/vtt"})),s="text/vtt"),y=document.createElement("track");var A=n.V,I=i;try{if(A.g.enabled){var M=jl(A);M.ot="c",M.su=!0;var j=nl(M),D=ol(I,j)}else D=I}catch(n){Ta("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",n),D=I}return y.src=D,y.label=u,y.kind=o,y.srclang=r,n.h.getAttribute("crossorigin")||n.h.setAttribute("crossorigin","anonymous"),n.h.appendChild(y),x.return(y)})}function sn(n,i,r,o){var s,u,p;return K(function(m){if(1==m.g){s=e4,(u=qf([i],o)).method="GET";var y=n.V;try{y.g.enabled&&pl(y,u,{ot:"c",su:!0})}catch(n){Ta("CMCD_TEXT_ERROR","Could not generate text CMCD data.",n)}return C(m,r.request(s,u).promise,2)}return p=m.h,m.return(p.data)})}function tn(n,i,r,o){var s=eW[r];if(s)return r=s(),n={periodStart:0,segmentStart:0,segmentEnd:n.h.duration,vttOffset:0},i=hb(i),function(n,i){function c(n){for(var r=n,o=t(i),s=o.next();!s.done;s=o.next())(s=s.value).end&&s.start<n&&(r+=s.end-s.start);return(10>(n=Math.floor(r/3600))?"0":"")+n+":"+(10>(o=Math.floor(r/60%60))?"0":"")+o+":"+(10>(s=Math.floor(r%60))?"0":"")+s+"."+(100>(r=Math.floor(1e3*r%1e3))?10>r?"00":"0":"")+r}var r=Rk(n);n="WEBVTT\n\n",r=t(r);for(var o=r.next();!o.done;o=r.next())n+=c((o=o.value).startTime)+" --> "+c(o.endTime)+function(n){var i=[];switch(n.textAlign){case"left":i.push("align:left");break;case"right":i.push("align:right");break;case J:i.push("align:middle");break;case"start":i.push("align:start");break;case"end":i.push("align:end")}switch(n.writingMode){case"vertical-lr":i.push("vertical:lr");break;case"vertical-rl":i.push("vertical:rl")}return i.length?" "+i.join(" "):""}(o)+"\n"+o.payload+"\n\n";return n}(i=r.parseMedia(i,n,null),o);throw new O(2,2,2014,r)}function $l(n){var i=Ql();return i.streaming.failureCallback=function(i){if(n.R()){var r=null;1001==i.code||1002==i.code?r=1:1003==i.code&&(r=.1),null!=r&&(i.severity=1,n.gf(r))}},i.textDisplayFactory=function(){return n.xd?new Yk(n.h,n.xd):HTMLMediaElement.prototype.addTextTrack?new Sk(n.h,"Shaka Player TextTrack"):new Vk},i}function zm(n,i){return K(function(r){if(1==r.g){var o,s;return C(r,(o=n,s=i,K(function(n){if(1==n.g){var i;return C(n,(i=o.m,K(function(n){var r,o,u,p,m,y,x,A,I;return 1==n.g?C(n,Sd(i,s,0<s.offlineSessionIds.length),2):((r=s).textStreams=r.textStreams.filter(function(n){return Qc(n=Gc(n.mimeType,n.codecs))}),C(n,(o=s,K(function(n){switch(n.g){case 1:u=[],m=(p=t(o.imageStreams)).next();case 2:var i;if(m.done){n.B(4);break}if("application/mp4"==(x=(y=m.value).mimeType)&&"mjpg"==y.codecs&&(x="image/jpg"),eZ.has(x)){n.B(5);break}if(!(A=eQ.get(x))){eZ.set(x,!1),n.B(5);break}return C(n,(i=A,new Promise(function(n){var r=new Image;r.src=i,"decode"in r?r.decode().then(function(){n(!0)}).catch(function(){n(!1)}):r.onload=r.onerror=function(){n(2===r.height)}})),7);case 7:I=n.h,eZ.set(x,I);case 5:eZ.get(x)&&u.push(y),m=p.next(),n.B(2);break;case 4:o.imageStreams=u,E(n)}})),0))})),2)}if(!s.variants.some(oe))throw new O(2,4,4032);E(n)})),2)}hn(n,i),E(r)})}function hn(n,i){if(n.l!=tV){Qd(i.variants,n.g.restrictions,n.Id)&&n.j&&Gm(n);var r=n.m?n.m.g:null;if(r&&n.m.s)for(var o=t(i.variants),s=o.next();!s.done;s=o.next())s=s.value,Bm(n,r.keySystem,s.video),Bm(n,r.keySystem,s.audio);vn(n,i)}}function Bm(n,i,r){if(r){r=t(r.drmInfos);for(var o=r.next();!o.done;o=r.next())if((o=o.value).keySystem==i){o=t(o.initData||[]);for(var s=o.next();!s.done;s=o.next())s=s.value,$g(n.m,s.initDataType,s.initData)}}}function om(n){var i=n.Ke();if(n.u&&n.K&&n.C){if(n.V){var r=n.V;i||r.i||(r.i=!0),r.i&&i&&(r.j=!0),r.l=i}Hm(n)}i=(new Map).set("buffering",i),n.dispatchEvent(hm("buffering",i))}function Im(n){var i=n.h.playbackRate;0!=i&&(n.I&&n.I.set(i),i=hm("ratechange"),n.dispatchEvent(i))}function Hm(n){if(n.u&&n.K){var i=n.u.g,r="playing";n.K.g==e0?r="buffering":n.h.paused?r="paused":n.h.ended&&(r="ended");var o=r;if(null==i.g)i.g={timestamp:Date.now()/1e3,state:o,duration:0},i=!0;else{var s=Date.now()/1e3;i.g.duration=s-i.g.timestamp,i.g.state==o?i=!1:(i.h.push(i.g),i.g={timestamp:s,state:o,duration:0},i=!0)}i&&(r=(new Map).set("newstate",r),n.dispatchEvent(hm("statechanged",r)))}}function Xm(n){if(n.R()){var i=n.Eb();if(Number.isFinite(i.end)&&!(n.h.currentTime<i.start)){if(n.g.streaming.liveSync)var r=n.g.streaming.liveSyncMaxLatency,o=n.g.streaming.liveSyncPlaybackRate;else n.i&&n.i.serviceDescription&&(r=n.i.serviceDescription.maxLatency||n.g.streaming.liveSyncMaxLatency,o=n.i.serviceDescription.maxPlaybackRate||n.g.streaming.liveSyncPlaybackRate);if(n.g.streaming.liveSync)var s=n.g.streaming.liveSyncMinLatency,u=n.g.streaming.liveSyncMinPlaybackRate;else n.i&&n.i.serviceDescription&&(s=n.i.serviceDescription.minLatency||n.g.streaming.liveSyncMinLatency,u=n.i.serviceDescription.minPlaybackRate||n.g.streaming.liveSyncMinPlaybackRate);var p=n.h.playbackRate,m=i.end-n.h.currentTime,y=0;if(n.l==tX){var x=n.h.buffered;0<x.length&&(y=Math.max(o,(y=x.end(x.length-1))-i.end))}r&&o&&m-y>r?p!=o&&n.xf(o):s&&u&&m-y<s?p!=u&&n.xf(u):p!==n.I.ec()&&n.ud()}}}function Ym(n){if(n.h){var i,r=!1,o=n.h.currentTime/n.h.duration;isNaN(o)||(o=Math.round(100*o),isNaN(n.N)?(n.N=o,r=!0):(o=Math.max(n.N,o),n.N!=o&&(n.N=o,r=!0))),r&&(0==n.N?i=hm("started"):25==n.N?i=hm("firstquartile"):50==n.N?i=hm("midpoint"):75==n.N?i=hm("thirdquartile"):100==n.N&&(i=hm("complete")),i&&n.dispatchEvent(i))}}function Wm(n){try{vn(n,n.i)}catch(i){return mm(n,i),!1}var i=pe(n.i.variants);return i=n.kb.create(i),n.s.setVariants(Array.from(i.values())),!0}function Om(n,i){return i=void 0!==i&&i,Wm(n)?n.s.chooseVariant(i):null}function jn(n,i,r,o,s){i=void 0===i||i,r=void 0===r?0:r,o=void 0!==o&&o,s=void 0===s||s;var u=Om(n);u&&Km(n,u,s,i,r,o)}function Km(n,i,r,o,s,u){u=void 0!==u&&u;var p=n.j.j;if(i==p)o&&sk(n.j,i,o,s,!0);else{var m=n.u.h;m.h!=i&&(m.h=i,m.g.push({timestamp:Date.now()/1e3,id:i.id,type:"variant",fromAdaptation:r,bandwidth:i.bandwidth})),sk(n.j,i,o,s,u,r),o=null,p&&(o=ge(p)),i=ge(i),r?(r=(new Map).set("oldTrack",o).set("newTrack",i),n.J&&wi(n.J,i,n.He()),wn(n,r=hm("adaptation",r))):xn(n,o,i)}}function mn(n,i){var r=Array.from(n.h.audioTracks).find(function(n){return n.enabled});i.enabled=!0,i.id!==r.id&&(r.enabled=!1),xn(n,r=ne(r),i=ne(i))}function Gm(n){wn(n,hm("trackschanged"))}function xn(n,i,r){i=(new Map).set("oldTrack",i).set("newTrack",r),n.J&&wi(n.J,r,n.He()),wn(n,r=hm("variantchanged",i))}function ln(n){wn(n,hm("textchanged"))}function Um(n){wn(n,hm("texttrackvisibility"))}function Vm(n){n.g.abr.enabled||dm(n);var i=(new Map).set("newStatus",n.g.abr.enabled);wn(n,hm("abrstatuschanged",i))}function dm(n,i){if(i=void 0===i||i,n.l==tG){n.yd.stop();for(var r=t(n.i.variants),o=r.next();!o.done;o=r.next())o.value.disabledUntilTime=0;i&&Wm(n)}}function mm(n,i){var r,o;return K(function(s){switch(s.g){case 1:var u,p,m,y,x,A,I;if(n.l==tV)return s.return();if(r=!0,!(n.mb&&n.i&&n.j)||3016!=i.code&&3014!=i.code&&3015!=i.code&&3018!=i.code){s.B(2);break}return sa(s,3),C(s,(u=n.j,K(function(n){return 1==n.g?(p=Date.now()/1e3,m=u.h.minTimeBetweenRecoveries,!u.h.allowMediaSourceRecoveries||p-u.H<m)?n.return(!1):(u.H=p,y=eF,(x=u.i.get(y.P))&&(x.Db=null,wk(u,x),jk(x).catch(function(){})),(A=u.i.get(y.$))&&(A.Db=null,wk(u,A),jk(A).catch(function(){})),I=new Map,u.j.audio&&I.set(y.P,u.j.audio),u.j.video&&I.set(y.$,u.j.video),C(n,hj(u.g.T,I),2)):n.return(!0)})),5);case 5:r=!s.h,ua(s,2);break;case 3:va(s),r=!0;case 2:if(!r)return s.return();2===i.severity&&dm(n,!1),o=hm("error",(new Map).set("detail",i)),n.dispatchEvent(o),o.defaultPrevented&&(i.handled=!0),E(s)}})}function ym(n,i,r){r=(new Map).set("detail",{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement}),n.dispatchEvent(hm(i,r))}function lm(n){if(!n.h.error)return null;var i=n.h.error.code;if(1==i)return null;var r=n.h.error.msExtendedCode;return r&&(0>r&&(r+=4294967296),r=r.toString(16)),new O(2,3,3016,i,r,n.h.error.message)}function Em(n,i){if(n.j){var r=hm("keystatuschanged");n.dispatchEvent(r);var o=Object.keys(i);r=1==o.length&&"00"==o[0];var s=!1;if(o.length){o=t(n.i.variants);for(var u=o.next();!u.done;u=o.next()){u=u.value;var p=[];u.audio&&p.push(u.audio),u.video&&p.push(u.video),p=t(p);for(var m=p.next();!m.done;m=p.next()){var y=m.value;if(m=u.allowedByKeySystem,y.keyIds.size){u.allowedByKeySystem=!0,y=t(y.keyIds);for(var x=y.next();!x.done;x=y.next())x=x.value,((x=i[r?"00":x])||n.m.F)&&(u.allowedByKeySystem=u.allowedByKeySystem&&!!x&&!tY.includes(x))}m!=u.allowedByKeySystem&&(s=!0)}}}(!s||(Gm(n),Wm(n)))&&(i=n.j.j)&&!i.allowedByKeySystem&&jn(n)}}function Fm(n,i,r){n.F&&n.F.onExpirationUpdated&&n.F.onExpirationUpdated(i,r),i=hm("expirationupdated"),n.dispatchEvent(i)}function Jm(n,i,r){0<i&&(n.R()||n.qg(i)),r<(i=n.getDuration())&&(n.R()||n.Pa(r))}function vn(n,i){var r=Object.keys(n=n.m?n.m.Bd():{});r=r.length&&"00"==r[0];var o=!1,s=!1,u=new Set,p=new Set;i=t(i.variants);for(var m=i.next();!m.done;m=i.next()){m=m.value;var y=[];m.audio&&y.push(m.audio),m.video&&y.push(m.video),y=t(y);for(var x=y.next();!x.done;x=y.next())if((x=x.value).keyIds.size){x=t(x.keyIds);for(var A=x.next();!A.done;A=x.next()){A=A.value;var I=n[r?"00":A];I?tY.includes(I)&&p.add(I):u.add(A)}}m.allowedByApplication?m.allowedByKeySystem&&(o=!0):s=!0}if(!o)throw n={hasAppRestrictions:s,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(p)},new O(2,4,4012,n)}function wn(n,i){K(function(r){if(1==r.g)return C(r,Promise.resolve(),2);n.l!=tV&&n.dispatchEvent(i),E(r)})}function on(n){var i=new Set;n=t(n);for(var r=n.next();!r.done;r=n.next())(r=r.value).language?i.add(dd(r.language)):i.add("und");return i}function nn(n){var i=new Map,r=new Map;n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s="und",u=[];o.language&&(s=dd(o.language)),(u="variant"==o.type?o.audioRoles:o.roles)&&u.length||(u=[""]),i.has(s)||i.set(s,new Set),u=t(u);for(var p=u.next();!p.done;p=u.next())p=p.value,i.get(s).add(p),o.label&&(r.has(s)||r.set(s,new Map),r.get(s).set(p,o.label))}var m=[];return i.forEach(function(n,i){n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=null;r.has(i)&&r.get(i).has(o)&&(s=r.get(i).get(o)),m.push({language:i,role:o,label:s})}}),m}N("shaka.util.ConfigUtils",El),El.convertToConfigObject=Gl,El.mergeConfigObjects=Fl,Il.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},N("shaka.util.FairPlayUtils",Kl),Kl.commonFairPlayResponse=function(n,i){if(2===n){try{var r=Nf(i.data)}catch(n){return}n=!1,"<ckc>"===(r=r.trim()).substr(0,5)&&"</ckc>"===r.substr(-6)&&(r=r.slice(5,-6),n=!0);try{var o=JSON.parse(r);o.ckc&&(r=o.ckc,n=!0),o.CkcMessage&&(r=o.CkcMessage,n=!0),o.License&&(r=o.License,n=!0)}catch(n){}n&&(i.data=kb(ig(r)))}},Kl.expressplayFairPlayRequest=function(n,i){Ol(n,i)},Kl.conaxFairPlayRequest=function(n,i){Ol(n,i)},Kl.ezdrmFairPlayRequest=function(n,i){Ol(n,i)},Kl.verimatrixFairPlayRequest=function(n,i){2===n&&(n=hg(n=hb(i.body)),i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=Rf("spc="+n))},Kl.expressplayInitDataTransform=function(n,i,r){return Nl(n,i,r)},Kl.conaxInitDataTransform=function(i,r,o){if("skd"!==r)return i;r=o.serverCertificate,o=Qf(i).split("skd://").pop().split("?").shift(),o=n.atob(o);var s=new ArrayBuffer(2*o.length);s=mb(s);for(var u=0,p=o.length;u<p;u++)s[u]=o.charCodeAt(u);return Ml(i,s,r)},Kl.ezdrmInitDataTransform=function(n,i,r){return"skd"!==i?n:(i=r.serverCertificate,r=Qf(n).split(";").pop(),Ml(n,r,i))},Kl.verimatrixInitDataTransform=function(n,i,r){return Nl(n,i,r)},Kl.initDataTransform=Ml,Kl.defaultGetContentId=Ll,Kl.isFairPlaySupported=function(){var n;return K(function(i){return 1==i.g?(n={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},sa(i,2),C(i,navigator.requestMediaKeySystemAccess("com.apple.fps",[n]),4)):2!=i.g?i.return(!0):(va(i),i.return(!1))})},N("shaka.util.PlayerConfiguration",Pl),Pl.mergeConfigObjects=Sl,Pl.createDefault=Ql,oa(W,jf),(D=W.prototype).destroy=function(){var n,i=this;return K(function(r){switch(r.g){case 1:if(i.l==tV)return r.return();return fm(i),n=i.detach(),i.l=tV,C(r,n,2);case 2:if(i.Gd&&(i.Gd.release(),i.Gd=null),i.sc&&(i.sc.release(),i.sc=null),i.o&&(i.o.release(),i.o=null),i.Ba&&(i.Ba.release(),i.Ba=null),i.Ne=null,i.g=null,i.u=null,i.xd=null,i.V=null,i.Y=null,!i.H){r.B(3);break}return C(r,i.H.destroy(),4);case 4:i.H=null;case 3:i.s&&(i.s.release(),i.s=null),jf.prototype.release.call(i),E(r)}})},D.Ic=function(n,i){i=void 0===i||i;var r,o,s=this;return K(function(u){switch(u.g){case 1:if(s.l==tV)throw new O(2,7,7e3);if(!s.h||s.h==n){u.B(2);break}return C(u,s.detach(),2);case 2:return C(u,km(s,"attach"),4);case 4:if(u.h)return u.return();if(sa(u,5,6),jm(s,"attach"),r=function(){var n=lm(s);n&&mm(s,n)},s.sc.D(n,"error",r),s.h=n,!i||!rd()||s.G){u.B(6);break}return C(u,nm(s),6);case 6:wa(u),s.W.release(),ya(u,0);break;case 5:return o=va(u),C(u,s.detach(),10);case 10:throw o}})},D.Eg=function(n){this.eg=n},D.detach=function(n){n=void 0!==n&&n;var i=this;return K(function(r){if(1==r.g){if(i.l==tV)throw new O(2,7,7e3);return C(r,i.rc(!1,n),2)}if(3!=r.g)return C(r,km(i,"detach"),3);if(r.h)return r.return();try{i.h&&(i.sc.Za(),i.h=null),jm(i,"detach"),i.A&&!n&&i.A.release()}finally{i.W.release()}E(r)})},D.rc=function(n,i){n=void 0===n||n,i=void 0!==i&&i;var r,o,s,u,p,m,y,x,A,I=this;return K(function(M){switch(M.g){case 1:return I.l!=tV&&(I.l=tH),C(M,km(I,"unload"),2);case 2:if(M.h)return M.return();return ta(M,3),I.mb=!1,jm(I,"unload"),n&&!rd()&&(n=!1),fm(I),r=I.Hc.map(function(n){return n()}),I.Hc=[],C(M,Promise.all(r),5);case 5:if(I.dispatchEvent(hm("unloading")),I.Aa&&(I.Aa.release(),I.Aa=null),I.h&&(I.o.Za(),I.Ba.Za()),I.yd.stop(),I.$b&&(I.$b.release(),I.$b=null),!I.F){M.B(6);break}return C(M,I.F.stop(),7);case 7:I.F=null,I.Ld=null;case 6:if(!I.s){M.B(8);break}return C(M,I.s.stop(),8);case 8:if(!I.j){M.B(10);break}return C(M,I.j.destroy(),11);case 11:I.j=null;case 10:if(I.I&&(I.I.release(),I.I=null),I.C&&(I.C.release(),I.C=null),!I.G){M.B(12);break}return C(M,I.G.destroy(),13);case 13:I.G=null;case 12:if(I.A&&!i&&I.A.onAssetUnload(),I.Y&&(I.Y.g=null),I.h&&Xk(I.h),!I.h||!I.h.src){M.B(14);break}return C(M,new Promise(function(n){return new qd(n).U(.1)}),15);case 15:I.h.removeAttribute("src"),I.h.load();case 14:if(!I.m){M.B(16);break}return C(M,I.m.destroy(),17);case 17:I.m=null;case 16:if(I.ea=null,I.K=null,I.i){for(s=(o=t(I.i.variants)).next();!s.done;s=o.next())for(m=(p=t([(u=s.value).audio,u.video])).next();!m.done;m=p.next())(y=m.value)&&y.segmentIndex&&y.segmentIndex.release();for(m=(x=t(I.i.textStreams)).next();!m.done;m=x.next())(A=m.value).segmentIndex&&A.segmentIndex.release()}I.i=null,I.u=new Yl,I.Te=null,I.Oc=[],I.N=NaN,om(I);case 3:wa(M),I.W.release(),ya(M,4);break;case 4:if(n&&rd()&&!I.G)return C(M,nm(I),0);M.B(0)}})},D.ei=function(n){this.ma=n},D.load=function(n,i,r){i=void 0===i?null:i;var o,s,u,p,m,y=this;return K(function(x){switch(x.g){case 1:if(y.l==tV)throw new O(2,7,7e3);return C(x,Jl(y.W,"load"),2);case 2:if(y.W.release(),!y.h)throw new O(2,7,7002);if(!y.ea){x.B(3);break}return C(x,y.rc(!1),3);case 3:if(o=++y.Kd,s=function(){if(y.Kd!=o)throw new O(2,7,7e3)},u=function(n,i){return K(function(r){switch(r.g){case 1:return ta(r,2),C(r,Jl(y.W,i),4);case 4:return s(),C(r,n(),5);case 5:s();case 2:wa(r),y.W.release(),ya(r,0)}})},sa(x,5),y.ma=i,y.mb=!1,y.dispatchEvent(hm("loading")),p=Date.now()/1e3,y.u=new Yl,y.ea=n,r){x.B(7);break}return C(x,u(function(){return K(function(n){if(1==n.g){var i,o,s;return C(n,(i=y,K(function(n){return 1==n.g?(o=i.g.manifest.retryParameters,C(n,Nk(i.ea,i.H,o),2)):("application/x-mpegurl"==(s=n.h)&&Cd()&&(s="application/vnd.apple.mpegurl"),n.return(s))})),2)}r=n.h,E(n)})},"guessMimeType_"),7);case 7:if(function(n,i){if(!rd())return!0;if(i){if(""==(n.h||td()).canPlayType(i))return!1;if(!(rd()&&i in tf))return!0;if("application/x-mpegurl"===i||"application/vnd.apple.mpegurl"===i){if(n.g.streaming.preferNativeHls)return!0;if(Cd())return n.g.streaming.useNativeHlsOnSafari}}return!1}(y,r))return C(x,u(function(){return K(function(n){var i,o,s,u,p,m;return C(n,(i=y,o=r,K(function(n){return 1==n.g?(s=eF,u=Date.now()/1e3,p=!0,i.m=Dm(i,{Tb:i.H,onError:function(n){mm(i,n)},Ud:function(n){Em(i,n)},onExpirationUpdated:function(n,r){Fm(i,n,r)},onEvent:function(n){i.dispatchEvent(n),"drmsessionupdate"==n.type&&p&&(p=!1,i.u.j=Date.now()/1e3-u)}}),i.m.configure(i.g.drm),m={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:o?Nc(o):"",codecs:o?Oc(o):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:s.$,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.m.Y=!0,C(n,Rg(i.m,[m],[]),2)):C(n,i.m.Ic(i.h),0)})),0)})},"initializeSrcEqualsDrmInner_"),16);if(y.G){x.B(11);break}return C(x,u(function(){return K(function(n){return C(n,nm(y),0)})},"initializeMediaSourceEngineInner_"),11);case 11:return C(x,u(function(){return K(function(n){var i,o,s,u,p,m,x,A,I;return C(n,(i=y,o=r,K(function(n){if(1==n.g)return s=i.H,jm(i,"manifest-parser"),i.Ld=zh(i.ea,o||null),i.F=i.Ld(),u=nd(i.g.manifest),i.h&&"AUDIO"===i.h.nodeName&&(u.disableVideo=!0),i.F.configure(u),i.Aa=new Rj(function(){return i.Eb()}),i.Aa.addEventListener("regionadd",function(n){ym(i,"timelineregionadded",n=n.region),i.A&&i.A.onDashTimedMetadata(n)}),i.za=null,i.g.streaming.observeQualityChanges&&(i.za=new Nj(function(){return i.pb()}),i.za.addEventListener("qualitychange",function(n){var r=n.quality;n=n.position,r=(new Map).set("mediaQuality",{bandwidth:r.bandwidth,audioSamplingRate:r.audioSamplingRate,codecs:r.codecs,contentType:r.contentType,frameRate:r.frameRate,height:r.height,mimeType:r.mimeType,channelsCount:r.channelsCount,pixelAspectRatio:r.pixelAspectRatio,width:r.width}).set("position",n),i.dispatchEvent(hm("mediaqualitychanged",r))})),p={networkingEngine:s,filter:function(n){return zm(i,n)},makeTextStreamsForClosedCaptions:function(n){return function(n,i){for(var r=new Set,o=t(i.textStreams),s=o.next();!s.done;s=o.next())"application/cea-608"!=(s=s.value).mimeType&&"application/cea-708"!=s.mimeType||r.add(s.originalId);for(s=(o=t(i.variants)).next();!s.done;s=o.next())if((s=s.value.video)&&s.closedCaptions){for(var u=t(s.closedCaptions.keys()),p=u.next();!p.done;p=u.next())if(p=p.value,!r.has(p)){var m=p.startsWith("CC")?"application/cea-608":"application/cea-708",y=new Jj,x=s.closedCaptions.get(p);m={id:n.We++,originalId:p,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:y,mimeType:m,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:x,originalLanguage:x,label:null,type:eK,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:s.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},i.textStreams.push(m),r.add(p)}}}(i,n)},onTimelineRegionAdded:function(n){var r=i.Aa;e:{for(var o=t(r.g),s=o.next();!s.done;s=o.next())if((s=s.value).schemeIdUri==n.schemeIdUri&&s.id==n.id&&s.startTime==n.startTime&&s.endTime==n.endTime){o=s;break e}o=null}null==o&&(r.g.add(n),n=new Q("regionadd",new Map([["region",n]])),r.dispatchEvent(n))},onEvent:function(n){return i.dispatchEvent(n)},onError:function(n){return mm(i,n)},isLowLatencyMode:function(){return i.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return i.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){i.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){i.j&&i.j.updateDuration()},newDrmInfo:function(n){var r=i.m?i.m.g:null;r&&i.m.s&&Bm(i,r.keySystem,n)},onManifestUpdated:function(){var n=(new Map).set("isLive",i.R());i.dispatchEvent(hm("manifestupdated",n)),i.A&&i.A.onManifestUpdated(i.R())},getBandwidthEstimate:function(){return i.s.getBandwidthEstimate()}},m=Date.now()/1e3,jm(i,"manifest"),x=i,C(n,i.F.start(i.ea,p),2);if(x.i=n.h,A=hm("manifestparsed"),i.dispatchEvent(A),0==i.i.variants.length)throw new O(2,4,4036);(function(n){function b(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}n.variants.some(b)&&(n.variants=n.variants.filter(b))})(i.i),I=Date.now()/1e3-m,i.u.F=I,E(n)})),0)})},"parseManifestInner_"),13);case 13:return C(x,u(function(){return K(function(n){var i,r,o,s;return C(n,(i=y,K(function(n){return 1==n.g?(jm(i,"drm-engine"),r=Date.now()/1e3,o=!0,i.m=Dm(i,{Tb:i.H,onError:function(n){mm(i,n)},Ud:function(n){Em(i,n)},onExpirationUpdated:function(n,r){Fm(i,n,r)},onEvent:function(n){i.dispatchEvent(n),"drmsessionupdate"==n.type&&o&&(o=!1,i.u.j=Date.now()/1e3-r,i.J&&vi(i.J))}}),i.m.configure(i.g.drm),Qd(i.i.variants,i.g.restrictions,i.Id)&&i.j&&Gm(i),s=pe(i.i.variants),C(n,Rg(i.m,s,i.i.offlineSessionIds),2)):3!=n.g?C(n,i.m.Ic(i.h),3):C(n,zm(i,i.i),0)})),0)})},"initializeDrmInner_"),14);case 14:return C(x,u(function(){return K(function(n){var i,r,o,s,u,m,x,A,I,M,j,D,R,P,L,_,B,z,q,V;return C(n,(i=y,r=p,K(function(n){var p,y,H,G,X,J,$,ee,en,ea,eo,eu,ec;switch(n.g){case 1:for(jm(i,"load"),o=i.h,i.I=new Kj({Ed:function(){return o.playbackRate},ec:function(){return o.defaultPlaybackRate},rf:function(n){o.playbackRate=n},bg:function(n){o.currentTime+=n}}),s=function(){return Hm(i)},u=function(){return Im(i)},i.o.D(o,"playing",s),i.o.D(o,"pause",s),i.o.D(o,"ended",s),i.o.D(o,"ratechange",u),function(n,i){if(i.lcevc.enabled){var r=n.Cb();r&&r[0]&&"video/mp2t"==r[0].videoMimeType&&(ud()||navigator.userAgent.match(/Edge\//))&&(i.mediaSource.forceTransmux||Sa("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),fm(n),null==n.J&&(n.J=new ui(n.h,n.eg,i.lcevc),n.G&&(n.G.N=n.J))}else fm(n)}(i,i.g),m=i.g.abrFactory,i.s&&i.Ne==m||(i.Ne=m,i.s=m(),"function"!=typeof i.s.setMediaElement&&(ze("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.s.setMediaElement=function(){}),"function"!=typeof i.s.setCmsdManager&&(ze("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.s.setCmsdManager=function(){}),"function"!=typeof i.s.trySuggestStreams&&(ze("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.s.trySuggestStreams=function(){}),i.s.configure(i.g.abr)),i.kb=new Je(i.g.preferredAudioLanguage,i.g.preferredVariantRole,i.g.preferredAudioChannelCount,i.g.preferredVideoHdrLevel,i.g.preferSpatialAudio,i.g.preferredVideoLayout,i.g.preferredAudioLabel,i.g.preferredVideoLabel,i.g.mediaSource.codecSwitchingStrategy,i.g.manifest.dash.enableAudioGroups),i.lb=i.g.preferredTextLanguage,i.Kc=i.g.preferredTextRole,i.Jc=i.g.preferForcedSubs,Jm(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd),i.s.init(function(n,r,o){i.j&&n!=i.j.j&&Km(i,n,!0,void 0!==r&&r,void 0===o?0:o)}),i.s.setMediaElement(o),i.s.setCmsdManager(i.Y),Md(i.i,i.g.preferredVideoCodecs,i.g.preferredAudioCodecs,i.g.preferredDecodingAttributes),i.j=(p=i,new gk(p.i,{Dd:function(){return p.C?p.C.qd():0},getBandwidthEstimate:function(){return p.s.getBandwidthEstimate()},T:p.G,Tb:p.H,onError:function(n){return mm(p,n)},onEvent:function(n){return p.dispatchEvent(n)},Fh:function(){p.F&&p.F.update&&p.F.update()},af:function(n,i){var r=n.startTime,o=n.endTime,s=i.type;p.C&&p.C.cg(),fn(p),r=(new Map).set("start",r).set("end",o).set("contentType",s),p.dispatchEvent(hm("segmentappended",r)),p.s&&i.fastSwitching&&n.Zc&&n.Md&&p.s.trySuggestStreams()},Eh:function(n,i){var r,o,s,u,m,y;(i=i.Ve)&&p.za&&(r=p.za,o=i,s=r,u=o.contentType,(m=s.g.get(u))||(m={$c:[],If:null,contentType:u},s.g.set(u,m)),function(n,i){if((n=n.h()[i.contentType])&&0<n.length){var r=n[0].start,o=n[n.length-1].end,s=i.$c;i.$c=s.filter(function(n,i){return(!(n.position<=r)||!(i+1<s.length)||!(s[i+1].position<=r))&&!(n.position>=o)})}else i.$c=[]}(r,y=m),r={Ve:o,position:n},0<=(o=(y=y.$c).findIndex(function(i){return i.position>=n}))?y.splice(o,y[o].position==n?1:0,r):y.push(r))},Ef:function(n,i){var r=p.m;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(n)){i=new mg(hb(i));var o=0,s=t(i.data);for(n=s.next();!n.done;n=s.next())o+=n.value.length;if(0==o)r=Promise.resolve();else{for(o=new Uint8Array(o),s=0,n=(i=t(i.data)).next();!n.done;n=i.next())n=n.value,o.set(n,s),s+=n.length;$g(r,"cenc",o),r=r.l}}else r=Promise.resolve();return r},Gh:function(n,i,r){xm(p,n,i,r)},wd:function(n,i){return p.wd(n,i)}})),i.j.configure(i.g.streaming),i.l=tG,o.textTracks&&i.o.D(o.textTracks,"addtrack",function(n){n.track&&"chapters"===(n=n.track).kind&&Nm(i,n)}),i.dispatchEvent(hm("streaming")),x=null,(A=i.j.j)||(x=Om(i,!0)),I=[],D=(j=t([(M=A||x).video,M.audio])).next();!D.done;D=j.next())(R=D.value)&&!R.segmentIndex&&I.push(R.createSegmentIndex());if(!(0<I.length)){n.B(2);break}return C(n,Promise.all(I),2);case 2:if(i.F&&i.F.onInitialVariantChosen&&i.F.onInitialVariantChosen(M),Jm(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd),i.C=(y=i,H=i.ma,new Aj(y.h,y.i,y.g.streaming,H,function(){y.$b&&Mj(y.$b,!0),y.j&&y.j.dd(),y.K&&fn(y)},function(n){return y.dispatchEvent(n)})),i.$b=(G=i,X=r,(X=new Sj(G.Aa,G.R()||0<X)).addEventListener("enter",function(n){ym(G,"timelineregionenter",n.region)}),X.addEventListener("exit",function(n){ym(G,"timelineregionexit",n.region)}),X.addEventListener("skip",function(n){var i=n.region;n.seeking||(ym(G,"timelineregionenter",i),ym(G,"timelineregionexit",i))}),(J=new Lj(G.h)).g.add(X),G.za&&J.g.add(G.za),J),P=Math.max(i.i.minBufferTime,i.g.streaming.rebufferingGoal),Rm(i,o,P),A||(Km(i,x,!0,!1,0),!i.g.streaming.startAtSegmentBoundary)){n.B(4);break}return _=(L=i.C).je,C(n,($=x,ee=i.C.qd(),K(function(n){return 1==n.g?(en=$.audio,ea=$.video,eo=function(n,i){var r,o,s;return K(function(u){return 1==u.g?n?C(u,n.createSegmentIndex(),2):u.return(null):(o=(r=n.segmentIndex.Nb(i))?r.next().value:null)?(s=o.startTime,u.return(s)):u.return(null)})},C(n,eo(en,ee),2)):3!=n.g?(eu=n.h,C(n,eo(ea,ee),3)):null!=(ec=n.h)&&null!=eu?n.return(Math.max(ec,eu)):null!=ec?n.return(ec):null!=eu?n.return(eu):n.return(ee)})),6);case 6:_.call(L,n.h);case 4:return i.C.ie(),i.jc().find(function(n){return n.active})||((B=qe(i.i.textStreams,i.lb,i.Kc,i.Jc)[0]||null)&&Xl(i.u.h,B,!0),x&&(B?(x.audio&&function(n,i,r){if(0==n.g.autoShowText)return!1;if(1==n.g.autoShowText)return!0;var o=dd(n.g.preferredTextLanguage);return(r=dd(r.language),2==n.g.autoShowText)?cd(r,o):3==n.g.autoShowText?(n=dd(i.language),cd(r,o)&&!cd(n,r)):(Sa("Invalid autoShowText setting!"),!1)}(i,x.audio,B)&&(i.da=!0),i.da&&i.G.F.setTextVisibility(!0),Um(i)):i.da=!1),B&&(i.g.streaming.alwaysStreamText||i.Me())&&tk(i.j,B)),C(n,i.j.start(),7);case 7:i.g.abr.enabled&&(i.s.enable(),Vm(i)),Gm(i),Wm(i),i.i.variants.some(function(n){return n.primary}),(z=i.R())&&(i.g.streaming.liveSync||i.i.serviceDescription)?(q=function(){return Xm(i)},i.o.D(o,"timeupdate",q)):z||(V=function(){return Ym(i)},i.o.D(o,"timeupdate",V),Ym(i)),i.A&&i.A.onManifestUpdated(z),i.mb=!0,i.o.ja(o,"loadedmetadata",function(){i.u.m=Date.now()/1e3-r}),E(n)}})),0)})},"loadInner_"),10);case 16:return C(x,u(function(){return K(function(n){var i,o,s,u,m,x,A,I,M,j,D,R,P;return C(n,(i=y,o=p,s=r,K(function(n){if(1==n.g)return jm(i,"src-equals"),u=i.h,i.C=new zj(u),m=!1,i.Hc.push(function(){m=!0}),null!=i.ma&&i.C.je(i.ma),i.I=new Kj({Ed:function(){return u.playbackRate},ec:function(){return u.defaultPlaybackRate},rf:function(n){u.playbackRate=n},bg:function(n){u.currentTime+=n}}),x=i.g.streaming.rebufferingGoal,Rm(i,u,x),A=function(){return Hm(i)},I=function(){return Im(i)},i.o.D(u,"playing",A),i.o.D(u,"pause",A),i.o.D(u,"ended",A),i.o.D(u,"ratechange",I),"none"!=u.preload&&i.o.ja(u,"loadedmetadata",function(){i.u.m=Date.now()/1e3-o}),u.audioTracks&&(i.o.D(u.audioTracks,"addtrack",function(){return Gm(i)}),i.o.D(u.audioTracks,"removetrack",function(){return Gm(i)}),i.o.D(u.audioTracks,"change",function(){return Gm(i)})),u.textTracks&&(i.o.D(u.textTracks,"addtrack",function(n){if(n.track)switch((n=n.track).kind){case"metadata":(function(n,i){if("metadata"==i.kind){i.mode="hidden",n.o.D(i,"cuechange",function(){if(i.activeCues)for(var r=t(i.activeCues),o=r.next();!o.done;o=r.next())dn(n,(o=o.value).startTime,o.endTime,o.type,o.value),n.A&&n.A.onCueMetadataChange(o.value)});var r=new qd(function(){var i=Array.from(n.h.textTracks).filter(function(n){return"metadata"==n.kind});i=t(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).qc().U(.5);n.Hc.push(function(){r.stop()})}})(i,n);break;case"chapters":Nm(i,n);break;default:Gm(i)}}),i.o.D(u.textTracks,"removetrack",function(){return Gm(i)}),i.o.D(u.textTracks,"change",function(){return Gm(i)})),u.src=function(n,i,r){try{if(!n.g.enabled)return i;var o=jl(n);e:{switch(r.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var s="a";break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":s=tK;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":s="m";break e}s=void 0}o.ot=s,o.su=!0;var u=nl(o);return ol(i,u)}catch(n){return Ta("CMCD_SRC_ERROR","Could not generate src CMCD data.",n),i}}(i.V,i.ea,s),(xd()||wd("Web0S"))&&u.load(),i.l=tX,i.dispatchEvent(hm("streaming")),M=new Ze,qj(u,HTMLMediaElement.HAVE_METADATA,i.o,function(){i.C.ie(),M.resolve()}),qj(u,HTMLMediaElement.HAVE_CURRENT_DATA,i.o,function(){var n;return K(function(r){var o,s,p,y;return 1==r.g?(""!=(s=(o=i).g.preferredAudioLanguage)&&o.jg(s,o.g.preferredVariantRole),(n=bn(i)).find(function(n){return"disabled"!=n.mode})?(0<n.length&&(i.da=!0),r.B(2)):C(r,new Promise(function(n){i.o.ja(u.textTracks,"change",n),new qd(n).U(1)}),2)):m?r.return():void(""!=(y=(p=i).g.preferredTextLanguage)&&p.kf(y,p.g.preferredTextRole,p.g.preferForcedSubs),E(r))})}),u.error?M.reject(lm(i)):"none"==u.preload&&(Sa('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),M.resolve()),i.o.ja(u,"error",function(){M.reject(lm(i))}),C(n,M,2);(j=i.R())&&i.g.streaming.liveSync?(D=function(){return Xm(i)},i.o.D(u,"timeupdate",D)):j||(R=function(){return Ym(i)},i.o.D(u,"timeupdate",R),Ym(i)),i.A&&(i.A.onManifestUpdated(j),j&&(P=i.Eb().end,i.o.D(u,"progress",function(){var n=i.Eb().end;P!=n&&(i.A.onManifestUpdated(i.R()),P=n)}))),i.mb=!0,E(n)})),0)})},"srcEqualsInner_"),10);case 10:y.dispatchEvent(hm("loaded")),ua(x,0);break;case 5:if(7e3==(m=va(x)).code){x.B(18);break}return C(x,y.rc(!1),18);case 18:throw m}})},D.Mh=function(){for(var n=this.W;n.g;)n.release()},D.configure=function(n,i){2==arguments.length&&"string"==typeof n&&(n=Gl(n,i)),n.streaming&&"forceTransmuxTS"in n.streaming&&(ze("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),n.mediaSource.mediaSource=n.streaming.forceTransmuxTS,delete n.streaming.forceTransmuxTS),n.streaming&&"forceTransmux"in n.streaming&&(ze("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),n.mediaSource.mediaSource=n.streaming.forceTransmux,delete n.streaming.forceTransmux),n.streaming&&n.streaming.lowLatencyMode&&(void 0==n.streaming.inaccurateManifestTolerance&&(n.streaming.inaccurateManifestTolerance=0),void 0==n.streaming.rebufferingGoal&&(n.streaming.rebufferingGoal=.01),void 0==n.streaming.segmentPrefetchLimit&&(n.streaming.segmentPrefetchLimit=2),void 0==n.streaming.retryParameters&&(n.streaming.retryParameters={}),void 0==n.streaming.retryParameters.baseDelay&&(n.streaming.retryParameters.baseDelay=100),void 0==n.manifest&&(n.manifest={}),void 0==n.manifest.retryParameters&&(n.manifest.retryParameters={}),void 0==n.manifest.retryParameters.baseDelay&&(n.manifest.retryParameters.baseDelay=100),void 0==n.drm&&(n.drm={}),void 0==n.drm.retryParameters&&(n.drm.retryParameters={}),void 0==n.drm.retryParameters.baseDelay&&(n.drm.retryParameters.baseDelay=100));var r=Sl(this.g,n,$l(this));return gn(this),r},D.getConfiguration=function(){var n=$l(this);return Sl(n,this.g,$l(this)),n},D.Qg=function(){if(this.h){var n=this.h.buffered.length;n=n?this.h.buffered.end(n-1):0;var i=this.getConfiguration().streaming.bufferingGoal;if(n>=(i=Math.min(this.h.currentTime+i,this.Eb().end)))return 1;if(!(n<=this.h.currentTime)&&n<i)return(n-this.h.currentTime)/(i-this.h.currentTime)}return 0},D.Qh=function(){for(var n in this.g)delete this.g[n];Sl(this.g,$l(this),$l(this)),gn(this)},D.Xg=function(){return this.l},D.He=function(){return this.i?this.i.type:null},D.ah=function(){return this.h},D.Ob=function(){return this.H},D.Ge=function(){return this.ea},D.Of=function(){return this.A?this.A:null},D.R=function(){return this.i?this.i.presentationTimeline.R():!!this.h&&!!this.h.src&&1/0==this.h.duration},D.Rb=function(){return!!this.i&&this.i.presentationTimeline.Rb()},D.sh=function(){if(this.i){var n=this.i.variants;return!!n.length&&!n[0].video}return!!this.h&&!!this.h.src&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},D.Eb=function(){if(this.i){if(!this.mb&&"HLS"==this.i.type)return{start:0,end:0};var n=this.i.presentationTimeline;return{start:n.hc(),end:n.qb()}}return this.h&&this.h.src&&(n=this.h.seekable).length?{start:n.start(0),end:n.end(n.length-1)}:{start:0,end:0}},D.ph=function(){this.R()&&(this.h.currentTime=this.Eb().end)},D.keySystem=function(){var n=this.drmInfo();return n?n.keySystem:""},D.drmInfo=function(){return this.m?this.m.g:null},D.Qc=function(){return this.m?this.m.Qc():1/0},D.Fe=function(){return this.m?this.m.Fe():[]},D.Bd=function(){return this.m?this.m.Bd():{}},D.Ke=function(){return!!this.K&&this.K.g==e0},D.Cd=function(){return this.h?this.I?this.I.h:1:0},D.xf=function(n){var i=this;0==n?Sa("A trick play rate of 0 is unsupported!"):(this.Ba.Za(),this.h.paused&&this.h.play(),this.I.set(n),this.l==tG&&(this.s.playbackRateChanged(n),qk(this.j,1<Math.abs(n))),this.R()&&this.Ba.D(this.h,"timeupdate",function(){var r=i.h.currentTime,o=i.Eb(),s=i.g.streaming.safeSeekOffset;0<n?r>=o.end&&i.ud():r<=o.start+s&&i.ud()}))},D.ud=function(){var n=this.I.ec();this.l==tX&&this.I.set(n),this.l==tG&&(this.I.set(n),this.s.playbackRateChanged(n),qk(this.j,!1)),this.Ba.Za()},D.Cb=function(){if(this.i){for(var n=this.j?this.j.j:null,i=[],r=0,o=t(this.i.variants),s=o.next();!s.done;s=o.next())if(oe(s=s.value)){var u=ge(s);u.active=s==n,u.active||1==r||null==n||s.video!=n.video||s.audio!=n.audio||(u.active=!0),u.active&&r++,i.push(u)}return i}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(n){return ne(n)}):[]},D.jc=function(){if(this.i){for(var n=this.j?this.j.o:null,i=[],r=t(this.i.textStreams),o=r.next();!o.done;o=r.next()){var s=he(o=o.value);s.active=o==n,i.push(s)}return i}return this.h&&this.h.src&&this.h.textTracks?bn(this).map(function(n){return le(n)}):[]},D.Wg=function(){var n=this.Oc;return this.i&&(n=this.i.imageStreams),n.map(function(n){return ie(n)})},D.Ng=function(n){var i,r,o,s,u=this;return K(function(p){return 1==p.g?u.l!=tG&&u.l!=tX?p.return(null):(i=u.Oc,u.i&&(i=u.i.imageStreams),(r=i.find(function(i){return i.id==n}))?r.segmentIndex?p.B(2):C(p,r.createSegmentIndex(),2):p.return(null)):4!=p.g?(o=[],Gj(r.segmentIndex,function(i){var s=kn(i.tilesLayout||r.tilesLayout);if(s){s=s.rows*s.Kb;for(var p=i.h-i.startTime,m=0;m<s;m++)o.push(u.Tf(n,i.startTime+p*m/s))}}),C(p,Promise.all(o),4)):(s=p.h,p.return(s.filter(function(n){return n})))})},D.Tf=function(n,i){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z=this;return K(function(q){return 1==q.g?z.l!=tG&&z.l!=tX?q.return(null):(r=z.Oc,z.i&&(r=z.i.imageStreams),(o=r.find(function(i){return i.id==n}))?o.segmentIndex?q.B(2):C(q,o.createSegmentIndex(),2):q.return(null)):null!=(s=o.segmentIndex.find(i))&&(p=kn((u=o.segmentIndex.get(s)).tilesLayout||o.tilesLayout))?(m=o.width||0,y=o.height||0,x=m/p.Kb,A=y/p.rows,I=p.Kb*p.rows,M=u.h-u.startTime,j=u.u||M/I,D=u.startTime,P=R=0,1<I&&(L=Math.floor((i-u.startTime)/j),D=u.startTime+L*j,R=L%p.Kb*x,P=Math.floor(L/p.Kb)*A),_=!1,(B=u.s)&&(_=!0,A=B.height,R=B.positionX,P=B.positionY,x=B.width),q.return({segment:u,imageHeight:y,imageWidth:m,height:A,positionX:R,positionY:P,startTime:D,duration:j,uris:u.Z(),width:x,sprite:_})):q.return(null)})},D.kg=function(n){if(this.i&&this.j){var i=this.i.textStreams.find(function(i){return i.id==n.id});i&&i!=this.j.o&&(Xl(this.u.h,i,!1),tk(this.j,i),ln(this),this.lb=i.language)}else if(this.h&&this.h.src&&this.h.textTracks){i=t(i=bn(this));for(var r=i.next();!r.done;r=i.next())je(r=r.value)==n.id?r.mode=this.da?"showing":"hidden":r.mode="disabled";ln(this)}},D.lf=function(n,i,r){if(i=void 0!==i&&i,r=void 0===r?0:r,this.i&&this.j){this.g.abr.enabled&&Sa("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var o=this.i.variants.find(function(i){return i.id==n.id});o&&oe(o)&&(Km(this,o,!1,i,r),this.kb=new Ie(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Wm(this))}else if(this.h&&this.h.audioTracks){for(r=(i=t(i=Array.from(this.h.audioTracks))).next();!r.done;r=i.next())if(je(r=r.value)==n.id){mn(this,r);break}}},D.Pg=function(){return nn(this.Cb())},D.ih=function(){return nn(this.jc())},D.Og=function(){return Array.from(on(this.Cb()))},D.hh=function(){return Array.from(on(this.jc()))},D.jg=function(n,i,r,o){if(r=void 0===r?0:r,o=void 0===o?0:o,this.i&&this.C){this.kb=new Je(n,i||"",r,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),n=function(n,i){return n.video||i.video?n.video&&i.video?Math.abs((n.video.height||0)-(i.video.height||0))+Math.abs((n.video.width||0)-(i.video.width||0)):1/0:0},i=this.j.j;var s=this.kb.create(this.i.variants);r=null,s=t(s.values());for(var u=s.next();!u.done;u=s.next())u=u.value,(!r||n(r,i)>n(u,i))&&(r=u);r?(n=ge(r),this.lf(n,!0,o)):jn(this)}else this.h&&this.h.audioTracks&&(o=qe(this.Cb(),n,i||"",!1)[0])&&this.lf(o)},D.kf=function(n,i,r){r=void 0!==r&&r,this.i&&this.C?(this.lb=n,this.Kc=i||"",this.Jc=r,(n=qe(this.i.textStreams,this.lb,this.Kc,this.Jc)[0]||null)&&n!=this.j.o&&(Xl(this.u.h,n,!1),this.g.streaming.alwaysStreamText||this.Me())&&(tk(this.j,n),ln(this))):(n=qe(this.jc(),n,i||"",r)[0])&&this.kg(n)},D.Wh=function(n,i,r){if(i=void 0===i||i,r=void 0===r?0:r,this.i&&this.C){for(var o=null,s=t(this.i.variants),u=s.next();!u.done;u=s.next())if((u=u.value).audio.label==n){o=u;break}null!=o&&(this.kb=new Je(o.language,"",0,"",!1,"",n,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),jn(this,i,r))}else if(this.h&&this.h.audioTracks){for(r=Array.from(this.h.audioTracks),i=null,o=(r=t(r)).next();!o.done;o=r.next())(o=o.value).label==n&&(i=o);i&&mn(this,i)}},D.Me=function(){var n=this.da;return this.G&&this.l==tG?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?bn(this).some(function(n){return"showing"==n.mode}):n},D.Pf=function(){return this.h&&this.h.src&&this.h.textTracks?pn(this).map(function(n){return le(n)}):[]},D.Rg=function(n){if(!this.h||!this.h.src||!this.h.textTracks)return[];var i=dd(n),r=pn(this).filter(function(n){return dd(n.language)==i});if(!r||!r.length)return[];n=[];var o=new Set;r=t(r);for(var s=r.next();!s.done;s=r.next())if((s=s.value)&&s.cues){s=t(s.cues);for(var u=s.next();!u.done;u=s.next()){var p=u.value;(u=p.id)&&""!=u||(u=p.startTime+"-"+p.endTime+"-"+p.text),p={id:u,title:p.text,startTime:p.startTime,endTime:p.endTime},o.has(u)||(n.push(p),o.add(u))}}return n},D.og=function(n){if(n=!!n,this.da!=n){if(this.da=n,this.l==tG){var i,r;this.G.F.setTextVisibility(n),this.g.streaming.alwaysStreamText||(n?this.j.o||0<(n=qe(this.i.textStreams,this.lb,this.Kc,this.Jc)).length&&(tk(this.j,n[0]),ln(this)):((r=(i=this.j).i.get(eK))&&(ik(r),jk(r).catch(function(){}),i.i.delete(eK)),i.o=null))}else if(this.h&&this.h.src&&this.h.textTracks){var o=bn(this);o=t(o);for(var s=o.next();!s.done;s=o.next())"disabled"!=(s=s.value).mode&&(s.mode=n?"showing":"hidden")}Um(this)}},D.dh=function(){if(!this.R())return null;if(this.C)var n=this.C.qd();else{if(null==this.ma)return new Date;n=this.ma}if(this.i)return new Date(1e3*(this.i.presentationTimeline.i+n));if(this.h&&this.h.getStartDate){var i=this.h.getStartDate();return isNaN(i.getTime())?null:new Date(i.getTime()+1e3*n)}return null},D.Sf=function(){if(!this.R())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var n=this.h.getStartDate();return isNaN(n.getTime())?null:n}return null},D.pb=function(){if(this.l==tG)return this.G.pb();var n={total:[],audio:[],video:[],text:[]};return this.l==tX&&(n.total=Nh(this.h.buffered)),n},D.getStats=function(){if(this.l!=tG&&this.l!=tX)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Hm(this);var n=this.h,i=n.currentTime/n.duration;if(!isNaN(i)){var r=this.u;i=Math.round(100*i),r.i=isNaN(r.i)?i:Math.max(r.i,i)}if(this.C&&(this.u.K=this.C.Af(),this.u.N=this.C.Bf()),n.getVideoPlaybackQuality){r=n.getVideoPlaybackQuality(),i=this.u;var o=Number(r.totalVideoFrames);i.J=Number(r.droppedVideoFrames),i.I=o,this.u.H=Number(r.corruptedVideoFrames)}if(r=this.m&&(r=this.m).I?r.I:NaN,this.u.s=r,this.l==tG){if(r=this.j.j,i=this.j.o,r){var s=(o=this.I?this.I.h:1)*r.bandwidth;i&&i.bandwidth&&(s+=o*i.bandwidth),this.u.A=s}r&&r.video&&(i=this.u,o=r.video.height||NaN,i.o=r.video.width||NaN,i.l=o),this.R()&&(r=this.Sf().valueOf()+1e3*n.currentTime,this.u.C=(Date.now()-r)/1e3),this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g),r=this.s.getBandwidthEstimate(),this.u.u=r}this.l==tX&&(r=this.u,i=n.videoHeight||NaN,r.o=n.videoWidth||NaN,r.l=i);var u=this.u;n=u.o,r=u.l,i=u.A,o=u.I,s=u.J;var p=u.H,m=u.N,y=u.K,x=u.u,A=u.i,I=u.m,M=u.F,j=u.j,D=Ul(u.g,"playing"),R=Ul(u.g,"paused"),P=Ul(u.g,"buffering"),L=u.s,_=u.C,B=u.G,z=function(n){function b(n){return{timestamp:n.timestamp,state:n.state,duration:n.duration}}for(var i=[],r=t(n.h),o=r.next();!o.done;o=r.next())i.push(b(o.value));return n.g&&i.push(b(n.g)),i}(u.g),q=[];u=t(u.h.g);for(var V=u.next();!V.done;V=u.next())q.push({timestamp:(V=V.value).timestamp,id:V.id,type:V.type,fromAdaptation:V.fromAdaptation,bandwidth:V.bandwidth});return{width:n,height:r,streamBandwidth:i,decodedFrames:o,droppedFrames:s,corruptedFrames:p,stallsDetected:m,gapsJumped:y,estimatedBandwidth:x,completionPercent:A,loadLatency:I,manifestTimeSeconds:M,drmTimeSeconds:j,playTime:D,pauseTime:R,bufferingTime:P,licenseTime:L,liveLatency:_,maxSegmentDuration:B,stateHistory:z,switchHistory:q}},D.Bg=function(n,i,r,o,s,u,p){p=void 0!==p&&p;var m,y,x,A,I,M,j,D=this;return K(function(R){switch(R.g){case 1:if(D.l!=tG&&D.l!=tX)throw new O(1,7,7004);if("subtitles"!=r&&"captions"!=r&&Sa("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){R.B(2);break}return C(R,qn(D,n),3);case 3:o=R.h;case 2:if(m=[],D.A&&(m=D.A.getCuePoints()),D.l!=tX){R.B(4);break}return p&&(r="forced"),C(R,rn(D,n,i,r,o,u||"",m),5);case 5:if(y=dd(i),x=D.jc().find(function(n){return dd(n.language)==y&&n.label==(u||"")&&n.kind==r}))return Gm(D),R.return(x);throw new O(1,2,2012);case 4:if(A=eF,I=D.h.duration,D.i&&(I=D.i.presentationTimeline.getDuration()),1/0==I)throw new O(1,4,4033);if(!m.length){R.B(6);break}return C(R,sn(D,n,D.H,D.g.streaming.retryParameters),7);case 7:M=tn(D,R.h,o,m),n=tD(new Blob([M],{type:"text/vtt"})),o="text/vtt";case 6:if(!Qc(Gc((j={id:D.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ij(0,I,[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:u||null,type:A.na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1}).mimeType,j.codecs)))throw new O(2,2,2014,o);return D.i.textStreams.push(j),Gm(D),R.return(he(j))}})},D.Cg=function(n,i){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_=this;return K(function(B){switch(B.g){case 1:if(_.l!=tG&&_.l!=tX)throw new O(1,7,7004);if(i){B.B(2);break}return C(B,qn(_,n),3);case 3:i=B.h;case 2:if("text/vtt"!=i)throw new O(1,2,2017,n);if(r=eF,o=_.h.duration,_.i&&(o=_.i.presentationTimeline.getDuration()),1/0==o)throw new O(1,4,4045);return C(B,sn(_,n,_.H,_.g.streaming.retryParameters),4);case 4:if(s=B.h,!(u=eW[i]))throw new O(2,2,2014,i);for(p=u(),m={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},y=hb(s),x=p.parseMedia(y,m,n),A=[],I={},j=(M=t(x)).next();!j.done;I={Dc:I.Dc,Hb:I.Hb},j=M.next())I.Hb=j.value,I.Dc=null,D=function(i){return function(){return null==i.Dc&&(i.Dc=xc([n],[i.Hb.payload])),i.Dc||[]}}(I),R=new S(I.Hb.startTime,I.Hb.endTime,D,0,null,null,0,0,1/0),I.Hb.payload.includes("#xywh")&&4===(P=I.Hb.payload.split("#xywh=")[1].split(",")).length&&R.pg({height:parseInt(P[3],10),positionX:parseInt(P[0],10),positionY:parseInt(P[1],10),width:parseInt(P[2],10)}),A.push(R);return L={id:_.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fj(A),mimeType:i||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.he,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1},_.l==tX?_.Oc.push(L):_.i.imageStreams.push(L),Gm(_),B.return(ie(L))}})},D.Ag=function(n,i,r){var o,s,u,p=this;return K(function(m){switch(m.g){case 1:if(p.l!=tG&&p.l!=tX)throw new O(1,7,7004);if(r){m.B(2);break}return C(m,qn(p,n),3);case 3:r=m.h;case 2:return o=[],p.A&&(o=p.A.getCuePoints()),C(m,rn(p,n,i,"chapters",r,"",o),4);case 4:if(s=m.h,!(u=p.Pf().find(function(n){return n.language==i}))){m.B(5);break}return C(m,new Promise(function(n,i){p.o.ja(s,"load",n),p.o.ja(s,"error",function(){i(new O(1,2,2015))})}),6);case 6:return Gm(p),m.return(u);case 5:throw new O(1,2,2012)}})},D.pf=function(n,i){this.Id.width=n,this.Id.height=i},D.gf=function(n){if(this.l==tG){var i=this.j;if(n=void 0===n?.1:n,i.l.g)i=!1;else if(i.s)i=!1;else{for(var r=t(i.i.values()),o=r.next();!o.done;o=r.next())!(o=o.value).Tc||o.Da||o.ib||(o.Tc=!1,ok(i,o,n));i=!0}}else i=!1;return i},D.Yg=function(){return Sa("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},D.Zg=function(){return this.Ld},D.rg=function(n){this.xd=n},D.wd=function(n,i){if(!this.g.abr.enabled||this.l===tV||!navigator.onLine)return!1;if(this.i.variants.some(function(i){return!!(i=i[n.type])&&i.id!==n.id&&("audio"!=n.type||n.language===i.language)})){for(var r=t(this.i.variants),o=r.next();!o.done;o=r.next()){var s=(o=o.value)[n.type];s&&s.id===n.id&&(o.disabledUntilTime=Date.now()/1e3+i)}return this.yd.$a(1),jn(this,!0,i=this.pb().video.reduce(function(n,i){return n+i.end-i.start},0),!0,!1),!0}return!1},N("shaka.Player",W),W.prototype.setVideoContainer=W.prototype.rg,W.prototype.getManifestParserFactory=W.prototype.Zg,W.prototype.getManifest=W.prototype.Yg,W.prototype.retryStreaming=W.prototype.gf,W.prototype.setMaxHardwareResolution=W.prototype.pf,W.prototype.addChaptersTrack=W.prototype.Ag,W.prototype.addThumbnailsTrack=W.prototype.Cg,W.prototype.addTextTrackAsync=W.prototype.Bg,W.prototype.getStats=W.prototype.getStats,W.prototype.getBufferedInfo=W.prototype.pb,W.prototype.getPresentationStartTimeAsDate=W.prototype.Sf,W.prototype.getPlayheadTimeAsDate=W.prototype.dh,W.prototype.setTextTrackVisibility=W.prototype.og,W.prototype.getChapters=W.prototype.Rg,W.prototype.getChaptersTracks=W.prototype.Pf,W.prototype.isTextTrackVisible=W.prototype.Me,W.prototype.selectVariantsByLabel=W.prototype.Wh,W.prototype.selectTextLanguage=W.prototype.kf,W.prototype.selectAudioLanguage=W.prototype.jg,W.prototype.getTextLanguages=W.prototype.hh,W.prototype.getAudioLanguages=W.prototype.Og,W.prototype.getTextLanguagesAndRoles=W.prototype.ih,W.prototype.getAudioLanguagesAndRoles=W.prototype.Pg,W.prototype.selectVariantTrack=W.prototype.lf,W.prototype.selectTextTrack=W.prototype.kg,W.prototype.getThumbnails=W.prototype.Tf,W.prototype.getAllThumbnails=W.prototype.Ng,W.prototype.getImageTracks=W.prototype.Wg,W.prototype.getTextTracks=W.prototype.jc,W.prototype.getVariantTracks=W.prototype.Cb,W.prototype.cancelTrickPlay=W.prototype.ud,W.prototype.trickPlay=W.prototype.xf,W.prototype.getPlaybackRate=W.prototype.Cd,W.prototype.isBuffering=W.prototype.Ke,W.prototype.getKeyStatuses=W.prototype.Bd,W.prototype.getActiveSessionsMetadata=W.prototype.Fe,W.prototype.getExpiration=W.prototype.Qc,W.prototype.drmInfo=W.prototype.drmInfo,W.prototype.keySystem=W.prototype.keySystem,W.prototype.goToLive=W.prototype.ph,W.prototype.seekRange=W.prototype.Eb,W.prototype.isAudioOnly=W.prototype.sh,W.prototype.isInProgress=W.prototype.Rb,W.prototype.isLive=W.prototype.R,W.prototype.getAdManager=W.prototype.Of,W.prototype.getAssetUri=W.prototype.Ge,W.prototype.getNetworkingEngine=W.prototype.Ob,W.prototype.getMediaElement=W.prototype.ah,W.prototype.getManifestType=W.prototype.He,W.prototype.getLoadMode=W.prototype.Xg,W.prototype.resetConfiguration=W.prototype.Qh,W.prototype.getBufferFullness=W.prototype.Qg,W.prototype.getConfiguration=W.prototype.getConfiguration,W.prototype.configure=W.prototype.configure,W.prototype.releaseAllMutexes=W.prototype.Mh,W.prototype.load=W.prototype.load,W.prototype.updateStartTime=W.prototype.ei,W.prototype.unload=W.prototype.rc,W.prototype.detach=W.prototype.detach,W.prototype.attachCanvas=W.prototype.Eg,W.prototype.attach=W.prototype.Ic,W.probeSupport=function(n){var i,r,o,s,u;return n=void 0===n||n,K(function(p){if(1==p.g){var m,y,x,A,I,M;return i={},n?C(p,K(function(n){return 1==n.g?(m="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),x={initDataTypes:["cenc"],videoCapabilities:y=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]},A=[{videoCapabilities:y,persistentState:"required",sessionTypes:["persistent-license"]},x],I=new Map,M=function(n){var i,r,o;return K(function(s){switch(s.g){case 1:if(sa(s,2),"org.w3.clearkey"===n&&Id())throw Error("Unsupported keySystem");return C(s,navigator.requestMediaKeySystemAccess(n,A),4);case 4:return o=!!(r=(i=s.h).getConfiguration().sessionTypes)&&r.includes("persistent-license"),yd()&&(o=!1),I.set(n,{persistentState:o}),C(s,i.createMediaKeys(),5);case 5:ua(s,0);break;case 2:va(s),I.set(n,null),E(s)}})},C(n,Promise.all(m.map(function(n){return M(n)})),2)):n.return(Jf(I))}),3):p.B(2)}2!=p.g&&(i=p.h);var j={};if(rd())for(var D in tf)j[D]=!0;D=t(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var R=D.next();!R.done;R=D.next())j[R=R.value]=rd()?!!tf[R]:sd(R);for(r=j,D='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(w(eq)),j={},R=(D=t(D)).next();!R.done;R=D.next()){j[R=R.value]=rd()?!!Qc(R)||Za(R)||!!$b(R):sd(R);var P=R.split(";")[0];j[P]=j[P]||j[R]}for(u in o={manifest:r,media:j,drm:i},s=tZ)o[u]=s[u]();return p.return(o)})},W.isBrowserSupported=function(){if(n.Promise||Sa("A Promise implementation or polyfill is required"),!(n.Promise&&n.Uint8Array&&Array.prototype.forEach)||wd("Trident/"))return!1;var i=Id();return(!i||!(9>i))&&!!(n.MediaKeys&&n.navigator&&n.navigator.requestMediaKeySystemAccess&&n.MediaKeySystemAccess&&n.MediaKeySystemAccess.prototype.getConfiguration)&&(!!rd()||sd("application/x-mpegurl"))},W.setAdManagerFactory=function(n){tQ=n},W.registerSupportPlugin=function(n,i){tZ[n]=i},W.prototype.destroy=W.prototype.destroy;var tV=0,tH=1,tG=2,tX=3;W.LoadMode={DESTROYED:tV,NOT_LOADED:tH,MEDIA_SOURCE:tG,SRC_EQUALS:tX},W.version="v4.7.11",e$=new function(n){this.g=n,this.i=Be,this.h=Ce}(new ye(Number("4"),Number("7")));var tY=["output-restricted","internal-error"],tZ={},tQ=null;function Bn(){this.h=[],this.j=this.i=this.g=0}function Cn(n,i,r){var o=this;this.g=n,this.h=i,this.j=r,this.i=!1,this.l=this.h.getVolume(),this.m=new Af,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}function Dn(i,r,o,s,u){var p=this;this.o=i,this.i=r,this.A=!1,this.s=this.C=null,this.F=NaN,this.m=u,this.j=null,this.h=new Af,google.ima.settings.setLocale(o),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),(i=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.l=new google.ima.AdsLoader(i),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.7.11"),this.g=null,this.u=s||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(i){(function(i,r){if(i.m(new Q("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.F))),i.C.customPlayheadTracker){var o={currentTime:i.i.currentTime};i.g=r.getAdsManager(o,i.u),i.i.muted?i.g.setVolume(0):i.g.setVolume(i.i.volume),i.h.D(i.i,"timeupdate",function(){i.i.duration&&(o.currentTime=i.i.currentTime)}),i.h.D(i.i,"volumechange",function(){i.j&&(i.j.setVolume(i.i.volume),i.i.muted&&i.j.setMuted(!0))})}else i.g=r.getAdsManager(i.i,i.u);i.m(new Q("ima-ad-manager-loaded",(new Map).set("imaAdManager",i.g)));var s=i.g.getCuePoints();if(s.length){r=[],s=t(s);for(var u=s.next();!u.done;u=s.next())r.push({start:u.value,end:null});i.m(new Q("ad-cue-points-changed",(new Map).set("cuepoints",r)))}(function(n){function b(i,r){i=(new Map).set("originalEvent",i),n.m(new Q(r,i))}n.h.D(n.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(i){Fn(n,i)}),n.h.D(n.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(i){Jn(n,i)}),n.h.D(n.g,google.ima.AdEvent.Type.STARTED,function(i){Jn(n,i)}),n.h.D(n.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){b(n,"ad-first-quartile")}),n.h.D(n.g,google.ima.AdEvent.Type.MIDPOINT,function(n){b(n,"ad-midpoint")}),n.h.D(n.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){b(n,"ad-third-quartile")}),n.h.D(n.g,google.ima.AdEvent.Type.COMPLETE,function(n){b(n,"ad-complete")}),n.h.D(n.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(i){Gn(n,i)}),n.h.D(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(i){Gn(n,i)}),n.h.D(n.g,google.ima.AdEvent.Type.SKIPPED,function(n){b(n,"ad-skipped")}),n.h.D(n.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){b(n,"ad-volume-changed")}),n.h.D(n.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){b(n,"ad-muted")}),n.h.D(n.g,google.ima.AdEvent.Type.PAUSED,function(i){n.j&&(n.j.i=!0,b(i,"ad-paused"))}),n.h.D(n.g,google.ima.AdEvent.Type.RESUMED,function(i){n.j&&(n.j.i=!1,b(i,"ad-resumed"))}),n.h.D(n.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(i){n.j&&b(i,"ad-skip-state-changed")}),n.h.D(n.g,google.ima.AdEvent.Type.CLICK,function(n){b(n,"ad-clicked")}),n.h.D(n.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){b(n,"ad-progress")}),n.h.D(n.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){b(n,"ad-buffering")}),n.h.D(n.g,google.ima.AdEvent.Type.IMPRESSION,function(n){b(n,"ad-impression")}),n.h.D(n.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){b(n,"ad-duration-changed")}),n.h.D(n.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){b(n,"ad-closed")}),n.h.D(n.g,google.ima.AdEvent.Type.LOADED,function(n){b(n,"ad-loaded")}),n.h.D(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){b(n,"all-ads-completed")}),n.h.D(n.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){b(n,"ad-linear-changed")}),n.h.D(n.g,google.ima.AdEvent.Type.AD_METADATA,function(n){b(n,"ad-metadata")}),n.h.D(n.g,google.ima.AdEvent.Type.LOG,function(n){b(n,"ad-recoverable-error")}),n.h.D(n.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){b(n,"ad-break-ready")}),n.h.D(n.g,google.ima.AdEvent.Type.INTERACTION,function(n){b(n,"ad-interaction")})})(i);try{i.g.init(i.i.offsetWidth,i.i.offsetHeight,In(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),i.h.D(i.i,"loadeddata",function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,In(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in n?(i.s=new ResizeObserver(function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,In(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),i.s.observe(i.i)):i.h.D(document,"fullscreenchange",function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,In(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),i.A?i.g.start():i.h.ja(i.i,"play",function(){i.A=!0,i.g.start()})}catch(n){Gn(i,null)}})(p,i)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Fn(p,n)}),this.h.D(this.i,"ended",function(){p.l.contentComplete()}),this.h.ja(this.i,"play",function(){p.A=!0})}function Fn(n,i){i.getError(),i=(new Map).set("originalEvent",i),n.m(new Q("ad-error",i)),Gn(n,null),n.m(new Q("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function In(n){return document.fullscreenEnabled?!!document.fullscreenElement:!!(n=n.i).webkitSupportsFullscreen&&n.webkitDisplayingFullscreen}function Jn(n,i){var r=i.getAd();r?(n.j=new Cn(r,n.g,n.i),i=(new Map).set("ad",n.j).set("sdkAdObject",r).set("originalEvent",i),n.m(new Q("ad-started",i)),n.j.isLinear()&&(n.o.setAttribute("ad-active","true"),n.i.pause(),n.i.muted?((i=n.j).l=n.i.volume,i.h.setVolume(0)):n.j.setVolume(n.i.volume))):Sa("The IMA SDK fired a "+i.type+" event with no associated ad. Unable to play ad!")}function Gn(n,i){n.m(new Q("ad-stopped",(new Map).set("originalEvent",i))),n.j&&n.j.isLinear()&&(n.o.removeAttribute("ad-active"),n.i.ended||n.i.play())}function Kn(n,i,r,o,s){this.h=n,this.g=s,this.i=i,this.j=r,this.l=o}function Ln(n,i,r,o){this.A=n,this.I=i,this.g=r,this.l=null,this.W=NaN,this.i=o,this.H=!1,this.u=null,this.j=[],this.K=[],this.J=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.o=new Af}function Rn(n){return[n.adId,n.adParameters,n.adSystem,n.adTitle,n.creativeAdId,n.creativeId,n.creativeSequence,n.height,n.width,n.staticResource].join("")}function Tn(n){var i=n.g.currentTime;if(0!=i&&null==n.u){for(var r,o,s=t(n.j),u=s.next();!u.done;u=s.next()){u=u.value;for(var p=t(u.ads),m=p.next();!m.done;m=p.next())if(m=m.value,o){if(m.startTimeInSeconds<i&&m.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=m,r=u;break}}else m.startTimeInSeconds<i&&(o=m,r=u)}r&&o&&!n.K.includes(o.adId)&&(n.u=i,n.g.currentTime=r.startTimeInSeconds)}}function Sn(n){if(n.g.duration&&(n.h||n.j.length)){var i=n.g.currentTime,r=!1;if(n.h){r=!0;var o=n.C,s=o.startTimeInSeconds+.5*o.durationInSeconds,u=o.startTimeInSeconds+.75*o.durationInSeconds;i>=o.startTimeInSeconds+.25*o.durationInSeconds&&!n.s.includes("firstQuartile")?(n.s.push("firstQuartile"),Un(n,"firstQuartile")):i>=s&&!n.s.includes("midpoint")?(n.s.push("midpoint"),Un(n,"midpoint")):i>=u&&!n.s.includes("thirdQuartile")&&(n.s.push("thirdQuartile"),Un(n,"thirdQuartile")),o=n.h.getRemainingTime(),0<(s=n.h.getDuration())&&(0>=o||o>s)&&Mn(n)}if(!n.h||!n.h.isLinear()){e:for(s=(o=t(n.j)).next();!s.done&&(s=s.value,!(n.h&&n.h.isLinear()));s=o.next())for(u=0;u<s.ads.length;u++){var p=s.ads[u],m=p.startTimeInSeconds+p.durationInSeconds;if(p.startTimeInSeconds<=i&&m>i){if(n.K.includes(p.adId)){if(n.g.ended)continue;n.g.currentTime=m;break e}Mn(n),n.J=s,n.h=new Kn(p,u+1,s.ads.length,!0,n.g),n.C=p,0===u&&Un(n,"breakStart"),Vn(n);break}}if(!n.h){for(s=(o=t(n.j)).next();!s.done&&(s=s.value,!n.h);s=o.next())for(u=0;u<s.nonLinearAdsList.length;u++)if((p=s.nonLinearAdsList[u]).nonLinearAdList.length){m=s.startTimeInSeconds;var y=n.F.get(Rn(p.nonLinearAdList[0]));if(m<=i&&y&&y.length){Mn(n),m=n,y=t(y);for(var x=y.next();!x.done;x=y.next())if((x=x.value).data.source.length){var A=document.createElement("img");A.src=x.data.source[0].url,A.style.top=(x.placeholder.top||0)+"%",A.style.height=100-(x.placeholder.top||0)+"%",A.style.left=(x.placeholder.left||0)+"%",A.style.maxWidth=100-(x.placeholder.left||0)+"%",A.style.objectFit="contain",A.style.position="absolute",m.A.appendChild(A)}n.J=s,n.h=new Kn(p,u+1,s.ads.length,!1,n.g),n.C=p,0===u&&Un(n,"breakStart"),Vn(n);break}}}r&&!n.h&&(i=n.g.currentTime,n.u&&n.u>i&&(n.g.currentTime=n.u),n.u=null)}}}function Mn(n){if(n.h){for(;n.A.lastChild;)n.A.removeChild(n.A.firstChild);n.H||n.K.push(n.C.adId),Un(n,"complete");for(var i=t(n.m),r=i.next();!r.done;r=i.next())r=r.value,n.o.Vb(r.target,r.type,r.listener);n.m=[],n.s=[],(i=n.h.getPositionInSequence())===(r=n.h.getSequenceLength())&&Un(n,"breakEnd"),n.h=null,n.C=null,n.J=null}}function Vn(n){var i=!1;n.g.paused?i=!0:(Un(n,"impression"),Un(n,"start")),n.m.push({target:n.g,type:"volumechange",listener:function(){n.g.muted&&Un(n,"mute")}}),n.m.push({target:n.g,type:"volumechange",listener:function(){n.g.muted||Un(n,"unmute")}}),n.m.push({target:n.g,type:"play",listener:function(){i?(Un(n,"impression"),Un(n,"start"),i=!1):Un(n,"resume")}}),n.m.push({target:n.g,type:"pause",listener:function(){Un(n,"pause")}});for(var r=t(n.m),o=r.next();!o.done;o=r.next())o=o.value,n.o.D(o.target,o.type,o.listener)}function Un(n,i){var r=n.C.trackingEvents.find(function(n){return n.eventType==i});if(r||(r=n.J.adBreakTrackingEvents.find(function(n){return n.eventType==i})),r){r=t(r.beaconUrls);for(var o=r.next();!o.done;o=r.next())(o=o.value)&&""!=o&&((o=qf([o],Xe())).method="POST",n.I.request(7,o))}switch(i){case"impression":n.i(new Q("ad-impression"));break;case"start":n.i(new Q("ad-started",(new Map).set("ad",n.h)));break;case"mute":n.i(new Q("ad-muted"));break;case"unmute":n.i(new Q("ad-volume-changed"));break;case"resume":n.i(new Q("ad-resumed"));break;case"pause":n.i(new Q("ad-paused"));break;case"firstQuartile":n.i(new Q("ad-first-quartile"));break;case"midpoint":n.i(new Q("ad-midpoint"));break;case"thirdQuartile":n.i(new Q("ad-third-quartile"));break;case"complete":n.i(new Q("ad-complete")),n.i(new Q("ad-stopped"));break;case"breakStart":n.A.setAttribute("ad-active","true");break;case"breakEnd":n.A.removeAttribute("ad-active")}}function Wn(n,i){this.g=n,this.i=null,this.h=i}function Xn(n,i,r,o){var s=this;this.s=n,this.l=i,this.j=null,this.F=NaN,this.i=o,this.G=!1,this.u=this.m=this.o=null,this.A="",this.C=[],this.h=new Af,(n=new google.ima.dai.api.UiSettings).setLocale(r),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,n),this.i(new Q("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(n){var i,r;i=s,r=n,i.i(new Q("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.F))),r=r.getStreamData().url,i.j.resolve(r),i.j=null,i.G||i.h.D(i.l,"seeked",function(){var n=i.l.currentTime;if(0!=n){i.g.streamTimeForContentTime(n);var r=i.g.previousCuePointForStreamTime(n);r&&!r.played&&(i.o=n,i.l.currentTime=r.start)}})}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){s.A.length?s.j.resolve(s.A):s.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),s.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(n){n=n.getAd(),s.m=new Wn(n,s.l),s.u&&(s.m.i=s.u),s.i(new Q("ad-started",(new Map).set("ad",s.m))),s.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){s.s.removeAttribute("ad-active");var n=s.l.currentTime;s.o&&s.o>n&&(s.l.currentTime=s.o,s.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(n){s.u=n.getStreamData().adProgressData,s.m&&(s.m.i=s.u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){s.i(new Q("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){s.i(new Q("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){s.i(new Q("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){s.i(new Q("ad-complete")),s.i(new Q("ad-stopped")),s.s.removeAttribute("ad-active"),s.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){s.i(new Q("ad-skipped")),s.i(new Q("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(n){var i=n.getStreamData();n=[],i=t(i.cuepoints);for(var r=i.next();!r.done;r=i.next())r=r.value,n.push({start:r.start,end:r.end});s.C=n,s.i(new Q("ad-cue-points-changed",(new Map).set("cuepoints",n)))})}function Y(){jf.call(this),this.g=this.i=this.h=null,this.j=new Bn,this.m=navigator.language,this.l=null}function Zn(n,i){if(i&&i.type)switch(i.type){case"ads-loaded":n.j.h.push(i.loadTime);break;case"ad-started":n.j.g++;break;case"ad-complete":n.j.i++;break;case"ad-skipped":n.j.j++}n.dispatchEvent(i)}function $n(n){return JSON.stringify(n,function(n,i){if("function"!=typeof i){if(i instanceof Event||i instanceof Q){var r={};for(o in i)(n=i[o])&&"object"==typeof n?"detail"==o&&(r[o]=n):o in Event||(r[o]=n);return r}if(i instanceof Error){var o=new Set(["name","message","stack"]);for(r in i)o.add(r);for(r=(n=t(Object.getOwnPropertyNames(i))).next();!r.done;r=n.next())o.add(r.value);for(n={},r=(o=t(o)).next();!r.done;r=o.next())n[r=r.value]=i[r];i={__type__:"Error",contents:n}}else if(i instanceof TimeRanges){for(o={__type__:"TimeRanges",length:i.length,start:[],end:[]},r=(i=t(Nh(i))).next();!r.done;r=i.next())n=(r=r.value).end,o.start.push(r.start),o.end.push(n);i=o}else i=i instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(i)}:"number"==typeof i?isNaN(i)?"NaN":isFinite(i)?i:0>i?"-Infinity":"Infinity":i;return i}})}function ao(n){return JSON.parse(n,function(n,i){if("NaN"==i)var r,o=NaN;else if("-Infinity"==i)o=-1/0;else if("Infinity"==i)o=1/0;else if(i&&"object"==typeof i&&"TimeRanges"==i.__type__)o={length:(r=i).length,start:function(n){return r.start[n]},end:function(n){return r.end[n]}};else if(i&&"object"==typeof i&&"Uint8Array"==i.__type__)o=new Uint8Array(i.entries);else if(i&&"object"==typeof i&&"Error"==i.__type__){for(o in i=Error((n=i.contents).message),n)i[o]=n[o];o=i}else o=i;return o})}(D=Cn.prototype).getDuration=function(){return this.g.getDuration()},D.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},D.getRemainingTime=function(){return this.h.getRemainingTime()},D.isPaused=function(){return this.i},D.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},D.getTimeUntilSkippable=function(){var n=this.g.getSkipTimeOffset();return Math.max(n=this.getRemainingTime()-n,0)},D.canSkipNow=function(){return this.h.getAdSkippableState()},D.skip=function(){return this.h.skip()},D.pause=function(){return this.h.pause()},D.play=function(){return this.h.resume()},D.getVolume=function(){return this.h.getVolume()},D.setVolume=function(n){return this.j.volume=n,this.h.setVolume(n)},D.isMuted=function(){return 0==this.h.getVolume()},D.isLinear=function(){return this.g.isLinear()},D.resize=function(n,i){var r=!1,o=this.j;document.fullscreenEnabled?r=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(r=o.webkitDisplayingFullscreen),this.h.resize(n,i,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},D.setMuted=function(n){(this.j.muted=n)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},D.getSequenceLength=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getTotalAds()},D.getPositionInSequence=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getAdPosition()},D.getTitle=function(){return this.g.getTitle()},D.getDescription=function(){return this.g.getDescription()},D.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},D.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},D.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},D.getAdId=function(){return this.g.getAdId()},D.getCreativeAdId=function(){return this.g.getCreativeAdId()},D.getAdvertiserName=function(){return this.g.getAdvertiserName()},D.getMediaUrl=function(){return this.g.getMediaUrl()},D.getTimeOffset=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getTimeOffset()},D.getPodIndex=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getPodIndex()},D.release=function(){this.h=this.g=null},N("shaka.ads.ClientSideAd",Cn),Cn.prototype.release=Cn.prototype.release,Cn.prototype.getPodIndex=Cn.prototype.getPodIndex,Cn.prototype.getTimeOffset=Cn.prototype.getTimeOffset,Cn.prototype.getMediaUrl=Cn.prototype.getMediaUrl,Cn.prototype.getAdvertiserName=Cn.prototype.getAdvertiserName,Cn.prototype.getCreativeAdId=Cn.prototype.getCreativeAdId,Cn.prototype.getAdId=Cn.prototype.getAdId,Cn.prototype.getVastMediaWidth=Cn.prototype.getVastMediaWidth,Cn.prototype.getVastMediaHeight=Cn.prototype.getVastMediaHeight,Cn.prototype.getVastMediaBitrate=Cn.prototype.getVastMediaBitrate,Cn.prototype.getDescription=Cn.prototype.getDescription,Cn.prototype.getTitle=Cn.prototype.getTitle,Cn.prototype.getPositionInSequence=Cn.prototype.getPositionInSequence,Cn.prototype.getSequenceLength=Cn.prototype.getSequenceLength,Cn.prototype.setMuted=Cn.prototype.setMuted,Cn.prototype.resize=Cn.prototype.resize,Cn.prototype.isLinear=Cn.prototype.isLinear,Cn.prototype.isMuted=Cn.prototype.isMuted,Cn.prototype.setVolume=Cn.prototype.setVolume,Cn.prototype.getVolume=Cn.prototype.getVolume,Cn.prototype.play=Cn.prototype.play,Cn.prototype.pause=Cn.prototype.pause,Cn.prototype.skip=Cn.prototype.skip,Cn.prototype.canSkipNow=Cn.prototype.canSkipNow,Cn.prototype.getTimeUntilSkippable=Cn.prototype.getTimeUntilSkippable,Cn.prototype.isSkippable=Cn.prototype.isSkippable,Cn.prototype.isPaused=Cn.prototype.isPaused,Cn.prototype.getRemainingTime=Cn.prototype.getRemainingTime,Cn.prototype.getMinSuggestedDuration=Cn.prototype.getMinSuggestedDuration,Cn.prototype.getDuration=Cn.prototype.getDuration,Dn.prototype.configure=function(n){this.C=n},Dn.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Xk(this.o)},Dn.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()},(D=Kn.prototype).getDuration=function(){return this.h.durationInSeconds},D.getMinSuggestedDuration=function(){return this.getDuration()},D.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},D.isPaused=function(){return this.g.paused},D.isSkippable=function(){return!!this.h.skipOffset},D.getTimeUntilSkippable=function(){return this.h.skipOffset?Math.max(this.getRemainingTime()-this.h.skipOffset,0):this.getRemainingTime()},D.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},D.skip=function(){this.g.currentTime+=this.getRemainingTime()},D.pause=function(){return this.g.pause()},D.play=function(){return this.g.play()},D.getVolume=function(){return this.g.volume},D.setVolume=function(n){this.g.volume=n},D.isMuted=function(){return this.g.muted},D.isLinear=function(){return this.l},D.resize=function(){},D.setMuted=function(n){this.g.muted=n},D.getSequenceLength=function(){return this.j?this.j:1},D.getPositionInSequence=function(){return this.i?this.i:1},D.getTitle=function(){return this.h.adTitle},D.getDescription=function(){return""},D.getVastMediaBitrate=function(){return 0},D.getVastMediaHeight=function(){return 0},D.getVastMediaWidth=function(){return 0},D.getAdId=function(){return this.h.adId},D.getCreativeAdId=function(){return this.h.creativeId},D.getAdvertiserName=function(){return""},D.getMediaUrl=function(){return null},D.getTimeOffset=function(){return 0},D.getPodIndex=function(){return 0},D.release=function(){this.j=this.i=this.g=this.h=null},N("shaka.ads.MediaTailorAd",Kn),Kn.prototype.release=Kn.prototype.release,Kn.prototype.getPodIndex=Kn.prototype.getPodIndex,Kn.prototype.getTimeOffset=Kn.prototype.getTimeOffset,Kn.prototype.getMediaUrl=Kn.prototype.getMediaUrl,Kn.prototype.getAdvertiserName=Kn.prototype.getAdvertiserName,Kn.prototype.getCreativeAdId=Kn.prototype.getCreativeAdId,Kn.prototype.getAdId=Kn.prototype.getAdId,Kn.prototype.getVastMediaWidth=Kn.prototype.getVastMediaWidth,Kn.prototype.getVastMediaHeight=Kn.prototype.getVastMediaHeight,Kn.prototype.getVastMediaBitrate=Kn.prototype.getVastMediaBitrate,Kn.prototype.getDescription=Kn.prototype.getDescription,Kn.prototype.getTitle=Kn.prototype.getTitle,Kn.prototype.getPositionInSequence=Kn.prototype.getPositionInSequence,Kn.prototype.getSequenceLength=Kn.prototype.getSequenceLength,Kn.prototype.setMuted=Kn.prototype.setMuted,Kn.prototype.resize=Kn.prototype.resize,Kn.prototype.isLinear=Kn.prototype.isLinear,Kn.prototype.isMuted=Kn.prototype.isMuted,Kn.prototype.setVolume=Kn.prototype.setVolume,Kn.prototype.getVolume=Kn.prototype.getVolume,Kn.prototype.play=Kn.prototype.play,Kn.prototype.pause=Kn.prototype.pause,Kn.prototype.skip=Kn.prototype.skip,Kn.prototype.canSkipNow=Kn.prototype.canSkipNow,Kn.prototype.getTimeUntilSkippable=Kn.prototype.getTimeUntilSkippable,Kn.prototype.isSkippable=Kn.prototype.isSkippable,Kn.prototype.isPaused=Kn.prototype.isPaused,Kn.prototype.getRemainingTime=Kn.prototype.getRemainingTime,Kn.prototype.getMinSuggestedDuration=Kn.prototype.getMinSuggestedDuration,Kn.prototype.getDuration=Kn.prototype.getDuration,Ln.prototype.stop=function(){for(var n=t(this.m),i=n.next();!i.done;i=n.next())i=i.value,this.o.Vb(i.target,i.type,i.listener);Mn(this),this.m=[],this.s=[],this.N="",this.V=!0,this.G="",this.u=null,this.j=[],this.K=[],this.F.clear()},Ln.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ln.prototype.onManifestUpdated=function(n){var i,r,o,s,u,p,m,y,x,A,I,M,j,D;this.H=n,""!=this.N&&(i=this,r=this.N,o=this.V,K(function(n){if(1==n.g)return s=qf([r],Xe()),u=i.I.request(7,s),sa(n,2),C(n,u.promise,4);if(2!=n.g){var R;if(p=n.h,m=[],0<(y=JSON.parse(Nf(p.data))).avails.length){if(JSON.stringify(i.j)!=JSON.stringify(y.avails)){for(i.j=y.avails,A=(x=t(i.j)).next();!A.done;A=x.next())for(M=(I=t(A.value.nonLinearAdsList)).next();!M.done;M=I.next())for(D=(j=t(M.value.nonLinearAdList)).next();!D.done;D=j.next())(function(n,i){var r,o,s,u;K(function(p){return 1==p.g?i.staticResource?(r=Rn(i),n.F.get(r))?p.return():(o=qf([i.staticResource],Xe()),s=n.I.request(7,o),sa(p,2),n.F.set(r,[]),C(p,s.promise,4)):p.return():2!=p.g?(u=JSON.parse(Nf(p.h.data)).apps,n.F.set(r,u),ua(p,0)):void(va(p),n.F.delete(r),E(p))})})(i,D.value);m=i.getCuePoints(),i.i(new Q("ad-cue-points-changed",(new Map).set("cuepoints",m)))}}else i.j.length&&i.i(new Q("ad-cue-points-changed",(new Map).set("cuepoints",m))),Mn(i),i.j=[];return o&&(i.H||0<m.length)&&(Sn(R=i),R.H||(Tn(R),R.o.D(R.g,"seeked",function(){Tn(R)}),R.o.D(R.g,"ended",function(){Mn(R)})),R.o.D(R.g,"timeupdate",function(){Sn(R)})),ua(n,0)}va(n),E(n)}),this.V=!1)},Ln.prototype.getCuePoints=function(){for(var n=[],i=t(this.j),r=i.next();!r.done;r=i.next()){r=t(r.value.ads);for(var o=r.next();!o.done;o=r.next())o=o.value,n.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return n},(D=Wn.prototype).getDuration=function(){return this.i?this.i.duration:-1},D.getMinSuggestedDuration=function(){return this.getDuration()},D.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},D.isPaused=function(){return this.h.paused},D.isSkippable=function(){return this.g.isSkippable()},D.getTimeUntilSkippable=function(){var n=this.g.getSkipTimeOffset();return Math.max(n=this.getRemainingTime()-n,0)},D.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},D.skip=function(){this.h.currentTime+=this.getRemainingTime()},D.pause=function(){return this.h.pause()},D.play=function(){return this.h.play()},D.getVolume=function(){return this.h.volume},D.setVolume=function(n){this.h.volume=n},D.isMuted=function(){return this.h.muted},D.isLinear=function(){return!0},D.resize=function(){},D.setMuted=function(n){this.h.muted=n},D.getSequenceLength=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getTotalAds()},D.getPositionInSequence=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getAdPosition()},D.getTitle=function(){return this.g.getTitle()},D.getDescription=function(){return this.g.getDescription()},D.getVastMediaBitrate=function(){return 0},D.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},D.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},D.getAdId=function(){return this.g.getAdId()},D.getCreativeAdId=function(){return this.g.getCreativeAdId()},D.getAdvertiserName=function(){return this.g.getAdvertiserName()},D.getMediaUrl=function(){return null},D.getTimeOffset=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getTimeOffset()},D.getPodIndex=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getPodIndex()},D.release=function(){this.h=this.i=this.g=null},N("shaka.ads.ServerSideAd",Wn),Wn.prototype.release=Wn.prototype.release,Wn.prototype.getPodIndex=Wn.prototype.getPodIndex,Wn.prototype.getTimeOffset=Wn.prototype.getTimeOffset,Wn.prototype.getMediaUrl=Wn.prototype.getMediaUrl,Wn.prototype.getAdvertiserName=Wn.prototype.getAdvertiserName,Wn.prototype.getCreativeAdId=Wn.prototype.getCreativeAdId,Wn.prototype.getAdId=Wn.prototype.getAdId,Wn.prototype.getVastMediaWidth=Wn.prototype.getVastMediaWidth,Wn.prototype.getVastMediaHeight=Wn.prototype.getVastMediaHeight,Wn.prototype.getVastMediaBitrate=Wn.prototype.getVastMediaBitrate,Wn.prototype.getDescription=Wn.prototype.getDescription,Wn.prototype.getTitle=Wn.prototype.getTitle,Wn.prototype.getPositionInSequence=Wn.prototype.getPositionInSequence,Wn.prototype.getSequenceLength=Wn.prototype.getSequenceLength,Wn.prototype.setMuted=Wn.prototype.setMuted,Wn.prototype.resize=Wn.prototype.resize,Wn.prototype.isLinear=Wn.prototype.isLinear,Wn.prototype.isMuted=Wn.prototype.isMuted,Wn.prototype.setVolume=Wn.prototype.setVolume,Wn.prototype.getVolume=Wn.prototype.getVolume,Wn.prototype.play=Wn.prototype.play,Wn.prototype.pause=Wn.prototype.pause,Wn.prototype.skip=Wn.prototype.skip,Wn.prototype.canSkipNow=Wn.prototype.canSkipNow,Wn.prototype.getTimeUntilSkippable=Wn.prototype.getTimeUntilSkippable,Wn.prototype.isSkippable=Wn.prototype.isSkippable,Wn.prototype.isPaused=Wn.prototype.isPaused,Wn.prototype.getRemainingTime=Wn.prototype.getRemainingTime,Wn.prototype.getMinSuggestedDuration=Wn.prototype.getMinSuggestedDuration,Wn.prototype.getDuration=Wn.prototype.getDuration,(D=Xn.prototype).configure=function(){},D.stop=function(){this.A="",this.o=null,this.C=[]},D.release=function(){this.stop(),this.h&&this.h.release()},D.onCueMetadataChange=function(n){if(n.key&&n.data){var i={};i[n.key]=n.data,this.g.onTimedMetadata(i)}},D.getCuePoints=function(){return this.C},oa(Y,jf),(D=Y.prototype).setLocale=function(n){this.m=n},D.configure=function(n){this.l=n,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},D.initClientSide=function(i,r,o){var s=this;if(!n.google||!google.ima||!google.ima.AdsLoader)throw new O(2,10,1e4);this.h&&this.h.release(),this.h=new Dn(i,r,this.m,o,function(n){return Zn(s,n)}),this.h.configure(this.l)},D.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),jf.prototype.release.call(this)},D.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Q("ad-stopped")),this.j=new Bn},D.requestClientSideAds=function(n){if(!this.h)throw new O(1,10,10001);var i=this.h;i.g&&i.g.destroy(),i.l&&i.l.contentComplete(),i.F=Date.now()/1e3,i.l.requestAds(n)},D.updateClientSideAdsRenderingSettings=function(n){if(!this.h)throw new O(1,10,10001);var i=this.h;i.u=n,i.g&&i.g.updateAdsRenderingSettings(i.u)},D.initMediaTailor=function(n,i,r){var o=this;this.i&&this.i.release(),this.i=new Ln(n,i,r,function(n){return Zn(o,n)})},D.requestMediaTailorStream=function(n,i,r){if(!this.i)throw new O(1,10,10005);var o,s,u,p,m,y,x,A,I,M=this.i;return r=void 0===r?"":r,M.l?n=Promise.reject(new O(1,10,10004)):(M.l=new Ze,o=n,K(function(n){if(1==n.g)return(s=qf([o],Xe())).method="POST",i&&(u=JSON.stringify(i),s.body=Rf(u)),p=M.I.request(7,s),sa(n,2),C(n,p.promise,4);if(2!=n.g){if((m=JSON.parse(Nf(n.h.data))).manifestUrl&&m.trackingUrl)y=new fc(o),x=new fc(m.trackingUrl),M.N=y.resolve(x).toString(),A=Date.now()/1e3-M.W,M.i(new Q("ads-loaded",(new Map).set("loadTime",A))),I=new fc(m.manifestUrl),M.l.resolve(y.resolve(I).toString()),M.l=null;else throw Error("Insufficient data from MediaTailor.");return ua(n,0)}if(va(n),!M.G.length)return M.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),M.l=null,n.return();M.l.resolve(M.G),M.l=null,E(n)}),M.G=r||"",M.W=Date.now()/1e3,n=M.l),n},D.initServerSide=function(i,r){var o=this;if(!n.google||!google.ima||!google.ima.dai)throw new O(2,10,10002);this.g&&this.g.release(),this.g=new Xn(i,r,this.m,function(n){return Zn(o,n)}),this.g.configure(this.l)},D.requestServerSideStream=function(n,i){if(i=void 0===i?"":i,!this.g)throw new O(1,10,10003);n.adTagParameters||(n.adTagParameters={});var r=n.adTagParameters;return(r.mpt||r.mpv)&&Sa('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),n.adTagParameters.mpt="shaka-player",n.adTagParameters.mpv="v4.7.11",(r=this.g).j?n=Promise.reject(new O(1,10,10004)):(n instanceof google.ima.dai.api.LiveStreamRequest&&(r.G=!0),r.j=new Ze,r.g.requestStream(n),r.A=i||"",r.F=Date.now()/1e3,n=r.j),n},D.replaceServerSideAdTagParameters=function(n){if(!this.g)throw new O(1,10,10003);(n.mpt||n.mpv)&&Sa('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),n.mpt="Shaka Player",n.mpv="v4.7.11",this.g.g.replaceAdTagParameters(n)},D.getServerSideCuePoints=function(){return ze("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},D.getCuePoints=function(){var n=[];return this.g&&(n=n.concat(this.g.getCuePoints())),this.i&&(n=n.concat(this.i.getCuePoints())),n},D.getStats=function(){var n=this.j;return{loadTimes:n.h,started:n.g,playedCompletely:n.i,skipped:n.j}},D.onManifestUpdated=function(n){this.i&&this.i.onManifestUpdated(n)},D.onDashTimedMetadata=function(n){if(this.g&&"urn:google:dai:2018"==n.schemeIdUri){var i=n.schemeIdUri,r=n.eventElement?n.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(i,r,n.startTime)}},D.onHlsTimedMetadata=function(n,i){this.g&&this.g.g.processMetadata("ID3",n.data,i)},D.onCueMetadataChange=function(n){this.g&&this.g.onCueMetadataChange(n)},N("shaka.ads.AdManager",Y),Y.prototype.onCueMetadataChange=Y.prototype.onCueMetadataChange,Y.prototype.onHlsTimedMetadata=Y.prototype.onHlsTimedMetadata,Y.prototype.onDashTimedMetadata=Y.prototype.onDashTimedMetadata,Y.prototype.onManifestUpdated=Y.prototype.onManifestUpdated,Y.prototype.getStats=Y.prototype.getStats,Y.prototype.getCuePoints=Y.prototype.getCuePoints,Y.prototype.getServerSideCuePoints=Y.prototype.getServerSideCuePoints,Y.prototype.replaceServerSideAdTagParameters=Y.prototype.replaceServerSideAdTagParameters,Y.prototype.requestServerSideStream=Y.prototype.requestServerSideStream,Y.prototype.initServerSide=Y.prototype.initServerSide,Y.prototype.requestMediaTailorStream=Y.prototype.requestMediaTailorStream,Y.prototype.initMediaTailor=Y.prototype.initMediaTailor,Y.prototype.updateClientSideAdsRenderingSettings=Y.prototype.updateClientSideAdsRenderingSettings,Y.prototype.requestClientSideAds=Y.prototype.requestClientSideAds,Y.prototype.onAssetUnload=Y.prototype.onAssetUnload,Y.prototype.release=Y.prototype.release,Y.prototype.initClientSide=Y.prototype.initClientSide,Y.prototype.configure=Y.prototype.configure,Y.prototype.setLocale=Y.prototype.setLocale,Y.ADS_LOADED="ads-loaded",Y.AD_STARTED="ad-started",Y.AD_FIRST_QUARTILE="ad-first-quartile",Y.AD_MIDPOINT="ad-midpoint",Y.AD_THIRD_QUARTILE="ad-third-quartile",Y.AD_COMPLETE="ad-complete",Y.AD_STOPPED="ad-stopped",Y.AD_SKIPPED="ad-skipped",Y.AD_VOLUME_CHANGED="ad-volume-changed",Y.AD_MUTED="ad-muted",Y.AD_PAUSED="ad-paused",Y.AD_RESUMED="ad-resumed",Y.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Y.CUEPOINTS_CHANGED="ad-cue-points-changed",Y.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Y.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Y.AD_CLICKED="ad-clicked",Y.AD_PROGRESS="ad-progress",Y.AD_BUFFERING="ad-buffering",Y.AD_IMPRESSION="ad-impression",Y.AD_DURATION_CHANGED="ad-duration-changed",Y.AD_CLOSED="ad-closed",Y.AD_LOADED="ad-loaded",Y.ALL_ADS_COMPLETED="all-ads-completed",Y.AD_LINEAR_CHANGED="ad-linear-changed",Y.AD_METADATA="ad-metadata",Y.AD_RECOVERABLE_ERROR="ad-recoverable-error",Y.AD_ERROR="ad-error",Y.AD_BREAK_READY="ad-break-ready",Y.AD_INTERACTION="ad-interaction",tQ=function(){return new Y};var tJ="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),t$="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),t0=["loop","playbackRate"],t1=["pause","play"],t2={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},t4={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},t3={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},t5=[["getConfiguration","configure"]],t8=[["isTextTrackVisible","setTextTrackVisibility"]],t6="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),t9=["attach","attachCanvas","detach","load","unload"];function oo(n,i,r,o,s,u,p){var m=this;this.G=n,this.K=p,this.j=new qd(i),this.N=r,this.u=!1,this.s=o,this.F=s,this.I=u,this.h=this.m=!1,this.J="",this.o=null,this.A=function(){return po(m)},this.C=function(n,i){switch((n=ao(i)).type){case"event":var r=n.targetName,o=gf(n.event);m.s(r,o);break;case"update":for(o in r=n.update)for(var s in n=m.g[o]||{},r[o])n[s]=r[o][s];m.u&&(m.N(),m.u=!1);break;case"asyncComplete":if(o=n.id,s=n.error,n=m.i[o],delete m.i[o],n){if(s){for(r in o=new O(s.severity,s.category,s.code),s)o[r]=s[r];n.reject(o)}else n.resolve()}}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,no.add(this)}function Ao(n,i,r){nr=r,r.addUpdateListener(n.A),r.addMessageListener("urn:x-cast:com.google.shaka.v2",n.C),po(n),zo(n,{type:"init",initState:i,appData:n.o}),n.l.resolve()}function Bo(n,i){var r=8003;switch(i.code){case"cancel":r=8004;break;case"timeout":r=8005;break;case"receiver_unavailable":r=8006}n.l.reject(new O(2,8,r,i))}function uo(n,i){var r=n.I();n.l=new Ze,n.u=!0,Ao(n,r,i)}function to(n){var i=nr;i.removeUpdateListener(n.A),i.removeMessageListener("urn:x-cast:com.google.shaka.v2",n.C)}function po(n){var i=!!nr&&"connected"==nr.status;if(n.h&&!i){for(var r in n.F(),n.g)n.g[r]={};ro(n)}n.h=i,n.J=i?nr.receiver.friendlyName:"",n.j.qc()}function ro(n){for(var i in n.i){var r=n.i[i];delete n.i[i],r.reject(new O(1,7,7e3))}}function zo(n,i){i=$n(i);var r=nr;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},Va)}catch(o){throw i=new O(2,8,8005,o),r=new Q("error",(new Map).set("detail",i)),n.s("player",r),n.cc(),i}}(D=oo.prototype).destroy=function(){return no.delete(this),ro(this),nr&&to(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.C=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},D.Ka=function(){return this.h},D.ef=function(){return this.J},D.init=function(){if(this.G.length){if(n.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.qc();var i=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);i=new chrome.cast.ApiConfig(i,function(n){for(var i=t(no),r=i.next();!r.done;r=i.next())uo(r.value,n)},function(n){for(var i=t(no),r=i.next();!r.done;r=i.next())r=r.value,nt="available"==n,r.j.qc()},"origin_scoped"),chrome.cast.initialize(i,function(){},function(){}),nt&&this.j.U(t7),(i=nr)&&i.status!=chrome.cast.SessionStatus.STOPPED?uo(this,i):nr=null}else n.__onGCastApiAvailable!==xo&&(na=n.__onGCastApiAvailable||null,n.__onGCastApiAvailable=xo)}},D.mf=function(n){this.o=n,this.h&&zo(this,{type:"appData",appData:this.o})},D.cast=function(n){var i=this;return K(function(r){if(!i.m)throw new O(1,8,8e3);if(!nt)throw new O(1,8,8001);if(i.h)throw new O(1,8,8002);return i.l=new Ze,chrome.cast.requestSession(function(r){return Ao(i,n,r)},function(n){return Bo(i,n)}),C(r,i.l,0)})},D.cc=function(){if(this.h){if(ro(this),nr){to(this);try{nr.stop(function(){},function(){})}catch(n){}nr=null}po(this)}},D.get=function(n,i){var r=this;if("video"==n){if(t1.includes(i))return function(){return r.hg.apply(r,[n,i].concat(w(Fa.apply(0,arguments))))}}else if("player"==n){if(t3[i]&&!this.get("player","isLive")())return function(){};if(t6.includes(i))return function(){return r.hg.apply(r,[n,i].concat(w(Fa.apply(0,arguments))))};if(t9.includes(i))return function(){return r.Nh.apply(r,[n,i].concat(w(Fa.apply(0,arguments))))};if(t2[i]||t4[i])return function(){return r.g[n][i]}}return this.g[n][i]},D.set=function(n,i,r){this.g[n][i]=r,zo(this,{type:"set",targetName:n,property:i,value:r})},D.hg=function(n,i){zo(this,{type:"call",targetName:n,methodName:i,args:Fa.apply(2,arguments)})},D.Nh=function(n,i){var r=Fa.apply(2,arguments),o=new Ze,s=this.H.toString();this.H++,this.i[s]=o;try{zo(this,{type:"asyncCall",targetName:n,methodName:i,args:r,id:s})}catch(n){o.reject(n)}return o};var t7=.02,nt=!1,nr=null,na=null,no=new Set;function xo(i){if(na?n.__onGCastApiAvailable=na:delete n.__onGCastApiAvailable,na=null,i)for(var r=t(no),o=r.next();!o.done;o=r.next())o.value.init();"function"==typeof n.__onGCastApiAvailable&&n.__onGCastApiAvailable(i)}function Do(n,i,r,o){o=void 0!==o&&o,jf.call(this);var s=this;this.i=n,this.h=i,this.m=this.o=this.j=this.s=this.l=null,this.C=r,this.A=o,this.u=new Map,this.g=new oo(r,function(){return Eo(s)},function(){return Fo(s)},function(n,i){return Go(s,n,i)},function(){return Ho(s)},function(){return Io(s)},o),function(n){n.g.init(),n.m=new Af;for(var i,r,o=t(tJ),s=o.next();!s.done;s=o.next())n.m.D(n.i,s.value,function(i){n.g.Ka()||(i=gf(i),n.j.dispatchEvent(i))});for(var u in e2)n.m.D(n.h,e2[u],function(i){n.g.Ka()||n.o.dispatchEvent(i)});for(var p in n.l={},o={},n.i)o.wc=p,Object.defineProperty(n.l,o.wc,{configurable:!1,enumerable:!0,get:function(i){return function(){return function(n,i){if("addEventListener"==i)return function(i,r,o){return n.j.addEventListener(i,r,o)};if("removeEventListener"==i)return function(i,r,o){return n.j.removeEventListener(i,r,o)};if(n.g.Ka()&&0==Object.keys(n.g.g.video).length){var r=n.i[i];if("function"!=typeof r)return r}return n.g.Ka()?n.g.get("video",i):("function"==typeof(i=n.i[i])&&(i=i.bind(n.i)),i)}(n,i.wc)}}(o),set:function(i){return function(r){var o=i.wc;n.g.Ka()?n.g.set("video",o,r):n.i[o]=r}}(o)}),o={wc:o.wc};n.s={},Lo(n,function(i){Object.defineProperty(n.s,i,{configurable:!1,enumerable:!0,get:function(){return function(n,i){if(n.u.has(i)&&(i=n.u.get(i)),"addEventListener"==i)return function(i,r,o){return n.o.addEventListener(i,r,o)};if("removeEventListener"==i)return function(i,r,o){return n.o.removeEventListener(i,r,o)};if("getMediaElement"==i)return function(){return n.l};if("getSharedConfiguration"==i)return n.g.get("player","getConfiguration");if("getNetworkingEngine"==i)return function(){return n.h.Ob()};if("getDrmEngine"==i)return function(){return n.h.m};if("getAdManager"==i)return function(){return n.h.Of()};if("setVideoContainer"==i)return function(i){return n.h.rg(i)};if(n.g.Ka()){if("getManifest"==i||"drmInfo"==i)return function(){return Sa(i+"() does not work while casting!"),null};if("attach"==i||"detach"==i)return function(){return Sa(i+"() does not work while casting!"),Promise.resolve()}}return n.g.Ka()&&0==Object.keys(n.g.g.video).length&&(t2[i]||t4[i])||!n.g.Ka()?n.h[i].bind(n.h):n.g.get("player",i)}(n,i)}})}),i=n,r=new Map,Lo(i,function(n,o){r.has(o)?(o=r.get(o),n.length<o.length?i.u.set(n,o):i.u.set(o,n)):r.set(o,n)}),n.j=new jf,n.j.zd=n.l,n.o=new jf,n.o.zd=n.s}(this)}function Lo(n,i){function c(n){return"constructor"!=n&&"function"==typeof o[n]&&!s.has(n)}var r,o=n.h,s=new Set;for(r in o)c(r)&&(s.add(r),i(r,o[r]));for(n=Object.getPrototypeOf(o),r=Object.getPrototypeOf({});n&&n!=r;){for(var u=t(Object.getOwnPropertyNames(n)),p=u.next();!p.done;p=u.next())c(p=p.value)&&(s.add(p),i(p,o[p]));n=Object.getPrototypeOf(n)}}function Io(n){var i={video:{},player:{},playerAfterLoad:{},manifest:n.h.Ge(),startTime:null};n.i.pause();for(var r=t(t0),o=r.next();!o.done;o=r.next())o=o.value,i.video[o]=n.i[o];for(n.i.ended||(i.startTime=n.i.currentTime),o=(r=t(t5)).next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.h[s[0]](),i.player[o]=s}for(o=(r=t(t8)).next();!o.done;o=r.next())o=(s=o.value)[1],s=n.h[s[0]](),i.playerAfterLoad[o]=s;return i}function Eo(n){var i=new Q("caststatuschanged");n.dispatchEvent(i)}function Fo(n){var i=new Q(n.l.paused?"pause":"play");n.j.dispatchEvent(i)}function Ho(n){for(var i,r=t(t5),o=r.next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.g.get("player",s[0])(),n.h[o](s)}var u=n.g.get("player","getAssetUri")();s=n.g.get("video","ended"),r=Promise.resolve();var p=n.i.autoplay;o=null,s||(o=n.g.get("video","currentTime")),(s=n.g.get("player","getTextTracks")())&&s.length&&(i=s.find(function(n){return n.active}));var m=n.g.get("player","isTextTrackVisible")();u&&(n.i.autoplay=!1,r=n.h.load(u,o));var y={};for(s=(o=t(t0)).next();!s.done;s=o.next())y[s=s.value]=n.g.get("video",s);r.then(function(){if(n.i){for(var r=t(t0),o=r.next();!o.done;o=r.next())o=o.value,n.i[o]=y[o];for(o=(r=t(t8)).next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.g.get("player",s[0])(),n.h[o](s)}n.h.og(m),i&&n.h.kf(i.language,i.roles,i.forced),n.i.autoplay=p,u&&n.i.play()}},function(i){i=(new Map).set("detail",i),i=new Q("error",i),n.h.dispatchEvent(i)})}function Go(n,i,r){n.g.Ka()&&("video"==i?n.j.dispatchEvent(r):"player"==i&&n.o.dispatchEvent(r))}function Oo(n,i,r,o){jf.call(this);var s=this;this.g=n,this.h=i,this.j=new Af,this.H={video:n,player:i},this.C=r||function(){},this.I=o||function(n){return n},this.i=null,this.F=!1,this.o=!0,this.m=0,this.A=!1,this.u=!0,this.s=this.l=null,this.G=new qd(function(){Po(s)}),function(n){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=function(){return Ro(n)},i.onSenderDisconnected=function(){return Ro(n)},i.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&So(n,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},n.l),So(n,{type:"event",targetName:"video",event:{type:"volumechange"}},n.l)},n.s=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),n.s.onMessage=function(i){return function(n,i){var r=ao(i.data);switch(r.type){case"PLAY":n.g.play(),Zo(n);break;case"PAUSE":n.g.pause(),Zo(n);break;case"SEEK":i=r.currentTime;var o=r.resumeState;null!=i&&(n.g.currentTime=Number(i)),o&&"PLAYBACK_START"==o?(n.g.play(),Zo(n)):o&&"PLAYBACK_PAUSE"==o&&(n.g.pause(),Zo(n));break;case"STOP":n.h.rc().then(function(){n.h&&Zo(n)});break;case"GET_STATUS":bp(n,Number(r.requestId));break;case"VOLUME":i=(o=r.volume).level,o=o.muted;var s=n.g.volume,u=n.g.muted;null!=i&&(n.g.volume=Number(i)),null!=o&&(n.g.muted=o),s==n.g.volume&&u==n.g.muted||Zo(n);break;case"LOAD":n.m=0,n.A=!1,n.u=!1,i=r.media,o=r.currentTime,s=n.I(i.contentId),u=r.autoplay||!0,n.C(i.customData),u&&(n.g.autoplay=!0),n.h.load(s,o).then(function(){n.h&&bp(n)}).catch(function(i){var o="LOAD_FAILED";7==i.category&&7e3==i.code&&(o="LOAD_CANCELLED"),So(n,{requestId:Number(r.requestId),type:o},n.s)});break;default:So(n,{requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},n.s)}}(n,i)},n.l=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),n.l.onMessage=function(i){return function(n,i){var r,o,s,u,p,m,y,x,A,I,M,j,D=ao(i.data);switch(D.type){case"init":n.m=0,n.A=!1,n.u=!0,r=D.initState,o=D.appData,K(function(i){switch(i.g){case 1:for(s in r.player)u=r.player[s],n.h[s](u);return n.C(o),p=n.g.autoplay,r.manifest?(n.g.autoplay=!1,sa(i,5),C(i,n.h.load(r.manifest,r.startTime),7)):C(i,Promise.resolve(),3);case 7:ua(i,3);break;case 5:return m=va(i),y=(new Map).set("detail",m),x=new Q("error",y),n.h&&n.h.dispatchEvent(x),i.return();case 3:if(!n.h)return i.return();for(A in r.video)I=r.video[A],n.g[A]=I;for(M in r.playerAfterLoad)j=r.playerAfterLoad[M],n.h[M](j);n.g.autoplay=p,r.manifest&&(n.g.play(),Zo(n)),E(i)}}),Po(n);break;case"appData":n.C(D.appData);break;case"set":var R=D.targetName,P=D.property;if(D=D.value,"video"==R){if(i=cast.receiver.CastReceiverManager.getInstance(),"volume"==P){i.setSystemVolumeLevel(D);break}if("muted"==P){i.setSystemVolumeMuted(D);break}}n.H[R][P]=D;break;case"call":(R=n.H[D.targetName])[D.methodName].apply(R,D.args);break;case"asyncCall":R=D.targetName,P=D.methodName,"player"==R&&"load"==P&&(n.m=0,n.A=!1);var L=D.id,_=i.senderId;D=(i=n.H[R])[P].apply(i,D.args),"player"==R&&"load"==P&&(D=D.then(function(){n.u=!0})),D.then(function(){return cp(n,_,L,null)},function(i){return cp(n,_,L,i)})}}(n,i)},i.start(),i=t(tJ);for(var r=i.next();!r.done;r=i.next())n.j.D(n.g,r.value,function(i){return Vo(n,"video",i)});for(var o in e2)n.j.D(n.h,e2[o],function(i){return Vo(n,"player",i)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?n.h.pf(3840,2160):n.h.pf(1920,1080),n.j.D(n.g,"loadeddata",function(){n.A=!0}),n.j.D(n.h,"loading",function(){n.o=!1,Wo(n)}),n.j.D(n.g,"playing",function(){n.o=!1,Wo(n)}),n.j.D(n.g,"pause",function(){Wo(n)}),n.j.D(n.h,"unloading",function(){n.o=!0,Wo(n)}),n.j.D(n.g,"ended",function(){new qd(function(){n.g&&n.g.ended&&(n.o=!0,Wo(n))}).U(nu)})}(this)}function Ro(n){n.m=0,n.u=!0,n.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Wo(n)}function Wo(n){var i;K(function(r){return 1==r.g?C(r,Promise.resolve(),2):n.h?void(i=new Q("caststatuschanged"),n.dispatchEvent(i),Yo(n)||Zo(n),E(r)):r.return()})}function Vo(n,i,r){n.h&&(Po(n),So(n,{type:"event",targetName:i,event:r},n.l))}function Po(n){n.G.U(ns);for(var i={video:{},player:{}},r=t(t$),o=r.next();!o.done;o=r.next())o=o.value,i.video[o]=n.g[o];if(n.h.R())for(var s in t3)0==n.m%t3[s]&&(i.player[s]=n.h[s]());for(var u in t2)0==n.m%t2[u]&&(i.player[u]=n.h[u]());for(var p in(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(i.video.volume=r.level,i.video.muted=r.muted),So(n,{type:"update",update:i},n.l),t4)0==n.m%t4[p]&&((i={player:{}}).player[p]=n.h[p](),So(n,{type:"update",update:i},n.l));n.A&&(n.m+=1),Yo(n)}function Yo(n){return!!(n.u&&(n.g.duration||n.h.R()))&&(bp(n),n.u=!1,!0)}function bp(n,i){var r={contentId:n.h.Ge(),streamType:n.h.R()?"LIVE":"BUFFERED",contentType:""};n.h.R()||(r.duration=n.g.duration),n.i&&(r.metadata=n.i),Zo(n,void 0===i?0:i,r)}function cp(n,i,r,o){n.h&&So(n,{type:"asyncComplete",id:r,error:o},n.l,i)}function So(n,i,r,o){n.F&&(n=$n(i),o?r.getCastChannel(o).send(n):r.broadcast(n))}function Zo(n,i,r){r=void 0===r?null:r;var o={mediaSessionId:0,playbackRate:n.g.playbackRate,playerState:n.o?nc:n.h.Ke()?nS:n.g.paused?nC:nT,currentTime:n.g.currentTime,supportedMediaCommands:63,volume:{level:n.g.volume,muted:n.g.muted}};r&&(o.media=r),So(n,{requestId:void 0===i?0:i,type:"MEDIA_STATUS",status:[o]},n.s)}oa(Do,jf),(D=Do.prototype).destroy=function(n){return n&&this.g.cc(),this.m&&(this.m.release(),this.m=null),n=[],this.h&&(n.push(this.h.destroy()),this.h=null),this.g&&(n.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,jf.prototype.release.call(this),Promise.all(n)},D.nh=function(){return this.l},D.bh=function(){return this.s},D.Fg=function(){return this.g.m&&nt},D.Ka=function(){return this.g.Ka()},D.ef=function(){return this.g.ef()},D.cast=function(){var n,i=this;return K(function(r){return 1==r.g?(n=Io(i),C(r,i.g.cast(n),2)):i.h?C(r,i.h.rc(),0):r.return()})},D.mf=function(n){this.g.mf(n)},D.ai=function(){!function(n){if(n.h){var i=n.I();chrome.cast.requestSession(function(r){return Ao(n,i,r)},function(i){return Bo(n,i)})}}(this.g)},D.cc=function(){this.g.cc()},D.Gg=function(n,i){i=void 0!==i&&i;var r=this;return K(function(o){if(1==o.g)return n==r.C&&i==r.A?o.return():(r.C=n,r.A=i,r.g.cc(),C(o,r.g.destroy(),2));r.g=null,r.g=new oo(n,function(){return Eo(r)},function(){return Fo(r)},function(n,i){return Go(r,n,i)},function(){return Ho(r)},function(){return Io(r)},i),r.g.init(),E(o)})},N("shaka.cast.CastProxy",Do),Do.prototype.changeReceiverId=Do.prototype.Gg,Do.prototype.forceDisconnect=Do.prototype.cc,Do.prototype.suggestDisconnect=Do.prototype.ai,Do.prototype.setAppData=Do.prototype.mf,Do.prototype.cast=Do.prototype.cast,Do.prototype.receiverName=Do.prototype.ef,Do.prototype.isCasting=Do.prototype.Ka,Do.prototype.canCast=Do.prototype.Fg,Do.prototype.getPlayer=Do.prototype.bh,Do.prototype.getVideo=Do.prototype.nh,Do.prototype.destroy=Do.prototype.destroy,oa(Oo,jf),(D=Oo.prototype).isConnected=function(){return this.F},D.th=function(){return this.o},D.Zh=function(n){this.i=n},D.Jg=function(){this.i=null},D.$h=function(n){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=n},D.Yh=function(n){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:n}]},D.Xh=function(n){this.i||(this.i={}),this.i.artist=n,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},D.destroy=function(){var n,i=this;return K(function(r){if(1==r.g)return i.j&&(i.j.release(),i.j=null),n=[],i.h&&(n.push(i.h.destroy()),i.h=null),i.G&&(i.G.stop(),i.G=null),i.g=null,i.H=null,i.C=null,i.F=!1,i.o=!0,i.l=null,i.s=null,jf.prototype.release.call(i),C(r,Promise.all(n),2);cast.receiver.CastReceiverManager.getInstance().stop(),E(r)})},N("shaka.cast.CastReceiver",Oo),Oo.prototype.destroy=Oo.prototype.destroy,Oo.prototype.setContentArtist=Oo.prototype.Xh,Oo.prototype.setContentImage=Oo.prototype.Yh,Oo.prototype.setContentTitle=Oo.prototype.$h,Oo.prototype.clearContentMetadata=Oo.prototype.Jg,Oo.prototype.setContentMetadata=Oo.prototype.Zh,Oo.prototype.isIdle=Oo.prototype.th,Oo.prototype.isConnected=Oo.prototype.isConnected;var ns=.5,nu=5,nc="IDLE",nT="PLAYING",nS="BUFFERING",nC="PAUSED";function hp(n,i,r,o,s){if(o>=s)return null;for(var u=-1,p=-1,m=0;m<r.length;m++)if(r[m].some(function(n){return null!=n&&""!=n.g.trim()})){u=m;break}for(m=r.length-1;0<=m;m--)if(r[m].some(function(n){return null!=n&&""!=n.g.trim()})){p=m;break}if(-1===u||-1===p)return null;for(var y=m=!1,x="white",A="black",I=ip(o,s,m,y,x,A);u<=p;u++){for(var M=r[u],j=-1,D=-1,R=0;R<M.length;R++)if(null!=M[R]&&""!==M[R].g.trim()){j=R;break}for(R=M.length-1;0<=R;R--)if(null!=M[R]&&""!==M[R].g.trim()){D=R;break}if(-1===j||-1===D)M=jp(o,s),n.nestedCues.push(M);else{for(;j<=D;j++)if(R=M[j]){var P=R.l,L=R.i,_=R.j,B=R.h;(P!=m||L!=y||_!=x||B!=A)&&(I.payload&&n.nestedCues.push(I),I=ip(o,s,P,L,_,B),m=P,y=L,x=_,A=B),I.payload+=R.g}else I.payload+=" ";I.payload&&n.nestedCues.push(I),u!==p&&(I=jp(o,s),n.nestedCues.push(I)),I=ip(o,s,m,y,x,A)}}return n.nestedCues.length?{cue:n,stream:i}:null}function ip(n,i,r,o,s,u){return n=new yb(n,i,""),r&&n.textDecoration.push("underline"),o&&(n.fontStyle="italic"),n.color=s,n.backgroundColor=u,n}function jp(n,i){return(n=new yb(n,i,"")).lineBreak=!0,n}function kp(n,i,r,o,s){this.g=n,this.l=i,this.i=r,this.h=o,this.j=s}function lp(n,i){this.i=[],this.g=1,this.h=0,this.u=n,this.s=i,this.j=this.m=!1,this.l="white",this.o="black",mp(this)}function np(n,i,r){var o="CC"+((n.u<<1|n.s)+1),s=new yb(i,r,"");s.lineInterpretation=1;var u=nL.get(n.g);return u&&(s.line=u),hp(s,o,n.i,i,r)}function mp(n){pp(n,0,15),n.g=1}function qp(n,i,r){if(!(32>r||127<r)){var o="";switch(i){case nE:o=nN.has(r)?nN.get(r):String.fromCharCode(r);break;case nI:o=nR.get(r);break;case nM:n.i[n.g].pop(),o=nO.get(r);break;case nD:n.i[n.g].pop(),o=nP.get(r)}o&&n.i[n.g].push(new kp(o,n.m,n.j,n.o,n.l))}}function zp(n,i,r,o){if(!(0>r||0>i)){if(i>=r)for(--o;0<=o;o--)n.i[i+o]=n.i[r+o].map(function(n){return n});else for(var s=0;s<o;s++)n.i[i+s]=n.i[r+s].map(function(n){return n})}}function pp(n,i,r){for(var o=0;o<=r;o++)n.i[i+o]=[]}var nE=0,nI=1,nM=2,nD=3,nN=new Map([[39,""],[42,"\xe1"],[92,"\xe9"],[92,"\xe9"],[94,"\xed"],[95,"\xf3"],[96,"\xfa"],[123,"\xe7"],[124,"\xf7"],[125,"\xd1"],[126,"\xf1"],[127,""]]),nR=new Map([[48,"\xae"],[49,"\xb0"],[50,"\xbd"],[51,"\xbf"],[52,""],[53,"\xa2"],[54,"\xa3"],[55,""],[56,"\xe0"],[57,""],[58,"\xe8"],[59,"\xe2"],[60,"\xea"],[61,"\xee"],[62,"\xf4"],[63,"\xfb"]]),nO=new Map([[32,"\xc1"],[33,"\xc9"],[34,"\xd3"],[35,"\xda"],[36,"\xdc"],[37,"\xfc"],[38,""],[39,"\xa1"],[40,"*"],[41,"'"],[42,""],[43,"\xa9"],[44,""],[45,"\xb7"],[46,""],[47,""],[48,"\xc0"],[49,"\xc2"],[50,"\xc7"],[51,"\xc8"],[52,"\xca"],[53,"\xcb"],[54,"\xeb"],[55,"\xce"],[56,"\xcf"],[57,"\xef"],[58,"\xd4"],[59,"\xd9"],[60,"\xf9"],[61,"\xdb"],[62,"\xab"],[63,"\xbb"]]),nP=new Map([[32,"\xc3"],[33,"\xe3"],[34,"\xcd"],[35,"\xcc"],[36,"\xec"],[37,"\xd2"],[38,"\xf2"],[39,"\xd5"],[40,"\xf5"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\xc4"],[49,"\xe4"],[50,"\xd6"],[51,"\xf6"],[52,"\xdf"],[53,"\xa5"],[54,"\xa4"],[55,""],[56,"\xc5"],[57,"\xe5"],[58,"\xd8"],[59,"\xf8"],[60,""],[61,""],[62,""],[63,""]]),nL=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Ap(n,i){this.h=nU,this.o=new lp(n,i),this.i=new lp(n,i),this.g=this.j=new lp(n,i),this.l=0,this.m=null}function Cp(n,i,r){n.g=n.i;var o=n.g,s=null;return n.h!==nK&&n.h!==nF&&(s=np(o,n.l,r),(r=n.i).g=0<r.h?r.h:0,pp(r,0,15),(r=n.j).g=0<r.h?r.h:0,pp(r,0,15),o.g=15),n.h=nK,o.h=i,s}function Fp(n){n.h=n_,n.g=n.j,n.g.h=0}function Hp(n){Ta("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),n.g=n.o,n.h=nF}var nU=0,n_=1,nK=3,nF=4,nB="black green blue cyan red yellow magenta black".split(" "),nq="white green blue cyan red yellow magenta white_italics".split(" ");function Kp(n,i){this.I=i,this.N=n,this.J=this.l=!1,this.m=this.o=this.G=this.K=this.H=0,this.F=nH,this.i=[],this.g=this.h=this.j=0,this.C=this.u=!1,this.A="white",this.s="black",Mp(this)}function Mp(n){n.i=[];for(var i=0;16>i;i++)n.i.push(Np())}function Np(){for(var n=[],i=0;42>i;i++)n.push(null);return n}function Op(n,i){Pp(n)&&(n.i[n.h][n.g]=new kp(i,n.C,n.u,n.s,n.A),n.g++)}function Pp(n){var i=n.g<n.m&&0<=n.g;return n.h<n.o&&0<=n.h&&i}function Qp(n,i,r){var o=new yb(n.j,i,"");o.textAlign=n.F===nW?"left":n.F===nV?"right":J;var s=o.region;switch(n.I&&(s.id+="svc"+n.I),s.id+="win"+n.N,s.height=n.o,s.width=n.m,s.heightUnits=2,s.widthUnits=2,s.viewportAnchorX=n.H,s.viewportAnchorY=n.K,s.viewportAnchorUnits=n.J?eS:2,n.G){case nG:s.regionAnchorX=0,s.regionAnchorY=0;break;case nX:s.regionAnchorX=50,s.regionAnchorY=0;break;case nY:s.regionAnchorX=100,s.regionAnchorY=0;break;case nZ:s.regionAnchorX=0,s.regionAnchorY=50;break;case nQ:s.regionAnchorX=50,s.regionAnchorY=50;break;case nJ:s.regionAnchorX=100,s.regionAnchorY=50;break;case n$:s.regionAnchorX=0,s.regionAnchorY=100;break;case n0:s.regionAnchorX=50,s.regionAnchorY=100;break;case n1:s.regionAnchorX=100,s.regionAnchorY=100}return(r=hp(o,"svc"+r,n.i,n.j,i))&&(n.j=i),r}Kp.prototype.isVisible=function(){return this.l};var nW=0,nV=1,nH=2,nG=0,nX=1,nY=2,nZ=3,nQ=4,nJ=5,n$=6,n0=7,n1=8;function dq(){this.i=[],this.h=null,this.g=0}function fq(n){this.g=0,this.h=n}function gq(n){if(!n.ia())throw new O(2,2,3e3);return n.h[n.g++]}function hq(n){this.i=n,this.h=[null,null,null,null,null,null,null,null],this.g=null}function jq(n,i){for(var r=[],o=0;8>o;o++)1==(1&i)&&n.h[o]&&r.push(o),i>>=1;return r}function kq(n,i,r){var o=null;i=t(jq(n,i));for(var s=i.next();!s.done;s=i.next()){s=s.value;var u=n.h[s];u.isVisible()&&(o=Qp(u,r,n.i)),n.h[s]=null}return o}function lq(n){n.g=null,n.h=[null,null,null,null,null,null,null,null]}function mq(n,i,r){var o={0:0,1:0,2:1,3:1};return n4[(n=o[n])<<2|(i=o[i])<<1|(r=o[r])]}fq.prototype.ia=function(){return this.g<this.h.length},fq.prototype.qa=function(){return this.g},fq.prototype.skip=function(n){if(this.g+n>this.h.length)throw new O(2,2,3e3);this.g+=n};var n2=new Map([[32," "],[33,"\xa0"],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),n4="black blue green cyan red magenta yellow white".split(" ");function pq(){this.h=[],this.g=[],this.i=new dq,this.l=0,this.m=new Map([["CC1",new Ap(0,0)],["CC2",new Ap(0,1)],["CC3",new Ap(1,0)],["CC4",new Ap(1,1)]]),this.s=this.o=0,this.j=new Map,this.A=!0,this.u=new Set,qq(this)}function qq(n){n.o=0,n.s=0;for(var i=t(n.m.values()),r=i.next();!r.done;r=i.next())(r=r.value).h=nU,r.g=r.j,r.m=null,mp(r.i),mp(r.j),mp(r.o);n.A=!0}function tq(n){for(var i=0;n;)i^=1&n,n>>=1;return 1===i}function uq(n){for(var i=[],r=n,o=n=0;o<r.length;)2==n&&3==r[o]?(n=0,(r=[].concat(w(r))).splice(o,1),r=new Uint8Array(r)):0==r[o]?n++:n=0,o++;for(o=0,n=r;o<n.length;){for(r=0;255==n[o];)r+=255,o++;r+=n[o++];for(var s=0;255==n[o];)s+=255,o++;s+=n[o++],4==r&&i.push(n.subarray(o,o+s)),o+=s}return i}function vq(){this.j=new Map,this.i=this.h=0,this.g=n3}pq.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var n=this.i;n.i=[],n.h=[],n.g=0,qq(this),n=t(this.j.values());for(var i=n.next();!i.done;i=n.next())lq(i.value)},pq.prototype.extract=function(n,i){if(this.A){for(var r=t(this.m.values()),o=r.next();!o.done;o=r.next())o.value.l=i;this.A=!1}if(!(8>(n=new Tf(n,0)).getLength())&&181===n.ga()&&49===n.Ea()&&1195456820===n.L()&&3===n.ga()&&0!=(64&(r=n.ga())))for(r&=31,n.skip(1),o=0;o<r;o++){var s=n.ga(),u=(4&s)>>2,p=n.ga(),m=n.ga();u&&(0==(s&=3)||1===s?this.h.push({pts:i,type:s,Sa:p,nb:m,order:this.h.length}):(this.g.push({pts:i,type:s,value:p,order:this.g.length}),this.g.push({pts:i,type:2,value:m,order:this.g.length})))}},pq.prototype.decode=function(){function a(n,i){return n.pts-i.pts||n.order-i.order}var n,i,r=[];this.h.sort(a),this.g.sort(a);for(var o=t(this.h),s=o.next();!s.done;s=o.next())(s=function(n,i){var r=i.type;if(16==(112&i.Sa)){var o=i.Sa>>3&1;0===r?n.o=o:n.s=o}if(o="CC"+((r<<1|(r?n.s:n.o))+1),r=n.m.get(o),255===i.Sa&&255===i.nb||!i.Sa&&!i.nb||!tq(i.Sa)||!tq(i.nb))return 45<=++n.l&&qq(n),null;if(n.l=0,i.Sa&=127,i.nb&=127,!i.Sa&&!i.nb)return null;if(n.u.add(o),n=null,16==(112&i.Sa))e:{if(o=i.Sa,n=i.nb,r.m===(o<<8|n))r.m=null;else if(r.m=o<<8|n,16==(240&o)&&64==(192&n)){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&o)<<1|n>>5&1];var s=(30&n)>>1;o="white";var u=!1;7>s?o=nq[s]:7===s&&(u=!0),n=1==(1&n),r.h!==nF&&(s=r.g,r.h===nK&&i!==s.g&&(r=1+i-s.h,zp(s,r,1+s.g-s.h,s.h),pp(s,0,r-1),pp(s,i+1,15-i)),s.g=i,s.m=n,s.j=u,s.l=o,s.o="black")}else if(17==(247&o)&&32==(240&n))r.g.m=!1,r.g.j=!1,r.g.l="white",qp(r.g,nE,32),o=!1,"white_italics"===(i=nq[(14&n)>>1])&&(i="white",o=!0),r.g.m=1==(1&n),r.g.j=o,r.g.l=i;else if(16==(247&o)&&32==(240&n)||23==(247&o)&&45==(255&n))i="black",0==(7&o)&&(i=nB[(14&n)>>1]),r.g.o=i;else if(17==(247&o)&&48==(240&n))qp(r.g,nI,n);else if(18==(246&o)&&32==(224&n))qp(r.g,1&o?nD:nM,n);else if(20==(246&o)&&32==(240&n)){switch(n=i.pts,o=null,i.nb){case 32:Fp(r);break;case 33:(r=r.g).i[r.g].pop();break;case 37:o=Cp(r,2,n);break;case 38:o=Cp(r,3,n);break;case 39:o=Cp(r,4,n);break;case 40:qp(r.g,nE,32);break;case 41:r.h=2,r.g=r.i,r.g.h=0,r.l=n;break;case 42:mp(r.o),Hp(r);break;case 43:Hp(r);break;case 44:i=r.i,o=null,r.h!==nF&&(o=np(i,r.l,n)),pp(i,0,15);break;case 45:i=r.g,r.h!==nK?o=null:(o=np(i,r.l,n),u=i.g-i.h+1,zp(i,u-1,u,i.h),pp(i,0,u-1),pp(i,i.g,15-i.g),r.l=n);break;case 46:pp(r.j,0,15);break;case 47:i=null,r.h!==nF&&(i=np(r.i,r.l,n)),o=r.j,r.j=r.i,r.i=o,Fp(r),r.l=n,o=i}n=o;break e}n=null}else o=i.nb,qp(r.g,nE,i.Sa),qp(r.g,nE,o);return n}(this,s.value))&&r.push(s);for(s=(o=t(this.g)).next();!s.done;s=o.next())n=this.i,3===(i=s.value).type?(n.g=2*(63&i.value)-1,n.h=[]):n.h&&(0<n.g&&(n.h.push(i),n.g--),0===n.g&&(n.i.push(new fq(n.h)),n.h=null,n.g=0));for(s=(o=t(this.i.i)).next();!s.done;s=o.next())s=function(n,i){var r=[];try{for(;i.ia();){var o=gq(i).value,s=(224&o)>>5,u=31&o;if(7===s&&0!=u&&(s=63&gq(i).value),0!=s){n.u.add("svc"+s),n.j.has(s)||n.j.set(s,new hq(s));for(var p=n.j.get(s),m=i.qa();i.qa()-m<u;){s=i;var y=gq(s),x=y.value,A=y.pts;if(16===x){var I=gq(s);x=x<<16|I.value}if(0<=x&&31>=x){var M=A;if(p.g){var j=p.g;switch(s=null,x){case 8:!Pp(j)||0>=j.g&&0>=j.h||(0>=j.g?(j.g=j.m-1,j.h--):j.g--,j.i[j.h][j.g]=null);break;case 13:if(j.isVisible()&&(s=Qp(j,M,p.i)),j.h+1>=j.o){M=j;for(var D=0,R=1;16>R;R++,D++)M.i[D]=M.i[R];for(R=0;1>R;R++,D++)M.i[D]=Np()}else j.h++;j.g=0;break;case 14:j.isVisible()&&(s=Qp(j,M,p.i)),j.i[j.h]=Np(),j.g=0;break;case 12:j.isVisible()&&(s=Qp(j,M,p.i)),Mp(j),(M=j).h=0,M.g=0}var P=s}else P=null}else if(128<=x&&159>=x)P=function(n,i,r,o){if(128<=r&&135>=r)o=7&r,n.h[o]&&(n.g=n.h[o]);else{if(136===r){r=gq(i).value,i=null,r=t(jq(n,r));for(var s=r.next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()&&(i=Qp(s,o,n.i)),Mp(s);return i}if(137===r)for(r=(i=t(jq(n,i=gq(i).value))).next();!r.done;r=i.next())(r=n.h[r.value]).isVisible()||(r.j=o),r.l=!0;else{if(138===r){for(r=gq(i).value,i=null,s=(r=t(jq(n,r))).next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()&&(i=Qp(s,o,n.i)),s.l=!1;return i}if(139===r){for(r=gq(i).value,i=null,s=(r=t(jq(n,r))).next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()?i=Qp(s,o,n.i):s.j=o,s.l=!s.l;return i}if(140===r)return kq(n,i=gq(i).value,o);if(143===r)return o=kq(n,255,o),lq(n),o;if(144===r)i.skip(1),o=gq(i).value,n.g&&(n.g.u=0<(128&o),n.g.C=0<(64&o));else if(145===r)o=gq(i).value,r=gq(i).value,i.skip(1),n.g&&(i=mq((48&r)>>4,(12&r)>>2,3&r),n.g.A=mq((48&o)>>4,(12&o)>>2,3&o),n.g.s=i);else if(146===r)o=gq(i).value,i=gq(i).value,n.g&&((n=n.g).h=15&o,n.g=63&i);else if(151===r)i.skip(1),i.skip(1),o=gq(i).value,i.skip(1),n.g&&(n.g.F=3&o);else if(152<=r&&159>=r){if(r=(15&r)-8,!(s=null!==n.h[r])){var u=new Kp(r,n.i);u.j=o,n.h[r]=u}o=gq(i).value,u=gq(i).value;var p=gq(i).value,m=gq(i).value,y=gq(i).value;i=gq(i).value,s&&0==(7&i)||((i=n.h[r]).h=0,i.g=0,i.C=!1,i.u=!1,i.A="white",i.s="black"),(i=n.h[r]).l=0<(32&o),i.K=127&u,i.H=p,i.G=(240&m)>>4,i.J=0<(128&u),i.o=(15&m)+1,i.m=(63&y)+1,n.g=n.h[r]}}}return null}(p,s,x,A);else{if(4096<=x&&4127>=x)M=255&x,8<=M&&15>=M?s.skip(1):16<=M&&23>=M?s.skip(2):24<=M&&31>=M&&s.skip(3);else if(4224<=x&&4255>=x)M=255&x,128<=M&&135>=M?s.skip(4):136<=M&&143>=M&&s.skip(5);else if(32<=x&&127>=x)s=x,p.g&&(127===s?Op(p.g,""):Op(p.g,String.fromCharCode(s)));else if(160<=x&&255>=x)p.g&&Op(p.g,String.fromCharCode(x));else if(4128<=x&&4223>=x){if(s=255&x,p.g){if(n2.has(s)){var L=n2.get(s);Op(p.g,L)}else Op(p.g,"_")}}else 4256<=x&&4351>=x&&p.g&&(160!=(255&x)?Op(p.g,"_"):Op(p.g,"[CC]"));P=null}(s=P)&&r.push(s)}}}}catch(n){if(n instanceof O&&3e3===n.code)Ta("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw n}return r}(this,s.value),r.push.apply(r,w(s));return this.i.i=[],this.h=[],this.g=[],r},pq.prototype.getStreams=function(){return Array.from(this.u)},N("shaka.cea.CeaDecoder",pq),G=function(){return new pq},vq.prototype.init=function(n){function b(n){(n=n.name)in n6&&(i.g=n6[n])}var i=this,r=[],o=[];if((new Wf).box("moov",ag).box("mvex",ag).O("trex",function(n){var r=n.reader;r.skip(4),r.skip(4),n=r.L(),r=r.L(),i.h=n,i.i=r}).box("trak",ag).O("tkhd",function(n){n=$h(n.reader,n.version),r.push(n.trackId)}).box("mdia",ag).O("mdhd",function(n){n=Yh(n.reader,n.version),o.push(n.timescale)}).box("minf",ag).box("stbl",ag).O("stsd",cg).box("avc1",b).box("avc3",b).box("hev1",b).box("hvc1",b).box("dvh1",b).box("dvhe",b).box("encv",dg).box("sinf",ag).box("frma",function(n){(n=ci(n.reader).ha)in n6&&(i.g=n6[n])}).parse(n,!0),!r.length||!o.length||r.length!=o.length)throw new O(2,2,2010);this.g==n3&&Sa("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(n,r){i.j.set(n,o[r])})},vq.prototype.parse=function(n){var i=this;if(this.g==n3)return[];var r=[],o=this.h,s=this.i,u=0,p=[],m=null,y=9e4;return(new Wf).box("moof",function(n){u=n.start,p=[],ag(n)}).box("traf",ag).O("trun",function(n){n=Zh(n.reader,n.version,n.flags),p.push(n)}).O("tfhd",function(n){o=(n=Wh(n.reader,n.flags)).Kf||i.h,s=n.Mg||i.i,n=n.trackId,i.j.has(n)&&(y=i.j.get(n))}).O("tfdt",function(n){m=Xh(n.reader,n.version).baseMediaDecodeTime}).box("mdat",function(n){if(null===m)throw Sa("Unable to find base media decode time for CEA captions!"),new O(2,2,2010);(function(n,i,r,o,s,u,p,m,y){var x=0,A=u,I=m.map(function(n){return n.ig});for((I=[].concat.apply([],w(I))).length&&(A=I[0].sampleSize||u),i.skip(p+m[0].Lg);i.ia();){p=i.L();var M=i.ga(),j=null;switch(j=!1,m=1,n.g){case n5:j=6==(j=31&M);break;case n8:m=2,i.skip(1),j=39==(j=M>>1&63)||40==j;break;default:return}if(j)for(M=0,x<I.length&&(M=I[x].Wd||0),M=(r+M)/o,j=(m=t(uq(i.ub(p-m)))).next();!j.done;j=m.next())y.push({packet:j.value,pts:M});else try{i.skip(p-m)}catch(n){break}0==(A-=p+4)&&(r=x<I.length?r+(I[x].hf||s):r+s,A=++x<I.length&&I[x].sampleSize||u)}})(i,n.reader,m,y,o,s,u-n.start-8,p,r)}).parse(n,!1),r},N("shaka.cea.Mp4CeaParser",vq);var n3=0,n5=1,n8=2,n6={avc1:1,avc3:1,hev1:2,hvc1:2,dvh1:2,dvhe:2};function Bq(){}function Cq(i,r,o){var s=function(n){var i=[];n=t(n);for(var r=n.next();!r.done;r=n.next())(r=function(n){var i=n.getAttribute("schemeIdUri"),r=tg(n,"urn:mpeg:cenc:2013","default_KID"),o=rg(n,"urn:mpeg:cenc:2013","pssh").map(vg);if(!i)return null;if(i=i.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new O(2,4,4009);var s=[];try{s=o.map(function(n){return{initDataType:"cenc",initData:ig(n),keyId:null}})}catch(n){throw new O(2,4,4007)}return{node:n,cd:i,keyId:r,init:0<s.length?s:null}}(r.value))&&i.push(r);return i}(i),u=null;i=[];var p=[],m=null,y=new Set(s.map(function(n){return n.keyId}));if(y.delete(null),1<y.size)throw new O(2,4,4010);if(!r){if(1<(p=s.filter(function(n){return"urn:mpeg:dash:sea:2012"==n.cd})).length)throw new O(2,4,4050);p.length&&(m=function(i){if(!n.crypto||!n.crypto.subtle)throw Sa("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new O(2,4,4042);var r=qg(i.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!r||"urn:mpeg:dash:sea:aes128-cbc:2013"!=r.getAttribute("schemeIdUri")||!(r=qg(i.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"))||(i=r.getAttribute("IV"),r=r.getAttribute("keyUriTemplate"),!i||!r))throw new O(2,4,4051);if(16!=(i=jg(i.substr(2))).byteLength)throw new O(2,4,4048);return{zh:r,iv:i}}(p[0])),(p=s.filter(function(n){return"urn:mpeg:dash:mp4protection:2011"==n.cd?(u=n.init||u,!1):"urn:mpeg:dash:sea:2012"!=n.cd})).length&&0==(i=function(n,i,r,o){var s=[];i=t(i);for(var u=i.next();!u.done;u=i.next()){var p,m=r[(u=u.value).cd];if(m){if(p=qg(u.node,"urn:microsoft:playready","pro")){p=ig(p.textContent);var y=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:ng(p,y,new Set,0),initDataType:"cenc",keyId:u.keyId}]}else p=null;if(y=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===u.cd){if(0==(y=o).size)y=null;else{var x=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);y=[{initData:ng(new Uint8Array([]),x,y,1),initDataType:"cenc",keyId:u.keyId}]}}p=yc(m,u.init||n||p||y),(m=n7.get(m))&&(p.licenseServerUri=m(u)),s.push(p)}}return s}(u,p,o,y)).length&&(i=[yc("",u)])}if(s.length&&!m&&(r||!p.length))for(i=[],o=(r=t(Object.values(o))).next();!o.done;o=r.next())"org.w3.clearkey"!=(o=o.value)&&i.push(yc(o,u));if(y=Array.from(y)[0]||null)for(o=(r=t(i)).next();!o.done;o=r.next())for(s=(o=t(o.value.initData)).next();!s.done;s=o.next())s.value.keyId=y;return{Jf:y,aj:u,drmInfos:i,ke:m,Nf:!0}}function Jq(n){var i=qg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=qg(n.node,"urn:microsoft:playready","pro"))&&(n=(function(n){var i=0,r=nb(n),o=r.getUint32(i,!0);if(o!=n.byteLength)return[];e:{for(n=i+6,i=[];n<r.byteLength-1;){o=r.getUint16(n,!0),n+=2;var s=r.getUint16(n,!0);if(n+=2,0!=(1&s)||s+n>r.byteLength){r=[];break e}var u=hb(r,n,s);i.push({type:o,value:u}),n+=s}r=i}return r})(n=ig(n.textContent)).filter(function(n){return n.type===n9})[0])&&(n=Hg(n=Of(n.value,!0),"WRMHEADER"))?function(n){n=t(n.getElementsByTagName("DATA"));for(var i=n.next();!i.done;i=n.next()){i=t(i.value.childNodes);for(var r=i.next();!r.done;r=i.next())if((r=r.value)instanceof Element&&"LA_URL"==r.tagName)return r.textContent}return""}(n):""}H["video/mp4"]=function(){return new vq},Bq.prototype.init=function(){},Bq.prototype.parse=function(n){var i=[];if(!ti(n=hb(n)))return i;var r=(n=(new ni).parse(n)).Pc(),o=n.Fd();switch(n=[],r.video){case"avc":n.push(6);break;case"hvc":n.push(39),n.push(40)}if(!n.length)return i;for(o=(r=t(o)).next();!o.done;o=r.next())if(o=o.value,n.includes(o.type)&&null!=o.time)for(var s=t(uq(o.data)),u=s.next();!u.done;u=s.next())i.push({packet:u.value,pts:o.time});return i},N("shaka.cea.TsCeaParser",Bq),H["video/mp2t"]=function(){return new Bq};var n9=1,n7=(new Map).set("com.widevine.alpha",function(n){var i=qg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=qg(n.node,"urn:microsoft","laurl"))&&n.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Jq).set("com.microsoft.playready.recommendation",Jq).set("com.microsoft.playready.software",Jq).set("com.microsoft.playready.hardware",Jq).set("org.w3.clearkey",function(n){var i=qg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=qg(n.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===n.getAttribute("Lic_type")&&n.textContent?n.textContent:""});function Nq(i,r,o,s,u,p){var m={RepresentationID:r,Number:o,SubNumber:s,Bandwidth:u,Time:p};return i.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(i,r,o,s){if("$$"==i)return"$";var u=m[r];if(null==u)return i;switch("RepresentationID"==r&&o&&(o=void 0),"Time"==r&&"bigint"!=typeof u&&(.2<=Math.abs(u-Math.round(u))&&Sa("Calculated $Time$ values must be close to integers"),u=Math.round(u)),s){case void 0:case"d":case"i":case"u":default:i=u.toString();break;case"o":i=u.toString(8);break;case"x":i=u.toString(16);break;case"X":i=u.toString(16).toUpperCase()}return Array(Math.max(0,(o=n.parseInt(o,10)||1)-i.length)+1).join("0")+i})}function Oq(n,i){var r=Pq(n,i,"timescale"),o=1;r&&(o=Cg(r)||1);var s=Pq(n,i,"duration");r=Cg(s||""),"image"==n.M.contentType&&(r=Eg(s||"")),r&&(r/=o);var u=Pq(n,i,"startNumber");s=Number(Pq(n,i,"presentationTimeOffset"))||0;var p=Dg(u||"");(null==u||null==p)&&(p=1);var m=Qq(n,i,"SegmentTimeline");if(i=null,m){i=o,n=n.ba.duration||1/0,u=p,m=pg(m,"S");for(var y=[],x=-s,A=0;A<m.length;++A){var I=m[A],M=m[A+1],j=xg(I,"t",Dg),D=xg(I,"d",Dg),R=xg(I,"r",Bg);if(I=xg(I,"k",Bg)||0,null!=j&&(j-=s),!D)break;if(j=null!=j?j:x,0>(R=R||0)){if(M){if(null==(M=xg(M,"t",Dg))||j>=M)break;R=Math.ceil((M-j)/D)-1}else{if(1/0==n||j/i>=n)break;R=Math.ceil((n*i-j)/D)-1}}for(0<y.length&&j!=x&&(y[y.length-1].end=j/i),M=0;M<=R;++M)x=j+D,y.push({start:j/i,end:x/i,zf:j,fb:I,Vh:y.length+u}),j=x}i=y}return{timescale:o,ya:r,gd:p,vb:s/o||0,yf:s,timeline:i}}function Rq(n,i){return[i(n.M),i(n.oa),i(n.ta)].filter(ad)}function Pq(n,i,r){i=Rq(n,i),n=null,i=t(i);for(var o=i.next();!o.done&&!(n=o.value.getAttribute(r));o=i.next());return n}function Qq(n,i,r){i=Rq(n,i),n=null,i=t(i);for(var o=i.next();!o.done&&!(n=og(o.value,r));o=i.next());return n}function Wq(n){this.h=nb(n),this.g=new Tf(this.h,0)}function Xq(n){var i=Yq(n);if(7<i.length)throw new O(2,3,3002);var r=0;i=t(i);for(var o=i.next();!o.done;o=i.next())r=256*r+o.value;i=Yq(n);e:{o=t(ia);for(var s=o.next();!s.done;s=o.next())if(fb(i,new Uint8Array(s.value))){o=!0;break e}o=!1}if(o)i=n.h.byteLength-n.g.qa();else{if(8==i.length&&224&i[1])throw new O(2,3,3001);for(s=o=0;s<i.length;s++){var u=i[s];o=0==s?u&(1<<8-i.length)-1:256*o+u}i=o}return i=n.g.qa()+i<=n.h.byteLength?i:n.h.byteLength-n.g.qa(),o=nb(n.h,n.g.qa(),i),n.g.skip(i),new $q(r,o)}function Yq(n){var i=n.g.qa(),r=n.g.ga();if(0==r)throw new O(2,3,3002);return r=8-Math.floor(Math.log2(r)),n.g.skip(r-1),hb(n.h,i,r)}Wq.prototype.ia=function(){return this.g.ia()};var ia=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function $q(n,i){this.id=n,this.g=i}function ar(n){if(8<n.g.byteLength)throw new O(2,3,3002);if(8==n.g.byteLength&&224&n.g.getUint8(0))throw new O(2,3,3001);for(var i=0,r=0;r<n.g.byteLength;r++)i=256*i+n.g.getUint8(r);return i}function dr(n,i,r){if(!(i=Qq(n,i,"Initialization")))return null;var o=n.M.cb(),s=i.getAttribute("sourceURL");s&&(o=xc(o,[s])),s=0;var u=null;return(i=xg(i,"range",Ag))&&(s=i.start,u=i.end),new Gh(function(){return o},s,u,er(n),null,null,r)}function jr(n,i,r,o,s,u,p){var m,y,x,A,I,M,j,D,R,P,L,_,B,z,q;return K(function(V){if(1==V.g)return m=n.presentationTimeline,y=!n.zb||!n.ba.Le,x=n.ba.start,A=n.ba.duration,I=n.M.mimeType.split("/")[1],j=null,D=[(M=i)(o,s,u,!1),"webm"==I?M(r.Z(),r.Qa,r.wa,!0):null],M=null,C(V,Promise.all(D),2);if(P=(R=V.h)[0],L=R[1]||null,_=null,B=x-p,z=x,q=A?x+A:1/0,"mp4"==I)var H=function(n,i,r,o,s,u,p){var m,y=(new Wf).O("sidx",function(n){m=function(n,i,r,o,s,u,p){var m=[];p.reader.skip(4);var y=p.reader.L();if(0==y)throw new O(2,3,3005);if(0==p.version)var x=p.reader.L(),A=p.reader.L();else x=p.reader.oc(),A=p.reader.oc();p.reader.skip(2);var I=p.reader.Ea();for(n=n+p.size+A,A=0;A<I;A++){var M=p.reader.L(),j=(2147483648&M)>>>31;M&=2147483647;var D=p.reader.L();if(p.reader.skip(4),1==j)throw new O(2,3,3006);m.push(new S(x/y+r,(x+D)/y+r,function(){return u},n,n+M-1,i,r,o,s)),x+=D,n+=M}return p.parser.stop(),m}(i,o,s,u,p,r,n)});if(n&&y.parse(n),m)return m;throw new O(2,3,3004)}(P,s,o,r,B,z,q);else{if(440786851!=Xq(H=new Wq(L)).id)throw new O(2,3,3008);var G=Xq(H);if(408125543!=G.id)throw new O(2,3,3009);H=G.g.byteOffset,G=new Wq(G.g);for(var X=null;G.ia();){var J=Xq(G);if(357149030==J.id){X=J;break}}if(!X)throw new O(2,3,3010);for(G=null,X=new Wq(X.g),J=1e6;X.ia();){var $=Xq(X);if(2807729==$.id)J=ar($);else if(17545==$.id){if(4==$.g.byteLength)G=$.g.getFloat32(0);else if(8==$.g.byteLength)G=$.g.getFloat64(0);else throw new O(2,3,3003)}}if(null==G)throw new O(2,3,3011);if(G*=X=J/1e9,475249515!=(J=Xq(new Wq(P))).id)throw new O(2,3,3007);H=function(n,i,r,o,s,u,p,m,y){function l(){return s}var x=[];n=new Wq(n.g);for(var A=null,I=null;n.ia();){var M=Xq(n);if(187==M.id){var j=function(n){var i=new Wq(n.g);if(179!=(n=Xq(i)).id)throw new O(2,3,3013);if(n=ar(n),183!=(i=Xq(i)).id)throw new O(2,3,3012);i=new Wq(i.g);for(var r=0;i.ia();){var o=Xq(i);if(241==o.id){r=ar(o);break}}return{di:n,Lh:r}}(M);j&&(M=r*j.di,j=i+j.Lh,null!=A&&x.push(new S(A+p,M+p,l,I,j-1,u,p,m,y)),A=M,I=j)}}return null!=A&&x.push(new S(A+p,o+p,l,I,null,u,p,m,y)),x}(J,H,X,G,o,r,B,z,q)}return _=H,m.Xc(_),j=new Fj(_),y&&j.bc(z,q,!0),V.return(j)})}function gr(n){return n.ed}function ir(n){var i=Qq(n,gr,"RepresentationIndex");return n=Ag((n=Pq(n,gr,"indexRange"))||""),i&&(n=xg(i,"range",Ag,n)),n}function kr(n,i){var r=n.M.mimeType.split("/")[1];if(n.M.contentType!=eK&&"mp4"!=r&&"webm"!=r)throw new O(2,4,4006);if("webm"==r&&!i)throw new O(2,4,4005)}function er(n){var i=n.M;return{bandwidth:n.bandwidth,audioSamplingRate:i.audioSamplingRate,codecs:i.codecs,contentType:i.contentType,frameRate:i.frameRate||null,height:i.height||null,mimeType:i.mimeType,channelsCount:i.Td,pixelAspectRatio:i.pixelAspectRatio||null,width:i.width||null}}function mr(n){return n.Fb}function xr(n){return n.fd}function wr(n,i,r,o,s,u,p,m,y,x){Fj.call(this,[]),this.h=n,this.F=i,this.A=r,this.C=o,this.i=s,this.l=u,this.s=p,this.u=y,this.G=x,m&&yr(this)}function vr(n,i,r,o,s,u){if(n.s=u,n.h){r=n.h.timeline,n.h.mc=i.mc;var p=r[r.length-1];0<(i=i.timeline.filter(function(n){return n.start>=p.end})).length&&n.h.timeline.push.apply(n.h.timeline,w(i)),n.l!==o&&(n.l=o)}else n.h=i,n.i=r,n.l=o;s&&yr(n)}function yr(n){if(!n.o){for(var i=n.h.timeline;i.length;)if(i[i.length-1].start>=n.l)i.pop();else break;n.bb(n.i)}}function zr(n,i,r,o,s,u,p){return n=Nq(n,i,r,u,o||null,s),xc(p(),[n]).map(function(n){return n.toString()})}function Ar(n){this.o=null,this.u=n,this.G=new kf,this.j=[],this.h=null,this.m=[],this.A=null,this.F=[],this.C=300,this.l=new Map,this.i=new Map,this.g=null,this.s="UNKNOWN"}function Br(n,i){var r,o,s,u,p;return K(function(m){var y,x,A,I;return 1==m.g?(r=qf(xc(n.j,[function(n,i){if(!n.m.length)return i;i=new fc(i);var r=n.A||n.m[0],o=Math.round(n.u.getBandwidthEstimate()),s=i.g;return"DASH"==n.s?(s.add("_DASH_pathway",r),s.add("_DASH_throughput",String(o))):"HLS"==n.s&&(s.add("_HLS_pathway",r),s.add("_HLS_throughput",String(o))),uc(s),s.Nc&&jc(i,s),i.toString()}(n,i)]),n.o.retryParameters),o=n.u.networkingEngine.request(8,r),lf(n.G,o),sa(m,2),C(m,o.promise,4)):2!=m.g?(1==(u=JSON.parse(Nf((s=m.h).data))).VERSION&&(y=n,x=u,A=s.uri,null!=y.g&&(y.g.stop(),y.g=null),I=x["RELOAD-URI"]||A,y.g=new qd(function(){Br(y,I)}),(A=x.TTL)&&(y.C=A),y.g.U(y.C),y.m=x["PATHWAY-PRIORITY"]||[],y.F=x["PATHWAY-CLONES"]||[]),ua(m,0)):(p=va(m))&&7001==p.code?m.return():void(null!=n.g&&(n.g.stop(),n.g=null),n.g=new qd(function(){Br(n,i)}),n.g.U(n.C),E(m))})}function Er(n,i,r,o){var s=n.l.get(i);s||(s=new Map),s.set(r,o),n.l.set(i,s)}function Fr(n,i,r){r=void 0!==r&&r,i=n.l.get(i)||new Map;for(var o=[],s={},u=t(n.m),p=u.next();!p.done;s={Jb:s.Jb},p=u.next())if(s.Jb=p.value,p=i.get(s.Jb))o.push({df:s.Jb,location:p});else if(p=n.F.find(function(n){return function(i){return i.vi==n.Jb}}(s))){var m=i.get(p["BASE-ID"]);m&&(p["URI-REPLACEMENT"].xg?(hc(m=new fc(m),p["URI-REPLACEMENT"].xg),o.push({df:s.Jb,location:m.toString()})):o.push({df:s.Jb,location:m}))}for(s=Date.now(),p=(u=t(n.i.keys())).next();!p.done;p=u.next())p=p.value,s>(m=n.i.get(p))&&n.i.delete(p);if((o=o.filter(function(i){for(var r=t(n.i.keys()),o=r.next();!o.done;o=r.next())if(o.value.includes(new fc(i.location).ob))return!1;return!0})).length&&(n.A=o[0].df),!(o=o.map(function(n){return n.location})).length&&n.h)for(p=(s=t(n.h.split(","))).next();!p.done;p=s.next())(u=i.get(p.value))&&(n.A=n.h,o.push(u));if(!o.length)for(s=(i=t(i.values())).next();!s.done;s=i.next())o.push(s.value);return r?o:xc(n.j,o)}function Gr(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.m=!1,this.o=new Set}function Hr(n,i){var r=[],o=[],s=[],u=[];n=t(n);for(var p=n.next();!p.done;p=n.next()){var m=p.value;p=new Map(m.audioStreams.map(function(n){return[Ir(n),n]}));var y=new Map(m.videoStreams.map(function(n){return[Jr(n),n]})),x=new Map(m.textStreams.map(function(n){return[Kr(n),n]}));if(m=new Map(m.imageStreams.map(function(n){return[Lr(n),n]})),i){var A=Mr(eK);x.set(Kr(A),A),A=Mr("image"),m.set(Lr(A),A)}r.push(p),o.push(y),s.push(x),u.push(m)}return{Df:r,vg:o,sg:s,Vf:u}}function Qr(n){var i,r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J,$,ee;return K(function(en){switch(en.g){case 1:if(i=eF,1==n.length)return en.return(n[0]);for(r=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.P}).map(function(n){return[Ir(n),n]}))}),o=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.$}).map(function(n){return[Jr(n),n]}))}),s=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.na}).map(function(n){return[Kr(n),n]}))}),u=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.he}).map(function(n){return[Lr(n),n]}))}),m=(p=t(s)).next();!m.done;m=p.next())y=m.value,x=Rr(i.na),y.set(Kr(x),x);for(I=(A=t(u)).next();!I.done;I=A.next())M=I.value,j=Rr(i.he),M.set(Lr(j),j);return C(en,Nr(D=new Gr,[],r,0,Sr,Tr),2);case 2:return R=en.h,C(en,Nr(D,[],o,0,Sr,Tr),3);case 3:return P=en.h,C(en,Nr(D,[],s,0,Sr,Tr),4);case 4:return L=en.h,C(en,Nr(D,[],u,0,Sr,Tr),5);case 5:if(_=en.h,B=0,P.length&&R.length)for(H=(V=t(R)).next();!H.done;H=V.next())for(G=H.value,J=(X=t(P)).next();!J.done;J=X.next())$=J.value,ee=B++,$.variantIds.push(ee),G.variantIds.push(ee);else for(q=(z=t(P.concat(R))).next();!q.done;q=z.next())q.value.variantIds=[B++];return en.return(P.concat(R).concat(L).concat(_))}})}function Nr(n,i,r,o,s,u){var p,m,y,x,A,I,M,j,D,R,P,L,_,B;return K(function(z){switch(z.g){case 1:for(m=0,p=[];m<o;m++)p.push(new Set);for(y=o;y<r.length;y++)p.push(new Set(r[y].values()));A=(x=t(i)).next();case 2:var q,V,H,G,X,J;if(A.done){z.B(4);break}return C(z,(q=n,V=A.value,H=r,G=o,X=u,J=p,K(function(n){return 1==n.g?(Yr(q,H,V),V.matchedStreams?V.segmentIndex?C(n,Zr(V,G),2):n.B(2):n.return(!1)):($r(V,G,X,J),n.return(!0))})),5);case 5:if(!z.h)throw new O(2,4,4037);A=x.next(),z.B(2);break;case 4:for(M=(I=t(p)).next();!M.done;M=I.next())for(D=(j=t(M.value)).next();!D.done;D=j.next())(R=function(n,i,r,o,s,u){if(Wr(i))return null;var p=o(i);return(Yr(n,r,p),p.createSegmentIndex&&(p.createSegmentIndex=function(){return K(function(n){return p.segmentIndex?n.B(0):(p.segmentIndex=new Jj,C(n,Zr(p,0),0))})}),p.matchedStreams&&p.matchedStreams.length)?($r(p,0,s,u),p):null}(n,D.value,r,s,u,p))&&i.push(R);for(M=(P=t(p)).next();!M.done;M=P.next())for(L=M.value,_={},D=(B=t(L)).next();!D.done;_={od:_.od},D=B.next())if(_.od=D.value,!Wr(_.od)&&i.some(function(i){return function(r){return Xr(n,i.od,r)}}(_)))throw new O(2,4,4037);return z.return(i)}})}function Zr(n,i){var r,o,s,u,p,m,y;return K(function(x){if(1==x.g){for(r=[],u=(s=t(o=n.matchedStreams)).next();!u.done;u=s.next())p=u.value,r.push(p.createSegmentIndex()),p.trickModeVideo&&!p.trickModeVideo.segmentIndex&&r.push(p.trickModeVideo.createSegmentIndex());return C(x,Promise.all(r),2)}if(n.segmentIndex instanceof Jj)for(m={},y=i;y<o.length;m={jb:m.jb},y++)m.jb=o[y],m.jb.segmentIndex&&(Gj(m.jb.segmentIndex,function(n){return function(i){i.codecs=n.jb.codecs,i.mimeType=n.jb.mimeType,i.aa&&(i.aa.codecs=n.jb.codecs,i.aa.mimeType=n.jb.mimeType)}}(m)),n.segmentIndex.h.push(m.jb.segmentIndex));E(x)})}function $r(n,i,r,o){for(var s=n.matchedStreams;i<s.length;i++){var u=s[i];r(n,u);var p=!0;if("audio"==n.type&&0==id(n.language,u.language)&&(p=!1),p){o[i].delete(u),p=new Set(n.codecs.split(",")),u=t(u.codecs.split(","));for(var m=u.next();!m.done;m=u.next())(m=m.value)&&p.add(m);m=Array.from(p),p=new Set,u=[],m=t(m);for(var y=m.next();!y.done;y=m.next()){var x=Mc(y=y.value);p.has(x)||(u.push(y),p.add(x))}n.codecs=u.join(",")}}}function Or(n){var i=Object.assign({},n);return i.originalId=null,i.createSegmentIndex=function(){return Promise.resolve()},i.closeSegmentIndex=function(){if(i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null),i.matchedStreams)for(var n=t(i.matchedStreams),r=n.next();!r.done;r=n.next())(r=r.value).segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},i.roles=i.roles.slice(),i.segmentIndex=null,i.emsgSchemeIdUris=[],i.keyIds=new Set,i.closedCaptions=null,i.trickModeVideo=null,i}function Sr(n){return(n=Object.assign({},n)).roles=n.roles.slice(),n.keyIds=new Set,n.segments=[],n.variantIds=[],n.closedCaptions=null,n}function Pr(n,i){function c(n,i){n||(n=[]),i=t(i);for(var r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);return n}n.roles=c(n.roles,i.roles),i.emsgSchemeIdUris&&(n.emsgSchemeIdUris=c(n.emsgSchemeIdUris,i.emsgSchemeIdUris));for(var r=t(i.keyIds),o=r.next();!o.done;o=r.next())n.keyIds.add(o.value);if(null==n.originalId?n.originalId=i.originalId:n.originalId+=","+(i.originalId||""),r=wh(n.drmInfos,i.drmInfos),i.drmInfos.length&&n.drmInfos.length&&!r.length)throw new O(2,4,4038);if(n.drmInfos=r,n.encrypted=n.encrypted||i.encrypted,i.closedCaptions)for(n.closedCaptions||(n.closedCaptions=new Map),o=(r=t(i.closedCaptions)).next();!o.done;o=r.next()){var s=t(o.value);o=s.next().value,s=s.next().value,n.closedCaptions.set(o,s)}i.trickModeVideo?(n.trickModeVideo||(n.trickModeVideo=Or(i.trickModeVideo),n.trickModeVideo.createSegmentIndex=function(){return n.trickModeVideo.segmentIndex=n.segmentIndex.clone(),Promise.resolve()}),Pr(n.trickModeVideo,i.trickModeVideo)):n.trickModeVideo&&Pr(n.trickModeVideo,i)}function Tr(n,i){var r=n.roles;r||(r=[]);for(var o=t(i.roles),s=o.next();!s.done;s=o.next())s=s.value,r.includes(s)||r.push(s);for(n.roles=r,o=(r=t(i.keyIds)).next();!o.done;o=r.next())n.keyIds.add(o.value);if(n.encrypted=n.encrypted&&i.encrypted,n.segments.push.apply(n.segments,w(i.segments)),i.closedCaptions)for(n.closedCaptions||(n.closedCaptions=new Map),r=(i=t(i.closedCaptions)).next();!r.done;r=i.next())r=(o=t(r.value)).next().value,o=o.next().value,n.closedCaptions.set(r,o)}function Yr(n,i,r){var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){if(!(s=function(n,i,r){var o=null,s=(0,({audio:Ir,video:Jr,text:Kr,image:Lr})[r.type])(r);if(i.has(s))o=i.get(s);else{s=({audio:function(i,r){return Xr(n,i,r)},video:function(i,r){return Xr(n,i,r)},text:bs,image:cs})[r.type];var u={audio:ds,video:es,text:fs,image:gs}[r.type];i=t(i.values());for(var p=i.next();!p.done;p=i.next())s(r,p=p.value)&&r.fastSwitching==p.fastSwitching&&(!o||u(r,o,p))&&(o=p)}return o}(n,s.value,r)))return;o.push(s)}r.matchedStreams=o}function hs(n,i){function c(n){if(!il.has(n)){var i=Kc(n);il.set(n,i)}return il.get(n)}return n.mimeType==i.mimeType&&c(n.codecs)==c(i.codecs)}function Xr(n,i,r){return!!((hs(i,r)||n.m)&&(!i.drmInfos||vh(i.drmInfos,r.drmInfos)))}function bs(n,i){return!i.language||n.forced===i.forced&&0!=id(n.language,i.language)&&i.kind==n.kind}function cs(){return!0}function ds(n,i,r){var o=hs(n,i),s=hs(n,r);if(o&&!s)return!1;if(!o&&s||(o=id(n.language,i.language),(s=id(n.language,r.language))>o))return!0;if(s<o)return!1;if(i.label!==r.label){if(n.label===i.label)return!1;if(n.label===r.label)return!0}return n.roles.length?(o=i.roles.filter(function(i){return n.roles.includes(i)}),(s=r.roles.filter(function(i){return n.roles.includes(i)})).length>o.length||!(s.length<o.length)&&r.roles.length<i.roles.length):!r.roles.length&&!!i.roles.length||(!r.roles.length||!!i.roles.length)&&(!i.primary&&!!r.primary||(!i.primary||!!r.primary)&&((o=js(n.channelsCount,i.channelsCount,r.channelsCount))==io||o!=iu&&((o=js(n.audioSamplingRate,i.audioSamplingRate,r.audioSamplingRate))==io||o!=iu&&!!n.bandwidth&&ms(n.bandwidth,i.bandwidth,r.bandwidth)==io)))}function es(n,i,r){var o=hs(n,i),s=hs(n,r);if(o&&!s)return!1;if(!o&&s||(o=js(n.width*n.height,i.width*i.height,r.width*r.height))==io)return!0;if(o==iu)return!1;if(n.frameRate){if((o=js(n.frameRate,i.frameRate,r.frameRate))==io)return!0;if(o==iu)return!1}return!!n.bandwidth&&ms(n.bandwidth,i.bandwidth,r.bandwidth)==io}function fs(n,i,r){var o=id(n.language,i.language),s=id(n.language,r.language);if(s>o)return!0;if(s<o)return!1;if(!i.primary&&r.primary)return!0;if(i.primary&&!r.primary)return!1;if(i.label!==r.label){if(n.label===i.label)return!1;if(n.label===r.label)return!0}if(n.roles.length){if(o=i.roles.filter(function(i){return n.roles.includes(i)}),(s=r.roles.filter(function(i){return n.roles.includes(i)})).length>o.length)return!0;if(s.length<o.length)return!1}else{if(!r.roles.length&&i.roles.length)return!0;if(r.roles.length&&!i.roles.length)return!1}return r.mimeType==n.mimeType&&r.codecs==n.codecs&&(i.mimeType!=n.mimeType||i.codecs!=n.codecs)}function gs(n,i,r){return js(n.width*n.height,i.width*i.height,r.width*r.height)==io}function Rr(n){return{id:0,originalId:"",groupId:null,primary:!1,type:n,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Mr(n){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fj([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:n,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1}}function js(n,i,r){if(i==n&&n!=r)return iu;if(r==n&&n!=i)return io;if(i>n){if(r<=n||r-n<i-n)return io;if(r-n>i-n)return iu}else{if(r>n)return iu;if(n-r<n-i)return io;if(n-r>n-i)return iu}return is}function ms(n,i,r){return i=Math.abs(n-i),(n=Math.abs(n-r))<i?io:i<n?iu:is}function Wr(n){switch(n.type){case eK:return!n.language;case"image":return!n.tilesLayout;default:return!1}}function Jr(n){return JSON.stringify([n.fastSwitching,n.width,n.frameRate,n.codecs,n.mimeType,n.label,n.roles,n.closedCaptions?Array.from(n.closedCaptions.entries()):null,n.bandwidth])}function Ir(n){return JSON.stringify([n.fastSwitching,n.channelsCount,n.language,n.bandwidth,n.label,n.codecs,n.mimeType,n.roles,n.audioSamplingRate,n.primary])}function Kr(n){return JSON.stringify([n.language,n.label,n.codecs,n.mimeType,n.bandwidth,n.roles])}function Lr(n){return JSON.stringify([n.width,n.codecs,n.mimeType])}oa(wr,Fj),(D=wr.prototype).Ab=function(){return this.h?this.h.timeline.length:0},D.release=function(){Fj.prototype.release.call(this),this.h=null},D.bb=function(n){if(this.h){for(var i=0,r=this.h.timeline,o=0;o<r.length;o+=1)if(r[o].end+this.i<=n)i+=1;else break;0<i&&(this.h.timeline=r.slice(i),this.g.length>=i&&(this.g=this.g.slice(i)),this.j+=i,0===this.Ab()&&this.release())}},D.find=function(n){if(this.h&&this.h.timeline&&this.h.timeline.length&&n<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var i=this.h.timeline;if(n<this.i||n>=this.l)return null;for(var r=i.length-1,o=0;o<i.length;o++){var s=i[o],u=s.start+this.i;if(s=o<r?i[o+1].start+this.i:1/0===this.l?s.end+this.i:this.l,n>=u&&n<s)return o+this.j}return null},D.get=function(n){var i=this;if(0>(n-=this.j)||n>=this.Ab()||!this.h)return null;var r=this.g[n];if(!r){var o=this.h.mc,s=this.h.timeline[n],u=s.Vh,p=this.h.yf+s.zf;r=this.i-this.h.vb;var m=this.i+s.end,y=m;n===this.Ab()-1&&1/0!==this.l&&(y=this.l);for(var x=[],A=(s.end-s.start)/s.fb,I={},M=0;M<s.fb;I={Fc:I.Fc,fe:I.fe},M++){var j=s.start+A*M,D=j+A;I.fe=M+1,I.Fc=null,j=new S(this.i+j,this.i+D,function(n){return function(){return i.h?(null==n.Fc&&(n.Fc=zr(i.h.mc,i.F,u,i.A,p,n.fe,i.C)),n.Fc):[]}}(I),0,null,this.s,r,this.i,this.l,[],"",null,null,tm,this.u),0==this.G?0<M&&j.Od():0!=M%this.G&&j.Od(),x.push(j)}(r=new S(this.i+s.start,y,function(){return 0<s.fb?[]:zr(o,i.F,u,i.A,p,null,i.C)},0,null,this.s,r,this.i,this.l,x,"",null,null,tm,this.u,0<s.fb)).h=m,this.g[n]=r}return r},Ar.prototype.configure=function(n){this.o=n},Ar.prototype.destroy=function(){return this.u=this.o=null,this.j=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},Ar.prototype.setManifestType=function(n){this.s=n},(D=Gr.prototype).release=function(){for(var n=t(this.h.concat(this.g,this.l,this.i)),i=n.next();!i.done;i=n.next())(i=i.value).segmentIndex&&i.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},D.mh=function(){return this.j},D.Ie=function(){return this.l.slice()},D.Vg=function(){return this.i},D.Gf=function(n,i){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J,$,ee,en,ea=this;return K(function(eo){if(1==eo.g){if(r=eF,!i&&1==n.length)return s=(o=Hr(n,!1)).Df,u=o.vg,p=o.sg,m=o.Vf,ea.h=Array.from(s[0].values()),ea.g=Array.from(u[0].values()),ea.l=Array.from(p[0].values()),ea.i=Array.from(m[0].values()),eo.B(2);for(x=0,y=-1;x<n.length;x++)A=n[x],ea.o.has(A.id)||(ea.o.add(A.id),-1==y&&(y=x));return -1==y?eo.return():(M=(I=Hr(n,!0)).Df,j=I.vg,D=I.sg,R=I.Vf,C(eo,Promise.all([Nr(ea,ea.h,M,y,Or,Pr),Nr(ea,ea.g,j,y,Or,Pr),Nr(ea,ea.l,D,y,Or,Pr),Nr(ea,ea.i,R,y,Or,Pr)]),2))}if(P=0,L=[],ea.g.length&&ea.h.length)for(H=(V=t(ea.h)).next();!H.done;H=V.next())for(G=H.value,J=(X=t(ea.g)).next();!J.done;J=X.next())$=J.value,ee=wh(G.drmInfos,$.drmInfos),G.drmInfos.length&&$.drmInfos.length&&!ee.length||(en=P++,L.push({id:en,language:G.language,disabledUntilTime:0,primary:G.primary,audio:G,video:$,bandwidth:(G.bandwidth||0)+($.bandwidth||0),drmInfos:ee,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(B=(_=t(ea.g.length?ea.g:ea.h)).next();!B.done;B=_.next())z=B.value,q=P++,L.push({id:q,language:z.language,disabledUntilTime:0,primary:z.primary,audio:z.type==r.P?z:null,video:z.type==r.$?z:null,bandwidth:z.bandwidth||0,drmInfos:z.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});ea.j=L,E(eo)})},N("shaka.util.PeriodCombiner",Gr),Gr.prototype.combinePeriods=Gr.prototype.Gf,Gr.prototype.getImageStreams=Gr.prototype.Vg,Gr.prototype.getTextStreams=Gr.prototype.Ie,Gr.prototype.getVariants=Gr.prototype.mh;var io=1,is=0,iu=-1,il=new Map;function os(){var n=this;this.i=this.h=null,this.o=[],this.j=null,this.I=1,this.m={},this.K={},this.l=new Gr,this.F=0,this.H=new Ma(5),this.G=new qd(function(){var i,r,o;i=n,K(function(n){switch(n.g){case 1:return r=0,sa(n,2),C(n,qs(i),4);case 4:r=n.h,ua(n,3);break;case 2:if(o=va(n),i.i){if(i.h.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(o),n.return();o.severity=1,i.i.onError(o)}case 3:if(!i.i)return n.return();i.i.onManifestUpdated(),rs(i,r),E(n)}})}),this.C=new kf,this.u=null,this.J=[],this.A=1/0,this.s=!1,this.g=null}function qs(n){var i,r,o,s,u,p;return K(function(m){if(1==m.g)return i=n.o,1<n.o.length&&n.g&&(r=Fr(n.g,"Location",!0)).length&&(i=r),o=qf(i,n.h.retryParameters),s=Date.now(),C(m,ss(n,o,0,{type:4}),2);if(3!=m.g){var y,x,A,I,M,j,D;return(u=m.h,n.i)?(u.uri&&u.uri!=u.originalUri&&!n.o.includes(u.uri)&&n.o.unshift(u.uri),C(m,(y=n,x=u.data,A=u.uri,K(function(n){if(1==n.g){if(!(I=Jg(x,"MPD")))throw new O(2,4,4001,A);return y.h.dash.disableXlinkProcessing?n.return(us(y,I,A)):(M=y.h.dash.xlinkFailGracefully,j=function Tq(n,i,r,o,s,u){if(u=void 0===u?0:u,tg(n,"http://www.w3.org/1999/xlink","href")){var p=function(n,i,r,o,s,u){for(var p=tg(n,"http://www.w3.org/1999/xlink","href"),m=tg(n,"http://www.w3.org/1999/xlink","actuate")||"onRequest",y=t(Array.from(n.attributes)),x=y.next();!x.done;x=y.next())"http://www.w3.org/1999/xlink"==(x=x.value).namespaceURI&&n.removeAttributeNS(x.namespaceURI,x.localName);if(5<=u)return af(new O(2,4,4028));if("onLoad"!=m)return af(new O(2,4,4027));var A=xc([o],[p]);return s.request(0,qf(A,i)).pa(function(o){if(!(o=Jg(o.data,n.tagName)))return af(new O(2,4,4001,p));for(;n.childNodes.length;)n.removeChild(n.childNodes[0]);for(;o.childNodes.length;){var m=o.childNodes[0];o.removeChild(m),n.appendChild(m)}for(m=(o=t(Array.from(o.attributes))).next();!m.done;m=o.next())n.setAttributeNode(m.value.cloneNode(!1));return Tq(n,i,r,A[0],s,u+1)})}(n,i,r,o,s,u);return r&&(p=p.pa(void 0,function(){return Tq(n,i,r,o,s,u)})),p}p=[];for(var m=t(Array.from(n.childNodes)),y=m.next();!y.done;y=m.next())(y=y.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==tg(y,"http://www.w3.org/1999/xlink","href")?n.removeChild(y):"SegmentTimeline"!=y.tagName&&p.push(Tq(y,i,r,o,s,u)));return ef(p).pa(function(){return n})}(I,y.h.retryParameters,M,A,y.i.networkingEngine),lf(y.C,j),C(n,j.promise,2))}return D=n.h,n.return(us(y,D,A))})),3)):m.return(0)}return p=(Date.now()-s)/1e3,n.H.sample(1,p),m.return(p)})}function us(i,r,o){var s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec,ep,em,ev,ew,ex,eT,eS,eC,ek,eE,eI,eM,eD,eN,eR,eO,eP,eL,eU,e_,eF,eB,eq;return K(function(eW){switch(eW.g){case 1:for((s=i.h.dash.manifestPreprocessor)&&s(r),i.g&&i.g.l.clear(),u=[o],p=[],m=new Map,x=(y=t(pg(r,"Location"))).next();!x.done;x=y.next())I=(A=x.value).getAttribute("serviceLocation"),(M=vg(A))&&(j=xc(u,[M])[0],I&&(i.g?Er(i.g,"Location",I,j):m.set(I,j)),p.push(j));if(i.g?0<(D=Fr(i.g,"Location",!0)).length&&(u=i.o=D):p.length&&(u=i.o=p),R=Promise.resolve(),(P=og(r,"ContentSteering"))&&i.i)for(L=P.getAttribute("defaultServiceLocation"),i.g?(i.g.j=u,i.g.h=L):(i.g=new Ar(i.i),i.g.configure(i.h),i.g.setManifestType("DASH"),i.g.j=u,i.g.h=L,(_=vg(P))&&(xg(P,"queryBeforeStart",Fg,!1)?R=Br(i.g,_):Br(i.g,_))),z=(B=t(m.keys())).next();!z.done;z=B.next())q=z.value,V=m.get(q),Er(i.g,"Location",q,V);if(H=pg(r,"BaseURL"),X=!1,i.g)for($=(J=t(H)).next();!$.done;$=J.next())en=(ee=$.value).getAttribute("serviceLocation"),ea=vg(ee),en&&ea&&(Er(i.g,"BaseURL",en,ea),X=!0);if(X&&i.g||(eo=H.map(vg),G=xc(u,eo)),eu=function(){return i.g&&X?Fr(i.g,"BaseURL"):G||[]},ec=0,H&&H.length&&(ec=xg(H[0],"availabilityTimeOffset",Eg)||0),ep=i.h.dash.ignoreMinBufferTime,em=0,ep||(em=xg(r,"minBufferTime",zg)||0),i.F=xg(r,"minimumUpdatePeriod",zg,-1),ev=xg(r,"availabilityStartTime",yg),ew=xg(r,"timeShiftBufferDepth",zg),ex=i.h.dash.ignoreSuggestedPresentationDelay,eT=null,ex||(eT=xg(r,"suggestedPresentationDelay",zg)),eS=i.h.dash.ignoreMaxSegmentDuration,eC=null,eS||(eC=xg(r,"maxSegmentDuration",zg)),ek=r.getAttribute("type")||"static",i.j)for(eE=i.j.presentationTimeline,eM=(eI=t(Object.values(i.m))).next();!eM.done;eM=eI.next())(eD=eM.value).segmentIndex&&eD.segmentIndex.bb(eE.eb());else eN=i.h.defaultPresentationDelay||1.5*em,eR=null!=eT?eT:eN,eE=new jj(ev,eR,i.h.dash.autoCorrectDrift);return eE.pc("static"==ek),eE.R()&&!isNaN(i.h.availabilityWindowOverride)&&(ew=i.h.availabilityWindowOverride),null==ew&&(ew=1/0),eE.Xd(ew),eO=r.getAttribute("profiles")||"",eU=(eL=function(i,r,o,s){var u=xg(s,"mediaPresentationDuration",zg),p=[],m=0;s=pg(s,"Period");for(var y=0;y<s.length;y++){var x=s[y],A=s[y+1],I=xg(x,"start",zg,m),M=x.id,j=xg(x,"duration",zg),D=null;if(A){var R=xg(A,"start",zg);null!=R&&(D=R-I)}else null!=u&&(D=u-I);if(null==D&&(D=j),!(null!==i.u&&null!==M&&null!==I&&I<i.u)||i.J.includes(M)||y+1==s.length){if(null!==I&&(null===i.u||I>i.u)&&(i.u=I),m=function(i,r,o,s){r.ta=zs(i,s.node,null,o),r.ba=s,r.ta.ac=r.ac,r.ta.id||(r.ta.id="__shaka_period_"+s.start);var u=pg(s.node,"EventStream");o=r.presentationTimeline.eb(),u=t(u);for(var p=u.next();!p.done;p=u.next())(function(n,i,r,o,s){var u=o.getAttribute("schemeIdUri")||"",p=o.getAttribute("value")||"",m=xg(o,"timescale",Dg)||1;o=t(pg(o,"Event"));for(var y=o.next();!y.done;y=o.next()){var x=xg(y=y.value,"presentationTime",Dg)||0,A=xg(y,"duration",Dg)||0;A=(x=x/m+i)+A/m,null!=r&&(x=Math.min(x,i+r),A=Math.min(A,i+r)),A<s||(y={schemeIdUri:u,value:p,startTime:x,endTime:A,id:y.getAttribute("id")||"",eventElement:y},n.i.onTimelineRegionAdded(y))}})(i,s.start,s.duration,p.value,o);if(o=pg(s.node,"AdaptationSet").map(function(o){return function(i,r,o){function d(n){switch(n){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}r.oa=zs(i,o,r.ta,null);var s=!1,u=pg(o,"Role"),p=u.map(function(n){return n.getAttribute("value")}).filter(ad),m=void 0,y=r.oa.contentType==eK;y&&(m="subtitle"),u=t(u);for(var x=u.next();!x.done;x=u.next()){var A=(x=x.value).getAttribute("schemeIdUri");if(null==A||"urn:mpeg:dash:role:2011"==A)switch(x=x.getAttribute("value")){case"main":s=!0;break;case"caption":case"subtitle":m=x}}A=pg(o,"EssentialProperty"),u=null;var I=!1;x=!1,A=t(A);for(var M=A.next();!M.done;M=A.next()){var j=(M=M.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==j?u=M.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==j?D=d(parseInt(M.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=j&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=j&&("urn:mpeg:dash:ssr:2023"==j?I=!0:x=!0)}for(M=(A=t(A=pg(o,"SupplementalProperty"))).next();!M.done;M=A.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(M=M.value).getAttribute("schemeIdUri")&&(D=d(parseInt(M.getAttribute("value"),10)));A=pg(o,"Accessibility");var D,R,P=new Map;for(M=(A=t(A)).next();!M.done;M=A.next())if(M=(j=M.value).getAttribute("schemeIdUri"),j=j.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==M){if(M=1,null!=j){j=j.split(";");for(var L=t(j),_=L.next();!_.done;_=L.next()){var B=_.value,z=_=void 0;B.includes("=")?(_=(B=B.split("="))[0].startsWith("CC")?B[0]:"CC"+B[0],z=B[1]||"und"):(_="CC"+M,2==j.length?M+=2:M++,z=B),P.set(_,dd(z))}}else P.set("CC1","und")}else if("urn:scte:dash:cc:cea-708:2015"==M){if(M=1,null!=j)for(_=(j=t(j.split(";"))).next();!_.done;_=j.next())_=_.value,B=L=void 0,_.includes("=")?(L="svc"+(_=_.split("="))[0],B=_[1].split(",")[0].split(":").pop()):(L="svc"+M,M++,B=_),P.set(L,dd(B));else P.set("svc1","und")}else"urn:mpeg:dash:role:2011"==M?null!=j&&(p.push(j),"captions"==j&&(m="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==M&&("1"==j?R="visually impaired":"2"==j&&(R="hard of hearing"));if(x)return null;var q=Cq(x=pg(o,"ContentProtection"),i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI),V=dd(r.oa.language||"und"),H=o.getAttribute("label");if((x=pg(o,"Label"))&&x.length&&(x=x[0]).textContent&&(H=x.textContent),0==(o=(x=pg(o,"Representation")).map(function(o){return(o=function(i,r,o,s,u,p,m,y,x,A,I){if(r.M=zs(i,A,r.oa,null),i.A=Math.min(i.A,r.M.ac),!function(n){var i=n.ed?1:0;return 0==(i+=(n.Fb?1:0)+(n.fd?1:0))?n.contentType==eK||"application"==n.contentType:(1!=i&&(n.ed&&(n.Fb=null),n.fd=null),!0)}(r.M))return null;var M,j,D=r.ba.start;r.bandwidth=xg(A,"bandwidth",Cg)||0;var R=r.M.contentType,P=R==eK||"application"==R;R="image"==R;try{var L=void 0;if(o.ke){var _=r.M.cb,B=xc(_(),[o.ke.zh]),z=qf(B,i.h.retryParameters);L={method:"AES-128",iv:o.ke.iv,firstMediaSequenceNumber:0,fetchKey:function(){var r,o,s;return K(function(u){if(1==u.g)return C(u,ss(i,z,6),2);if(3!=u.g){if(!(r=u.h).data||16!=r.data.byteLength)throw new O(2,4,4049);return o={name:"AES-CBC"},s=L,C(u,n.crypto.subtle.importKey("raw",r.data,o,!0,["decrypt"]),3)}s.cryptoKey=u.h,L.fetchKey=void 0,E(u)})}}}if(_=function(n,r,o,s){return function(n,i,r,o,s){var u,p,m,y;return K(function(x){return 1==x.g?(u=e4,p=s?0:1,m=fk(i,r,o,n.h.retryParameters),C(x,ss(n,m,u,{type:p}),2)):(y=x.h,x.return(y.data))})}(i,n,r,o,s)},r.M.ed)var q,V,H,G,X,J,$,ee,en=(q=_,V=L,H=Number(Pq(r,gr,"presentationTimeOffset"))||0,G=Pq(r,gr,"timescale"),X=1,G&&(X=Cg(G)||1),J=H/X||0,$=dr(r,gr,V),function(n,i){if(kr(n,i),!ir(n))throw new O(2,4,4002)}(r,$),ee=od(r),{dc:function(){var n=Qq(ee,gr,"RepresentationIndex"),i=ee.M.cb();return n&&(n=n.getAttribute("sourceURL"))&&(i=xc(i,[n])),n=ir(ee),jr(ee,q,$,i,n.start,n.end,J)}});else if(r.M.Fb)en=function(n,i,r){var o=dr(n,mr,r),s=function(n){var i=function(n){return[n.M.Fb,n.oa.Fb,n.ta.Fb].filter(ad).map(function(n){return pg(n,"SegmentURL")}).reduce(function(n,i){return 0<n.length?n:i}).map(function(i){return i.getAttribute("indexRange")&&!n.Wf&&(n.Wf=!0),{Dh:i.getAttribute("media"),start:(i=xg(i,"mediaRange",Ag,{start:0,end:null})).start,end:i.end}})}(n),r=(n=Oq(n,mr)).gd;0==r&&(r=1);var o=0;return n.ya?o=n.ya*(r-1):n.timeline&&0<n.timeline.length&&(o=n.timeline[0].start),{ya:n.ya,startTime:o,gd:r,vb:n.vb,timeline:n.timeline,lc:i}}(n);if(!s.ya&&!s.timeline&&1<s.lc.length||!s.ya&&!n.ba.duration&&!s.timeline&&1==s.lc.length||s.timeline&&0==s.timeline.length)throw new O(2,4,4002);var u=null,p=null;n.ta.id&&n.M.id&&(p=i[n.ta.id+","+n.M.id])&&(u=p.segmentIndex);var m=function(n,i,r,o,s,u){var p=o.lc.length;o.timeline&&o.timeline.length!=o.lc.length&&(p=Math.min(o.timeline.length,o.lc.length));for(var m=n-o.vb,y=i?n+i:1/0,x=[],A=o.startTime,I={},M=0;M<p;I={Ec:I.Ec,Ac:I.Ac},M++){I.Ac=o.lc[M];var j=void 0;j=null!=o.ya?A+o.ya:o.timeline?o.timeline[M].end:A+i,I.Ec=null,x.push(new S(n+A,n+j,function(n){return function(){return null==n.Ec&&(n.Ec=xc(r(),[n.Ac.Dh])),n.Ec}}(I),I.Ac.start,I.Ac.end,s,m,n,y,[],"",null,null,tm,u)),A=j}return x}(n.ba.start,n.ba.duration,n.M.cb,s,o,r);return i=!u,u?u.Wc(m,n.presentationTimeline.eb()):u=new Fj(m),n.presentationTimeline.Xc(m),n.zb&&n.ba.Le||u.bc(n.ba.start,n.ba.duration?n.ba.start+n.ba.duration:1/0,i),p&&(p.segmentIndex=u),{dc:function(){return u&&0!=u.Ab()||u.Qd(m),Promise.resolve(u)}}}(r,i.m,L);else if(r.M.fd)en=function(i,r,o,s,u,p,m){var y=function(n,i){var r=Pq(n,xr,"initialization");if(!r)return null;var o=n.M.id,s=n.bandwidth||null,u=n.M.cb;return new Gh(function(){var n=Nq(r,o,null,null,s,null);return xc(u(),[n])},0,null,er(n),null,null,i)}(i,m),x=function(n){var i=Oq(n,xr),r=Pq(n,xr,"media");return n=Pq(n,xr,"index"),{ya:i.ya,timescale:i.timescale,gd:i.gd,vb:i.vb,yf:i.yf,timeline:i.timeline,mc:r,Uc:n}}(i);(function(n){var i=n.Uc?1:0;if(0==(i+=(n.timeline?1:0)+(n.ya?1:0))||(1!=i&&(n.Uc&&(n.timeline=null),n.ya=null),!n.Uc&&!n.mc))throw new O(2,4,4002)})(x);var A=od(i);if(x.Uc)return kr(i,y),{dc:function(){var n=Nq(x.Uc,A.M.id,null,null,A.bandwidth||null,null);return n=xc(A.M.cb(),[n]),jr(A,r,y,n,0,null,x.vb)}};if(x.ya)return s||"image"===i.oa.contentType||(i.presentationTimeline.Ye(x.ya),i.presentationTimeline.Sd(i.ba.start)),{dc:function(){return function(i,r,o,s,u,p){function g(i){var o=(i-M)*I,u=o+r.vb,m=o+y,x=Math.min(o=m+I,k());return(m=new S(m,x,function(){var r=u*j;return"BigInt"in n&&r>Number.MAX_SAFE_INTEGER&&(r=BigInt(u)*BigInt(j)),r=Nq(D,P,i,null,R,r),xc(L(),[r])},0,null,s,_,y,k(),[],"",null,null,tm,p)).h=o,m}function h(){var n=[Math.max(m.eb(),y),Math.min(m.Bb(),k())].map(function(n){return n-y});return[Math.ceil(n[0]/I),Math.ceil(n[1]/I)-1].map(function(n){return n+M})}function k(){var n=null!=x&&u[x]||A;return n?y+n:1/0}var m=i.presentationTimeline,y=i.ba.start,x=i.ta.id,A=i.ba.duration,I=r.ya,M=r.gd,j=r.timescale,D=r.mc,R=i.bandwidth||null,P=i.M.id,L=i.M.cb,_=y-r.vb,B=h();i=i.zb?Math.max(B[0],B[1]-o+1):B[0],B=B[1],o=[];for(var z=i;z<=B;++z){var q=g(z);o.push(q)}var V=new Fj(o);if(o=m.Bb()<k(),z=m.R(),o||z){var H=Math.max(i,B+1);V.Yd(I,function(){var n=m.eb();V.bb(n);var i=t(h());i.next(),i=i.next().value;for(var r=[];H<=i;){var o=g(H);r.push(o),H++}return n>k()&&!r.length?null:r})}return Promise.resolve(V)}(A,x,u,y,p,m)}};var I=null;s=s=null,i.ta.id&&i.M.id&&(s=o[s=i.ta.id+","+i.M.id])&&(I=s.segmentIndex);var M=i.ba.start,j=i.ba.duration?M+i.ba.duration:1/0,D=!(i.zb&&i.ba.Le);return I?(vr(o=I,x,M,j,D,y),o.bb(i.presentationTimeline.eb())):I=new wr(x,i.M.id,i.bandwidth,i.M.cb,M,j,y,D,m,i.M.jf),x.timeline&&"image"!==i.oa.contentType&&i.presentationTimeline.dg(x.timeline,M),s&&i.zb&&(s.segmentIndex=I),{dc:function(){return I instanceof wr&&0==I.Ab()&&vr(I,x,M,j,D,y),Promise.resolve(I)}}}(r,_,i.m,!!i.j,i.h.dash.initialSegmentLimit,i.K,L);else{var ea=r.ba.duration||0,eo=r.M.cb;en={dc:function(){return Promise.resolve(Ij(D,ea,eo()))}}}}catch(n){if((P||R)&&4002==n.code)return null;throw n}_=function(n,i,r,o){var s=Cq(n,r,o);if(i.Nf)n=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,r=0==s.drmInfos.length,(0==i.drmInfos.length||n&&!r)&&(i.drmInfos=s.drmInfos),i.Nf=!1;else if(0<s.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(n){return s.drmInfos.some(function(i){return i.keySystem==n.keySystem})}),0==i.drmInfos.length))throw new O(2,4,4008);return s.Jf||i.Jf}(_=pg(A,"ContentProtection"),o,i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI),_=new Set(_?[_]:[]),B=!1,pg(A,"SupplementalProperty").some(function(n){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==n.getAttribute("schemeIdUri")&&"JOC"==n.getAttribute("value")})&&(B=!0);var eu=!1;if(P&&(eu=y.includes("forced_subtitle")||y.includes("forced-subtitle")),R&&((A=pg(A,"EssentialProperty").find(function(n){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(n.getAttribute("schemeIdUri"))}))&&(M=A.getAttribute("value")),!M))return null;A=r.M.codecs,r.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(A.includes("hvc1.2.4.L153.B0")||A.includes("hev1.2.4.L153.B0"))&&(j="PQ");var ec=(A=r.M.id?r.ta.id+","+r.M.id:"")&&i.m[A]?i.m[A]:{id:i.I++,originalId:r.M.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ec.segmentIndex&&(ec.segmentIndex.release(),ec.segmentIndex=null)},segmentIndex:null,mimeType:r.M.mimeType,codecs:r.M.codecs,frameRate:r.M.frameRate,pixelAspectRatio:r.M.pixelAspectRatio,bandwidth:r.bandwidth,width:r.M.width,height:r.M.height,kind:s,encrypted:0<o.drmInfos.length,drmInfos:o.drmInfos,keyIds:_,language:u,originalLanguage:r.oa.language,label:p,type:r.oa.contentType,primary:m,trickModeVideo:null,emsgSchemeIdUris:r.M.emsgSchemeIdUris,roles:y,forced:eu,channelsCount:r.M.Td,audioSamplingRate:r.M.audioSamplingRate,spatialAudio:B,closedCaptions:x,hdr:j,videoLayout:void 0,tilesLayout:M,accessibilityPurpose:I,external:!1,fastSwitching:!1};return ec.createSegmentIndex=function(){var n;return K(function(i){if(1==i.g)return ec.segmentIndex?i.B(0):(n=ec,C(i,en.dc(),3));n.segmentIndex=i.h,E(i)})},A&&r.zb&&!i.m[A]&&(i.m[A]=ec),ec}(i,r,q,m,V,H,s,p,P,o,R))&&(o.hdr=o.hdr||D,o.fastSwitching=I),o}).filter(function(n){return!!n})).length){if(u="image"==r.oa.contentType,i.h.dash.ignoreEmptyAdaptationSet||y||u)return null;throw new O(2,4,4003)}if(!r.oa.contentType||"application"==r.oa.contentType)for(r.oa.contentType=Es(o[0].mimeType,o[0].codecs),M=(y=t(o)).next();!M.done;M=y.next())M.value.type=r.oa.contentType;for(y=r.oa.id||"__fake__"+i.I++,M=(A=t(o)).next();!M.done;M=A.next()){for(M=M.value,L=(j=t(q.drmInfos)).next();!L.done;L=j.next())(L=L.value).keyIds=L.keyIds&&M.keyIds?new Set([].concat(w(L.keyIds),w(M.keyIds))):L.keyIds||M.keyIds;i.h.dash.enableAudioGroups&&(M.groupId=y)}return x=x.map(function(n){return n.getAttribute("id")}).filter(ad),{id:y,contentType:r.oa.contentType,language:V,bj:s,streams:o,drmInfos:q.drmInfos,wf:u,Ph:x}}(i,r,o)}).filter(ad),r.zb){for(s=[],p=(u=t(o)).next();!p.done;p=u.next()){p=t(p.value.Ph);for(var m=p.next();!m.done;m=p.next())s.push(m.value)}if(s.length!=new Set(s).size)throw new O(2,4,4018)}for(s=o.filter(function(n){return!n.wf}),u=(o=t(o=o.filter(function(n){return n.wf}))).next();!u.done;u=o.next()){p=(u=u.value).wf.split(" "),m=t(s);for(var y=m.next();!y.done;y=m.next()){var x=y.value;if(p.includes(x.id)){y={},x=t(x.streams);for(var A=x.next();!A.done;y={pd:y.pd},A=x.next())y.pd=A.value,y.pd.trickModeVideo=u.streams.find(function(n){return function(i){return Kc(n.pd.codecs)==Kc(i.codecs)}}(y))}}}if(o=Cs(i.h.disableAudio,s,"audio"),u=Cs(i.h.disableVideo,s,"video"),p=Cs(i.h.disableText,s,eK),s=Cs(i.h.disableThumbnails,s,"image"),0===u.length&&0===o.length)throw new O(2,4,4004);return{id:r.ta.id,audioStreams:o,videoStreams:u,textStreams:p,imageStreams:s}}(i,r,o,{start:I,duration:D,node:x,Le:null==D||!A}),p.push(m),r.ta.id&&D&&(i.K[r.ta.id]=D),null==D){m=null;break}m=I+D}}return i.J=p.map(function(n){return n.id}),null!=u?{periods:p,duration:u,Lf:!1}:{periods:p,duration:m,Lf:!0}}(i,eP={zb:"static"!=ek,presentationTimeline:eE,ta:null,ba:null,oa:null,M:null,bandwidth:0,Wf:!1,ac:ec,profiles:eO.split(",")},eu,r)).duration,e_=eL.periods,"static"!=ek&&eL.Lf||eE.Pa(eU||1/0),i.A&&!i.s&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.s=i.i.isLowLatencyMode()),i.s?eE.lg(i.A):i.A&&Sa("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),eE.Ye(eC||1),C(eW,i.l.Gf(e_,eP.zb),2);case 2:return C(eW,R,3);case 3:var eV,eH,eG,eX,eY,eZ,eQ,eJ,e$,e0,e1;if(i.s&&(em=0),i.j){i.j.variants=i.l.j,0<(eF=i.l.Ie()).length&&(i.j.textStreams=eF),i.j.imageStreams=i.l.i,i.i.filter(i.j),eW.B(4);break}if(i.j={presentationTimeline:eE,variants:i.l.j,textStreams:i.l.Ie(),imageStreams:i.l.i,offlineSessionIds:[],minBufferTime:em||0,sequenceMode:i.h.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:function(n){if(!(n=og(n,"ServiceDescription")))return null;var i=og(n,"Latency"),r=og(n,"PlaybackRate");return i&&i.getAttribute("max")||r?{maxLatency:n=i&&i.getAttribute("max")?parseInt(i.getAttribute("max"),10)/1e3:null,maxPlaybackRate:r?parseFloat(r.getAttribute("max")):null,minLatency:i=i&&i.getAttribute("min")?parseInt(i.getAttribute("min"),10)/1e3:null,minPlaybackRate:r=r?parseFloat(r.getAttribute("min")):null}:null}(r)},!eE.ug()){eW.B(5);break}return eB=pg(r,"UTCTiming"),C(eW,(eV=i,eH=eu,eG=eB,K(function(n){switch(n.g){case 1:eX=eG.map(function(n){return{scheme:n.getAttribute("schemeIdUri"),value:n.getAttribute("value")}}),eY=eV.h.dash.clockSyncUri,!eX.length&&eY&&eX.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:eY}),eQ=(eZ=t(eX)).next();case 2:if(eQ.done){n.B(4);break}switch(eJ=eQ.value,sa(n,5),e$=eJ.scheme,e0=eJ.value,e$){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return n.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return n.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e1=Date.parse(e0),n.return(isNaN(e1)?0:e1-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Sa("NTP UTCTiming scheme is not supported");break;default:Sa("Unrecognized scheme in UTCTiming element",e$)}n.B(9);break;case 7:return C(n,Js(eV,eH,e0,"HEAD"),10);case 10:case 11:return n.return(n.h);case 8:return C(n,Js(eV,eH,e0,"GET"),11);case 9:ua(n,3);break;case 5:va(n);case 3:eQ=eZ.next(),n.B(2);break;case 4:return Sa("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),n.return(0)}})),6);case 6:if(eq=eW.h,!i.i)return eW.return();eE.mg(eq);case 5:eE.Nd();case 4:i.i.makeTextStreamsForClosedCaptions(i.j),E(eW)}})}function Cs(n,i,r){return n||!i.length?[]:i.reduce(function(n,i){return i.contentType!=r||n.push.apply(n,w(i.streams)),n},[])}function rs(n,i){0>n.F||n.G.U(Math.max(n.F-i,Na(n.H)))}function zs(n,i,r,o){r=r||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Td:null,audioSamplingRate:null,ac:0,jf:0},o=o||r.cb;var s,u=i.getAttribute("id"),p=pg(i,"BaseURL"),m=!1;if(n.g)for(var y=t(p),x=y.next();!x.done;x=y.next()){var A=x.value;x=A.getAttribute("serviceLocation"),A=vg(A),x&&A&&(Er(n.g,u,x,A),m=!0)}m&&n.g||(s=p.map(vg)),y=i.getAttribute("contentType")||r.contentType,x=i.getAttribute("mimeType")||r.mimeType,A=i.getAttribute("codecs")||r.codecs;var I=xg(i,"frameRate",Gg)||r.frameRate,M=i.getAttribute("sar")||r.pixelAspectRatio,j=function(n,i){i=i.slice(),n=t(n);for(var r=n.next();!r.done;r=n.next())r=r.value.getAttribute("schemeIdUri"),i.includes(r)||i.push(r);return i}(pg(i,"InbandEventStream"),r.emsgSchemeIdUris),D=pg(i,"AudioChannelConfiguration");D=function(n){n=t(n);for(var i=n.next();!i.done;i=n.next()){var r=i.value;if((i=r.getAttribute("schemeIdUri"))&&(r=r.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(i=parseInt(r,10)))continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(i=parseInt(r,16)))continue;for(n=0;i;)1&i&&++n,i>>=1;return n;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(i=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(r=parseInt(r,10))&&0<r&&r<i.length)return i[r]}}return null}(D)||r.Td;var R=xg(i,"audioSamplingRate",Dg)||r.audioSamplingRate;y||(y=Es(x,A));var P=og(i,"SegmentBase"),L=og(i,"SegmentTemplate"),_=P&&xg(P,"availabilityTimeOffset",Eg)||0,B=L&&xg(L,"availabilityTimeOffset",Eg)||0,z=p&&p.length&&xg(p[0],"availabilityTimeOffset",Eg)||0;return _=r.ac+z+_+B,B=null,(z=og(i,"SegmentSequenceProperties"))&&(z=og(z,"SAP"))&&(B=xg(z,"cadence",Bg)),{cb:function(){return xc(o(),p.length?n.g&&m?Fr(n.g,u):s||[]:[])},ed:P||r.ed,Fb:og(i,"SegmentList")||r.Fb,fd:L||r.fd,width:xg(i,"width",Dg)||r.width,height:xg(i,"height",Dg)||r.height,contentType:y,mimeType:x,codecs:A,frameRate:I,pixelAspectRatio:M,emsgSchemeIdUris:j,id:u,language:i.getAttribute("lang"),Td:D,audioSamplingRate:R,ac:_,jf:B||r.jf}}function Js(n,i,r,o){var s,u,p,m,y;return K(function(x){if(1==x.g)return(s=qf(xc(i(),[r]),n.h.retryParameters)).method=o,u=n.i.networkingEngine.request(4,s),lf(n.C,u),C(x,u.promise,2);if(p=x.h,"HEAD"==o){if(!p.headers||!p.headers.date)return x.return(0);m=p.headers.date}else m=Nf(p.data);return isNaN(y=Date.parse(m))?x.return(0):x.return(y-Date.now())})}function Es(n,i){return Qc(i=Gc(n,i))?eK:n.split("/")[0]}function ss(n,i,r,o){return i=n.i.networkingEngine.request(r,i,o),lf(n.C,i),i.promise}function Ks(){}(D=os.prototype).configure=function(n){this.h=n,this.g&&this.g.configure(this.h),this.l&&(this.l.m=this.h.dash.multiTypeVariantsAllowed&&bb())},D.start=function(n,i){var r,o=this;return K(function(s){if(1==s.g)return o.s=i.isLowLatencyMode(),o.o=[n],o.i=i,C(s,qs(o),2);if(r=s.h,o.i&&rs(o,r),!o.i)throw new O(2,7,7001);return s.return(o.j)})},D.stop=function(){for(var n=t(Object.values(this.m)),i=n.next();!i.done;i=n.next())(i=i.value).segmentIndex&&i.segmentIndex.release();return this.l&&this.l.release(),this.h=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,null!=this.G&&(this.G.stop(),this.G=null),this.g&&this.g.destroy(),this.C.destroy()},D.update=function(){var n,i=this;return K(function(r){return 1==r.g?(sa(r,2),C(r,qs(i),4)):2!=r.g?ua(r,0):(n=va(r),i.i&&n)?void(i.i.onError(n),E(r)):r.return()})},D.onExpirationUpdated=function(){},D.onInitialVariantChosen=function(n){if(this.j&&this.j.presentationTimeline.R()){var i=n.video||n.audio;if(i&&i.segmentIndex){n=this.j.presentationTimeline.Bb();var r=i.segmentIndex.find(n);null!=r&&(i=i.segmentIndex.get(r))&&(this.F=i.endTime-n,rs(this,0))}}},D.banLocation=function(n){this.g&&this.g.i.set(n,Date.now()+6e4)},N("shaka.dash.DashParser",os),tf["application/dash+xml"]=function(){return new os},tf["video/vnd.mpeg.dash.mpd"]=function(){return new os},N("shaka.dependencies",Ks),Ks.has=function(n){return ib.has(n)},Ks.add=function(n,i){if(!iv[n])throw Error(n+" is not supported");n==im?ze("mux.js","mux.js is no longer used in Shaka Player."):ib.set(n,function(){return i})};var im="muxjs",iv={cj:im,ISOBoxer:"ISOBoxer"};Ks.Allowed=iv;var ib=new Map([["ISOBoxer",function(){return n.ISOBoxer}]]);function Os(n,i,r){this.type=n,this.g=i,this.segments=r||null}function Ps(n,i,r,o){this.id=n,this.name=i,this.g=r,this.value=void 0===o?null:o}function Qs(n){var i=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return n.toString(i)}function Z(n,i,r){return(n=n.getAttribute(i))?n.value:r||null}function Rs(n,i){if(!(n=n.getAttribute(i)))throw new O(2,4,4023,i);return n.value}function Ss(n,i,r){r=void 0===r?[]:r,this.g=i,this.h=n,this.fb=r}function Ts(n,i){this.name=n,this.value=i}function Us(n,i){return n.filter(function(n){return n.name==i})}function Vs(n,i){return n.filter(function(n){return Rs(n,"TYPE")==i})}function Ws(n,i){n=t(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value).name===i)return r;return null}function Xs(n,i,r){return r=void 0===r?0:r,(n=Ws(n,i))?Number(n.value):r}function Ys(n,i,r){return i?Zs(n,[i],r):[]}function Zs(n,i,r){if(!i.length)return[];i=xc(n,i),n=[],i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=n,u=s.push,p=o.value;if((o=r)&&o.size){var m=(p=String(p).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(m){m=t(m);for(var y=m.next();!y.done;y=m.next()){var x=(y=y.value).slice(2,y.length-1),A=o.get(x);if(A)p=p.replace(y,A);else throw new O(2,4,4039,x)}}o=p}else o=p;u.call(s,o)}return n}function $s(n){this.h=n||"",this.g=0}function at(n){bt(n,/[ \t]+/gm)}function bt(n,i){return(i.lastIndex=n.g,i=null==(i=i.exec(n.h))?null:{position:i.index,length:i[0].length,results:i},n.g==n.h.length||null==i||i.position!=n.g)?null:(n.g+=i.length,i.results)}function ct(n){return n.g==n.h.length?null:(n=bt(n,/[^ \t\n]*/gm))?n[0]:null}function dt(){this.g=0}function et(n,i){var r=(i=(i=Nf(i)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new O(2,4,4015);i=0;for(var o=!0,s=t(r),u=s.next();!u.done;u=s.next())if(u=u.value,/^#(?!EXT)/m.test(u)||o)o=!1;else if(u=ft(n,u),--n.g,ix.includes(u.name)){i=1;break}else"EXT-X-STREAM-INF"==u.name&&(o=!0);for(u=0,s=[],o=!0;u<r.length;u++){var p=r[u],m=r[u+1];if(/^#(?!EXT)/m.test(p)||o)o=!1;else{if(p=ft(n,p),iT.includes(p.name)){if(1!=i)throw new O(2,4,4017);p=r.splice(u,r.length-u),r=[],o=[],u=[],m=null,p=t(p);for(var y=p.next();!y.done;y=p.next())y=y.value,/^(#EXT)/.test(y)?(y=ft(n,y),ix.includes(y.name)?s.push(y):"EXT-X-MAP"==y.name?m=y:"EXT-X-PART"==y.name?u.push(y):"EXT-X-PRELOAD-HINT"==y.name?"PART"==Z(y,"TYPE")?u.push(y):"MAP"==Z(y,"TYPE")&&(y.name="EXT-X-MAP",m=y):o.push(y)):/^#(?!EXT)/m.test(y)||(y=y.trim(),m&&o.push(m),r.push(new Ss(y,o,u)),o=[],u=[]);return u.length&&(m&&o.push(m),r.push(new Ss("",o,u))),new Os(i,s,r)}s.push(p),"EXT-X-STREAM-INF"==p.name&&(p.g.push(new Ts("URI",m)),o=!0)}}return new Os(i,s)}function ft(n,i){n=n.g++;var r=i.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new O(2,4,4016,i);i=r[1];var o=r[2];if(r=[],o){(u=bt(o=new $s(o),/^([^,=]+)(?:,|$)/g))&&(s=u[1]);for(var s,u,p=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=bt(o,p);)r.push(new Ts(u[1],u[2]||u[3])),at(o)}return new Ps(n,i,r,s)}Ps.prototype.toString=function(n){var i="#"+this.name,r=this.g?this.g.filter(function(i){return!n||!n.has(i.name)}).map(function(n){return n.name+"="+(isNaN(Number(n.value))?'"'+n.value+'"':n.value)}):[];return this.value&&r.unshift(this.value),0<r.length&&(i+=":"+r.join(",")),i},Ps.prototype.getAttribute=function(n){var i=this.g.filter(function(i){return i.name==n});return i.length?i[0]:null};var ix="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),iT="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function it(){}function jt(n){try{var i=kt(n);return cf({uri:n,originalUri:n,data:i.data,headers:{"content-type":i.contentType}})}catch(n){return af(n)}}function kt(i){var r=i.split(":");if(2>r.length||"data"!=r[0]||2>(r=r.slice(1).join(":").split(",")).length)throw new O(2,1,1004,i);var o=r[0];i=n.decodeURIComponent(r.slice(1).join(",")),o=(r=o.split(";"))[0];var s=!1;return 1<r.length&&"base64"==r[r.length-1]&&(s=!0,r.pop()),{data:s?ig(i):Rf(i),contentType:o}}function lt(n){var i=Nc(n);return{type:i.split("/")[0],mimeType:i,codecs:n=Oc(n),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function ot(){var n=this;this.g=this.i=null,this.u=1,this.o=new Map,this.H=new Map,this.J=new Map,this.J.set("video",new Map),this.J.set("audio",new Map),this.J.set(eK,new Map),this.J.set("image",new Map),this.Ba=new Set,this.h=new Map,this.l=null,this.Y="",this.za=new dt,this.I=-1,this.V=1/0,this.da=this.mb=!1,this.s=new qd(function(){var i,r,o,s,u,p;i=n,K(function(n){switch(n.g){case 1:if(!i.i)return n.return();return sa(n,2),r=Date.now(),C(n,i.update(),4);case 4:o=Date.now(),tt(i)&&(s=(o-r)/1e3,i.kb.sample(1,s),u=Math.max(0,i.m-Na(i.kb)),i.s.U(u)),ua(n,3);break;case 2:if(p=va(n),!i.i)return n.return();if(i.g.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(p),n.return();p.severity=1,i.i.onError(p),i.s.U(.1);case 3:if(!i.i)return n.return();i.i.onManifestUpdated(),E(n)}})}),this.ea=iE,this.C=null,this.Aa=0,this.m=1/0,this.ma=this.ka=this.K=0,this.N=new kf,this.F=new Map,this.G=new Map,this.W=new Map,this.lb=this.A=!1,this.kb=new Ma(5),this.j=null}function zt(n,i){return tt(n)?n.J.get(i.type):i.Pd}function Gt(n,i,r){i.Sb+=r,i.rb+=r,n=zt(n,i);for(var o=t(n),s=o.next();!s.done;s=o.next()){var u=t(s.value);s=u.next().value,u=u.next().value,n.set(s,u+r)}i.Z()}function It(n,i,r){var o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_;return K(function(B){switch(B.g){case 1:if(o=lt(n.g.hls.mediaPlaylistFullMimeType),!i.segments.length)return B.return(o);if(s=Math.trunc((i.segments.length-1)/2),u=i.segments[s],m=(p=Ys(r(),i.segments[0].h))[0],x=iS[y=new fc(m).Ga.split(".").pop()])return B.return(lt(x));if(A=e4,I=null,M=Wt(n,i,u.g,r),n.W.clear(),!M){B.B(2);break}return j=fk(M.Z(),M.ic(),M.fc(),n.g.retryParameters),C(B,Xt(n,j,A,{type:0}),3);case 3:I=B.h.data;case 2:return D=qf(p,n.g.retryParameters),C(B,Xt(n,D,A,{type:1}),4);case 4:if((P=(R=B.h).headers["content-type"])&&(P=P.split(";")[0].toLowerCase()),"ts"==y||"video/mp2t"==P){var z=R.data,q=hb(z),V=(q=(new ni).parse(q)).Pc();q=q.Je();var H=[],G=!1,X=!1;switch(V.audio){case"aac":H.push("mp4a.40.2"),G=!0;break;case"mp3":H.push("mp4a.40.34"),G=!0;break;case"ac3":H.push("ac-3"),G=!0;break;case"ec3":H.push("ec-3"),G=!0}switch(V.video){case"avc":q.ha?H.push(q.ha):H.push("avc1.42E01E"),X=!0;break;case"hvc":q.ha?H.push(q.ha):H.push("hvc1.1.6.L93.90"),X=!0}if(H.length){if(V=G&&!X,G=new Map,X){(X=new pb("video/mp2t")).i(z),z=t(X.j());for(var J=z.next();!J.done;J=z.next())J=J.value,G.set(J,J);X.h()}q={type:V?"audio":"video",mimeType:"video/mp2t",codecs:H.join(", "),language:null,height:q.height,width:q.width,channelCount:null,sampleRate:null,closedCaptions:G}}else q=null;if(L=q)return B.return(L)}else if(("mp4"==y||"cmfv"==y||"m4s"==y||"video/mp4"==P||"audio/mp4"==P||"video/iso.segment"==P)&&(_=function(n,i){function c(n){return d(n.name)}function d(n){switch(n=n.toLowerCase()){case"avc1":case"avc3":r.push(n+".42E01E"),s=!0;break;case"hev1":case"hvc1":r.push(n+".1.6.L93.90"),s=!0;break;case"dvh1":case"dvhe":r.push(n+".05.04"),s=!0;break;case"vp09":r.push(n+".00.10.08"),s=!0;break;case"av01":r.push(n+".0.01M.08"),s=!0;break;case"mp4a":r.push("mp4a.40.2"),o=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":r.push(n),o=!0}}var r=[],o=!1,s=!1,u=null,p=null,m=null,y=null,x=null;if((new Wf).box("moov",ag).box("trak",ag).O("tkhd",function(n){p=String((n=$h(n.reader,n.version)).height),m=String(n.width)}).box("mdia",ag).O("mdhd",function(n){u=Yh(n.reader,n.version).language}).box("minf",ag).box("stbl",ag).O("stsd",cg).box("mp4a",function(n){var i=n.reader;i.skip(6),i.skip(2),i.skip(8);var r=i.Ea();i.skip(2),i.skip(2),i.skip(2),i=i.Ea()+i.Ea()/65536,y=r,x=i,n.reader.ia()?ag(n):c(n)}).box("esds",function(n){n=function(n){for(var i,r,o="mp4a";n.ia();){i=n.ga();for(var s=n.ga();128&s;)s=n.ga();if(3==i)n.Ea(),128&(s=n.ga())&&n.Ea(),64&s&&n.skip(n.ga()),32&s&&n.Ea();else if(4==i)r=n.ga(),n.skip(12);else if(5==i)break}return r&&(o+="."+this.g(r),5==i&&n.ia()&&(31==(r=(248&(i=n.ga()))>>3)&&n.ia()&&(r=32+((7&i)<<3)+((224&n.ga())>>5)),o+="."+r)),{ha:o}}(n.reader),r.push(n.ha),o=!0}).box("ac-3",c).box("ec-3",c).box("opus",c).box("Opus",c).box("fLaC",c).box("avc1",function(n){n=bi(n.reader,n.name),r.push(n.ha),s=!0}).box("avc3",function(n){n=bi(n.reader,n.name),r.push(n.ha),s=!0}).box("hev1",c).box("hvc1",c).box("dvh1",c).box("dvhe",c).box("vp09",c).box("av01",c).box("enca",dg).box("encv",dg).box("sinf",ag).box("frma",function(n){d(n=ci(n.reader).ha)}).parse(n||i,!0),!r.length)return null;var A=o&&!s,I=new Map;if(s){var M=new pb("video/mp4");for(n&&M.init(n),M.i(i),i=(n=t(M.j())).next();!i.done;i=n.next())i=i.value,I.set(i,i);M.h()}return{type:A?"audio":"video",mimeType:A?"audio/mp4":"video/mp4",codecs:(function(n){var i=new Set,r=[];n=t(n);for(var o=n.next();!o.done;o=n.next()){var s=Mc(o=o.value);i.has(s)||(r.push(o),i.add(s))}return r})(r).join(", "),language:u,height:p,width:m,channelCount:y,sampleRate:x,closedCaptions:I}}(I,R.data)))return B.return(_);return B.return(o)}})}function yt(n){if(tt(n)){if(n.ea==iM){var i=function(n){var i=1/0,r=1/0;n=t(n.h.values());for(var o=n.next();!o.done;o=n.next())(o=o.value).stream.segmentIndex&&"text"!=o.stream.type&&(i=Math.min(i,o.rb),r=Math.min(r,o.Sb));return i-r}(n);n.g.hls.useSafariBehaviorForLive&&(i=n.l.o),isNaN(n.g.availabilityWindowOverride)||(i=n.g.availabilityWindowOverride),n.l.Xd(i)}if(!n.l.m){i=t(i=Array.from(n.h.values()).filter(function(n){return n.stream.segmentIndex}));for(var r=i.next();!r.done;r=i.next())("audio"==(r=r.value).type||"video"==r.type)&&(r=r.stream.segmentIndex.get(0))&&r.ca&&n.l.qf(r.ca)}}else n.l.Pa($t(n));n.l.Nd()}function At(n,i,r){r=new fc(r).g;var o=new Map;i=t(i);for(var s=i.next();!s.done;s=i.next()){var u=s.value,p=Z(u,"NAME"),m=Z(u,"VALUE");s=Z(u,"QUERYPARAM"),u=Z(u,"IMPORT"),p&&m&&(o.has(p)||o.set(p,m)),s&&(p=r.get(s)[0])&&!o.has(p)&&o.set(s,p),u&&(s=n.o.get(u))&&o.set(u,s)}return o}function au(n,i){var r=Z(i,"CODECS")||"";n.da=0<r.length,n.da||n.g.hls.disableCodecGuessing||(i=[],n.g.disableVideo||i.push(n.g.hls.defaultVideoCodec),n.g.disableAudio||i.push(n.g.hls.defaultAudioCodec),r=i.join(",")),n=new Set,i=[],r=t(r.split(/\s*,\s*/));for(var o=r.next();!o.done;o=r.next()){var s=Mc(o=o.value);n.has(s)||(i.push(o),n.add(s))}return i}function ku(n){return(n=Z(n,"CHANNELS"))?parseInt(n.split("/")[0],10):null}function mu(n){return(n=Z(n,"SAMPLE-RATE"))?parseInt(n,10):null}function lu(n){return!!(n=Z(n,"CHANNELS"))&&n.includes("/JOC")}function bu(n,i,r){for(var o=[],s=[],u=new Map,p=t(i),m=p.next();!m.done;m=p.next()){var y=m.value;m=Rs(y,"URI"),y=Rs(y,"GROUP-ID"),o.push(m),s.push(y),u.set(y,m)}if(p=s.sort().join(","),m=i[0],i="","subtitles"==(y=Rs(m,"TYPE").toLowerCase())&&(y=eK),y==eK)i=Z(m,"CODECS")||"";else{s=t(s);for(var x=s.next();!x.done;x=s.next())if(x=x.value,n.G.has(x)){i=n.G.get(x);break}}if(s=o.sort().join(","),n.h.has(s))return n.h.get(s);if(x=n.u++,n.j){u=t(u);for(var A=u.next();!A.done;A=u.next()){var I=t(A.value);A=I.next().value,I=I.next().value,(A=r.get(A))&&Er(n.j,x,A,I)}}r=Z(m,"LANGUAGE"),u=Z(m,"NAME"),A="YES"==Z(m,"DEFAULT"),I="audio"==y?ku(m):null;var M="audio"==y&&lu(m),j=Z(m,"CHARACTERISTICS"),D="YES"==Z(m,"FORCED");return m="audio"==y?mu(m):null,(o=fu(n,x,o,i,y,r,A,u,I,null,j,D,m,M)).stream&&(o.stream.groupId=p),n.H.has(p)?n.H.get(p).push(o):n.H.set(p,[o]),n.h.set(s,o),o}function fu(n,i,r,o,s,u,p,m,y,x,A,I,M,j){function v(){return n.j&&1<r.length?Fr(n.j,i):R.concat(Zs([n.Y],r,n.o))}var D=pu(n,o,s,u,p,m,y,x,A,I,M,j),R=[],P={stream:D,type:s,gg:R,Z:v,Sb:0,rb:0,Pd:new Map,td:!1,sd:!1,Sc:!1,qe:-1,Xa:-1,Ya:-1,Se:!1},L=null,_=new AbortController;return D.createSegmentIndex=function(){return L||(_=new AbortController,L=new Promise(function(i){var r,L,B,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec;i((r=_.signal,K(function(i){switch(i.g){case 1:return L=P.Z(),C(i,rt(n,P.Z(),!0),2);case 2:if(B=i.h,r.aborted)return i.return();if((z=B.uri)==B.originalUri||L.includes(z)||R.push(z),q=et(n.za,B.data),V=void 0,n.da||!n.g.hls.disableCodecGuessing){i.B(3);break}return C(i,It(n,q,v),4);case 4:V=(H=i.h).mimeType,o=H.codecs;case 3:return G=tt(n),C(i,Rt(n,0,q,v,z,o,s,u,p,m,y,x,A,I,M,j,V),5);case 5:if(X=i.h,r.aborted)return i.return();if(J=X.stream,tt(n)&&!G&&Tt(n,q),P.Sb=X.Sb,P.rb=X.rb,P.td=X.td,P.sd=X.sd,P.Sc=X.Sc,P.Pd=X.Pd,P.Xa=X.Xa,P.Ya=X.Ya,P.Se=!0,D.segmentIndex=J.segmentIndex,D.encrypted=J.encrypted,D.drmInfos=J.drmInfos,D.keyIds=J.keyIds,D.mimeType=J.mimeType,D.bandwidth=D.bandwidth||J.bandwidth,D.codecs=D.codecs||J.codecs,D.drmInfos.length&&n.i.newDrmInfo(D),s==($=eF).$||s==$.P)for(en=(ee=t(n.h.values())).next();!en.done;en=ee.next())(ea=en.value).Se||ea.type!=s||(ea.stream.mimeType=J.mimeType);s==$.na&&(eo=J.segmentIndex.get(0))&&eo.aa&&(D.mimeType="application/mp4"),function(n){if(!n.C)return!1;var i=[],r=[];n=t(n.C.variants);for(var o=n.next();!o.done;o=n.next())(o=o.value).video&&i.push(o.video),o.audio&&r.push(o.audio);return(!(0<i.length)||!!i.some(function(n){return n.segmentIndex}))&&(!(0<r.length)||!!r.some(function(n){return n.segmentIndex}))}(n)&&(n.mb?Ut(n,[P]):(n.mb=!0,eu=Array.from(n.h.values()).filter(function(n){return n.stream.segmentIndex}),Ut(n,eu),yt(n),0<(ec=n.m)&&n.s.U(ec))),E(i)}})))}))},D.closeSegmentIndex=function(){L&&!D.segmentIndex&&_.abort(),D.segmentIndex&&(D.segmentIndex.release(),D.segmentIndex=null),L=null},P}function $t(n){var i=1/0;n=t(n.h.values());for(var r=n.next();!r.done;r=n.next())(r=r.value).stream.segmentIndex&&"text"!=r.stream.type&&(i=Math.min(i,r.rb));return i}function vt(n,i){var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next())(o=o.value).segmentIndex&&Gj(o.segmentIndex,function(n){r.push(n)});n.l.Xc(r)}function Ut(n,i){if(!tt(n))for(var r=$t(n),o=t(i),s=o.next();!s.done;s=o.next())s.value.stream.segmentIndex.bc(0,r);vt(n,i.map(function(n){return n.stream})),n.g.hls.ignoreManifestProgramDateTime?function(n,i){for(var r=-1==n.I,o=t(i),s=o.next();!s.done;s=o.next()){var u=(s=s.value).stream.segmentIndex,p=zt(n,s);if(u=u.g[0]||null){p=t(p);for(var m=p.next();!m.done;m=p.next()){var y=(m=t(m.value)).next().value;if(m.next().value==u.startTime){r&&(n.I=Math.max(n.I,y)),s.qe=y;break}}}}if(!(0>n.I))for(s=(i=t(i)).next();!s.done;s=i.next())(o=(r=s.value).stream.segmentIndex)&&(o.g.splice(0,n.I-r.qe),(o=o.g[0]||null)&&(o=-o.startTime,r.stream.segmentIndex.offset(o),Gt(n,r,o)))}(n,i):function(n,i){if(1/0==n.V){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value.stream.segmentIndex.g[0]||null;null!=o&&null!=o.ca&&(n.V=Math.min(n.V,o.ca))}}if(1/0!=(i=n.V))for(r=(o=t(n.h.values())).next();!r.done;r=o.next()){var s=(r=r.value).stream.segmentIndex;if(null!=s){var u=s.g[0]||null;if(null==u.ca)Ra("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.Z(),"Expect AV sync issues!");else for(Gt(n,r,u.ca-i-u.startTime),s=(r=t(s)).next();!s.done;s=r.next())s.value.tf(i)}}}(n,i)}function Rt(n,i,r,o,s,u,p,m,y,x,A,I,M,j,D,R,P){var L,_,B,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec,ep,em,ev;return K(function(i){if(1==i.g){if(1!=r.type)throw new O(2,4,4017);L=At(n,Us(r.g,"EXT-X-DEFINE"),s);var ew,ex,eT,eS,eC,ek,eE,eI,eM,eD,eN,eR,eO,eP,eL,eU=Ws(r.g,"EXT-X-PLAYLIST-TYPE"),e_=Ws(r.g,"EXT-X-ENDLIST");return e_=eU&&"VOD"==eU.value||e_,eU=eU&&"EVENT"==eU.value&&!e_,eU=!e_&&!eU,e_?xt(n,iE):eU?xt(n,iM):xt(n,iI),tt(n)&&Et(n,r),P?i.B(2):C(i,(ew=n,ex=p,eT=u,eS=r,eC=L,ek=o,K(function(n){switch(n.g){case 1:if(eE=e4,eI=Math.trunc((eS.segments.length-1)/2),eM=Ys(ek(),eS.segments[eI].h,eC),eD=new fc(eM[0]).Ga.split(".").pop(),(eN=iA[ex][eD])||(eN=iS[eD])||(eN=cu(ex,eT)))return n.return(eN);return eO=1,eP=qf(eM,ew.g.retryParameters),sa(n,2),eP.method="HEAD",C(n,Xt(ew,eP,eE,{type:eO}),4);case 4:eR=n.h.headers["content-type"],ua(n,3);break;case 2:if(!(eL=va(n))||1002!=eL.code&&1001!=eL.code){n.B(3);break}return eP.method="GET",C(n,Xt(ew,eP,eE,{type:eO}),6);case 6:eR=n.h.headers["content-type"];case 3:return eR?n.return(eR.split(";")[0]):n.return(du(ex))}})),3)}if(2!=i.g&&(P=i.h),B=(_=Bt(r,P)).drmInfos,z=_.keyIds,q=_.encrypted,V=_.Dg,q&&!B.length&&!V)throw new O(2,4,4026);return(H=pu(n,u,p,m,y,x,A,I,M,j,D,R)).encrypted=q,H.drmInfos=B,H.keyIds=z,H.mimeType=P,G=tt(n)?n.J.get(p):new Map,J=(X=Ct(n,r,H,G,L,o)).segments,($=X.bandwidth)&&(H.bandwidth=$),tt(n)&&Et(n,r),ee=J[0].startTime,en=J[J.length-1].endTime,ea=new Fj(J),H.segmentIndex=ea,eu=!!(eo=Ws(r.g,"EXT-X-SERVER-CONTROL"))&&null!=eo.getAttribute("CAN-SKIP-UNTIL"),ec=!!eo&&null!=eo.getAttribute("CAN-BLOCK-RELOAD"),em=(ep=Dt(Xs(r.g,"EXT-X-MEDIA-SEQUENCE",0),J)).Xa,ev=ep.Ya,i.return({stream:H,type:p,gg:[],Z:o,Sb:ee,rb:en,td:eu,sd:ec,Sc:!1,qe:-1,Xa:em,Ya:ev,Pd:G,Se:!1})})}function Dt(n,i){n=n+i.length-1;var r=-1;if(!i.length)return{Xa:++n,Ya:r};var o=(i=i[i.length-1]).g;return i.g.length?(r=o.length-1,o[o.length-1].l||(n++,r=0)):(n++,i.m&&(r=0)),{Xa:n,Ya:r}}function pu(n,i,r,o,s,u,p,m,y,x,A,I){var M=cu(r,i)||du(r),j=[];if(y){y=t(y.split(","));for(var D=y.next();!D.done;D=y.next())j.push(D.value)}return y=void 0,D=null,r==eK?y=j.includes("public.accessibility.transcribes-spoken-dialog")&&j.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":j.includes("public.accessibility.describes-video")&&(D="visually impaired"),j.length||"subtitle"!==y||j.push("subtitle"),{id:n.u++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:M,codecs:i,kind:r==eK?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:dd(o||"und"),originalLanguage:o,label:u,type:r,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:j,forced:x,channelsCount:p,audioSamplingRate:A,spatialAudio:I,closedCaptions:m,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:D,external:!1,fastSwitching:!1}}function Bt(n,i){var r=[];if(n.segments){n=t(n.segments);for(var o=n.next();!o.done;o=n.next())o=Us(o.value.g,"EXT-X-KEY"),r.push.apply(r,w(o))}o=n=!1;var s=[],u=new Set;r=t(r);for(var p=r.next();!p.done;p=r.next()){var m=Rs(p=p.value,"METHOD");if("NONE"!=m){if(n=!0,"AES-128"==m)o=!0;else if(p=(m=iC[m=Z(p,"KEYFORMAT")||"identity"])?m(p,i):null){if(p.keyIds){m=t(p.keyIds);for(var y=m.next();!y.done;y=m.next())u.add(y.value)}s.push(p)}}}return{drmInfos:s,keyIds:u,encrypted:n,Dg:o}}function su(i,r,o,s,u){if(!n.crypto||!n.crypto.subtle)throw Sa("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new O(2,4,4042);var p=0,m=Z(r,"IV","");if(m){var y=jg(m.substr(2));if(16!=y.byteLength)throw new O(2,4,4048)}else p=Xs(o.g,"EXT-X-MEDIA-SEQUENCE",0);var x={method:"AES-128",iv:y,firstMediaSequenceNumber:p,fetchKey:function(){var o,p,m,y;return K(function(A){if(1==A.g)return o=qf(Ys(s(),Rs(r,"URI"),u),i.g.retryParameters),C(A,Xt(i,o,6),2);if(3!=A.g){if(!(p=A.h).data||16!=p.data.byteLength)throw new O(2,4,4049);return m={name:"AES-CBC"},y=x,C(A,n.crypto.subtle.importKey("raw",p.data,m,!0,["decrypt"]),3)}y.cryptoKey=A.h,x.fetchKey=void 0,E(A)})}};return x}function Et(n,i){var r=1/0,o=i.segments;if(o.length)for(var s=o.length-1;0<=s;){var u=Ws(o[s].g,"EXTINF");if(u){r=Number(u.value.split(",")[0]);break}s--}if(!(o=Ws(i.g,"EXT-X-TARGETDURATION")))throw new O(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(s=Ws(i.g,"EXT-X-PART-INF"))&&(n.K=Number(Rs(s,"PART-TARGET"))),i=Ws(i.g,"EXT-X-SERVER-CONTROL"),n.A&&n.K?(n.m=n.lb?5*n.K<=r?Math.min(n.K,n.m):Math.min(r,n.m):Math.min(n.K,n.m),n.ma=i?Number(Rs(i,"PART-HOLD-BACK")):0):(n.m=Math.min(r,n.m),r=i?i.getAttribute("HOLD-BACK"):null,n.ka=r?Number(r.value):0),n.Aa=Math.max(o,n.Aa)}function Tt(n,i){if(n.g.defaultPresentationDelay)i=n.g.defaultPresentationDelay;else if(n.ma)i=n.ma;else if(n.ka)i=n.ka;else{i=i.segments.length;var r=n.g.hls.liveSegmentsDelay;r>i-2&&(r=Math.max(1,i-2)),i=n.Aa*r}n.l.qf(0),n.l.ng(i),n.l.pc(!1)}function Wt(n,i,r,o,s){var u=Ws(r,"EXT-X-MAP");if(!u)return null;var p=Rs(u,"URI"),m=Ys(o(),p,s);if(p=[m.toString(),Z(u,"BYTERANGE","")].join("-"),!n.W.has(p)){var y,x,A,I,M,j,D=void 0,R=null;r=t(r);for(var P=r.next();!P.done;P=r.next())"EXT-X-KEY"==(P=P.value).name?"AES-128"==Rs(P,"METHOD")&&P.id<u.id&&(D=su(n,P,i,o,s)):"EXT-X-BYTERANGE"==P.name&&P.id<u.id&&(R=P);y=m,x=u,A=R,I=D,M=0,j=null,(x=Z(x,"BYTERANGE"))||!A||(x=A.value),x&&(j=Number((M=x.split("@"))[0]),j=(M=Number(M[1]))+j-1,I&&(A=j+1-M)%16&&(j+=16-A%16)),i=new Gh(function(){return y},M,j,null,null,null,I),n.W.set(p,i)}return n.W.get(p)}function vu(n,i){var r=0,o=null;return i&&(i=Number((r=i.split("@"))[0]),o=(r=r[1]?Number(r[1]):n.wa+1)+i-1),[r,o]}function Ct(i,r,o,s,u,p){var m=r.segments,y=void 0,x=Xs(r.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),A=Xs(r.g,"EXT-X-MEDIA-SEQUENCE",0),I=Ws(r.g,"EXT-X-SKIP"),M=I?Number(Z(I,"SKIPPED-SEGMENTS")):0,j=A+M,D=0;tt(i)&&s.has(j)&&(D=s.get(j)),0===D&&i.ea==iM&&0<s.size&&!s.has(j)&&(D=i.l.eb());var R=[],P=null;I=[];for(var L=0;L<m.length;L++){var _=m[L],B=0==L?D:P.endTime;j=A+M+L,Ws(_.g,"EXT-X-DISCONTINUITY")&&x++;for(var z=t(_.g),q=z.next();!q.done;q=z.next())"EXT-X-KEY"==(q=q.value).name&&(y="AES-128"==Rs(q,"METHOD")?su(i,q,r,p,u):void 0);s.set(j,B),z=Wt(i,r,_.g,p,u),!i.A&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.A=i.i.isLowLatencyMode()),(B=function(i,r,o,s,u,p,m,y,x){var A=s.g,I=Ws(A,"EXTINF"),M=0,j=0,D=null;s.fb.length&&!i.A&&Sa("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var R=null;if(!i.g.hls.ignoreManifestProgramDateTime){var P=Ws(A,"EXT-X-PROGRAM-DATE-TIME");P&&P.value&&(R=yg(P.value))}var L=tm;if(Ws(A,"EXT-X-GAP")&&(L=2),!I){if(0==s.fb.length)throw new O(2,4,4024,"EXTINF");if(!i.A)return null}var _=[];P=!1;var B=null,z=!1,q=!1;if(i.A&&s.fb.length){M=("video/mp4"==m.mimeType||"audio/mp4"==m.mimeType)&&n.ReadableStream&&i.g.hls.allowLowLatencyByteRangeOptimization;for(var V=R,H={},G=0;G<s.fb.length;H={Cc:H.Cc,md:H.md},G++){var X=s.fb[G],J=0==G?o:_[_.length-1],$=0==G?u:J.endTime,ee=Number(Z(X,"DURATION"))||i.K;if(ee){var en=$+ee,ea=0,eo=null;if("EXT-X-PRELOAD-HINT"==X.name?(ea=(ea=Z(X,"BYTERANGE-START"))?Number(ea):0,(J=Z(X,"BYTERANGE-LENGTH"))?eo=ea+Number(J)-1:ea&&(eo=Number.MAX_SAFE_INTEGER)):(ea=(eo=t(vu(J,ea=Z(X,"BYTERANGE")))).next().value,eo=eo.next().value),H.md=Z(X,"URI"),H.md){J=tm,"YES"==Z(X,"GAP")&&(J=2,z=!0),H.Cc=null;var eu=function(n){return function(){return null==n.Cc&&(n.Cc=Ys(y(),n.md,p)),n.Cc}}(H);M&&0<=ea&&null!=eo&&(B=eu,P=!0),$=new S($,en,eu,ea,eo,r,0,0,1/0,[],"",null,V,J,x),"EXT-X-PRELOAD-HINT"==X.name&&($.Ue(),q=!0),"YES"!=Z(X,"INDEPENDENT")&&0<G&&$.Od(),_.push($),V&&(V+=ee)}}}}if(I){if(0==(I=Number(I.value.split(",")[0])))return null;M=u+I}else{if(!_.length)return null;M=_[_.length-1].endTime}P&&(z||0!=_[0].Qa?(P=!1,B=null):_=[]),(I=Ws(A,"EXT-X-BYTERANGE"))?(j=(D=t(vu(o,I.value))).next().value,D=D.next().value):_.length&&(j=_[0].Qa,D=_[_.length-1].wa),o="",I=null,"image"==m.type&&(o="1x1",m=Ws(A,"EXT-X-TILES"))&&(o=Rs(m,"LAYOUT"),(m=Z(m,"DURATION"))&&(I=Number(m)));var ec=null;return r=new S(u,M,function(){return B?B():(null==ec&&(ec=Ys(y(),s.h,p)),ec||[])},j,D,r,0,0,1/0,_,o,I,R,L,x,0<_.length&&!!s.h),P&&(i.lb=!0,r.Zf(),q&&r.Ue()),r}(i,z,P,_,B,u,o,p,y))&&((P=Xs(_.g,"EXT-X-BITRATE"))?I.push({bitrate:P,duration:B.endTime-B.startTime}):I.length&&(P=I.pop(),P.duration+=B.endTime-B.startTime,I.push(P)),P=B,B.i=x,i.g.hls.ignoreManifestProgramDateTime&&null!=i.I&&j<i.I||R.push(B))}if(r=void 0,I.length&&(r=I.reduce(function(n,i){return n+i.duration},0),r=Math.round(I.reduce(function(n,i){return n+i.bitrate*i.duration},0)/r*1e3)),I=R.some(function(n){return null!=n.ca})){for(o={},s=0;s<R.length;o={vc:o.vc,uc:o.uc,hd:o.hd,xb:o.xb,tc:o.tc},s++)if(o.xb=R[s],null==o.xb.ca)for(o.uc=0,o.vc=s,u=function(n){return function(){var i=R[n.vc];if(i){if(null!=i.ca)return i.ca+n.uc;n.uc-=i.endTime-i.startTime,n.vc+=1}return null}}(o),o.tc=0,o.hd=s,p=function(n){return function(){var i=R[n.hd];if(i){if(i!=n.xb&&(n.tc+=i.endTime-i.startTime),null!=i.ca)return i.ca+n.tc;--n.hd}return null}}(o);null==o.xb.ca;)o.xb.ca=p(),null==o.xb.ca&&(o.xb.ca=u())}if(I)for(s=(o=t(R)).next();!s.done;s=o.next())for(s=(u=s.value).ca,p=(u=t(u.g)).next();!p.done;p=u.next())(p=p.value).ca=s,s+=p.endTime-p.startTime;if(i=i.V,I&&1/0!=i)for(s=(I=t(R)).next();!s.done;s=I.next())s.value.tf(i);return{segments:R,bandwidth:r}}function cu(n,i){if(n==eK){if("vtt"==i||"wvtt"==i)return"text/vtt";if(i&&""!==i)return"application/mp4"}return"image"!=n||i&&"jpeg"!=i?"audio"==n&&"mp4a.40.34"==i?"audio/mpeg":"mjpg"==i?"application/mp4":null:"image/jpeg"}function du(n){return n==eK?"text/vtt":iA[n].mp4}function St(n,i,r,o,s,u){n&&(n.width=Number(i)||void 0,n.height=Number(r)||void 0,n.frameRate=Number(o)||void 0,n.hdr=s||void 0,n.videoLayout=u||void 0)}function rt(n,i,r){return Xt(n,qf(i,n.g.retryParameters),0,{type:r?2:3})}function tt(n){return n.ea!=iE}function xt(n,i){n.ea=i,n.l&&n.l.pc(!tt(n)),tt(n)||n.s.stop()}function Xt(n,i,r,o){if(!n.N)throw new O(2,7,7001);return i=n.i.networkingEngine.request(r,i,o),lf(n.N,i),i.promise}N("shaka.net.DataUriPlugin",it),it.parse=jt,nf("data",jt),(D=ot.prototype).configure=function(n){this.g=n,this.j&&this.j.configure(this.g)},D.start=function(n,i){var r,o=this;return K(function(s){var u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J,$,ee,en,ea,eo,eu,ec,ep,em,ev,ew;return 1==s.g?(o.i=i,o.A=i.isLowLatencyMode(),C(s,rt(o,[n]),2)):3!=s.g?(r=s.h,o.Y=r.uri,C(s,(u=o,p=r.data,m=n,K(function(n){var i,r,o,s,ex,eT,eS,eC,ek,eE,eI,eM,eD;switch(n.g){case 1:if(x=Us((y=et(u.za,p)).g,"EXT-X-DEFINE"),A=[],I=[],M=[],1==y.type)return C(n,It(u,y,z=function(){return[m]}),6);return function(n,i){var r=new fc(n.Y).g;i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=o.value;o=Z(s,"NAME");var u=Z(s,"VALUE");s=Z(s,"QUERYPARAM"),o&&u&&(n.o.has(o)||n.o.set(o,u)),s&&(o=r.get(s)[0])&&!n.o.has(o)&&n.o.set(s,o)}}(u,x),j=Us(y.g,"EXT-X-MEDIA"),D=Us(y.g,"EXT-X-STREAM-INF"),R=Us(y.g,"EXT-X-IMAGE-STREAM-INF"),P=Us(y.g,"EXT-X-I-FRAME-STREAM-INF"),L=Us(y.g,"EXT-X-SESSION-KEY"),_=Us(y.g,"EXT-X-SESSION-DATA"),B=Us(y.g,"EXT-X-CONTENT-STEERING"),function(n,i){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=Z(o,"DATA-ID");r=Z(o,"URI");var u=Z(o,"LANGUAGE");o=Z(o,"VALUE"),s=(new Map).set("id",s),r&&s.set("uri",Ys([n.Y],r,n.o)[0]),u&&s.set("language",u),o&&s.set("value",o),r=new Q("sessiondata",s),n.i&&n.i.onEvent(r)}}(u,_),C(n,(i=u,r=B,K(function(n){if(!i.i||!i.g)return n.return();for(ex=(s=t(r)).next();!ex.done;ex=s.next())if(eS=Z(eT=ex.value,"PATHWAY-ID"),eC=Z(eT,"SERVER-URI"),eS&&eC){i.j=new Ar(i.i),i.j.configure(i.g),i.j.j=[i.Y],i.j.setManifestType("HLS"),i.j.h=eS,o=Br(i.j,eC);break}return C(n,o,0)})),4);case 4:return function(n,i){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=Z(o,"AUDIO");r=Z(o,"VIDEO");var u=Z(o,"SUBTITLES");if(o=au(n,o),u){var p=Bc(eK,o);n.G.set(u,p),tb(o,p)}s&&((u=Bc("audio",o))||(u=n.g.hls.defaultAudioCodec),n.G.set(s,u)),r&&((s=Bc("video",o))||(s=n.g.hls.defaultVideoCodec),n.G.set(r,s))}}(u,D),function(n,i){i=t(i=Vs(i,"CLOSED-CAPTIONS"));for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=Z(o,"LANGUAGE");r=dd(s||"und"),s||(s=Z(o,"NAME"))&&(r=s),s=Rs(o,"GROUP-ID"),o=Rs(o,"INSTREAM-ID").replace("SERVICE","svc"),n.F.get(s)||n.F.set(s,new Map),n.F.get(s).set(o,r)}}(u,j),A=function(n,i,r,o){var s=[],u=new Set;if(0<r.length){r=t(r);for(var p=r.next();!p.done;p=r.next()){var m=Rs(p=p.value,"METHOD");if("NONE"!=m&&"AES-128"!=m&&(p=(m=iC[m=Z(p,"KEYFORMAT")||"identity"])?m(p,""):null)){if(p.keyIds){m=t(p.keyIds);for(var y=m.next();!y.done;y=m.next())u.add(y.value)}s.push(p)}}}for(r={},p=(i=t(i)).next();!p.done;p=i.next())r[m=Qs(p=p.value)]?r[m].push(p):r[m]=[p];for(var x in i=[],r){var A=(y=r[x])[0];p=Z(A,"FRAME-RATE"),m=Number(Z(A,"AVERAGE-BANDWIDTH"))||Number(Rs(A,"BANDWIDTH"));var I=Z(A,"RESOLUTION"),M=t(I?I.split("x"):[null,null]);I=M.next().value,M=M.next().value;var j=Z(A,"VIDEO-RANGE");(A=Z(A,"REQ-VIDEO-LAYOUT"))&&A.includes(",")&&(A=A.split(",").filter(function(n){return"CH-STEREO"==n||"CH-MONO"==n})[0]),A=A||"CH-MONO",y=function(n,i,r,o){for(var s={audio:[],video:[]},u=new Map,p=[],m=!1,y=!1,x=t(i),A=x.next();!A.done;A=x.next()){var I=A.value;A=Z(I,"AUDIO");var M=Z(I,"VIDEO"),j=A||M;j&&(p.includes(j)||p.push(j),(I=Z(I,"PATHWAY-ID"))&&u.set(j,I),A?m=!0:M&&(y=!0))}p.length&&r.length&&function(n,i,r){i=i.filter(function(n){var i=Z(n,"URI")||"";return"SUBTITLES"!=Z(n,"TYPE")&&""!=i});var o={};i=t(i);for(var s=i.next();!s.done;s=i.next()){var u=Qs(s=s.value);o[u]?o[u].push(s):o[u]=[s]}for(var p in o)bu(n,o[p],r)}(n,x=r.filter(function(n){return p.includes(Rs(n,"GROUP-ID"))}),u),x=(u=p.sort().join(","))&&n.H.has(u)?n.H.get(u):[],m?s.audio.push.apply(s.audio,w(x)):y&&s.video.push.apply(s.video,w(x)),A=!1;var D=i.map(function(n){return Rs(n,"URI")});if(y=s.audio.find(function(n){return n&&n.Z().find(function(n){return D.includes(n)})}),M=Bc("video",m=au(n,i[0])),(j=Bc("audio",m))&&!M?(y="audio",A=0<s.audio.length):!s.audio.length&&!s.video.length&&j&&M?(y="video",m=[[M,j].join()]):s.audio.length&&y?(y="audio",A=!0):y=s.video.length&&!s.audio.length?"audio":"video",!A){var R=I=j=M=A=null;!x.length&&(r=r.find(function(n){var i=Z(n,"URI")||"",r=Z(n,"TYPE");return n=Rs(n,"GROUP-ID"),"SUBTITLES"!=r&&""==i&&p.includes(n)}))&&(A=Z(r,"LANGUAGE"),M=Z(r,"NAME"),j=ku(r),lu(r),I=Z(r,"CHARACTERISTICS"),R=mu(r)),n=function(n,i,r,o,s,u,p,m,y){for(var x=n.u++,A=[],I=t(i),M=I.next();!M.done;M=I.next()){var j=M.value;M=Rs(j,"URI"),j=Z(j,"PATHWAY-ID"),n.j&&j&&Er(n.j,x,j,M),A.push(M)}if(I=A.sort().join(","),n.h.has(I))return n.h.get(I);e:{if(i=Z(i[0],"CLOSED-CAPTIONS"),"video"==o){if(i&&"NONE"!=i){i=n.F.get(i);break e}if(!i&&n.F.size)for(i=t(n.F.keys()).next();!i.done;){i=n.F.get(i.value);break e}}i=null}return o=fu(n,x,A,r=zc(o,r),o,s,!1,u,p,i,m,!1,y,!1),n.h.set(I,o),o}(n,i,m,y,A,M,j,I,R),u&&(n.stream.groupId=u),x.length||(n.stream.bandwidth=o),s[n.stream.type]=[n]}return s}(n,y,o,m),i.push.apply(i,w(function(n,i,r,o,s,u,p,m,y,x,A){for(var I=t(r),M=I.next();!M.done;M=I.next())St(M.value.stream,s,u,p,m,y);for(s=n.g.disableAudio,(!i.length||s)&&(i=[null]),s=n.g.disableVideo,(!r.length||s)&&(r=[null]),s=[],u=(i=t(i)).next();!u.done;u=i.next())for(u=u.value,m=(p=t(r)).next();!m.done;m=p.next()){var j=m.value;(m=u?u.stream:null)&&(m.drmInfos=x,m.keyIds=A),(y=j?j.stream:null)&&(y.drmInfos=x,y.keyIds=A),I=u?u.stream.drmInfos:null,M=j?j.stream.drmInfos:null,j=(j=j?j.Z().sort().join(","):"")+" - "+(u?u.Z().sort().join(","):""),m&&y&&!vh(I,M)||n.Ba.has(j)||(m={id:n.u++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!y&&y.primary,audio:m,video:y,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s.push(m),n.Ba.add(j))}return s}(n,y.audio,y.video,m,I,M,p,j,A,s,u)))}return i.filter(function(n){return null!=n})}(u,D,L,j),I=function(n,i){var r=Vs(i,"SUBTITLES");i=r.map(function(i){if(n.g.disableText)return null;try{return bu(n,[i],new Map).stream}catch(i){if(n.g.hls.ignoreTextStreamFailures)return null;throw i}}),r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=Rs(o.value,"GROUP-ID");if((o=n.G.get(s))&&(s=n.H.get(s))){s=t(s);for(var u=s.next();!u.done;u=s.next())(u=u.value).stream.codecs=o,u.stream.mimeType=cu(eK,o)||du(eK)}}return i.filter(function(n){return n})}(u,j),C(n,(ek=u,eE=R,eI=P,K(function(n){return 1==n.g?(eM=eE.map(function(n){var i,r;return K(function(o){if(1==o.g){var s,u,p,m,y,x,A,I,M,j,D;return ek.g.disableThumbnails?o.return(null):(sa(o,2),C(o,(s=ek,u=n,K(function(n){return 1==n.g?(p=Rs(u,"URI"),m=Z(u,"CODECS","jpeg")||"",s.h.has(p))?n.return(s.h.get(p)):(y=Z(u,"LANGUAGE"),x=Z(u,"NAME"),A=Z(u,"CHARACTERISTICS"),I=fu(s,s.u++,[p],m,"image",y,!1,x,null,null,A,!1,null,!1),(M=Z(u,"RESOLUTION"))?C(n,I.stream.createSegmentIndex(),3):n.B(2)):(2!=n.g&&(j=I.stream.segmentIndex.get(0).tilesLayout)&&(I.stream.width=Number(M.split("x")[0])*Number(j.split("x")[0]),I.stream.height=Number(M.split("x")[1])*Number(j.split("x")[1])),(D=Z(u,"BANDWIDTH"))&&(I.stream.bandwidth=Number(D)),s.h.set(p,I),n.return(I))})),4))}if(2!=o.g)return i=o.h,o.return(i.stream);if(r=va(o),ek.g.hls.ignoreImageStreamFailures)return o.return(null);throw r})}).concat(eI.map(function(n){if(ek.g.disableThumbnails)return null;try{var i=Rs(n,"URI"),r=Z(n,"CODECS")||"";if(ek.h.has(i))var o=ek.h.get(i);else{var s=Z(n,"LANGUAGE"),u=Z(n,"NAME"),p=Z(n,"CHARACTERISTICS"),m=fu(ek,ek.u++,[i],r,"image",s,!1,u,null,null,p,!1,null,!1),y=Z(n,"RESOLUTION"),x=t(y?y.split("x"):[null,null]),A=x.next().value,I=x.next().value;m.stream.width=Number(A)||void 0,m.stream.height=Number(I)||void 0;var M=Z(n,"BANDWIDTH");M&&(m.stream.bandwidth=Number(M)),ek.h.set(i,m),o=m}return n=o,"mjpg"!==n.stream.codecs?null:n.stream}catch(n){if(ek.g.hls.ignoreImageStreamFailures)return null;throw n}})),C(n,Promise.all(eM),2)):(eD=n.h,n.return(eD.filter(function(n){return n})))})),5);case 5:M=n.h,n.B(3);break;case 6:return V=(q=n.h).type,H=q.mimeType,G=q.codecs,X=q.language,J=q.height,$=q.width,ee=q.channelCount,en=q.sampleRate,ea=q.closedCaptions,C(n,Rt(u,u.u++,y,z,m,G,V,X,!0,"Media Playlist",ee,ea,null,!1,en,!1,H),7);case 7:eo=n.h,u.h.set(m,eo),"video"==V&&St(eo.stream,$,J,null,null,null),A.push({id:0,language:dd(X||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==V?eo.stream:null,video:"video"==V?eo.stream:null,bandwidth:eo.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!u.i)throw new O(2,7,7001);if(u.l=new jj(null,0),u.l.pc(!0),1==y.type&&(tt(u)&&(Tt(u,y),eu=u.m,u.s.U(eu)),ec=Array.from(u.h.values()),Ut(u,ec),yt(u)),u.C={presentationTimeline:u.l,variants:A,textStreams:I,imageStreams:M,offlineSessionIds:[],minBufferTime:0,sequenceMode:u.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:u.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},u.da||!u.g.hls.disableCodecGuessing){n.B(8);break}for(ep=[],ev=(em=t(u.C.variants)).next();!ev.done;ev=em.next())(ew=ev.value).audio&&""===ew.audio.codecs&&ep.push(ew.audio.createSegmentIndex()),ew.video&&""===ew.video.codecs&&ep.push(ew.video.createSegmentIndex());return C(n,Promise.all(ep),8);case 8:u.i.makeTextStreamsForClosedCaptions(u.C),E(n)}})),3)):s.return(o.C)})},D.stop=function(){this.s&&(this.s.stop(),this.s=null);var n=[];return this.N&&(n.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ba.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.W.clear(),this.j&&this.j.destroy(),Promise.all(n)},D.update=function(){var n,i,r,o,s,u,p,m,y=this;return K(function(x){if(1==x.g){if(!tt(y))return x.return();for(n=[],i=Array.from(y.h.values()),y.m=1/0,s=(o=t(r=i.filter(function(n){return n.stream.segmentIndex}))).next();!s.done;s=o.next())u=s.value,n.push(function(n,i){var r,o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X,J,$,ee;return K(function(en){var ea;if(1==en.g){for(r=[],s=(o=t(i.Z())).next();!s.done;s=o.next())u=s.value,m=(p=new fc(u)).g,i.sd&&(0<=i.Xa&&m.add("_HLS_msn",String(i.Xa)),0<=i.Ya&&m.add("_HLS_part",String(i.Ya))),i.td&&m.add("_HLS_skip","YES"),uc(m),m.Nc&&jc(p,m),r.push(p.toString());return C(en,rt(n,r,!0),2)}if(y=en.h,!i.stream.segmentIndex)return en.return();if(1!=(x=et(n.za,y.data)).type)throw new O(2,4,4017);(A=y.uri)==y.originalUri||i.Z().includes(A)||i.gg.push(A),I=At(n,Us(x.g,"EXT-X-DEFINE"),A),M=i.stream,j=zt(n,i),R=(D=Bt(x,M.mimeType)).keyIds,P=D.drmInfos,(ea=M.keyIds).size===R.size&&[].concat(w(ea)).every(function(n){return R.has(n)})||(M.keyIds=R,M.drmInfos=P,n.i.newDrmInfo(M)),_=(L=Ct(n,x,M,j,I,i.Z)).segments,(B=L.bandwidth)&&(M.bandwidth=B),M.segmentIndex.Wc(_,n.l.eb()),_.length&&(z=Xs(x.g,"EXT-X-MEDIA-SEQUENCE",0),V=(q=Ws(x.g,"EXT-X-SKIP"))?Number(Z(q,"SKIPPED-SEGMENTS")):0,G=(H=Dt(z,_)).Xa,X=H.Ya,i.Xa=G+V,i.Ya=X,J=j.get(z),M.segmentIndex.bb(J)),$=_[0],i.Sb=$.startTime,ee=_[_.length-1],i.rb=ee.endTime,Ws(x.g,"EXT-X-ENDLIST")&&(i.Sc=!0),Et(n,x),E(en)})}(y,u));return C(x,Promise.all(n),2)}vt(y,r.map(function(n){return n.stream})),p=r.some(function(n){return 0==n.Sc}),r.length&&!p&&(xt(y,ij.zg),m=r.map(function(n){return n.rb}),y.l.Pa(Math.min.apply(Math,w(m))),y.i.updateDuration()),p&&yt(y),E(x)})},D.onExpirationUpdated=function(){},D.onInitialVariantChosen=function(){},D.banLocation=function(n){this.j&&this.j.i.set(n,Date.now()+6e4)},N("shaka.hls.HlsParser",ot);var iS={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},iA={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},iC={"com.apple.streamingkeydelivery":function(i,r){if("video/mp2t"==r)throw new O(2,4,4040);if(n.shakaMediaKeysPolyfill)throw new O(2,4,4041);return yc("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(n){var i=Rs(n,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?(i=yc("com.widevine.alpha",[{initDataType:"cenc",initData:i=hb((i=kt(i=Rs(n,"URI"))).data)}]),(n=Z(n,"KEYID"))&&(i.keyIds=new Set([n.toLowerCase().substr(2)])),i):null},"com.microsoft.playready":function(n){var i=Rs(n,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?yc("com.microsoft.playready",[{initDataType:"cenc",initData:n=ng(n=hb((n=kt(n=Rs(n,"URI"))).data),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(i,r){if("video/mp2t"==r)throw new O(2,4,4040);if(n.shakaMediaKeysPolyfill)throw new O(2,4,4041);return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i=Rs(i,"METHOD"))?yc("org.w3.clearkey",null):null}},iE="VOD",iI="EVENT",iM="LIVE",ij={zg:iE};function yu(n){if(n=zu(n))e:{n=t(n.getElementsByTagName("DATA"));for(var i=n.next();!i.done;i=n.next())if(i=og(i.value,"LA_URL")){n=i.textContent;break e}n=""}else n="";return n}function zu(n){return(n=(function(n){var i=0,r=nb(n),o=r.getUint32(i,!0);if(o!=n.byteLength)return[];e:{for(n=i+6,i=[];n<r.byteLength-1;){o=r.getUint16(n,!0),n+=2;var s=r.getUint16(n,!0);if(n+=2,0!=(1&s)||s+n>r.byteLength){r=[];break e}var u=hb(r,n,s);i.push({type:o,value:u}),n+=s}r=i}return r})(n=ig(n.textContent)).filter(function(n){return n.type===iD})[0])&&(n=Hg(n=Of(n.value,!0),"WRMHEADER"))?n:null}tf["application/x-mpegurl"]=function(){return new ot},tf["application/vnd.apple.mpegurl"]=function(){return new ot};var iD=1,iN=(new Map).set("com.microsoft.playready",yu).set("com.microsoft.playready.recommendation",yu).set("com.microsoft.playready.software",yu).set("com.microsoft.playready.hardware",yu);function Cu(n){if(!iR){iR=!0;var i=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]);iV=Fu("ftyp",i,new Uint8Array([0,0,0,1]),i,r),i=Fu("dref",iH),iG=Fu("dinf",i)}this.g=n}function Iu(n){for(var i=[],r=t(n.g),o=r.next();!o.done;o=r.next()){var s=i,u=s.push,p=o.value;o=Fu;var m=p.id+1,y=p.stream.width||0,x=p.stream.height||0;"audio"==p.type&&(x=y=0);var A=p.duration*p.timescale,I=Math.floor(A/(iO+1));switch(A=Math.floor(A%(iO+1)),m=Fu("tkhd",m=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Ku(m,4)),[0,0,0,0],w(Ku(I,4)),w(Ku(A,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],w(Ku(y,2)),[0,0],w(Ku(x,2)),[0,0]))),y=Fu,x=Math.floor((I=p.duration*p.timescale)/(iO+1)),I=Math.floor(I%(iO+1)),A=(A=p.stream.language).charCodeAt(0)-96<<10|A.charCodeAt(1)-96<<5|A.charCodeAt(2)-96,x=Fu("mdhd",x=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Ku(p.timescale,4)),w(Ku(x,4)),w(Ku(I,4)),w(Ku(A,2)),[0,0]))),I=p,A=new Uint8Array([]),I.type){case"video":A=iL;break;case"audio":A=iU}I=Fu("hdlr",A);e:{switch(p.type){case"video":p=Fu("minf",Fu("vmhd",iz),iG,Ou(p));break e;case"audio":p=Fu("minf",Fu("smhd",iq),iG,Ou(p));break e}p=new Uint8Array([])}o=o("trak",m,p=y("mdia",x,I,p)),u.call(s,o)}for(i=lg.apply(fg,w(i)),u=n.g[0],r=Fu,s=Math.floor((o=u.duration*u.timescale)/(iO+1)),o=Math.floor(o%(iO+1)),s=Fu("mvhd",s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Ku(u.timescale,4)),w(Ku(s,4)),w(Ku(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),o=[],y=(n=t(n.g)).next();!y.done;y=n.next())m=(p=o).push,y=Fu("trex",y=new Uint8Array([0,0,0,0].concat(w(Ku(y.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))),m.call(p,y);if(n=Fu("mvex",n=lg.apply(fg,w(o))),o=[],u.encrypted){for(p=(u=t(u.stream.drmInfos)).next();!p.done;p=u.next())if((p=p.value).initData)for(m=(p=t(p.initData)).next();!m.done;m=p.next())o.push(m.value.initData);u=lg.apply(fg,w(o))}else u=new Uint8Array([]);return n=r("moov",s,i,n,u),(i=new Uint8Array(iV.byteLength+n.byteLength)).set(iV),i.set(n,iV.byteLength),i}function Ou(n){var i=new Uint8Array([]);switch(n.type){case"video":if(n.codecs.includes("avc1")){i=n.stream.width||0;var r=n.stream.height||0;if(0<n.la.byteLength)var o=Fu("avcC",n.la);else{o=Fu;for(var s=7,u=[],p=[],m=0,y=0,x=0,A=0;A<n.Ra.length;A++){var I=Qu(n.Ra[A]);switch(31&I[0]){case 7:u.push(I),s+=I.length+2;break;case 8:p.push(I),s+=I.length+2}}for(0<u.length&&(m=u[0][1],x=u[0][2],y=u[0][3]),s=new Uint8Array(s),A=0,s[A++]=1,s[A++]=m,s[A++]=x,s[A++]=y,s[A++]=255,s[A++]=224|u.length,m=0;m<u.length;m++)s[A++]=(65280&u[m].length)>>8,s[A++]=255&u[m].length,s.set(u[m],A),A+=u[m].length;for(u=0,s[A++]=p.length;u<p.length;u++)s[A++]=(65280&p[u].length)>>8,s[A++]=255&p[u].length,s.set(p[u],A),A+=p[u].length;o=o("avcC",s)}i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Ku(i,2)),w(Ku(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",p=Ru(n),u=new Uint8Array([]),n.encrypted&&(u=Su(n),r="encv"),i=Fu(r,i,o,p,u)}else n.codecs.includes("hvc1")&&(r=n.stream.width||0,o=n.stream.height||0,i=new Uint8Array([]),0<n.la.byteLength&&(i=Fu("hvcC",n.la)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Ku(r,2)),w(Ku(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="hvc1",p=Ru(n),u=new Uint8Array([]),n.encrypted&&(u=Su(n),o="encv"),i=Fu(o,r,i,p,u));break;case"audio":n.codecs.includes("mp3")?n=Fu(".mp3",Tu(n)):(n.codecs.includes("ac-3")?(i=Fu("dac3",n.fa),r="ac-3"):n.codecs.includes("ec-3")?(i=Fu("dec3",n.fa),r="ec-3"):(0<n.fa.byteLength?i=Fu("esds",n.fa):(i=Fu,r=n.id+1,o=n.stream.channelsCount||2,u=n.stream.audioSamplingRate||44100,m=zc("audio",n.codecs.split(",")),p=(y={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[u],("mp4a.40.5"===m||"mp4a.40.29"===m)&&(p=y[2*u]),u=parseInt(m.split(".").pop(),10),i=i("esds",r=new Uint8Array([0,0,0,0,3,25].concat(w(Ku(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,u<<3|p>>>1,p<<7|o<<3,6,1,2])))),r="mp4a"),o=new Uint8Array([]),n.encrypted&&(o=Su(n),r="enca"),n=Fu(r,Tu(n),i,o)),i=n}return n=Fu("stsd",iW,i),Fu("stbl",n,Fu("stts",i_),Fu("stsc",iK),Fu("stsz",iB),Fu("stco",iF))}function Ru(n){if(!n.sa&&!n.ua)return new Uint8Array([]);var i=n.ua;return Fu("pasp",n=new Uint8Array([].concat(w(Ku(n.sa,4)),w(Ku(i,4)))))}function Tu(n){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.stream.channelsCount||2,0,16,0,0,0,0].concat(w(Ku(n.stream.audioSamplingRate||44100,2)),[0,0]))}function Su(n){for(var i=n.codecs.substring(0,n.codecs.indexOf(".")),r=0,o=0;o<i.length;o+=1)r|=i.charCodeAt(o)<<8*(i.length-o-1);i=Fu("frma",i=new Uint8Array([].concat(w(Ku(r,4))))),r=Fu("schm",r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0])),o=Fu;var s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n=t(n.stream.drmInfos);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=t(u.keyIds);for(var p=u.next();!p.done;p=u.next())s=Qu(p.value)}return s=Fu("tenc",n=new Uint8Array([0,0,0,0,0,0,1,8]),s),Fu("sinf",i,r,o("schi",s))}function Zu(n){var i=[];n=t(n.g);for(var r=n.next();!r.done;r=n.next()){r=r.value;var o,s,u=i.push,p=u.apply,m=Fu,y=new Uint8Array([0,0,0,0].concat(w(Ku(r.data?r.data.gb:0,4))));y=Fu("mfhd",y);var x=r.data?r.data.Oa:[],A=new Uint8Array(4+x.length);for(s=0;s<x.length;s++){var I=x[s].flags;A[s+4]=I.Ia<<4|I.La<<2|I.Ja}var M=(x=Fu("sdtp",A)).length+92;A=Fu,s=Fu("tfhd",s=new Uint8Array([0,0,0,58].concat(w(Ku(r.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])));var j=Math.floor((I=r.data?r.data.baseMediaDecodeTime:0)%(iO+1));I=Fu("tfdt",I=new Uint8Array([1,0,0,0].concat(w(Ku(Math.floor(I/(iO+1)),4)),w(Ku(j,4)))));var D=M,R=12+16*(j=(M=r.data?r.data.Oa:[]).length),P=new Uint8Array(R);for(D+=8+R,P.set(["video"===r.type?1:0,0,15,1].concat(w(Ku(j,4)),w(Ku(D,4))),0),D=0;D<j;D++){var L=M[D];R=Ku(L.duration,4);var _=Ku(L.size,4),B=L.flags;L=Ku(L.Ta,4),P.set([].concat(w(R),w(_),[B.Ua<<2|B.Ia,B.La<<6|B.Ja<<4|B.Va,61440&B.Ha,15&B.Ha],w(L)),12+16*D)}m=m("moof",y,x=A("traf",s,I,M=Fu("trun",P),x)),p.call(u,i,[m,(o=((o=r).data?o.data.Oa:[]).map(function(n){return n.data}),Fu("mdat",o=lg.apply(fg,w(o))))])}return lg.apply(fg,w(i))}function Ku(n,i){var r=[];for(--i;0<=i;i--)r.push(n>>8*i&255);return r}function Qu(n){for(var i=new Uint8Array(n.length/2),r=0;r<n.length/2;r+=1)i[r]=parseInt(String(n[2*r]+n[2*r+1]),16);return i}function Fu(n){var i=Fa.apply(1,arguments),r=iP[n];r||(r=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)],iP[n]=r);for(var o=8,s=i.length-1;0<=s;s--)o+=i[s].byteLength;for((s=new Uint8Array(o))[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=255&o,s.set(r,4),r=0,o=8;r<i.length;r++)s.set(i[r],o),o+=i[r].byteLength;return s}var iR=!1,iO=4294967295,iP={},iL=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),iU=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),i_=new Uint8Array([0,0,0,0,0,0,0,0]),iK=new Uint8Array([0,0,0,0,0,0,0,0]),iF=new Uint8Array([0,0,0,0,0,0,0,0]),iB=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),iz=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),iq=new Uint8Array([0,0,0,0,0,0,0,0]),iW=new Uint8Array([0,0,0,0,0,0,0,1]),iV=new Uint8Array([]),iH=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),iG=new Uint8Array([]);function bv(){var n=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.A=new Ma(5),this.o=new qd(function(){var i,r;i=n,K(function(n){switch(n.g){case 1:return sa(n,2),C(n,dv(i),4);case 4:ua(n,3);break;case 2:r=va(n),i.h&&(r.severity=1,i.h.onError(r));case 3:if(!i.h)return n.return();E(n)}})}),this.u=new kf,this.m=new Map}function dv(n){var i,r,o,s,u,p;return K(function(m){if(1==m.g)return i=qf(n.l,n.g.retryParameters),r=n.h.networkingEngine,o=Date.now(),s=r.request(0,i,{type:5}),lf(n.u,s),C(m,s.promise,2);if(u=m.h,!n.h)return m.return();u.uri&&!n.l.includes(u.uri)&&n.l.unshift(u.uri);var y,x=u.uri,A=Jg(u.data,"SmoothStreamingMedia");if(!A)throw new O(2,4,4046,x);if((x=n.g.mss.manifestPreprocessor)&&x(A),n.i||(n.i=new jj(null,0)),x=xg(A,"IsLive",Fg,!1))throw new O(2,4,4047);n.i.pc(!x);var I=xg(A,"TimeScale",Dg,1e7),M=xg(A,"DVRWindowLength",Dg);x&&(0===M||isNaN(M))&&(M=1/0);var j=xg(A,"CanSeek",Fg,!1);for(0===M&&j&&(M=1/0),j=null,M&&0<M&&(j=M/I),x&&!isNaN(n.g.availabilityWindowOverride)&&(j=n.g.availabilityWindowOverride),null==j&&(j=1/0),n.i.Xd(j),M=xg(A,"Duration",Dg,1/0),x||n.i.Pa(M/I),x={variants:[],textStreams:[],timescale:I,duration:M/I},j=pg(A,"Protection"),I=n.g.mss.keySystemsBySystemId,M=[],y=(j=t(j)).next();!y.done;y=j.next())M=M.concat(pg(y.value,"ProtectionHeader"));if(M.length){for(y=0,j=[];y<M.length;y++){var D=M[y],R=D.getAttribute("SystemID").toLowerCase(),P=I[R];if(P){var L=zu(D);if(L)e:{L=t(L.getElementsByTagName("DATA"));for(var _=L.next();!_.done;_=L.next())if(_=og(_.value,"KID")){L=ig(_.textContent),L=kg(L=new Uint8Array([L[3],L[2],L[1],L[0],L[5],L[4],L[7],L[6]].concat(w(L.slice(8)))));break e}L=null}else L=null;R=yc(P,R=[{initData:ng(_=ig(D.textContent),R=jg(R.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:L}]),L&&R.keyIds.add(L),(P=iN.get(P))&&(R.licenseServerUri=P(D)),j.push(R)}}I=j}else I=[];for(y=I,j=[],I=[],M=[],D=(A=t(A=pg(A,"StreamIndex"))).next();!D.done;D=A.next()){P=pg(D=D.value,"QualityLevel"),R=x.timescale,L=x.duration,_=pg(D,"c");for(var B=[],z=0,q=0;q<_.length;++q){var V=_[q],H=_[q+1],G=xg(V,"t",Dg),X=xg(V,"d",Dg);if(V=xg(V,"r",Bg),!X)break;if(G=null!=G?G:z,0>(V=V||0)){if(H){if(null==(H=xg(H,"t",Dg))||G>=H)break;V=Math.ceil((H-G)/X)-1}else{if(1/0==L||G/R>=L)break;V=Math.ceil((L*R-G)/X)-1}}for(H=0;H<=V;++H)z=G+X,B.push({start:G/R,end:z/R,zf:G}),G=z}for(R=B,L=(P=t(P)).next();!L.done;L=P.next())(L=function(n,i,r,o,s,u){var p=i.getAttribute("Type");if("audio"!==p&&"video"!==p&&"text"!==p)return Sa("Ignoring unrecognized type:",p),null;var m=i.getAttribute("Language"),y=n.s++,x=xg(r,"Bitrate",Cg),A=xg(r,"MaxWidth",Cg),I=xg(r,"MaxHeight",Cg),M=xg(r,"Channels",Cg),j=xg(r,"SamplingRate",Cg),D=u.duration;o.length&&(D=o[o.length-1].end-o[0].start);var R=n.i.getDuration();n.i.Pa(Math.min(D,R));var P={id:y,originalId:i.getAttribute("Name")||String(y),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:x||0,width:A||void 0,height:I||void 0,kind:"",encrypted:0<s.length,drmInfos:s,keyIds:new Set,language:dd(m||"und"),originalLanguage:m,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:M,audioSamplingRate:j,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:D,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1};if((s=i.getAttribute("Subtype"))&&((s=iY[s])&&P.roles.push(s),"main"===s&&(P.primary=!0)),(null===(s=r.getAttribute("FourCC"))||""===s)&&(s=i.getAttribute("FourCC")),!s){if("audio"===p)s="AAC";else if("video"===p)return Sa('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!iX.includes(s.toUpperCase()))return Sa("Codec not supported:",s),null;switch(r=function(n,i,r,o){if(n=n.getAttribute("CodecPrivateData"))return n;if("audio"!==i)return null;i=o.channelsCount||2;var s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return(o=s[n=o.audioSamplingRate||44100],"AACH"===r)?(r=new Uint8Array(4),n=s[2*n],r[0]=40|o>>1,r[1]=o<<7|i<<3|n>>1,r[2]=n<<7|8,r[3]=0,(i=new Uint16Array(2))[0]=(r[0]<<8)+r[1],i[1]=(r[2]<<8)+r[3],i[0].toString(16)+i[1].toString(16)):((r=new Uint8Array(2))[0]=16|o>>1,r[1]=o<<7|i<<3,(i=new Uint16Array(1))[0]=(r[0]<<8)+r[1],i[0].toString(16))}(r,p,s,P),P.mssPrivateData.codecPrivateData=r,p){case"audio":if(!r)return Sa("Quality unsupported without CodecPrivateData",p),null;P.type="audio",P.mimeType="mss/audio/mp4",P.codecs=function(n,i){var r=0;return"AACH"===n&&(r=5),i?0===r&&(r=(248&parseInt(i.substr(0,2),16))>>3):(r=2,"AACH"===n&&(r=5)),"mp4a.40."+r}(s,r);break;case"video":if(!r)return Sa("Quality unsupported without CodecPrivateData",p),null;P.type="video",P.mimeType="mss/video/mp4",P.codecs=function(n){var i=/00000001[0-9]7/.exec(n);return i.length&&n?"avc1."+n.substr(n.indexOf(i[0])+10,6):""}(r);break;case"text":P.type=eK,P.mimeType="application/mp4",("TTML"===s||"DFXP"===s)&&(P.codecs="stpp")}return P.createSegmentIndex=function(){if(P.segmentIndex)return Promise.resolve();if(n.m.has(P.id))var r=n.m.get(P.id);else r=[],"video"==P.type&&(r=P.mssPrivateData.codecPrivateData.split("00000001").slice(1)),r={id:P.id,type:P.type,codecs:P.codecs,encrypted:P.encrypted,timescale:P.mssPrivateData.timescale,duration:P.mssPrivateData.duration,Ra:r,fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:null,stream:P},r=Iu(new Cu([r])),n.m.set(P.id,r);return r=function(n,i,r,o,s){var u=o.getAttribute("Url").replace("{bitrate}",String(r.bandwidth));o=[];var p={};s=t(s);for(var m=s.next();!m.done;p={Bc:p.Bc},m=s.next())p.Bc=m.value,o.push(new S(p.Bc.start,p.Bc.end,function(i){return function(){return xc(n.l,[u.replace("{start time}",String(i.Bc.zf))])}}(p),0,null,i,0,0,r.mssPrivateData.duration));return o}(n,new Gh(function(){return[]},0,null,null,void 0,r),P,i,o),P.segmentIndex=new Fj(r),Promise.resolve()},P.closeSegmentIndex=function(){P.segmentIndex&&(P.segmentIndex.release(),P.segmentIndex=null)},P}(n,D,L.value,R,y,x))&&("audio"!=L.type||n.g.disableAudio?"video"!=L.type||n.g.disableVideo?L.type!=eK||n.g.disableText||M.push(L):I.push(L):j.push(L))}for(A=[],y=(j=t(0<j.length?j:[null])).next();!y.done;y=j.next())for(y=y.value,L=(D=t(0<I.length?I:[null])).next();!L.done;L=D.next())R=(P=A).push,L=L.value,_=0,y&&y.bandwidth&&0<y.bandwidth&&(_+=y.bandwidth),L&&L.bandwidth&&0<L.bandwidth&&(_+=L.bandwidth),L={id:n.s++,language:y?y.language:"und",disabledUntilTime:0,primary:!!y&&y.primary||!!L&&L.primary,audio:y,video:L,bandwidth:_,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},R.call(P,L);x.variants=A,x.textStreams=M,n.j?(n.j.variants=x.variants,n.j.textStreams=x.textStreams,n.h.filter(n.j)):(n.j={presentationTimeline:n.i,variants:x.variants,textStreams:x.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:n.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},n.i.Nd()),Promise.resolve(),p=(Date.now()-o)/1e3,n.A.sample(1,p),E(m)})}(D=bv.prototype).configure=function(n){this.g=n},D.start=function(n,i){var r=this;return K(function(o){if(1==o.g)return r.l=[n],r.h=i,C(o,dv(r),2);if(!r.h)throw new O(2,7,7001);return o.return(r.j)})},D.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.u.destroy()},D.update=function(){var n,i=this;return K(function(r){return 1==r.g?(sa(r,2),C(r,dv(i),4)):2!=r.g?ua(r,0):(n=va(r),i.h&&n)?void(i.h.onError(n),E(r)):r.return()})},D.onExpirationUpdated=function(){},D.onInitialVariantChosen=function(){},D.banLocation=function(){},N("shaka.mss.MssParser",bv);var iX="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),iY={CAPT:"main",SUBT:"alternate",DESC:"main"};function lv(n,i,r,o,s,u){if(200<=r&&299>=r&&202!=r)return{uri:s||o,originalUri:o,data:i,status:r,headers:n,fromCache:!!n["x-shaka-from-cache"]};s=null;try{s=Qf(i)}catch(n){}throw new O(401==r||403==r?2:1,1,1001,o,r,s,n,u)}function mv(){}function nv(n,i,r,o,s){var u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X=new i$;If(i.headers).forEach(function(n,i){X.append(i,n)});var J=new iQ,$={Ff:!1,tg:!1};if(u=n,p=r,m={body:i.body||void 0,headers:X,method:i.method,signal:J.signal,credentials:i.allowCrossSiteCredentials?"include":void 0},y=$,x=o,A=s,I=i.streamDataCallback,n=K(function(n){switch(n.g){case 1:return M=iZ,j=iJ,L=P=0,_=Date.now(),sa(n,2),C(n,M(u,m),4);case 4:if(A(tv((D=n.h).headers)),"HEAD"==m.method){n.B(5);break}return B=D.clone().body.getReader(),q=(z=D.headers.get("Content-Length"))?parseInt(z,10):0,V=function(n){!function F(){var i,r;return K(function(o){switch(o.g){case 1:return sa(o,2),C(o,B.read(),4);case 4:i=o.h,ua(o,3);break;case 2:return va(o),o.return();case 3:if(i.done||(P+=i.value.byteLength,!I)){o.B(5);break}return C(o,I(i.value),5);case 5:(100<(r=Date.now())-_||i.done)&&(x(r-_,P-L,q-P),L=P,_=r),i.done?n.close():(n.enqueue(i.value),F()),E(o)}})}()},new j({start:V}),C(n,D.arrayBuffer(),6);case 6:R=n.h;case 5:ua(n,3);break;case 2:if(H=va(n),y.Ff)throw new O(1,1,7001,u,p);if(y.tg)throw new O(1,1,1003,u,p);throw new O(1,1,1002,u,H,p);case 3:return G=tv(D.headers),n.return(lv(G,R,D.status,u,D.url,p))}}),n=new $e(n,function(){return $.Ff=!0,J.abort(),Promise.resolve()}),i=i.retryParameters.timeout){var ee=new qd(function(){$.tg=!0,J.abort()});ee.U(i/1e3),n.finally(function(){ee.stop()})}return n}function tv(n){var i={};return n.forEach(function(n,r){i[r.trim()]=n}),i}function uv(){if(!n.ReadableStream)return!1;try{new ReadableStream({})}catch(n){return!1}return!!n.Response&&!!new Response("").body&&!(!n.fetch||!n.AbortController)}tf["application/vnd.ms-sstr+xml"]=function(){return new bv},N("shaka.net.HttpFetchPlugin",mv),mv.isSupported=uv,mv.parse=nv;var iZ=n.fetch,iQ=n.AbortController,iJ=n.ReadableStream,i$=n.Headers;function vv(){}function wv(n,i,r,o,s){var u=new i0,p=Date.now(),m=0,y=new Promise(function(y,x){u.open(i.method,n,!0),u.responseType="arraybuffer",u.timeout=i.retryParameters.timeout,u.withCredentials=i.allowCrossSiteCredentials,u.onabort=function(){x(new O(1,1,7001,n,r))};var A=!1;for(var I in u.onreadystatechange=function(){2!=u.readyState||A||(s(yv(u)),A=!0)},u.onload=function(){var i=yv(u),o=u.response;try{var s=lv(i,o,u.status,n,u.responseURL,r);y(s)}catch(n){x(n)}},u.onerror=function(i){x(new O(1,1,1002,n,i,r))},u.ontimeout=function(){x(new O(1,1,1003,n,r))},u.onprogress=function(n){var i=Date.now();(100<i-p||n.lengthComputable&&n.loaded==n.total)&&(o(i-p,n.loaded-m,n.total-n.loaded),m=n.loaded,p=i)},i.headers)u.setRequestHeader(I.toLowerCase(),i.headers[I]);u.send(i.body)});return new $e(y,function(){return u.abort(),Promise.resolve()})}function yv(n){var i=n.getAllResponseHeaders().trim().split("\r\n");n={},i=t(i);for(var r=i.next();!r.done;r=i.next())n[(r=r.value.split(": "))[0].toLowerCase()]=r.slice(1).join(": ");return n}uv()&&(nf("http",nv,2,!0),nf("https",nv,2,!0),nf("blob",nv,2,!0)),N("shaka.net.HttpXHRPlugin",vv),vv.parse=wv;var i0=n.XMLHttpRequest;function zv(n,i,r,o){this.g=n,this.i=i,this.groupId=r,this.h=o}function Av(n){return n.Z().map(function(n){return"{"+encodeURI(n)+"}"}).join("")+":"+n.Qa+":"+n.wa}function Cv(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Dv(n,i){n.i+=i;var r=n.l;return n.l++,n.g.set(r,i),r}function Ev(n){var i=this;this.o=n,this.j=new Map,this.i=new yf(function(){return Fv(i).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Cv}function Fv(n){var i=n.h.map(function(n){return n()});return n.h=[],Promise.all(i)}function Kv(n,i){var r=this;this.i=n,this.h=n.objectStore(i),this.g=new Ze,n.onabort=function(n){n.preventDefault(),r.g.reject()},n.onerror=function(n){n.preventDefault(),r.g.reject()},n.oncomplete=function(){r.g.resolve()}}function Lv(n,i){return new Promise(function(r,o){var s=n.h.openCursor();s.onerror=o,s.onsuccess=function(){var n;return K(function(o){if(1==o.g)return null==s.result?(r(),o.return()):C(o,i((n=s.result).key,n.value,n),2);n.continue(),E(o)})}})}function Mv(n){this.h=n,this.g=[]}function Nv(n,i){return Ov(n,i,"readwrite")}function Ov(n,i,r){r=n.h.transaction([i],r);var o=new Kv(r,i);return n.g.push(o),o.promise().then(function(){tb(n.g,o)},function(){tb(n.g,o)}),o}function Pv(n,i,r){this.h=new Mv(n),this.i=i,this.g=r}function Qv(n){return Promise.reject(new O(2,9,9011,"Cannot add new value to "+n))}function Rv(n,i,r,o){i=(n=Nv(n.h,i)).store();var s={};r=t(r);for(var u=r.next();!u.done;s={ld:s.ld},u=r.next())s.ld=u.value,i.delete(s.ld).onsuccess=function(n){return function(){return o(n.ld)}}(s);return n.promise()}function Sv(n,i,r){var o,s,u,p,m,y,x;return K(function(A){if(1==A.g){for(s=(o=Ov(n.h,i,"readonly")).store(),u={},p=[],m={},x=(y=t(r)).next();!x.done;m={zc:m.zc,xc:m.xc},x=y.next())m.xc=x.value,m.zc=s.get(m.xc),m.zc.onsuccess=function(n){return function(){void 0==n.zc.result&&p.push(n.xc),u[n.xc]=n.zc.result}}(m);return C(A,o.promise(),2)}if(p.length)throw new O(2,9,9012,"Could not find values for "+p);return A.return(r.map(function(n){return u[n]}))})}function Uv(n){this.g=new Mv(n)}function Vv(){this.g=new Map}function Xv(n){var i=null;if(n.g.forEach(function(n,r){n.getCells().forEach(function(n,o){n.hasFixedKeySpace()||i||(i={path:{Wa:r,va:o},va:n})})}),i)return i;throw new O(2,9,9013,"Could not find a cell that supports add-operations")}function Zv(n,i,r){if(!(n=n.g.get(i)))throw new O(2,9,9013,"Could not find mechanism with name "+i);if(!(i=n.getCells().get(r)))throw new O(2,9,9013,"Could not find cell with name "+r);return i}function cw(n,i){i1.set(n,i)}nf("http",wv,1,!0),nf("https",wv,1,!0),nf("blob",wv,1,!0),Cv.prototype.close=function(n,i){if(this.g.has(n)){var r=this.g.get(n);this.g.delete(n),this.j+=r,this.h+=i}},Ev.prototype.destroy=function(){return this.i.destroy()},Kv.prototype.abort=function(){var n=this;return K(function(i){if(1==i.g){try{n.i.abort()}catch(n){}return sa(i,2),C(i,n.g,4)}if(2!=i.g)return ua(i,0);va(i),E(i)})},Kv.prototype.store=function(){return this.h},Kv.prototype.promise=function(){return this.g},Mv.prototype.destroy=function(){return Promise.all(this.g.map(function(n){return n.abort()}))},(D=Pv.prototype).destroy=function(){return this.h.destroy()},D.hasFixedKeySpace=function(){return!0},D.addSegments=function(){return Qv(this.i)},D.removeSegments=function(n,i){return Rv(this,this.i,n,i)},D.getSegments=function(n){var i,r=this;return K(function(o){return 1==o.g?C(o,Sv(r,r.i,n),2):(i=o.h,o.return(i.map(function(n){return r.Hf(n)})))})},D.addManifests=function(){return Qv(this.g)},D.updateManifest=function(){return Promise.reject(new O(2,9,9016,"Cannot modify values in "+this.g))},D.updateManifestExpiration=function(n,i){var r=Nv(this.h,this.g),o=r.store();return o.get(n).onsuccess=function(r){(r=r.target.result)&&(r.expiration=i,o.put(r,n))},r.promise()},D.removeManifests=function(n,i){return Rv(this,this.g,n,i)},D.getManifests=function(n){var i,r=this;return K(function(o){return 1==o.g?C(o,Sv(r,r.g,n),2):(i=o.h,o.return(Promise.all(i.map(function(n){return r.Mc(n)}))))})},D.getAllManifests=function(){var n,i,r=this;return K(function(o){return 1==o.g?(n=Ov(r.h,r.g,"readonly"),i=new Map,C(o,Lv(n,function(n,o){var s;return K(function(u){if(1==u.g)return C(u,r.Mc(o),2);s=u.h,i.set(n,s),E(u)})}),2)):3!=o.g?C(o,n.promise(),3):o.return(i)})},D.Hf=function(n){return n},D.Mc=function(n){return Promise.resolve(n)},D.add=function(n,i){var r,o,s,u,p,m,y,x=this;return K(function(A){if(1==A.g){for(o=(r=Nv(x.h,n)).store(),s=[],u={},m=(p=t(i)).next();!m.done;u={nd:u.nd},m=p.next())y=m.value,u.nd=o.add(y),u.nd.onsuccess=function(n){return function(){s.push(n.nd.result)}}(u);return C(A,r.promise(),2)}return A.return(s)})},Uv.prototype.destroy=function(){return this.g.destroy()},Uv.prototype.getAll=function(){var n,i,r=this;return K(function(o){return 1==o.g?(n=Ov(r.g,"session-ids","readonly"),i=[],C(o,Lv(n,function(n,r){i.push(r)}),2)):3!=o.g?C(o,n.promise(),3):o.return(i)})},Uv.prototype.add=function(n){var i=Nv(this.g,"session-ids"),r=i.store();n=t(n);for(var o=n.next();!o.done;o=n.next())r.add(o.value);return i.promise()},Uv.prototype.remove=function(n){var i,r=this;return K(function(o){return 1==o.g?C(o,Lv(i=Nv(r.g,"session-ids"),function(i,r,o){n.includes(r.sessionId)&&o.delete()}),2):C(o,i.promise(),0)})},Vv.prototype.destroy=function(){for(var n=[],i=t(this.g.values()),r=i.next();!r.done;r=i.next())n.push(r.value.destroy());return this.g.clear(),Promise.all(n)},Vv.prototype.init=function(){var n=this;i1.forEach(function(i,r){(i=i())&&n.g.set(r,i)});for(var i=[],r=t(this.g.values()),o=r.next();!o.done;o=r.next())i.push(o.value.init());return Promise.all(i)},N("shaka.offline.StorageMuxer",Vv),Vv.unregister=function(n){i1.delete(n)},Vv.register=cw,Vv.prototype.destroy=Vv.prototype.destroy;var i1=new Map;function dw(){Pv.apply(this,arguments)}function hw(n){var i;if((i=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(n))||(i=/^offline:segment\/([0-9]+)$/.exec(n)))return Number(i[1]);throw new O(2,9,9004,"Could not parse uri "+n)}function iw(){Pv.apply(this,arguments)}function kw(){Pv.apply(this,arguments)}function lw(){this.m=this.j=this.i=this.h=this.g=this.l=null}function nw(n,i,r,o){this.g=n,this.i=i,this.h=r,this.l=o,this.j=["offline:",n,"/",i,"/",r,"/",o].join("")}function ow(n){if(null==(n=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(n)))return null;var i=n[1];if("manifest"!=i&&"segment"!=i)return null;var r=n[2];if(!r)return null;var o=n[3];return o&&null!=i?new nw(i,r,o,Number(n[4])):null}function pw(n,i){this.h=n,this.g=i}function qw(n,i){var r=new jj(null,0);r.Pa(i.duration);var o=i.streams.filter(function(n){return"audio"==n.type}),s=i.streams.filter(function(n){return"video"==n.type});o=function(n,i,r,o){for(var s=new Set,u=t(i),p=u.next();!p.done;p=u.next()){var m=t(p.value.variantIds);for(p=m.next();!p.done;p=m.next())s.add(p.value)}for(p=(u=t(r)).next();!p.done;p=u.next())for(p=(m=t(p.value.variantIds)).next();!p.done;p=m.next())s.add(p.value);for(u=new Map,p=(s=t(s)).next();!p.done;p=s.next())p=p.value,u.set(p,{id:p,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(s=(i=t(i)).next();!s.done;s=i.next())for(p=sw(n,s=s.value,o),s=(m=t(s.variantIds)).next();!s.done;s=m.next())(s=u.get(s.value)).language=p.language,s.primary=s.primary||p.primary,s.audio=p;for(i=(r=t(r)).next();!i.done;i=r.next())for(i=sw(n,s=i.value,o),s=(p=t(s.variantIds)).next();!s.done;s=p.next())(s=u.get(s.value)).primary=s.primary||i.primary,s.video=i;return u}(n,o,s,r),s=i.streams.filter(function(n){return n.type==eK}).map(function(i){return sw(n,i,r)});var u=i.streams.filter(function(n){return"image"==n.type}).map(function(i){return sw(n,i,r)}),p=i.drmInfo?[i.drmInfo]:[];if(i.drmInfo)for(var m=t(o.values()),y=m.next();!y.done;y=m.next())(y=y.value).audio&&y.audio.encrypted&&(y.audio.drmInfos=p),y.video&&y.video.encrypted&&(y.video.drmInfos=p);return{presentationTimeline:r,minBufferTime:2,offlineSessionIds:i.sessionIds,variants:Array.from(o.values()),textStreams:s,imageStreams:u,sequenceMode:i.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:i.type||"UNKNOWN",serviceDescription:null}}function sw(n,i,r){var o=i.segments.map(function(i){var r,o,s,u,p,m;return r=n,o=i,s=new nw("segment",r.h,r.g,o.dataKey),new S(o.startTime,o.endTime,function(){return[s.toString()]},0,null,null!=o.initSegmentKey?(u=r,p=o.initSegmentKey,m=new nw("segment",u.h,u.g,p),new Gh(function(){return[m.toString()]},0,null)):null,o.timestampOffset,o.appendWindowStart,o.appendWindowEnd,[],o.tilesLayout||"")});return r.Xc(o),{id:i.id,originalId:i.originalId,groupId:i.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Fj(o),mimeType:i.mimeType,codecs:i.codecs,width:i.width||void 0,height:i.height||void 0,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,videoLayout:i.videoLayout,kind:i.kind,encrypted:i.encrypted,drmInfos:[],keyIds:i.keyIds,language:i.language,originalLanguage:i.originalLanguage||null,label:i.label,type:i.type,primary:i.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,accessibilityPurpose:null,external:i.external,fastSwitching:i.fastSwitching}}function vw(){this.g=null}function ww(){}function xw(n){var i,r,o,s=ow(n);return n=s&&"manifest"==s.g?cf(n={uri:n,originalUri:n,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):s&&"segment"==s.g?(s.key(),r=s,o=new Vv,cf(void 0).pa(function(){return o.init()}).pa(function(){return Zv(o,r.Wa(),r.va())}).pa(function(n){return n.getSegments([r.key()])}).pa(function(n){return{uri:r,data:n[0].data,headers:{}}}).finally(function(){return o.destroy()})):af(new O(2,1,9004,n))}function zw(n,i,r){var o,s,u,p;return K(function(m){switch(m.g){case 1:o=[];for(var y,x,A,I,M,j=[],D=t(r),R=D.next();!R.done;R=D.next()){R=R.value;for(var P=!1,L=t(j),_=L.next();!_.done;_=L.next())if(function(n,i){function c(n,i){return n.robustness==i.robustness&&n.contentType==i.contentType}return n.keySystem==i.keySystem&&n.licenseUri==i.licenseUri&&ub(n.audioCapabilities,i.audioCapabilities,c)&&ub(n.videoCapabilities,i.videoCapabilities,c)}((_=_.value).info,R)){_.sessionIds.push(R.sessionId),P=!0;break}P||j.push({info:R,sessionIds:[R.sessionId]})}u=(s=t(j)).next();case 2:if(u.done){m.B(4);break}return C(m,(y=n,x=i,A=u.value,K(function(n){switch(n.g){case 1:var i,r,o,s,u,p,m;return I=new Kg({Tb:x,onError:function(){},Ud:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),sa(n,2),I.configure(y),C(n,(i=I,r=A.info.keySystem,o=A.info.licenseUri,s=A.info.serverCertificate,u=A.info.audioCapabilities,p=A.info.videoCapabilities,m=new Map,(u={audioCapabilities:u,videoCapabilities:p,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:r}).drmInfos=[{keySystem:r,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:s,serverCertificateUri:"",initData:null,keyIds:null}],m.set(r,u),Tg(i,m,[])),4);case 4:ua(n,3);break;case 2:return va(n),C(n,I.destroy(),5);case 5:return n.return([]);case 3:return M=[],C(n,Promise.all(A.sessionIds.map(function(n){return K(function(i){if(1==i.g){var r,o,s,u;return sa(i,2),C(i,(r=I,K(function(i){return 1==i.g?C(i,eh(r,n,{initData:null,initDataType:null}),2):3!=i.g?(o=i.h)?(s=[],(u=r.i.get(o))&&(u.hb=new Ze,s.push(u.hb)),s.push(o.remove()),C(i,Promise.all(s),3)):i.return():void(r.i.delete(o),E(i))})),4)}if(2!=i.g)return M.push(n),ua(i,0);va(i),E(i)})})),6);case 6:return C(n,I.destroy(),7);case 7:return n.return(M)}})),5);case 5:p=m.h,o=o.concat(p),u=s.next(),m.B(2);break;case 4:return m.return(o)}})}function Ew(n,i){var r=qw(new pw(n.Wa(),n.va()),i),o=i.appMetadata||{};return r=Dw(r),{offlineUri:n.toString(),originalManifestUri:i.originalManifestUri,duration:i.duration,size:i.size,expiration:i.expiration,tracks:r,appMetadata:o,isIncomplete:i.isIncomplete||!1}}function Dw(n){var i=[],r=pe(n.variants);r=t(r);for(var o=r.next();!o.done;o=r.next())i.push(ge(o.value));for(r=(n=t(n.textStreams)).next();!r.done;r=n.next())i.push(he(r.value));return i}function Fw(){this.g={}}function Iw(n,i){return null==(n=n.g[i])&&(n=0),n}function Jw(n){var i=this;if(n&&n.constructor!=W)throw new O(2,9,9008);this.g=this.h=null,n?(this.h=n.g,this.g=n.Ob()):(this.h=Ql(),this.g=new mf),this.i=[],this.j=[];var r=!n;this.l=new yf(function(){var n,o,s,u,p;return K(function(m){switch(m.g){case 1:return C(m,Promise.all(i.j.map(function(n){return Fv(n)})),2);case 2:for(n=function(){},o=[],u=(s=t(i.i)).next();!u.done;u=s.next())p=u.value,o.push(p.then(n,n));return C(m,Promise.all(o),3);case 3:if(!r){m.B(4);break}return C(m,i.g.destroy(),4);case 4:i.h=null,i.g=null,E(m)}})})}function Kw(){if(rd())e:{for(var n=t(i1.values()),i=n.next();!i.done;i=n.next())if(i=(i=i.value)()){i.destroy(),n=!0;break e}n=!1}else n=!1;return n}function Vw(n){var i,r,o;return K(function(s){switch(s.g){case 1:return C(s,(i=new Vv).init(),2);case 2:return C(s,Xv(i),3);case 3:return r=s.h,o=new nw("manifest",r.path.Wa,r.path.va,n),C(s,i.destroy(),4);case 4:return C(s,(new Jw).remove(o.toString()),0)}})}function Yw(n,i,r,o,s,u){var p,m,y,x,A,I,M,j,D,R;return K(function(P){switch(P.g){case 1:for(p=!1,sa(P,2),m=!0,x=(y=t(r.streams)).next();!x.done;x=y.next())for(I=(A=t(x.value.segments)).next();!I.done;I=A.next())null!=(j=(M=I.value).pendingSegmentRefId?o[M.pendingSegmentRefId]:null)&&(M.dataKey=j,M.pendingSegmentRefId=void 0),null!=(j=M.pendingInitSegmentRefId?o[M.pendingInitSegmentRefId]:null)&&(M.initSegmentKey=j,M.pendingInitSegmentRefId=void 0),M.pendingSegmentRefId&&(m=!1),M.pendingInitSegmentRefId&&(m=!1);return r.size+=s,m&&(r.isIncomplete=!1),C(P,n.updateManifest(i,r),4);case 4:p=!0,u(),ua(P,0);break;case 2:return D=va(P),C(P,Vw(i),5);case 5:if(p){P.B(6);break}return R=Object.values(o),C(P,n.removeSegments(R,function(){}),6);case 6:throw D}})}function Ww(n){return n.variants.some(function(n){var i=n.audio&&n.audio.encrypted;return n.video&&n.video.encrypted||i})}function Xw(n){return n.variants.some(function(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function Uw(n,i,r,o){if(i.expiration=r.Qc(),r=jh(r),i.sessionIds=o.offline.usePersistentLicense?r:[],Ww(n)&&o.offline.usePersistentLicense&&!r.length)throw new O(2,9,9007)}function fx(n,i){for(var r=[],o=t(n.streams),s=o.next();!s.done;s=o.next())s=s.value,i&&"video"==s.type?r.push({contentType:Gc(s.mimeType,s.codecs),robustness:n.drmInfo.videoRobustness}):i||"audio"!=s.type||r.push({contentType:Gc(s.mimeType,s.codecs),robustness:n.drmInfo.audioRobustness});return r}function Pw(n){if(n.l.g)throw new O(2,9,7001)}function Nw(){if(!Kw())throw new O(2,9,9e3)}function bx(n,i){return K(function(r){return 1==r.g?(n.i.push(i),ta(r,2),C(r,i,4)):2!=r.g?r.return(r.h):(wa(r),tb(n.i,i),ya(r,0))})}function kx(n){for(var i=new Set,r=t(n.textStreams),o=r.next();!o.done;o=r.next())i.add(o.value);for(o=(r=t(n.imageStreams)).next();!o.done;o=r.next())i.add(o.value);for(r=(n=t(n.variants)).next();!r.done;r=n.next())(r=r.value).audio&&i.add(r.audio),r.video&&i.add(r.video);return i}oa(dw,Pv),dw.prototype.updateManifestExpiration=function(n,i){var r,o,s,u=this;return K(function(p){return o=(r=Nv(u.h,u.g)).store(),s=new Ze,o.get(n).onsuccess=function(r){(r=r.target.result)?(r.expiration=i,o.put(r),s.resolve()):s.reject(new O(2,9,9012,"Could not find values for "+n))},C(p,Promise.all([r.promise(),s]),0)})},dw.prototype.Mc=function(n){var i,r,o,s,u;return K(function(p){if(1==p.g){for(r=0,i=[];r<n.periods.length;++r)o=(r==n.periods.length-1?n.duration:n.periods[r+1].startTime)-n.periods[r].startTime,s=function(n,i){(function(n){var i=n.streams.filter(function(n){return"audio"==n.contentType});if(n=n.streams.filter(function(n){return"video"==n.contentType}),!i.every(function(n){return n.variantIds})||!n.every(function(n){return n.variantIds})){for(var r=t(i),o=r.next();!o.done;o=r.next())o.value.variantIds=[];for(o=(r=t(n)).next();!o.done;o=r.next())o.value.variantIds=[];if(r=0,n.length&&!i.length){var s=r++,u=t(n);for(o=u.next();!o.done;o=u.next())o.value.variantIds.push(s)}if(!n.length&&i.length)for(s=r++,o=(u=t(i)).next();!o.done;o=u.next())o.value.variantIds.push(s);if(n.length&&i.length)for(o=(i=t(i)).next();!o.done;o=i.next())for(o=o.value,u=(s=t(n)).next();!u.done;u=s.next()){u=u.value;var p=r++;o.variantIds.push(p),u.variantIds.push(p)}}})(n);for(var r=t(n.streams),o=r.next();!o.done;o=r.next());return n.streams.map(function(r){return function(n,i,r){var o=n.initSegmentUri?hw(n.initSegmentUri):null,s=i+n.presentationTimeOffset,u=i+r;return{id:n.id,originalId:null,groupId:null,primary:n.primary,type:n.contentType,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:n.kind,language:n.language,originalLanguage:n.language||null,label:n.label,width:n.width,height:n.height,initSegmentKey:o,encrypted:n.encrypted,keyIds:new Set([n.keyId]),segments:n.segments.map(function(n){var r=hw(n.uri);return{startTime:i+n.startTime,endTime:i+n.endTime,dataKey:r,initSegmentKey:o,appendWindowStart:i,appendWindowEnd:u,timestampOffset:s,tilesLayout:""}}),variantIds:n.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(r,n.startTime,i)})}(n.periods[r],o),i.push(s);return C(p,Qr(i),2)}return u=p.h,p.return({creationTime:0,originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:null==n.expiration?1/0:n.expiration,streams:u,sessionIds:n.sessionIds,drmInfo:n.drmInfo,appMetadata:n.appMetadata,sequenceMode:!1})})},dw.prototype.Hf=function(n){return{data:n.data}},oa(iw,Pv),iw.prototype.Mc=function(n){var i,r,o,s,u;return K(function(p){if(1==p.g){for(r=0,i=[];r<n.periods.length;++r){o=(r==n.periods.length-1?n.duration:n.periods[r+1].startTime)-n.periods[r].startTime;for(var m=n.periods[r],y=[],x=t(m.streams),A=x.next();!A.done;A=x.next())0!=(A=A.value).variantIds.length&&y.push(function(n,i,r){return{id:n.id,originalId:n.originalId,groupId:null,primary:n.primary,type:n.contentType,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:n.kind,language:n.language,originalLanguage:n.language||null,label:n.label,width:n.width,height:n.height,encrypted:n.encrypted,keyIds:new Set([n.keyId]),segments:n.segments.map(function(o){return{startTime:i+o.startTime,endTime:i+o.endTime,initSegmentKey:n.initSegmentKey,appendWindowStart:i,appendWindowEnd:r,timestampOffset:i-n.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:""}}),variantIds:n.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(A,m.startTime,m.startTime+o));s=y,i.push(s)}return C(p,Qr(i),2)}return u=p.h,p.return({appMetadata:n.appMetadata,creationTime:0,drmInfo:n.drmInfo,duration:n.duration,expiration:null==n.expiration?1/0:n.expiration,originalManifestUri:n.originalManifestUri,sessionIds:n.sessionIds,size:n.size,streams:u,sequenceMode:!1})})},oa(kw,Pv),(D=kw.prototype).hasFixedKeySpace=function(){return!1},D.addSegments=function(n){return this.add(this.i,n)},D.addManifests=function(n){return this.add(this.g,n)},D.updateManifest=function(n,i){var r,o;return r=this,(o=(r=Nv(r.h,r.g)).store()).get(n).onsuccess=function(){o.put(i,n)},r.promise()},D.Mc=function(n){return null==n.expiration&&(n.expiration=1/0),Promise.resolve(n)},(D=lw.prototype).init=function(){var i=this,r=new Ze,o=!1,s=new qd(function(){o=!0,r.reject(new O(2,9,9017))});s.U(5);var u=n.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!o){var n=u.result;i.l=n;var p=n.objectStoreNames;p=p.contains("manifest")&&p.contains("segment")?new dw(n,"segment","manifest"):null,i.g=p,p=(p=n.objectStoreNames).contains("manifest-v2")&&p.contains("segment-v2")?new iw(n,"segment-v2","manifest-v2"):null,i.h=p,p=(p=n.objectStoreNames).contains("manifest-v3")&&p.contains("segment-v3")?new iw(n,"segment-v3","manifest-v3"):null,i.i=p,p=(p=n.objectStoreNames).contains("manifest-v5")&&p.contains("segment-v5")?new kw(n,"segment-v5","manifest-v5"):null,i.j=p,n=n.objectStoreNames.contains("session-ids")?new Uv(n):null,i.m=n,s.stop(),r.resolve()}},u.onupgradeneeded=function(){for(var n=u.result,i=t(["segment-v5","manifest-v5","session-ids"]),r=i.next();!r.done;r=i.next())r=r.value,n.objectStoreNames.contains(r)||n.createObjectStore(r,{autoIncrement:!0})},u.onerror=function(n){o||(r.reject(new O(2,9,9001,u.error)),s.stop(),n.preventDefault())},r},D.destroy=function(){var n=this;return K(function(i){switch(i.g){case 1:if(!n.g){i.B(2);break}return C(i,n.g.destroy(),2);case 2:if(!n.h){i.B(4);break}return C(i,n.h.destroy(),4);case 4:if(!n.i){i.B(6);break}return C(i,n.i.destroy(),6);case 6:if(!n.j){i.B(8);break}return C(i,n.j.destroy(),8);case 8:if(!n.m){i.B(10);break}return C(i,n.m.destroy(),10);case 10:n.l&&n.l.close(),E(i)}})},D.getCells=function(){var n=new Map;return this.g&&n.set("v1",this.g),this.h&&n.set("v2",this.h),this.i&&n.set("v3",this.i),this.j&&n.set("v5",this.j),n},D.getEmeSessionCell=function(){return this.m},D.erase=function(){var i=this;return K(function(r){switch(r.g){case 1:if(!i.g){r.B(2);break}return C(r,i.g.destroy(),2);case 2:if(!i.h){r.B(4);break}return C(r,i.h.destroy(),4);case 4:if(!i.i){r.B(6);break}return C(r,i.i.destroy(),6);case 6:if(!i.j){r.B(8);break}return C(r,i.j.destroy(),8);case 8:var o,s;return i.l&&i.l.close(),C(r,(o=new Ze,(s=n.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){},s.onsuccess=function(){o.resolve()},s.onerror=function(n){o.reject(new O(2,9,9001,s.error)),n.preventDefault()},o),10);case 10:return i.l=null,i.g=null,i.h=null,i.i=null,i.j=null,C(r,i.init(),0)}})},cw("idb",function(){return Bd()||vd()||!n.indexedDB?null:new lw}),nw.prototype.Wa=function(){return this.i},nw.prototype.va=function(){return this.h},nw.prototype.key=function(){return this.l},nw.prototype.toString=function(){return this.j},(D=vw.prototype).configure=function(){},D.start=function(n,i){var r,o,s,u,p,m=this;return K(function(y){switch(y.g){case 1:if(r=ow(n),m.g=r,null==r||"manifest"!=r.g)throw new O(2,1,9004,n);return o=new Vv,ta(y,2),C(y,o.init(),4);case 4:return C(y,Zv(o,r.Wa(),r.va()),5);case 5:return s=y.h,C(y,s.getManifests([r.key()]),6);case 6:return u=y.h[0],p=qw(new pw(r.Wa(),r.va()),u),i.makeTextStreamsForClosedCaptions(p),y.return(p);case 2:return wa(y),C(y,o.destroy(),7);case 7:ya(y,0)}})},D.stop=function(){return Promise.resolve()},D.update=function(){},D.onExpirationUpdated=function(n,i){var r,o,s,u,p,m,y=this;return K(function(x){switch(x.g){case 1:return r=y.g,o=new Vv,sa(x,2,3),C(x,o.init(),5);case 5:return C(x,Zv(o,r.Wa(),r.va()),6);case 6:return s=x.h,C(x,s.getManifests([r.key()]),7);case 7:if(p=(u=x.h[0]).sessionIds.includes(n),m=void 0==u.expiration||u.expiration>i,!p||!m){x.B(3);break}return C(x,s.updateManifestExpiration(r.key(),i),3);case 3:return wa(x),C(x,o.destroy(),10);case 10:ya(x,0);break;case 2:va(x),x.B(3)}})},D.onInitialVariantChosen=function(){},D.banLocation=function(){},tf["application/x-offline-manifest"]=function(){return new vw},N("shaka.offline.OfflineScheme",ww),ww.plugin=xw,nf("offline",xw),(D=Jw.prototype).destroy=function(){return this.l.destroy()},D.configure=function(n,i){return 2==arguments.length&&"string"==typeof n&&(n=Gl(n,i)),Sl(this.h,n)},D.getConfiguration=function(){var n=Ql();return Sl(n,this.h,Ql()),n},D.Ob=function(){return this.g},D.store=function(n,i,r){var o,s,u,p,m,y,x,A,I,M,j,D,R,P,L,_,B,z,q,V,H,G,X=this,J=this.getConfiguration(),$=new Ev(this.g);return this.j.push($),o=this,s=n,u=i||{},p=function(){var i;return K(function(o){return 1==o.g?r?o.B(2):C(o,Nk(n,X.g,J.manifest.retryParameters),3):(2!=o.g&&(r=o.h),i=zh(n,r||null),o.return(i()))})},m=J,y=$,i=K(function(n){var i,r,V,H,G,X,J,$,ee,en,ea,eo,eu,ec,ep,em,ev,ew,ex,eT,eS,eC,ek,eE,eI,eM,eD,eN,eR,eO,eP,eL,eU,e_,eK,eF,eB,eq,eW,eV,eH,eG,eX,eY,eZ,eQ,eJ,e$,e0,e1,e2,e3,e5,e8,e6,e9,e7,tr;switch(n.g){case 1:return Nw(),A=x=null,I=new Vv,D=j=M=null,sa(n,2,3),C(n,p(),5);case 5:return x=n.h,C(n,(i=o,r=s,V=x,H=m,K(function(n){if(1==n.g)return G=null,X={networkingEngine:i.g,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(n){G=n},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return H.abr.defaultBandwidthEstimate}},V.configure(H.manifest),Pw(i),C(n,V.start(r,X),2);if(3!=n.g)return J=n.h,Pw(i),C(n,Promise.all(Ff(kx(J),function(n){return n.createSegmentIndex()})),3);if(Pw(i),G)throw G;return n.return(J)})),6);case 6:if(R=n.h,Pw(o),!(!R.presentationTimeline.R()&&!R.presentationTimeline.Rb()))throw new O(2,9,9005,s);return C(n,($=o,ee=R,en=function(n){D=D||n},ea=m,K(function(n){var i,r,o;return 1==n.g?((eo=new Kg({Tb:$.g,onError:en,Ud:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(ea.drm),C(n,(i=eo,r=ee.variants,o=ea.offline.usePersistentLicense,i.ma=!0,i.u=new Map,i.K=o,Qg(i,r)),2)):3!=n.g?C(n,bh(eo),3):n.return(eo)})),7);case 7:if(A=n.h,Pw(o),D)throw D;return C(n,(eu=R,ec=A,ep=m,K(function(n){switch(n.g){case 1:var i;return em={width:1/0,height:1/0},i=ep.restrictions,eu.variants=eu.variants.filter(function(n){return Pd(n,i,em)}),C(n,Sd(ec,eu,ep.offline.usePersistentLicense),2);case 2:for(ev=[],ew=ep.preferredDecodingAttributes,Md(eu,ep.preferredVideoCodecs,ep.preferredAudioCodecs,ew),eT=(ex=t(eu.variants)).next();!eT.done;eT=ex.next())eS=eT.value,ev.push(ge(eS));for(ek=(eC=t(eu.textStreams)).next();!ek.done;ek=eC.next())eE=ek.value,ev.push(he(eE));for(eM=(eI=t(eu.imageStreams)).next();!eM.done;eM=eI.next())eD=eM.value,ev.push(ie(eD));return C(n,ep.offline.trackSelectionCallback(ev),3);case 3:for(eN=n.h,eR=eu.presentationTimeline.getDuration(),eO=0,eL=(eP=t(eN)).next();!eL.done;eL=eP.next())eU=eL.value.bandwidth*eR/8,eO+=eU;return sa(n,4),C(n,ep.offline.downloadSizeCallback(eO),6);case 6:if(!n.h)throw new O(2,9,9014);ua(n,5);break;case 4:if((e_=va(n))instanceof O)throw e_;throw new O(2,9,9015);case 5:for(eK=new Set,eF=new Set,eB=new Set,eL=(eq=t(eN)).next();!eL.done;eL=eq.next())"variant"==(eW=eL.value).type&&eK.add(eW.id),"text"==eW.type&&eF.add(eW.id),"image"==eW.type&&eB.add(eW.id);eu.variants=eu.variants.filter(function(n){return eK.has(n.id)}),eu.textStreams=eu.textStreams.filter(function(n){return eF.has(n.id)}),eu.imageStreams=eu.imageStreams.filter(function(n){return eB.has(n.id)}),function(n){n.variants.map(function(n){return n.video});var i=new Set(n.variants.map(function(n){return n.audio}));n=n.textStreams;for(var r=t(i),o=r.next();!o.done;o=r.next()){o=t(i);for(var s=o.next();!s.done;s=o.next());}for(r=(i=t(n)).next();!r.done;r=i.next())for(o=(r=t(n)).next();!o.done;o=r.next());}(eu),E(n)}})),8);case 8:return C(n,I.init(),9);case 9:return Pw(o),C(n,Xv(I),10);case 10:return M=n.h,Pw(o),L=(P=function(n,i,r,o,s,u){var p,m,y,x,A={offlineUri:null,originalManifestUri:r,duration:(p=i).presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:p=Dw(p),appMetadata:o,isIncomplete:!1},I=s.offline.progressCallback;(m=u).m=function(n,i){A.size=i,I(A,n)},m.l=function(i,r){M&&s.offline.usePersistentLicense&&j==r&&$g(n,"cenc",i)};var M=Ww(i)&&!Xw(i),j=null;M&&(j=i2.get(n.g.keySystem));for(var D=new Fw,R=t(i.textStreams),P=R.next();!P.done;P=R.next())D.g[P.value.id]=52;for(P=(R=t(i.imageStreams)).next();!P.done;P=R.next())y=D,x=P.value,y.g[x.id]=x.bandwidth||2048;for(R=(P=t(i.variants)).next();!R.done;R=P.next())!function(n,i){var r=i.audio,o=i.video;if(r&&!o&&(n.g[r.id]=r.bandwidth||i.bandwidth),!r&&o&&(n.g[o.id]=o.bandwidth||i.bandwidth),r&&o){var s=r.bandwidth||393216,u=o.bandwidth||i.bandwidth-s;0>=u&&(u=i.bandwidth),n.g[r.id]=s,n.g[o.id]=u}}(D,R.value);return u=(D=function(n,i,r,o){var s=new Map,u=kx(r),p=new Map;u=t(u);for(var m=u.next();!m.done;m=u.next()){var y=function(n,i,r,o,s,u){var p={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},m=s.offline.numberOfParallelDownloads,y=0;return function(n,i,r){if(null!=(i=n.segmentIndex.find(i)))for(var o=n.segmentIndex.get(i);o;)r(o),o=n.segmentIndex.get(++i)}(o,r.presentationTimeline.eb(),function(r){var s=Av(r),x=void 0;if(!u.has(s)){var A=r.endTime-r.startTime;A=Iw(i,o.id)*A,A=Dv(n.g,A),u.set(s,new zv(r,A,y,!1))}r.aa&&(x=Av(r.aa),u.has(x)||(A=.5*Iw(i,o.id),A=Dv(n.g,A),u.set(x,new zv(r.aa,A,y,!0)))),p.segments.push({pendingInitSegmentRefId:x,initSegmentKey:x?0:null,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,tilesLayout:r.tilesLayout,pendingSegmentRefId:s,dataKey:0}),y=(y+1)%m}),p}(n,i,r,m=m.value,o,s);p.set(m.id,y)}for(i=(n=t(r.variants)).next();!i.done;i=n.next())(i=i.value).audio&&p.get(i.audio.id).variantIds.push(i.id),i.video&&p.get(i.video.id).variantIds.push(i.id);return{streams:Array.from(p.values()),vf:Array.from(s.values())}}(u,D,i,s)).streams,D=D.vf,P=n.g,R=s.offline.usePersistentLicense,P&&R&&(P.initData=[]),{Ah:{creationTime:Date.now(),originalManifestUri:r,duration:i.presentationTimeline.getDuration(),size:0,expiration:n.Qc(),streams:u,sessionIds:R?jh(n):[],drmInfo:P,appMetadata:o,isIncomplete:!0,sequenceMode:i.sequenceMode,type:i.type},vf:D}}(A,R,s,u,m,y)).Ah,_=P.vf,C(n,M.va.addManifests([L]),11);case 11:if(B=n.h,Pw(o),j=B[0],Pw(o),D)throw D;return C(n,(eV=o,eH=_,eG=j,eX=L,eY=y,eZ=m,eQ=M.va,eJ=R,e$=A,K(function(n){switch(n.g){case 1:if(e0={},e1=0,e2=function(n,i){var r,o,s,u,p,m,y;return K(function(x){if(1==x.g){var A;for(r={},s=(o=t(n)).next();!s.done;r={Ib:r.Ib},s=o.next())r.Ib=s.value,u=fk((A=r.Ib).g.Z(),A.g.Qa,A.g.wa,eZ.streaming.retryParameters),p=r.Ib.i,m=r.Ib.h,y=function(n){return function(i){var r;return K(function(o){if(1==o.g)return C(o,eQ.addSegments([{data:i}]),2);r=o.h,Pw(eV),e0[Av(n.Ib.g)]=r[0],e1+=i.byteLength,E(o)})}}(r),function(n,i,r,o,s,u){zf(n.i);var p=(n.j.get(i)||Promise.resolve()).then(function(){var i,p,m,y,x,A,I;return K(function(M){if(1==M.g)return C(M,function(n,i){var r,o,s,u;return K(function(p){return 1==p.g?(r=e4,o=n.o.request(r,i),s=function(){return o.abort()},n.h.push(s),C(p,o.promise,2)):(u=p.h,tb(n.h,s),p.return(u.data))})}(n,r),2);if(i=M.h,n.i.g)throw new O(2,9,7001);if(s)for(y in p=hb(i),(m=new mg(p)).data)x=Number(y),A=m.data[x],I=m.g[x],n.l(A,I);n.g.close(o,i.byteLength);var j=n.g;return n.m(0==j.i?0:j.j/j.i,n.g.h),M.return(u(i))})});n.j.set(i,p)}(eY,r.Ib.groupId,u,p,m,y);return C(x,K(function(n){return 1==n.g?C(n,Promise.all(eY.j.values()),2):n.return(eY.g.h)}),2)}return i?(Pw(eV),Uw(eJ,eX,e$,eZ),C(x,eQ.updateManifest(eG,eX),0)):x.B(0)})},e3=!1,sa(n,2),!Ww(eJ)||!e3||Xw(eJ)){n.B(4);break}return C(n,e2(eH.filter(function(n){return n.h}),!0),5);case 5:return Pw(eV),eH=eH.filter(function(n){return!n.h}),e5=e0,e8=e1,e0={},e1=0,C(n,Yw(eQ,eG,eX,e5,e8,function(){return Pw(eV)}),6);case 6:Pw(eV);case 4:if(e3){n.B(7);break}return C(n,e2(eH,!1),8);case 8:return Pw(eV),e6=e0,e9=e1,e0={},e1=0,C(n,Yw(eQ,eG,eX,e6,e9,function(){return Pw(eV)}),9);case 9:Pw(eV);case 7:ua(n,0);break;case 2:return e7=va(n),tr=Object.values(e0),C(n,eQ.removeSegments(tr,function(){}),10);case 10:throw e7}})),12);case 12:return Pw(o),Uw(R,L,A,m),C(n,M.va.updateManifest(j,L),13);case 13:return Pw(o),z=new nw("manifest",M.path.Wa,M.path.va,j),n.return(Ew(z,L));case 3:return wa(n),C(n,I.destroy(),14);case 14:if(!x){n.B(15);break}return C(n,x.stop(),15);case 15:if(!A){n.B(17);break}return C(n,A.destroy(),17);case 17:ya(n,0);break;case 2:if(q=va(n),null==j){n.B(19);break}return C(n,Vw(j),19);case 19:throw D||q}}),(i=new $e(i,function(){return Fv($)})).finally(function(){tb(X.j,$)}),V=this,G=(H=i).promise,V.i.push(G),H.finally(function(){tb(V.i,G)})},D.remove=function(n){var i,r,o,s,u,p,m;return bx(this,(i=this,r=n,K(function(n){switch(n.g){case 1:if(Nw(),null==(o=ow(r))||"manifest"!=o.g)throw new O(2,9,9004,r);return s=o,u=new Vv,ta(n,2),C(n,u.init(),4);case 4:return C(n,Zv(u,s.Wa(),s.va()),5);case 5:return p=n.h,C(n,p.getManifests([s.key()]),6);case 6:var y,x,A;return m=n.h[0],C(n,Promise.all([(y=i,x=m,A=u,K(function(n){var i,r,o,s,u,p,m;return C(n,(i=y.g,r=y.h.drm,o=A,s=x,K(function(n){return 1==n.g?s.drmInfo?(u=function(n){var i=Array.from(n.g.keys());if(!i.length)throw new O(2,9,9e3,"No supported storage mechanisms found");return n.g.get(i[0]).getEmeSessionCell()}(o),C(n,zw(r,i,p=s.sessionIds.map(function(n){return{sessionId:n,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:fx(s,!1),videoCapabilities:fx(s,!0)}})),2)):n.return():3!=n.g?(m=n.h,C(n,u.remove(m),3)):C(n,u.add(p.filter(function(n){return!m.includes(n.sessionId)})),0)})),0)})),function(n,i,r){function d(){}var o=function(n){var i=new Set;n=t(n.streams);for(var r=n.next();!r.done;r=n.next()){r=t(r.value.segments);for(var o=r.next();!o.done;o=r.next())null!=(o=o.value).initSegmentKey&&i.add(o.initSegmentKey),i.add(o.dataKey)}return Array.from(i)}(r);return Ew(i,r),Promise.all([n.removeSegments(o,d),n.removeManifests([i.key()],d)])}(p,s,m)]),2);case 2:return wa(n),C(n,u.destroy(),8);case 8:ya(n,0)}})))},D.Oh=function(){var n,i,r,o,s,u,p,m,y,x,A;return bx(this,(n=this,K(function(I){switch(I.g){case 1:return Nw(),i=n.g,r=n.h.drm,o=new Vv,s=!1,ta(I,2),C(I,o.init(),4);case 4:u=[],function(n,i){n.g.forEach(function(n){i(n.getEmeSessionCell())})}(o,function(n){return u.push(n)}),m=(p=t(u)).next();case 5:if(m.done){I.B(2);break}return C(I,(y=m.value).getAll(),8);case 8:return x=I.h,C(I,zw(r,i,x),9);case 9:return A=I.h,C(I,y.remove(A),10);case 10:A.length!=x.length&&(s=!0),m=p.next(),I.B(5);break;case 2:return wa(I),C(I,o.destroy(),11);case 11:ya(I,3);break;case 3:return I.return(!s)}})))},D.list=function(){var n,i,r;return bx(this,K(function(o){switch(o.g){case 1:return Nw(),n=[],i=new Vv,ta(o,2),C(o,i.init(),4);case 4:return r=Promise.resolve(),function(n,i){n.g.forEach(function(n,r){n.getCells().forEach(function(n,o){i({Wa:r,va:o},n)})})}(i,function(i,o){r=r.then(function(){return K(function(r){if(1==r.g)return C(r,o.getAllManifests(),2);r.h.forEach(function(r,o){r=Ew(new nw("manifest",i.Wa,i.va,o),r),n.push(r)}),E(r)})})}),C(o,r,2);case 2:return wa(o),C(o,i.destroy(),6);case 6:ya(o,3);break;case 3:return o.return(n)}}))},N("shaka.offline.Storage",Jw),Jw.deleteAll=function(){var n;return K(function(i){var r,o,s;return 1==i.g?(n=new Vv,ta(i,2),C(i,(r=n,K(function(n){return 1==n.g?((s=0<(o=Array.from(r.g.values())).length)||i1.forEach(function(n){(n=n())&&o.push(n)}),C(n,Promise.all(o.map(function(n){return n.erase()})),2)):s?n.B(0):C(n,Promise.all(o.map(function(n){return n.destroy()})),0)})),2)):5!=i.g?(wa(i),C(i,n.destroy(),5)):ya(i,0)})},Jw.prototype.list=Jw.prototype.list,Jw.prototype.removeEmeSessions=Jw.prototype.Oh,Jw.prototype.remove=Jw.prototype.remove,Jw.prototype.store=Jw.prototype.store,Jw.prototype.getNetworkingEngine=Jw.prototype.Ob,Jw.prototype.getConfiguration=Jw.prototype.getConfiguration,Jw.prototype.configure=Jw.prototype.configure,Jw.prototype.destroy=Jw.prototype.destroy,Jw.support=Kw;var i2=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function nx(){}function ox(n,i){for(n={priority:i||0,callback:n},i=0;i<i4.length;i++)if(i4[i].priority<n.priority){i4.splice(i,0,n);return}i4.push(n)}tZ.offline=Kw,N("shaka.polyfill",nx),nx.register=ox,nx.installAll=function(){for(var n=t(i4),i=n.next();!i.done;i=n.next()){i=i.value;try{i.callback()}catch(n){Sa("Error installing polyfill!",n)}}};var i4=[];function qx(){this.g=new rx}function sx(){n.AbortController||(n.AbortController=qx,n.AbortSignal=rx)}function rx(){jf.call(this),this.h=!1,this.g=void 0,this.onabort=null}function tx(){}function ux(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var n=t(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),i=n.next();!i.done;i=n.next())!function(n){var i="aria-"+n.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,n,{get:function(){return this.getAttribute(i)},set:function(n){null==n||void 0==n?this.removeAttribute(i):this.setAttribute(i,n)}})}(i.value)}function wx(){}function xx(){yx()}function zx(){}function Ax(){if(n.Document){var i=Element.prototype;i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||i.webkitRequestFullscreen,(i=Document.prototype).exitFullscreen=i.exitFullscreen||i.mozCancelFullScreen||i.msExitFullscreen||i.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Bx),document.addEventListener("webkitfullscreenerror",Bx),document.addEventListener("mozfullscreenchange",Bx),document.addEventListener("mozfullscreenerror",Bx),document.addEventListener("MSFullscreenChange",Bx),document.addEventListener("MSFullscreenError",Bx)}}function Bx(n){var i=n.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),r=document.createEvent("Event");r.initEvent(i,n.bubbles,n.cancelable),n.target.dispatchEvent(r)}function Cx(){}function Dx(){var n=!0;(Cd()||wd("PlayStation 5")||Dd()||wd("Web0S")||xd()||Bd()||wd("PC=EOS")||wd("Hisense")||wd("VIDAA"))&&(n=!1),n&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),i3=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Fx)}function Fx(i){var r,o,s,u,p,m,y,x,A,I,M,j,D;return K(function(R){switch(R.g){case 1:if(r={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:i},!i)return R.return(r);if(o=i.video,s=i.audio,"media-source"==i.type){if(!rd())return R.return(r);if(o){if(Bd()){if(n.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var P=o.contentType;o.width&&o.height&&(P+="; width="+o.width+"; height="+o.height),o.framerate&&(P+="; framerate="+o.framerate),"pq"===o.transferFunction&&(P+="; eotf=smpte2084"),u=cast.__platform__.canDisplayType(P)}else u=Za(o.contentType)}else xd()?(p=o.contentType,o.width&&o.height&&(p+="; width="+o.width+"; height="+o.height),o.framerate&&(p+="; framerate="+o.framerate),o.bitrate&&(p+="; bitrate="+o.bitrate),u=Za(p)):u=Za(o.contentType);if(!u)return R.return(r)}if(s&&!(Bd()&&s.spatialRendering?Za(s.contentType+"; spatialRendering=true"):Za(s.contentType)))return R.return(r)}else if("file"!=i.type)return R.return(r);else if(o&&!sd(o.contentType)||s&&!sd(s.contentType))return R.return(r);if(!i.keySystemConfiguration)return r.supported=!0,R.return(Promise.resolve(r));if(m=i.keySystemConfiguration,y=[],x=[],m.audio&&(A={robustness:m.audio.robustness||"",contentType:i.audio.contentType},xd()&&i.audio.contentType.includes('codecs="ac-3"')&&(A={robustness:A.robustness,contentType:'audio/mp4; codecs="ec-3"'}),y.push(A)),m.video&&(I={robustness:m.video.robustness||"",contentType:i.video.contentType},x.push(I)),M={initDataTypes:[m.initDataType],distinctiveIdentifier:m.distinctiveIdentifier,persistentState:m.persistentState,sessionTypes:m.sessionTypes},y.length&&(M.audioCapabilities=y),x.length&&(M.videoCapabilities=x),j=(i.video?i.video.contentType:"")+"#"+(i.audio?i.audio.contentType:"")+"#"+i.keySystemConfiguration.keySystem,sa(R,3),j in i5){D=i5[j],R.B(5);break}return C(R,navigator.requestMediaKeySystemAccess(m.keySystem,[M]),6);case 6:D=R.h,i5[j]=D;case 5:ua(R,4);break;case 3:va(R);case 4:D&&(r.supported=!0,r.keySystemAccess=D);case 2:return R.return(r)}})}qx.prototype.abort=function(n){var i=this.g;i.h||(i.h=!0,i.g=n,void 0===i.g&&(i.g=new DOMException("signal is aborted without reason","AbortError")),n=new Q("abort"),i.onabort&&i.onabort(n),i.dispatchEvent(n))},j.Object.defineProperties(qx.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),nx.AbortController=qx,qx.install=sx,oa(rx,jf),j.Object.defineProperties(rx.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ox(sx),nx.Aria=tx,tx.install=ux,ox(ux),nx.EncryptionScheme=wx,wx.install=xx,ox(xx,-2),nx.Fullscreen=zx,zx.install=Ax,ox(Ax),nx.MediaCapabilities=Cx,Cx.install=Dx;var i3=null;Cx.originalMcap=i3;var i5={};function Hx(){}function Ix(){var i,r,o,s=Id();n.MediaSource&&(Bd()?Jx():s?10>=s?n.MediaSource=null:12>=s?(Kx(),i=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(n,r){return i.call(this,n,r-.001)}):15>=s&&Kx():ud()?Jx():(zd()||yd()||wd("Tizen 4"))&&(r=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(n){return"opus"!=Mc(n)&&r(n)})),n.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(o=MediaSource.isTypeSupported,wd("Web0S")||(MediaSource.isTypeSupported=function(n){var i=n.split(/ *; */),r=i.findIndex(function(n){return n.startsWith("codecs=")});if(0>r)return o(n);var s=i[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=s.findIndex(function(n){return n.startsWith("vp09")});return 0<=u&&(s[u]="vp9",i[r]='codecs="'+s.join(",")+'"',n=i.join("; ")),o(n)}))}function Kx(){var n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var i=n.apply(this,Fa.apply(0,arguments));return i.abort=function(){},i}}function Jx(){var n=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(i){return"mp2t"!=i.split(";")[0].split("/")[1]&&n(i)}}function Ox(){}function Px(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):void 0!=n.orientation&&function(){function a(){switch(n.orientation){case -90:i.type="landscape-secondary",i.angle=270;break;case 0:i.type="portrait-primary",i.angle=0;break;case 90:i.type="landscape-primary",i.angle=90;break;case 180:i.type="portrait-secondary",i.angle=180}}var i=new Sx;screen.orientation=i,a(),n.addEventListener("orientationchange",function(){a();var n=new Q("change");i.dispatchEvent(n)})}())}function Sx(){jf.call(this),this.type="",this.angle=0}function Tx(){}function $x(n,i){try{var r=new ay(n,i);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function by(n){var i=this.mediaKeys;return i&&i!=n&&cy(i,null),delete this.mediaKeys,(this.mediaKeys=n)?cy(n,this):Promise.resolve()}function dy(n){if(nb(n=hb(n.initData)).getUint32(0,!0)+4!=n.byteLength)throw RangeError("Malformed FairPlay init data");n=Rf(n=Of(n.subarray(4),!0));var i=new Event("encrypted");i.initDataType="skd",i.initData=kb(n),this.dispatchEvent(i)}function ay(n,i){if(this.keySystem=n,n.startsWith("com.apple.fps"))for(i=(n=t(i)).next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var o=!1,s=!1;if(r.audioCapabilities)for(var u=t(r.audioCapabilities),p=u.next();!p.done;p=u.next())(p=p.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,p.contentType.split(";")[0])&&(i.audioCapabilities.push(p),s=!0));if(r.videoCapabilities)for(p=(r=t(r.videoCapabilities)).next();!p.done;p=r.next())(u=p.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(i.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=s?i:null}if(i){this.g=i;return}}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ey(n){this.h=new WebKitMediaKeys(n),this.g=new Af}function cy(n,i){if(n.g.Za(),!i)return Promise.resolve();n.g.D(i,"webkitneedkey",dy);try{return qj(i,HTMLMediaElement.HAVE_METADATA,n.g,function(){i.webkitSetMediaKeys(n.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function fy(n){jf.call(this),this.i=null,this.l=n,this.g=this.h=null,this.j=new Af,this.sessionId="",this.expiration=NaN,this.closed=new Ze,this.keyStatuses=new gy}function hy(n,i){var r=n.keyStatuses;r.size=void 0==i?0:1,r.g=i,i=new Q("keystatuseschange"),n.dispatchEvent(i)}function gy(){this.size=0,this.g=void 0}function iy(){}function jy(){!n.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=ky,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ly,n.MediaKeys=my,n.MediaKeySystemAccess=ny,n.shakaMediaKeysPolyfill=!0)}function ky(){return Promise.reject(Error("The key system specified is not supported."))}function ly(n){return null==n?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function my(){throw TypeError("Illegal constructor.")}function ny(){throw this.keySystem="",TypeError("Illegal constructor.")}function oy(){}function py(){if(!(!n.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)i8="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=ry,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sy,n.MediaKeys=ty,n.MediaKeySystemAccess=uy,n.shakaMediaKeysPolyfill=!0}}function vy(n){var i=i8;return i?i+n.charAt(0).toUpperCase()+n.slice(1):n}function ry(n,i){try{var r=new uy(n,i);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function sy(n){var i=this.mediaKeys;return i&&i!=n&&wy(i,null),delete this.mediaKeys,(this.mediaKeys=n)&&wy(n,this),Promise.resolve()}function uy(n,i){this.g=this.keySystem=n;var r=!1;"org.w3.clearkey"==n&&(this.g="webkit-org.w3.clearkey",r=!1);var o=!1,s=document.getElementsByTagName("video");s=s.length?s[0]:document.createElement("video"),i=t(i);for(var u=i.next();!u.done;u=i.next()){var p={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(u=u.value).initDataTypes,sessionTypes:["temporary"],label:u.label},m=!1;if(u.audioCapabilities)for(var y=t(u.audioCapabilities),x=y.next();!x.done;x=y.next())(x=x.value).contentType&&(m=!0,s.canPlayType(x.contentType.split(";")[0],this.g)&&(p.audioCapabilities.push(x),o=!0));if(u.videoCapabilities)for(x=(y=t(u.videoCapabilities)).next();!x.done;x=y.next())(x=x.value).contentType&&(m=!0,s.canPlayType(x.contentType,this.g)&&(p.videoCapabilities.push(x),o=!0));if(m||(o=s.canPlayType("video/mp4",this.g)||s.canPlayType("video/webm",this.g)),"required"==u.persistentState&&(r?(p.persistentState="required",p.sessionTypes=["persistent-license"]):o=!1),o){this.h=p;return}}throw r="Unsupported keySystem",("org.w3.clearkey"==n||"com.widevine.alpha"==n)&&(r="None of the requested configurations were supported."),(n=Error(r)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ty(n){this.l=n,this.h=null,this.g=new Af,this.i=[],this.j=new Map}function wy(n,i){n.h=i,n.g.Za();var r=i8;i&&(n.g.D(i,r+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=kb(i.initData),n.h.dispatchEvent(r)}),n.g.D(i,r+"keymessage",function(i){var r=xy(n,i.sessionId);r&&(i=(new Map).set("messageType",void 0==r.keyStatuses.Pb()?"licenserequest":"licenserenewal").set("message",i.message),i=new Q("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),n.g.D(i,r+"keyadded",function(i){(i=xy(n,i.sessionId))&&(yy(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),n.g.D(i,r+"keyerror",function(i){var r=xy(n,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(45==i.systemCode&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?yy(r,"output-restricted"):1==o?yy(r,"expired"):yy(r,"internal-error"))}}))}function xy(n,i){var r=n.j.get(i);return r||((r=n.i.shift())?(r.sessionId=i,n.j.set(i,r),r):null)}function zy(n,i,r){jf.call(this),this.j=n,this.m=!1,this.g=this.h=null,this.i=i,this.l=r,this.sessionId="",this.expiration=NaN,this.closed=new Ze,this.keyStatuses=new Ay}function By(n,i,r){if(n.m)return Promise.reject(Error("The session is already initialized."));n.m=!0;try{if("persistent-license"==n.l){if(r)var o=hb(Rf("LOAD_SESSION|"+r));else{var s=Rf("PERSISTENT|");o=lg(s,i)}}else o=hb(i)}catch(n){return Promise.reject(n)}n.h=new Ze;var u=vy("generateKeyRequest");try{n.j[u](n.i,o)}catch(i){if("InvalidStateError"!=i.name)return n.h=null,Promise.reject(i);new qd(function(){try{n.j[u](n.i,o)}catch(i){n.h.reject(i),n.h=null}}).U(.01)}return n.h}function yy(n,i){var r=n.keyStatuses;r.size=void 0==i?0:1,r.g=i,i=new Q("keystatuseschange"),n.dispatchEvent(i)}function Ay(){this.size=0,this.g=void 0}Cx.memoizedMediaKeySystemAccessRequests_=i5,ox(Dx,-1),nx.MediaSource=Hx,Hx.install=Ix,ox(Ix),nx.Orientation=Ox,Ox.install=Px,oa(Sx,jf),Sx.prototype.lock=function(n){function b(n){return screen.lockOrientation?screen.lockOrientation(n):screen.mozLockOrientation?screen.mozLockOrientation(n):!!screen.msLockOrientation&&screen.msLockOrientation(n)}var i=!1;switch(n){case"natural":i=b("default");break;case"any":i=!0,this.unlock();break;default:i=b(n)}return i?Promise.resolve():((n=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(n))},Sx.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},ox(Px),nx.PatchedMediaKeysApple=Tx,Tx.uninstall=function(){s&&(s=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",u),HTMLMediaElement.prototype.setMediaKeys=p,n.MediaKeys=m,n.MediaKeySystemAccess=y,navigator.requestMediaKeySystemAccess=x,u=x=p=y=m=null,n.shakaMediaKeysPolyfill=!1)},Tx.install=function(i){n.HTMLVideoElement&&n.WebKitMediaKeys&&((void 0===i?0:i)&&(s=!0,u=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),p=HTMLMediaElement.prototype.setMediaKeys,m=n.MediaKeys,y=n.MediaKeySystemAccess,x=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=by,n.MediaKeys=ey,n.MediaKeySystemAccess=ay,navigator.requestMediaKeySystemAccess=$x,n.shakaMediaKeysPolyfill=!0)},ay.prototype.createMediaKeys=function(){return Promise.resolve(new ey(this.keySystem))},ay.prototype.getConfiguration=function(){return this.g},ey.prototype.createSession=function(n){if("temporary"!=(n=n||"temporary"))throw TypeError("Session type "+n+" is unsupported on this platform.");return new fy(this.h,n)},ey.prototype.setServerCertificate=function(){return Promise.resolve(!1)},ey.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},oa(fy,jf),(D=fy.prototype).generateRequest=function(n,i){var r=this;this.h=new Ze;try{var o=this.l.createSession("video/mp4",hb(i));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(n){r.h&&(r.h.resolve(),r.h=null),n=(new Map).set("messageType",void 0==r.keyStatuses.Pb()?"license-request":"license-renewal").set("message",kb(n.message)),n=new Q("message",n),r.dispatchEvent(n)}),this.j.D(o,"webkitkeyadded",function(){r.g&&(hy(r,"usable"),r.g.resolve(),r.g=null)}),this.j.D(o,"webkitkeyerror",function(){var n=Error("EME PatchedMediaKeysApple key error");if(n.errorCode=r.i.error,null!=r.h)r.h.reject(n),r.h=null;else if(null!=r.g)r.g.reject(n),r.g=null;else switch(r.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:hy(r,"output-not-allowed");break;default:hy(r,"internal-error")}}),hy(this,"status-pending")}catch(n){this.h.reject(n)}return this.h},D.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},D.update=function(n){this.g=new Ze;try{this.i.update(hb(n))}catch(n){this.g.reject(n)}return this.g},D.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Za()}catch(n){this.closed.reject(n)}return this.closed},D.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(D=gy.prototype).Pb=function(){return this.g},D.forEach=function(n){this.g&&n(this.g,th.value())},D.get=function(n){if(this.has(n))return this.g},D.has=function(n){var i=th.value();return!!(this.g&&fb(n,i))},D.entries=function(){},D.keys=function(){},D.values=function(){},nx.PatchedMediaKeysNop=iy,iy.install=jy,my.prototype.createSession=function(){},my.prototype.setServerCertificate=function(){},my.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},ny.prototype.getConfiguration=function(){},ny.prototype.createMediaKeys=function(){},ox(jy,-10),nx.PatchedMediaKeysWebkit=oy,oy.install=py,uy.prototype.createMediaKeys=function(){return Promise.resolve(new ty(this.g))},uy.prototype.getConfiguration=function(){return this.h},ty.prototype.createSession=function(n){if("temporary"!=(n=n||"temporary")&&"persistent-license"!=n)throw TypeError("Session type "+n+" is unsupported on this platform.");var i=this.h||document.createElement("video");return i.src||(i.src="about:blank"),n=new zy(i,this.l,n),this.i.push(n),n},ty.prototype.setServerCertificate=function(){return Promise.resolve(!1)},ty.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},oa(zy,jf),(D=zy.prototype).generateRequest=function(n,i){return By(this,i,null)},D.load=function(n){return"persistent-license"==this.l?By(this,null,n):Promise.reject(Error("Not a persistent session."))},D.update=function(n){var i=new Ze;return function Cy(n,i,r){if(n.g)n.g.then(function(){return Cy(n,i,r)}).catch(function(){return Cy(n,i,r)});else{if(n.g=i,"webkit-org.w3.clearkey"==n.i){var o=Nf(r),s=JSON.parse(o);"oct"!=s.keys[0].kty&&(n.g.reject(Error("Response is not a valid JSON Web Key Set.")),n.g=null),o=ig(s.keys[0].k),s=ig(s.keys[0].kid)}else o=hb(r),s=null;var u=vy("addKey");try{n.j[u](n.i,o,s,n.sessionId)}catch(i){n.g.reject(i),n.g=null}}}(this,i,n),i},D.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var n=vy("cancelKeyRequest");try{this.j[n](this.i,this.sessionId)}catch(n){}}return this.closed.resolve(),this.closed},D.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(D=Ay.prototype).Pb=function(){return this.g},D.forEach=function(n){this.g&&n(this.g,th.value())},D.get=function(n){if(this.has(n))return this.g},D.has=function(n){var i=th.value();return!!(this.g&&fb(n,i))},D.entries=function(){},D.keys=function(){},D.values=function(){};var i8="";function Dy(){}function Ey(){if(n.HTMLVideoElement){var i=HTMLVideoElement.prototype;i.requestPictureInPicture&&document.exitPictureInPicture||!i.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,i.requestPictureInPicture=Fy,Object.defineProperty(i,"disablePictureInPicture",{get:Gy,set:Hy,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Iy,document.addEventListener("webkitpresentationmodechanged",Jy,!0))}}function Jy(n){if("picture-in-picture"==(n=n.target).webkitPresentationMode){document.pictureInPictureElement=n;var i=new Event("enterpictureinpicture");n.dispatchEvent(i)}else document.pictureInPictureElement==n&&(document.pictureInPictureElement=null),i=new Event("leavepictureinpicture"),n.dispatchEvent(i)}function Fy(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Iy(){var n=document.pictureInPictureElement;return n?(n.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Gy(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Hy(n){n?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Ky(){}function Ly(){n.crypto&&("randomUUID"in n.crypto||(n.crypto.randomUUID=My))}function My(){var n=URL.createObjectURL(new Blob),i=n.toString();return URL.revokeObjectURL(n),i.substr(i.lastIndexOf("/")+1)}function Ny(){}function Oy(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Py)}function Py(){return new Promise(function(n,i){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(i,r){n({usage:i,quota:r})},i)})}function Qy(){}function Ry(){var n=Symbol.prototype;"description"in n||Object.defineProperty(n,"description",{get:Sy})}function Sy(){var n=/\((.*)\)/.exec(this.toString());return n?n[1]:void 0}function Ty(){}function Uy(){if(n.HTMLMediaElement){var i=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var n=i.apply(this);return n&&n.catch(function(){}),n}}}function Vy(){}function Wy(){if(n.HTMLVideoElement){var i=HTMLVideoElement.prototype;!i.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in i||Ad())&&(i.getVideoPlaybackQuality=Xy)}}function Xy(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Yy(){}function Zy(){if(!n.VTTCue&&n.TextTrackCue){var i=null,r=TextTrackCue.length;if(3==r)i=$y;else if(6==r)i=az;else{try{var o=!!$y(1,2,"")}catch(n){o=!1}o&&(i=$y)}i&&(n.VTTCue=function(n,r,o){return i(n,r,o)})}}function $y(i,r,o){return new n.TextTrackCue(i,r,o)}function az(i,r,o){return new n.TextTrackCue(i+"-"+r+"-"+o,i,r,o)}function bz(){}ox(py),nx.PiPWebkit=Dy,Dy.install=Ey,ox(Ey),nx.RandomUUID=Ky,Ky.install=Ly,ox(Ly),nx.StorageEstimate=Ny,Ny.install=Oy,ox(Oy),nx.Symbol=Qy,Qy.install=Ry,ox(Ry),nx.VideoPlayPromise=Ty,Ty.install=Uy,ox(Uy),nx.VideoPlaybackQuality=Vy,Vy.install=Wy,ox(Wy),nx.VTTCue=Yy,Yy.install=Zy,ox(Zy),bz.prototype.parseInit=function(){},bz.prototype.setSequenceMode=function(){},bz.prototype.setManifestType=function(){},bz.prototype.parseMedia=function(n,i){var r=null,o=[];n=t(n=Nf(n).split(/\r?\n/));for(var s=n.next();!s.done;s=n.next())if((s=s.value)&&!/^\s+$/.test(s)&&(s=i6.exec(s))){var u=i9.exec(s[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),s=new yb(u,i.segmentEnd?i.segmentEnd:u+2,s[2]),r&&(r.endTime=u,o.push(r)),r=s}return r&&o.push(r),o},N("shaka.text.LrcTextParser",bz),bz.prototype.parseMedia=bz.prototype.parseMedia,bz.prototype.setManifestType=bz.prototype.setManifestType,bz.prototype.setSequenceMode=bz.prototype.setSequenceMode,bz.prototype.parseInit=bz.prototype.parseInit;var i6=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,i9=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ez(){}function wz(n,i){i=t(i.split(" "));for(var r=i.next();!r.done;r=i.next())switch(r.value){case"underline":n.textDecoration.includes("underline")||n.textDecoration.push("underline");break;case"noUnderline":n.textDecoration.includes("underline")&&tb(n.textDecoration,"underline");break;case"lineThrough":n.textDecoration.includes("lineThrough")||n.textDecoration.push("lineThrough");break;case"noLineThrough":n.textDecoration.includes("lineThrough")&&tb(n.textDecoration,"lineThrough");break;case"overline":n.textDecoration.includes("overline")||n.textDecoration.push("overline");break;case"noOverline":n.textDecoration.includes("overline")&&tb(n.textDecoration,"overline")}}function rz(n,i,r,o,s){return s=void 0===s||s,(n=xz(n,r,o))?n:s?kz(i,r,o):null}function kz(n,i,r){return n?ug(n,rS,r)||yz(n,i,r):null}function xz(n,i,r){return ug(n,rS,r)||yz(n,i,r)}function yz(n,i,r){n=nz(n,"style",i,"");for(var o=null,s=0;s<n.length;s++){var u=tg(n[s],"urn:ebu:tt:style",r);u||(u=ug(n[s],rS,r)),u||(u=xz(n[s],i,r)),u&&(o=u)}return o}function nz(n,i,r,o,s){var u=[];if(!n||1>r.length)return u;var p=n;for(n=null;p&&!(n=s?tg(p,s,i):p.getAttribute(i))&&(p=p.parentNode)instanceof Element;);if(i=n){for(s=(i=t(i.split(" "))).next();!s.done;s=i.next())for(s=s.value,p=(n=t(r)).next();!p.done;p=n.next())if(o+(p=p.value).getAttribute("xml:id")==s){u.push(p);break}}return u}function oz(n,i){var r=zz(n.getAttribute("begin"),i),o=zz(n.getAttribute("end"),i);return n=zz(n.getAttribute("dur"),i),null==o&&null!=n&&(o=r+n),{start:r,end:o}}function zz(n,i){var r=null;if(rl.test(n)){r=Number((n=rl.exec(n))[1]);var o=Number(n[2]),s=Number(n[3]),u=Number(n[4]);u+=(Number(n[5])||0)/i.h,s+=u/i.frameRate,r=s+60*o+3600*r}else if(rc.test(n))r=Cz(rc,n);else if(rh.test(n))r=Cz(rh,n);else if(rp.test(n))r=Number((n=rp.exec(n))[1])/i.frameRate;else if(rm.test(n))r=Number((n=rm.exec(n))[1])/i.g;else if(rv.test(n))r=Cz(rv,n);else if(n)throw new O(2,2,2001,"Could not parse cue time range in TTML");return r}function Cz(n,i){return null==(n=n.exec(i))||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function hz(n,i,r,o){this.frameRate=Number(n)||30,this.h=Number(i)||1,this.g=Number(o),0==this.g&&(this.g=n?this.frameRate*this.h:1),r&&(n=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(n[1])/Number(n[2]))}eW["application/x-subtitle-lrc"]=function(){return new bz},ez.prototype.parseInit=function(){},ez.prototype.setSequenceMode=function(){},ez.prototype.setManifestType=function(){},ez.prototype.parseMedia=function(n,i,r){var o=Nf(n);if(n=[],""==o)return n;var s=Hg(o,"tt");if(!s)throw new O(2,2,2005,"Failed to parse TTML.");if(!(o=s.getElementsByTagName("body")[0]))return[];var u=ug(s,rT,"frameRate"),p=ug(s,rT,"subFrameRate"),m=ug(s,rT,"frameRateMultiplier"),y=ug(s,rT,"tickRate"),x=ug(s,rT,"cellResolution"),A=s.getAttribute("xml:space")||"default",I=ug(s,rS,"extent");if("default"!=A&&"preserve"!=A)throw new O(2,2,2005,"Invalid xml:space value: "+A);A="default"==A,u=new hz(u,p,m,y),x=x&&(x=/^(\d+) (\d+)$/.exec(x))?{Kb:parseInt(x[1],10),rows:parseInt(x[2],10)}:null,p=(p=s.getElementsByTagName("metadata")[0])?Array.from(p.childNodes).filter(function(n){return n instanceof Element}):[],m=Array.from(s.getElementsByTagName("style")),s=Array.from(s.getElementsByTagName("region")),y=[];for(var M=t(s),j=M.next();!j.done;j=M.next()){var D=j.value;j=new zb;var R=D.getAttribute("xml:id");if(R){j.id=R;var P=null;I&&(P=i7.exec(I)||ru.exec(I)),R=P?Number(P[1]):null,P=P?Number(P[2]):null;var L,_=kz(D,m,"extent");if(_){var B=(L=i7.exec(_))||ru.exec(_);null!=B&&(j.width=Number(B[1]),j.height=Number(B[2]),L||(null!=R&&(j.width=100*j.width/R),null!=P&&(j.height=100*j.height/P)),j.widthUnits=L||null!=R?eS:0,j.heightUnits=L||null!=P?eS:0)}(D=kz(D,m,"origin"))&&null!=(B=(L=i7.exec(D))||ru.exec(D))&&(j.viewportAnchorX=Number(B[1]),j.viewportAnchorY=Number(B[2]),L?_||(j.width=100-j.viewportAnchorX,j.widthUnits=eS,j.height=100-j.viewportAnchorY,j.heightUnits=eS):(null!=P&&(j.viewportAnchorY=100*j.viewportAnchorY/P),null!=R&&(j.viewportAnchorX=100*j.viewportAnchorX/R)),j.viewportAnchorUnits=L||null!=R?eS:0)}else j=null;j&&y.push(j)}if(pg(o,"p").length)throw new O(2,2,2001,"<p> can only be inside <div> in TTML");for(M=(I=t(pg(o,"div"))).next();!M.done;M=I.next())if(pg(M.value,"span").length)throw new O(2,2,2001,"<span> can only be inside <p> in TTML");return(i=function lz(n,i,r,o,s,u,p,m,y,x,A,I){var M,j,D,R,P=n.parentNode;if(n.nodeType==Node.COMMENT_NODE)return null;if(n.nodeType==Node.TEXT_NODE){if(!A)return null;var L=document.createElement("span");L.textContent=n.textContent}else L=n;for(var _=null,B=t(rA),z=B.next();!z.done&&!(_=nz(L,"backgroundImage",o,"#",z.value)[0]);z=B.next());B=null;var q=ug(L,rA,"backgroundImage");if(I&&q&&!q.startsWith("#")&&(z=new fc(I),q=new fc(q),(z=z.resolve(q).toString())&&(B=z)),("p"==n.nodeName||_||B)&&(A=!0),n=A,z="default"==(L.getAttribute("xml:space")||(m?"default":"preserve")),q=Array.from(L.childNodes).every(function(n){return n.nodeType==Node.TEXT_NODE}),m=[],!q)for(var V=t(L.childNodes),H=V.next();!H.done;H=V.next())(H=lz(H.value,i,r,o,s,u,p,z,y,L,A,I))&&m.push(H);if(o=null!=x,I=/\S/.test(L.textContent),!((H=L.hasAttribute("begin")||L.hasAttribute("end")||L.hasAttribute("dur"))||I||"br"==L.tagName||0!=m.length||o&&!z))return null;for(I=(V=oz(L,r)).start,V=V.end;P&&P.nodeType==Node.ELEMENT_NODE&&"tt"!=P.tagName;)I=(M=P,j=r,D=I,R=V,M=oz(M,j),null==D?D=M.start:null!=M.start&&(D+=M.start),null==R?R=M.end:null!=M.start&&(R+=M.start),V={start:D,end:R}).start,V=V.end,P=P.parentNode;if(null==I&&(I=0),I+=i.periodStart,V=null==V?1/0:V+i.periodStart,I=Math.max(I,i.segmentStart),V=Math.min(V,i.segmentEnd),!H&&0<m.length)for(I=1/0,V=0,r=(i=t(m)).next();!r.done;r=i.next())I=Math.min(I,(r=r.value).startTime),V=Math.max(V,r.endTime);if("br"==L.tagName)return(s=new yb(I,V,"")).lineBreak=!0,s;if(i="",q&&(i=L.textContent,z&&(i=(i=i.trim()).replace(/\s+/g," "))),(i=new yb(I,V,i)).nestedCues=m,A||(i.isContainer=!0),y&&(i.cellResolution=y),y=nz(L,"region",u,"")[0],L.hasAttribute("region")&&y&&y.getAttribute("xml:id")){var G=y.getAttribute("xml:id");i.region=p.filter(function(n){return n.id==G})[0]}return p=y,x&&o&&!L.getAttribute("region")&&!L.getAttribute("style")&&(p=nz(x,"region",u,"")[0]),function(n,i,r,o,s,u,p,m){if("rtl"==rz(i,r,u,"direction",p=p||m)&&(n.direction="rtl"),"tb"==(m=rz(i,r,u,"writingMode",p))||"tblr"==m?n.writingMode="vertical-lr":"tbrl"==m?n.writingMode="vertical-rl":"rltb"==m||"rl"==m?n.direction="rtl":m&&(n.direction=ea),(m=rz(i,r,u,"textAlign",!0))?(n.positionAlign=rw[m],n.lineAlign=rb[m],n.textAlign=$[m.toUpperCase()]):n.textAlign=J,(m=rz(i,r,u,"displayAlign",!0))&&(n.displayAlign=en[m.toUpperCase()]),(m=rz(i,r,u,"color",p))&&(n.color=m),(m=rz(i,r,u,"backgroundColor",p))&&(n.backgroundColor=m),(m=rz(i,r,u,"border",p))&&(n.border=m),m=rz(i,r,u,"fontFamily",p))switch(m){case"monospaceSerif":n.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":n.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":n.fontFamily="sans-serif";break;case"monospaceSansSerif":n.fontFamily="Consolas,monospace";break;case"proportionalSerif":n.fontFamily="serif";break;default:n.fontFamily=m}switch((m=rz(i,r,u,"fontWeight",p))&&"bold"==m&&(n.fontWeight=700),m=rz(i,r,u,"wrapOption",p),n.wrapLine=!m||"noWrap"!=m,(m=rz(i,r,u,"lineHeight",p))&&m.match(rr)&&(n.lineHeight=m),(m=rz(i,r,u,"fontSize",p))&&(m.match(rr)||m.match(ri))&&(n.fontSize=m),(m=rz(i,r,u,"fontStyle",p))&&(n.fontStyle=eT[m.toUpperCase()]),o?(s=o.getAttribute("imageType")||o.getAttribute("imagetype"),m=o.getAttribute("encoding"),o=o.textContent.trim(),"PNG"==s&&"Base64"==m&&o&&(n.backgroundImage="data:image/png;base64,"+o)):s&&(n.backgroundImage=s),(o=rz(i,r,u,"textOutline",p))&&((o=o.split(" "))[0].match(rr)?n.textStrokeColor=n.color:(n.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(rr)?n.textStrokeWidth=o[0]:n.textStrokeColor=""),(o=rz(i,r,u,"letterSpacing",p))&&o.match(rr)&&(n.letterSpacing=o),(o=rz(i,r,u,"linePadding",p))&&o.match(rr)&&(n.linePadding=o),(o=rz(i,r,u,"opacity",p))&&(n.opacity=parseFloat(o)),(o=kz(r,u,"textDecoration"))&&wz(n,o),(o=xz(i,u,"textDecoration"))&&wz(n,o),(o=rz(i,r,u,"textCombine",p))&&(n.textCombineUpright=o),rz(i,r,u,"ruby",p)){case"container":n.rubyTag="ruby";break;case"text":n.rubyTag="rt"}}(i,L,p,_,B,s,n,0==m.length),i}(o,i,u,p,m,s,y,A,x,null,!1,r))&&(i.backgroundColor||(i.backgroundColor="transparent"),n.push(i)),n},N("shaka.text.TtmlTextParser",ez),ez.prototype.parseMedia=ez.prototype.parseMedia,ez.prototype.setManifestType=ez.prototype.setManifestType,ez.prototype.setSequenceMode=ez.prototype.setSequenceMode,ez.prototype.parseInit=ez.prototype.parseInit;var i7=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,ri=/^(\d{1,2}(?:\.\d+)?|100)%$/,rr=/^(\d+px|\d+em|\d*\.?\d+c)$/,ru=/^(\d+)px (\d+)px$/,rl=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,rc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,rh=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,rp=/^(\d*(?:\.\d*)?)f$/,rm=/^(\d*(?:\.\d*)?)t$/,rv=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),rb={left:ec,center:"center",right:"end",start:ec,end:"end"},rw={left:"line-left",center:"center",right:"line-right"},rT=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],rS=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],rA=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Hz(){this.g=new ez}function Iz(){this.h=!1,this.g="UNKNOWN"}function Kz(n){for(var i=t(Object.entries(em)),r=i.next();!r.done;r=i.next()){var o=t(r.value);r=o.next().value,o=o.next().value;var s=new yb(0,0,"");s.color=o,n.set("."+r,s)}for(r=(i=t(Object.entries(ev))).next();!r.done;r=i.next())r=(o=t(r.value)).next().value,o=o.next().value,(s=new yb(0,0,"")).backgroundColor=o,n.set("."+r,s)}function Mz(n,i,r){if(n.includes("<")){0===r.size&&Kz(r);e:{for(var o=[],s=-1,u="",p=0;p<n.length;p++)if("/"===n[p]&&0<p&&"<"===n[p-1]){var m=n.indexOf(">",p);if(m<=p)break e;if((m=n.substring(p+1,m))&&"c"===m){var y=o.pop();y?y===m?(u+="/"+m+">",p+=m.length+1):y.startsWith("c.")?(p+=m.length+1,u+="/"+y+">"):u+=n[p]:u+=n[p]}else u+=n[p]}else"<"===n[p]?"c"!=n[s=p+1]&&(s=-1):">"===n[p]&&0<s&&(o.push(n.substr(s,p-s)),s=-1),u+=n[p];n=u}for(s=0,o=n,n=[],u=-1;s<o.length;s++)"<"===o[s]?u=s+1:">"===o[s]&&0<u&&((u=o.substr(u,s-u)).match(rC)&&n.push(u),u=-1);for(s=(n=t(n)).next();!s.done;s=n.next())s=s.value,o=o.replace("<"+s+">",'<div time="'+s+'">')+"</div>";n=o;e:{for(m=0,s=n,u=[],p=-1,n="",o=!1;m<s.length;m++)if("/"===s[m]){if(-1===(y=s.indexOf(">",m))){n=s;break e}if((y=s.substring(m+1,y))&&"v"==y){o=!0;var x=null;if(u.length&&(x=u[u.length-1]),x){if(x===y)n+="/"+y+">";else{if(!x.startsWith("v")){n+=s[m];continue}n+="/"+x+">"}m+=y.length+1}else n+=s[m]}else n+=s[m]}else"<"===s[m]?"v"!=s[p=m+1]&&(p=-1):">"===s[m]&&0<p&&(u.push(s.substr(p,m-p)),p=-1),n+=s[m];for(u=(s=t(u)).next();!u.done;u=s.next())p=(u=u.value).replace(" ",".voice-"),n=(n=n.replace("<"+u+">","<"+p+">")).replace("</"+u+">","</"+p+">"),o||(n+="</"+p+">")}if(o=Hg("<span>"+n+"</span>","span")){if(1==(o=o.childNodes).length&&((s=o[0]).nodeType==Node.TEXT_NODE||s.nodeType==Node.CDATA_SECTION_NODE)){i.payload=Oz(n);return}for(o=(n=t(o)).next();!o.done;o=n.next())!function Pz(n,i,r){var o=i.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new zb,o.position=null,o.size=0,n.nodeType===Node.ELEMENT_NODE&&n.nodeName)for(var s=t(n.nodeName.split(/(?=[ .])+/g)),u=s.next();!u.done;u=s.next()){var p=u=u.value;if(p.startsWith(".voice-")){var m=p.split("-").pop();p='v[voice="'+m+'"]',r.has(p)||(p="v[voice="+m+"]")}switch(r.has(p)&&(p=r.get(p))&&(o.backgroundColor=Qz(p.backgroundColor,o.backgroundColor),o.color=Qz(p.color,o.color),o.fontFamily=Qz(p.fontFamily,o.fontFamily),o.fontSize=Qz(p.fontSize,o.fontSize),o.textShadow=Qz(p.textShadow,o.textShadow),o.fontWeight=p.fontWeight,o.fontStyle=p.fontStyle,o.opacity=p.opacity,o.rubyTag=p.rubyTag,o.textCombineUpright=p.textCombineUpright,o.wrapLine=p.wrapLine),u){case"br":o=Kb(o.startTime,o.endTime),i.nestedCues.push(o);return;case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(u=n.getAttribute("color"))&&(o.color=u);break;case"div":if(!(u=n.getAttribute("time")))break;(u=Jz(new $s(u)))&&(o.startTime=u);break;case"ruby":case"rp":case"rt":o.rubyTag=u}}if(s=n.childNodes,wg(n)||1==s.length&&wg(s[0]))for(s=!0,n=(r=t(n.textContent.split("\n"))).next();!n.done;n=r.next())n=n.value,s||(s=Kb(o.startTime,o.endTime),i.nestedCues.push(s)),0<n.length&&((s=o.clone()).payload=Oz(n),i.nestedCues.push(s)),s=!1;else for(i.nestedCues.push(o),n=(i=t(s)).next();!n.done;n=i.next())Pz(n.value,o,r)}(o.value,i,r)}else i.payload=Oz(n)}else i.payload=Oz(n)}function Qz(n,i){return n&&0<n.length?n:i}function Lz(n,i,r){var o,s,u;(o=/^align:(start|middle|center|end|left|right)$/.exec(i))?"middle"==(i=o[1])?n.textAlign=J:n.textAlign=$[i.toUpperCase()]:(o=/^vertical:(lr|rl)$/.exec(i))?n.writingMode="lr"==o[1]?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(i))?n.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(i))?(n.position=Number(o[1]),o[2]&&(i=o[2],n.positionAlign="line-left"==i||"start"==i?"line-left":"line-right"==i||"end"==i?"line-right":"center"==i||"middle"==i?"center":X)):(o=/^region:(.*)$/.exec(i))?(s=r,u=o[1],(i=(s=s.filter(function(n){return n.id==u})).length?s[0]:null)&&(n.region=i)):(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(i))?(n.lineInterpretation=1,n.line=Number(r[1]),r[2]&&(n.lineAlign=ep[r[2].toUpperCase()])):(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(i))&&(n.lineInterpretation=eu,n.line=Number(r[1]),r[2]&&(n.lineAlign=ep[r[2].toUpperCase()]))}function Jz(n){if(null==(n=bt(n,rC)))return null;var i=Number(n[2]),r=Number(n[3]);return 59<i||59<r?null:Number(n[4])/1e3+r+60*i+3600*(Number(n[1])||0)}function Oz(n){var i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"","&rlm;":""},r=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,o=RegExp(r.source);return n&&o.test(n)?n.replace(r,function(n){return i[n]||"'"}):n||""}eW["application/ttml+xml"]=function(){return new ez},Hz.prototype.parseInit=function(n){var i=!1;if((new Wf).box("moov",ag).box("trak",ag).box("mdia",ag).box("minf",ag).box("stbl",ag).O("stsd",cg).box("stpp",function(n){i=!0,n.parser.stop()}).parse(n),!i)throw new O(2,2,2007)},Hz.prototype.setSequenceMode=function(){},Hz.prototype.setManifestType=function(){},Hz.prototype.parseMedia=function(n,i,r){var o=this,s=!1,u=[];if((new Wf).box("mdat",eg(function(n){s=!0,u=u.concat(o.g.parseMedia(n,i,r))})).parse(n,!1),!s)throw new O(2,2,2007);return u},N("shaka.text.Mp4TtmlParser",Hz),Hz.prototype.parseMedia=Hz.prototype.parseMedia,Hz.prototype.setManifestType=Hz.prototype.setManifestType,Hz.prototype.setSequenceMode=Hz.prototype.setSequenceMode,Hz.prototype.parseInit=Hz.prototype.parseInit,eW['application/mp4; codecs="stpp"']=function(){return new Hz},eW['application/mp4; codecs="stpp.ttml"']=function(){return new Hz},eW['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Hz},eW['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Hz},Iz.prototype.parseInit=function(){},Iz.prototype.setSequenceMode=function(n){this.h=n},Iz.prototype.setManifestType=function(n){this.g=n},Iz.prototype.parseMedia=function(n,i){var r=(n=(n=Nf(n)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new O(2,2,2e3);if(n=i.vttOffset,r[0].includes("X-TIMESTAMP-MAP")&&this.h){var o=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=r[0].match(/MPEGTS:(\d+)/m);if(o&&s){if(null==(n=Jz(new $s(o[1]))))throw new O(2,2,2e3);for(s=Number(s[1]),o=i.segmentStart-i.periodStart;95443.7176888889<=o;)o-=95443.7176888889,s+=8589934592;n=i.periodStart+s/9e4-n}}else r[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(n=i.segmentStart);for(i=[],o=(s=t(r[0].split("\n"))).next();!o.done;o=s.next())if(o=o.value,/^Region:/.test(o)){o=new $s(o);var u=new zb;ct(o),at(o);for(var p=ct(o);p;){var m=u,y=p;(p=/^id=(.*)$/.exec(y))?m.id=p[1]:(p=/^width=(\d{1,2}|100)%$/.exec(y))?m.width=Number(p[1]):(p=/^lines=(\d+)$/.exec(y))?(m.height=Number(p[1]),m.heightUnits=2):(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(y))?(m.regionAnchorX=Number(p[1]),m.regionAnchorY=Number(p[2])):(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(y))?(m.viewportAnchorX=Number(p[1]),m.viewportAnchorY=Number(p[2])):/^scroll=up$/.exec(y)&&(m.scroll="up"),at(o),p=ct(o)}i.push(u)}for(Kz(s=new Map),o=[],u=(r=t(r.slice(1))).next();!u.done;u=r.next()){if((1!=(u=u.value.split("\n")).length||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&"STYLE"==u[0]){for(y=1,m=[],p=-1;y<u.length;y++)u[y].includes("::cue")&&(m.push([]),p=m.length-1),-1!=p&&(m[p].push(u[y]),u[y].includes("}")&&(p=-1));for(p=(m=t(m)).next();!p.done;p=m.next()){var x=p.value;p="global",(y=x[0].match(/\((.*)\)/))&&(p=y.pop()),y=x.slice(1,-1),x[0].includes("}")&&(x=/\{(.*?)\}/.exec(x[0]))&&(y=x[1].split(";")),(x=s.get(p))||(x=new yb(0,0,""));for(var A=!1,I=0;I<y.length;I++){var M=/^\s*([^:]+):\s*(.*)/.exec(y[I]);if(M){var j=M[2].trim().replace(";","");switch(M[1].trim()){case"background-color":case"background":A=!0,x.backgroundColor=j;break;case"color":A=!0,x.color=j;break;case"font-family":A=!0,x.fontFamily=j;break;case"font-size":A=!0,x.fontSize=j;break;case"font-weight":(700<=parseInt(j,10)||"bold"==j)&&(A=!0,x.fontWeight=700);break;case"font-style":switch(j){case"normal":A=!0,x.fontStyle=ex;break;case"italic":A=!0,x.fontStyle="italic";break;case"oblique":A=!0,x.fontStyle="oblique"}break;case"opacity":A=!0,x.opacity=parseFloat(j);break;case"text-combine-upright":A=!0,x.textCombineUpright=j;break;case"text-shadow":A=!0,x.textShadow=j;break;case"white-space":A=!0,x.wrapLine="noWrap"!=j}}}A&&s.set(p,x)}}if(A=n,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])u=null;else if(m=null,u[0].includes("-->")||(m=u[0],u.splice(0,1)),y=Jz(p=new $s(u[0])),I=bt(p,/[ \t]+--\x3e[ \t]+/g),x=Jz(p),null==y||null==I||null==x)Sa("Failed to parse VTT time code. Cue skipped:",m,u),u=null;else{for(y+=A,x+=A,u=u.slice(1).join("\n").trim(),s.has("global")?((A=s.get("global").clone()).startTime=y,A.endTime=x,A.payload=""):A=new yb(y,x,""),at(p),y=ct(p);y;)Lz(A,y,i),at(p),y=ct(p);Mz(u,A,s),null!=m&&(A.id=m),u=A}u&&o.push(u)}return o},N("shaka.text.VttTextParser",Iz),Iz.prototype.parseMedia=Iz.prototype.parseMedia,Iz.prototype.setManifestType=Iz.prototype.setManifestType,Iz.prototype.setSequenceMode=Iz.prototype.setSequenceMode,Iz.prototype.parseInit=Iz.prototype.parseInit;var rC=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Sz(){this.g=null}function Vz(){}function Wz(n){if(null==(n=bt(n,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var i=Number(n[2]),r=Number(n[3]);return 59<i||59<r?null:Number(n[4])/1e3+r+60*i+3600*(Number(n[1])||0)}function Xz(){this.g=new Iz}function Yz(n){var i="WEBVTT\n\n";if(""==n)return i;n=t((n=(n=n.replace(/\r+/g,"")).trim()).split("\n\n"));for(var r=n.next();!r.done;r=n.next())(r=r.value.split(/\n/))[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),i+=r.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return i}function Zz(){}function eA(n){return 0<=(n=parseInt(n.replace("&H",""),16))?"rgba("+(255&n)+","+(n>>8&255)+","+(n>>16&255)+","+(n>>24&255^255)/255+")":null}function cA(n){return 3600*((n=rj.exec(n))[1]?parseInt(n[1].replace(":",""),10):0)+60*parseInt(n[2],10)+parseFloat(n[3])}eW["text/vtt"]=function(){return new Iz},eW['text/vtt; codecs="vtt"']=function(){return new Iz},eW['text/vtt; codecs="wvtt"']=function(){return new Iz},Sz.prototype.parseInit=function(n){var i=this,r=!1;if((new Wf).box("moov",ag).box("trak",ag).box("mdia",ag).O("mdhd",function(n){n=Yh(n.reader,n.version),i.g=n.timescale}).box("minf",ag).box("stbl",ag).O("stsd",cg).box("wvtt",function(){r=!0}).parse(n),!this.g||!r)throw new O(2,2,2008)},Sz.prototype.setSequenceMode=function(){},Sz.prototype.setManifestType=function(){},Sz.prototype.parseMedia=function(n,i){if(!n.length)return[];if(!this.g)throw new O(2,2,2008);var r,o=0,s=[],u=[],p=!1,m=!1,y=!1,x=null;if((new Wf).box("moof",ag).box("traf",ag).O("tfdt",function(n){p=!0,o=Xh(n.reader,n.version).baseMediaDecodeTime}).O("tfhd",function(n){x=Wh(n.reader,n.flags).Kf}).O("trun",function(n){m=!0,s=Zh(n.reader,n.version,n.flags).ig}).box("mdat",eg(function(n){y=!0,r=n})).parse(n,!1),!y&&!p&&!m)throw new O(2,2,2008);n=o;for(var A=new Tf(r,0),I=t(s),M=I.next();!M.done;M=I.next()){var j=(M=M.value).hf||x,D=M.Wd?o+M.Wd:n;n=D+(j||0);var R=0;do{var P=A.L();R+=P;var L=A.L(),_=null;"vttc"==$f(L)?8<P&&(_=A.ub(P-8)):A.skip(P-8),j&&_&&(P=function(n,i,r){var o,s,u;return(new Wf).box("payl",eg(function(n){o=Nf(n)})).box("iden",eg(function(n){s=Nf(n)})).box("sttg",eg(function(n){u=Nf(n)})).parse(n),o?function(n,i,r,o,s){if(Mz(n,o=new yb(o,s,""),new Map),i&&(o.id=i),r)for(i=ct(n=new $s(r));i;)Lz(o,i,[]),at(n),i=ct(n);return o}(o,s,u,i,r):null}(_,i.periodStart+D/this.g,i.periodStart+n/this.g),u.push(P))}while(M.sampleSize&&R<M.sampleSize)}return u.filter(ad)},N("shaka.text.Mp4VttParser",Sz),Sz.prototype.parseMedia=Sz.prototype.parseMedia,Sz.prototype.setManifestType=Sz.prototype.setManifestType,Sz.prototype.setSequenceMode=Sz.prototype.setSequenceMode,Sz.prototype.parseInit=Sz.prototype.parseInit,eW['application/mp4; codecs="wvtt"']=function(){return new Sz},Vz.prototype.parseInit=function(){},Vz.prototype.setSequenceMode=function(){},Vz.prototype.setManifestType=function(){},Vz.prototype.parseMedia=function(n){var i=Nf(n).replace(/\r+/g,"");if(i=i.trim(),n=[],""==i)return n;i=t(i.split("\n\n"));for(var r=i.next();!r.done;r=i.next()){r=r.value.split("\n");var o=new $s(r[0]),s=Wz(o),u=bt(o,/,/g);if(o=Wz(o),null==s||null==u||null==o)throw new O(2,2,2001,"Could not parse cue time range in SubViewer");n.push(new yb(s,o,r.slice(1).join("\n").trim()))}return n},N("shaka.text.SbvTextParser",Vz),Vz.prototype.parseMedia=Vz.prototype.parseMedia,Vz.prototype.setManifestType=Vz.prototype.setManifestType,Vz.prototype.setSequenceMode=Vz.prototype.setSequenceMode,Vz.prototype.parseInit=Vz.prototype.parseInit,eW["text/x-subviewer"]=function(){return new Vz},Xz.prototype.parseInit=function(){},Xz.prototype.setSequenceMode=function(){},Xz.prototype.setManifestType=function(){},Xz.prototype.parseMedia=function(n,i,r){return n=hb(Rf(n=Yz(n=Nf(n)))),this.g.parseMedia(n,i,r)},N("shaka.text.SrtTextParser",Xz),Xz.srt2webvtt=Yz,Xz.prototype.parseMedia=Xz.prototype.parseMedia,Xz.prototype.setManifestType=Xz.prototype.setManifestType,Xz.prototype.setSequenceMode=Xz.prototype.setSequenceMode,Xz.prototype.parseInit=Xz.prototype.parseInit,eW["text/srt"]=function(){return new Xz},Zz.prototype.parseInit=function(){},Zz.prototype.setSequenceMode=function(){},Zz.prototype.setManifestType=function(){},Zz.prototype.parseMedia=function(n){var i="",r="";n=t(n=Nf(n).split(/\r?\n\s*\r?\n/));for(var o=n.next();!o.done;o=n.next()){var s=rE.exec(o.value);s&&(o=s[1],s=s[2],"V4 Styles"==o||"V4+ Styles"==o?i=s:"Events"==o&&(r=s))}n=[],o=null,i=t(i.split(/\r?\n/));for(var u=i.next();!u.done;u=i.next())if(s=u.value,!/^\s*;/.test(s)&&(u=rI.exec(s))){if(s=u[1].trim(),u=u[2].trim(),"Format"==s)o=u.split(rM);else if("Style"==s){s=u.split(rM),u={};for(var p=0;p<o.length&&p<s.length;p++)u[o[p]]=s[p];n.push(u)}}for(o=[],i=null,s={},u=(r=t(r.split(/\r?\n/))).next();!u.done;s={ee:s.ee},u=r.next())if(u=u.value,!/^\s*;/.test(u)&&(p=rI.exec(u))){if(u=p[1].trim(),p=p[2].trim(),"Format"==u)i=p.split(rM);else if("Dialogue"==u){p=p.split(rM),u={};for(var m=0;m<i.length&&m<p.length;m++)u[i[m]]=p[m];m=cA(u.Start);var y=cA(u.End);p=new yb(m,y,p.slice(i.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),s.ee=u.Style,(u=n.find(function(n){return function(i){return i.Name==n.ee}}(s)))&&function(n,i){var r=i.Fontname;if(r&&(n.fontFamily=r),(r=i.Fontsize)&&(n.fontSize=r+"px"),(r=i.PrimaryColour)&&(r=eA(r))&&(n.color=r),(r=i.BackColour)&&(r=eA(r))&&(n.backgroundColor=r),i.Bold&&(n.fontWeight=700),i.Italic&&(n.fontStyle="italic"),i.Underline&&n.textDecoration.push("underline"),(r=i.Spacing)&&(n.letterSpacing=r+"px"),r=i.Alignment)switch(parseInt(r,10)){case 1:n.displayAlign=ee,n.textAlign="start";break;case 2:n.displayAlign=ee,n.textAlign=J;break;case 3:n.displayAlign=ee,n.textAlign="end";break;case 5:n.displayAlign="before",n.textAlign="start";break;case 6:n.displayAlign="before",n.textAlign=J;break;case 7:n.displayAlign="before",n.textAlign="end";break;case 9:n.displayAlign="center",n.textAlign="start";break;case 10:n.displayAlign="center",n.textAlign=J;break;case 11:n.displayAlign="center",n.textAlign="end"}(i=i.AlphaLevel)&&(n.opacity=parseFloat(i))}(p,u),o.push(p)}}return o},N("shaka.text.SsaTextParser",Zz),Zz.prototype.parseMedia=Zz.prototype.parseMedia,Zz.prototype.setManifestType=Zz.prototype.setManifestType,Zz.prototype.setSequenceMode=Zz.prototype.setSequenceMode,Zz.prototype.parseInit=Zz.prototype.parseInit;var rE=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,rI=/^\s*([^:]+):\s*(.*)/,rM=/\s*,\s*/,rj=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function gA(n,i){var r=1&n[i+1]?7:9;return i+r<=n.length&&0<(n=((3&n[i+3])<<11|n[i+4]<<3|(224&n[i+5])>>>5)-r)?{Hd:r,S:n}:null}function hA(n,i){var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(60&n[i+2])>>>2;if(o>r.length-1)return null;var s=((192&n[i+2])>>>6)+1,u=(1&n[i+2])<<2;return{sampleRate:r[o],channelCount:u|=(192&n[i+3])>>>6,ha:"mp4a.40."+s}}function kA(n){this.i=n,this.h=0,this.g=new Map}function lA(n,i){if(i+8>n.length||11!==n[i]||119!==n[i+1])return null;var r=n[i+4]>>6;if(3<=r)return null;var o=63&n[i+4],s=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+r];if(i+s>n.length)return null;var u=n[i+6]>>5,p=0;2===u?p+=2:(1&u&&1!==u&&(p+=2),4&u&&(p+=2)),p=(n[i+6]<<8|n[i+7])>>12-p&1;var m=7&n[i+5];return n=new Uint8Array([r<<6|n[i+5]>>3<<1|m>>2,(3&m)<<6|u<<3|p<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][r],channelCount:[2,1,2,3,3,4,4,5][u]+p,fa:n,S:s}}function nA(n){this.i=n,this.h=0,this.g=new Map}function oA(n,i){if(i+8>n.length||2935!=(n[i]<<8|n[i+1]<<0))return null;var r=new di(n.subarray(i+2));fi(r,2),fi(r,3);var o=gi(r,11)+1<<1,s=gi(r,2);if(3==s){s=[24e3,22060,16e3][s=gi(r,2)];var u=3}else s=[48e3,44100,32e3][s],u=gi(r,2);var p=gi(r,3),m=gi(r,1);return(r=gi(r,5),i+o>n.byteLength)?null:(n=Math.floor(o*s/(16*[1,2,3,6][u])),n=new Uint8Array([(8160&n)>>5,(31&n)<<3,s<<6|r<<1|0,0|p<<1|m<<0,0]),{sampleRate:s,channelCount:[2,1,2,3,3,4,4,5][p]+m,fa:n,S:o})}function pA(n){this.i=n,this.h=0,this.g=new Map}eW["text/x-ssa"]=function(){return new Zz},(D=kA.prototype).destroy=function(){this.g.clear()},D.isSupported=function(n){return"audio/aac"==n.toLowerCase().split(";")[0]&&Za(this.convertCodecs("audio",n))},D.convertCodecs=function(n,i){return"audio/aac"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Oc(i)||"mp4a.40.2")+'"':i},D.getOriginalMimeType=function(){return this.i},D.transmux=function(n,i,r,o){for(var s=hb(n),u=Vh(s),p=u.length;p<s.length&&!function(n,i){if(i+1<n.length&&255===n[i]&&240==(246&n[i+1])){var r=1&n[i+1]?7:9;if(i+r>=n.length)return!1;var o=(3&n[i+3])<<11|n[i+4]<<3|(224&n[i+5])>>>5;return!(o<=r)&&((i+=o)===n.length||i+1<n.length&&255===n[i]&&240==(246&n[i+1]))}return!1}(s,p);p++);if(n=1e3*r.endTime,(u=Uh(u)).length&&r&&(r=u.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(n=r.data),!(r=hA(s,p)))return Promise.reject(new O(2,3,3018));for(i.audioSamplingRate=r.sampleRate,i.channelsCount=r.channelCount,u=[];p<s.length;){var m=gA(s,p);if(!m)return Promise.reject(new O(2,3,3018));var y=m.Hd+m.S;p+y<=s.length&&u.push({data:s.subarray(p+m.Hd,p+y),size:m.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),p+=y}return n=Math.floor(n*(s=r.sampleRate)/1e3),o={id:i.id,type:"audio",codecs:r.ha,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:s,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:n,Oa:u},stream:i},n=new Cu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Iu(n),this.g.set(i.id,o)),i=Zu(n),this.h++,Promise.resolve(i=lg(o,i))},N("shaka.transmuxer.AacTransmuxer",kA),kA.prototype.transmux=kA.prototype.transmux,kA.prototype.getOriginalMimeType=kA.prototype.getOriginalMimeType,kA.prototype.convertCodecs=kA.prototype.convertCodecs,kA.prototype.isSupported=kA.prototype.isSupported,kA.prototype.destroy=kA.prototype.destroy,Yb("audio/aac",function(){return new kA("audio/aac")},eE),(D=nA.prototype).destroy=function(){this.g.clear()},D.isSupported=function(n){return"audio/ac3"==n.toLowerCase().split(";")[0]&&Za(this.convertCodecs("audio",n))},D.convertCodecs=function(n,i){return"audio/ac3"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':i},D.getOriginalMimeType=function(){return this.i},D.transmux=function(n,i,r,o){n=hb(n);for(var s=Vh(n),u=s.length;u<n.length&&!function(n,i){if(11===n[i]&&119===n[i+1]){var r,o,s=0,u=5;for(i+=5;0<u;){o=n[i];var p=Math.min(u,8),m=8-p;r=(o&(r=4278190080>>>24+m<<m))>>m,s=s?s<<p|r:r,i+=1,u-=p}if(16>s)return!0}return!1}(n,u);u++);var p=1e3*r.endTime;(s=Uh(s)).length&&r&&(r=s.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(p=r.data),r=0,s=new Uint8Array([]);for(var m=[];u<n.length;){var y=lA(n,u);if(!y)return Promise.reject(new O(2,3,3018));i.audioSamplingRate=y.sampleRate,i.channelsCount=y.channelCount,r=y.sampleRate,s=y.fa,m.push({data:n.subarray(u,u+y.S),size:y.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=y.S}return n=Math.floor(p*r/1e3),o={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:r,duration:o,Ra:[],fa:s,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:n,Oa:m},stream:i},n=new Cu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Iu(n),this.g.set(i.id,o)),i=Zu(n),this.h++,Promise.resolve(i=lg(o,i))},N("shaka.transmuxer.Ac3Transmuxer",nA),nA.prototype.transmux=nA.prototype.transmux,nA.prototype.getOriginalMimeType=nA.prototype.getOriginalMimeType,nA.prototype.convertCodecs=nA.prototype.convertCodecs,nA.prototype.isSupported=nA.prototype.isSupported,nA.prototype.destroy=nA.prototype.destroy,Yb("audio/ac3",function(){return new nA("audio/ac3")},eE),(D=pA.prototype).destroy=function(){this.g.clear()},D.isSupported=function(n){return"audio/ec3"==n.toLowerCase().split(";")[0]&&Za(this.convertCodecs("audio",n))},D.convertCodecs=function(n,i){return"audio/ec3"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':i},D.getOriginalMimeType=function(){return this.i},D.transmux=function(n,i,r,o){n=hb(n);for(var s=Vh(n),u=s.length;u<n.length&&2935!=(n[u]<<8|n[u+1]<<0);u++);var p=1e3*r.endTime;(s=Uh(s)).length&&r&&(r=s.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(p=r.data),r=0,s=new Uint8Array([]);for(var m=[];u<n.length;){var y=oA(n,u);if(!y)return Promise.reject(new O(2,3,3018));i.audioSamplingRate=y.sampleRate,i.channelsCount=y.channelCount,r=y.sampleRate,s=y.fa,m.push({data:n.subarray(u,u+y.S),size:y.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=y.S}return n=Math.floor(p*r/1e3),o={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:r,duration:o,Ra:[],fa:s,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:n,Oa:m},stream:i},n=new Cu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Iu(n),this.g.set(i.id,o)),i=Zu(n),this.h++,Promise.resolve(i=lg(o,i))},N("shaka.transmuxer.Ec3Transmuxer",pA),pA.prototype.transmux=pA.prototype.transmux,pA.prototype.getOriginalMimeType=pA.prototype.getOriginalMimeType,pA.prototype.convertCodecs=pA.prototype.convertCodecs,pA.prototype.isSupported=pA.prototype.isSupported,pA.prototype.destroy=pA.prototype.destroy,Yb("audio/ec3",function(){return new pA("audio/ec3")},eE);var rD=[100,110,122,244,44,83,86,118,128,138,139,134];function yA(n,i){var r=n[i+1]>>3&3,o=n[i+1]>>1&3,s=n[i+2]>>4&15,u=n[i+2]>>2&3;if(1!==r&&0!==s&&15!==s&&3!==u){var p=n[i+3]>>6;s=1e3*rN[14*(3===r?3-o:3===o?3:4)+s-1],u=rR[3*(3===r?0:2===r?1:2)+u],r=rO[r][o];var m=rP[o],y=Math.floor(r*s/u+(n[i+2]>>1&1))*m,x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(x=x?parseInt(x[1],10):0)&&87>=x&&2===o&&224e3<=s&&0===p&&(n[i+3]|=128),{sampleRate:u,channelCount:3===p?1:2,S:y,Sh:8*r*m}}return null}function DA(n,i){return 255===n[i]&&224==(224&n[i+1])&&0!=(6&n[i+1])}var rN=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],rR=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rO=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],rP=[0,1,1,4];function EA(n){this.i=n,this.h=0,this.g=new Map}function FA(n){this.h=n,this.g=null}function GA(n){this.h=n,(this.g=ib.get("ISOBoxer")())&&function(n){function b(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(n){this._procEntryField(n,"BytesOfClearData","uint",16),this._procEntryField(n,"BytesOfEncryptedData","uint",32)}))})}n.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),n.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),n.g.addBoxProcessor("senc",b),n.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==rL[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),b.call(this))})}(this)}function JA(n,i){for(var r=8,o=0;o<n.boxes.length&&n.boxes[o].type!==i;o++)r+=n.boxes[o].size;return r}(D=EA.prototype).destroy=function(){this.g.clear()},D.isSupported=function(n){return"audio/mpeg"==n.toLowerCase().split(";")[0]&&Za(this.convertCodecs("audio",n))},D.convertCodecs=function(n,i){return"audio/mpeg"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':i},D.getOriginalMimeType=function(){return this.i},D.transmux=function(n,i,r,o){for(r=Vh(n=hb(n)).length;r<n.length;r++){var s,u=r;if(u+1<n.length&&DA(n,u)){var p=yA(n,u),m=4;p&&p.S&&(m=p.S),u+=m,u=u===n.length||u+1<n.length&&DA(n,u)}else u=!1;if(u)break}for(u=[];r<n.length;){if(!(p=yA(n,r)))return Promise.reject(new O(2,3,3018));s||(s=p),r+p.S<=n.length&&u.push({data:n.subarray(r,r+p.S),size:p.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),r+=p.S}return s?(n=9e4*s.Sh/s.sampleRate*this.h,o={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:s.sampleRate,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.h,baseMediaDecodeTime:n,Oa:u},stream:i},s=new Cu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Iu(s),this.g.set(i.id,o)),i=Zu(s),this.h++,Promise.resolve(i=lg(o,i))):Promise.reject(new O(2,3,3018))},N("shaka.transmuxer.Mp3Transmuxer",EA),EA.prototype.transmux=EA.prototype.transmux,EA.prototype.getOriginalMimeType=EA.prototype.getOriginalMimeType,EA.prototype.convertCodecs=EA.prototype.convertCodecs,EA.prototype.isSupported=EA.prototype.isSupported,EA.prototype.destroy=EA.prototype.destroy,Yb("audio/mpeg",function(){return new EA("audio/mpeg")},eE),(D=FA.prototype).destroy=function(){},D.isSupported=function(n){if("video/mp2t"!=n.toLowerCase().split(";")[0])return!1;var i=Oc(n).split(","),r=Bc("audio",i);return i=Bc("video",i),!!r&&!i&&"mp3"==Kc(r)&&Za(this.convertCodecs("audio",n))},D.convertCodecs=function(n,i){return"video/mp2t"==i.toLowerCase().split(";")[0]?"audio/mpeg":i},D.getOriginalMimeType=function(){return this.h},D.transmux=function(n,i,r,o,s){if(this.g?this.g.clearData():this.g=new ni,n=hb(n),"mp3"!=(n=this.g.parse(n)).Pc().audio||"audio"!=s)return Promise.reject(new O(2,3,3018));for(s=new Uint8Array([]),i=(n=t(n.Mb())).next();!i.done;i=n.next())if(i=i.value.data)for(r=0;r<i.length;)(o=yA(i,r))?(r+o.S<=i.length&&(s=lg(s,i.subarray(r,r+o.S))),r+=o.S):r++;return Promise.resolve(s)},N("shaka.transmuxer.MpegTsTransmuxer",FA),FA.prototype.transmux=FA.prototype.transmux,FA.prototype.getOriginalMimeType=FA.prototype.getOriginalMimeType,FA.prototype.convertCodecs=FA.prototype.convertCodecs,FA.prototype.isSupported=FA.prototype.isSupported,FA.prototype.destroy=FA.prototype.destroy,Yb("video/mp2t",function(){return new FA("video/mp2t")},eI),(D=GA.prototype).destroy=function(){},D.isSupported=function(n,i){var r=n.startsWith("mss/");return!!this.g&&!!r&&(i?Za(this.convertCodecs(i,n)):(i=this.convertCodecs("audio",n),n=this.convertCodecs("video",n),Za(i)||Za(n)))},D.convertCodecs=function(n,i){return i.replace("mss/","")},D.getOriginalMimeType=function(){return this.h},D.transmux=function(n,i,r){if(!r)return Promise.resolve(hb(n));if(!i.mssPrivateData)return Promise.reject(new O(2,3,3020));try{var o,s=this.g.parseBuffer(n),u=s.fetch("tfhd");u.track_ID=i.id+1;var p=s.fetch("tfdt"),m=s.fetch("traf");null===p&&((p=this.g.createFullBox("tfdt",m,u)).version=1,p.flags=0,p.baseMediaDecodeTime=Math.floor(r.startTime*i.mssPrivateData.timescale));var y=s.fetch("trun"),x=s.fetch("tfxd");x&&x._parent.boxes.splice(x._parent.boxes.indexOf(x),1);var A=s.fetch("tfrf");A&&A._parent.boxes.splice(A._parent.boxes.indexOf(A),1);var I=s.fetch("sepiff");if(null!==I){I.type="senc",I.usertype=void 0;var M=s.fetch("saio");if(null===M){(M=this.g.createFullBox("saio",m)).version=0,M.flags=0,M.entry_count=1,M.offset=[0];var j=this.g.createFullBox("saiz",m);if(j.version=0,j.flags=0,j.sample_count=I.sample_count,j.default_sample_info_size=0,j.sample_info_size=[],2&I.flags)for(o=0;o<I.sample_count;o+=1)j.sample_info_size[o]=10+6*I.entry[o].NumberOfEntries;else j.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,y.flags|=1;var D=s.fetch("moof");y.data_offset=D.getLength()+8;var R=s.fetch("saio");null!==R&&(R.offset[0]=JA(D,"traf")+JA(m,"senc")+16);var P=hb(s.write());return Promise.resolve(P)}catch(n){return n instanceof O?Promise.reject(n):Promise.reject(new O(2,3,3022))}},N("shaka.transmuxer.MssTransmuxer",GA),GA.prototype.transmux=GA.prototype.transmux,GA.prototype.getOriginalMimeType=GA.prototype.getOriginalMimeType,GA.prototype.convertCodecs=GA.prototype.convertCodecs,GA.prototype.isSupported=GA.prototype.isSupported,GA.prototype.destroy=GA.prototype.destroy;var rL=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function KA(n){this.j=n,this.g=0,this.h=new Map,this.i=null}Yb("mss/audio/mp4",function(){return new GA("mss/audio/mp4")},eE),Yb("mss/video/mp4",function(){return new GA("mss/video/mp4")},eE),(D=KA.prototype).destroy=function(){this.h.clear()},D.isSupported=function(n,i){if("video/mp2t"!=n.toLowerCase().split(";")[0])return!1;var r=n;i&&(r=this.convertCodecs(i,n));var o=Oc(r).split(",");return r=Bc("audio",o),o=Bc("video",o),(!r||!!rU.includes(r=Kc(r)))&&(!o||!!r_.includes(r=Kc(o)))&&(i?Za(this.convertCodecs(i,n)):(i=this.convertCodecs("audio",n),n=this.convertCodecs("video",n),Za(i)||Za(n)))},D.convertCodecs=function(n,i){return"video/mp2t"==i.toLowerCase().split(";")[0]?(i=Oc(i).replace("mp4a.40.34","mp3").split(",").map(this.Sg).join(","),"audio"==n?'audio/mp4; codecs="'+i+'"':'video/mp4; codecs="'+i+'"'):i},D.Sg=function(n){if(n.includes("avc1")){var i=n.split(".");if(3==i.length)return n=i.shift()+"."+parseInt(i.shift(),10).toString(16)+("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}return n},D.getOriginalMimeType=function(){return this.j},D.transmux=function(n,i,r,o,s){this.i?this.i.clearData():this.i=new ni,n=hb(n);var u=this.i.parse(n);n=[];var p=u.Pc();try{var m=null;if("video"==s){switch(p.video){case"avc":var y=[],x=null,A=[],I=u.kc();if(!I.length)throw new O(2,3,3023);for(var M=0;M<I.length;M++){var j=I[M],D=j.nalus;A.push.apply(A,w(D));var R=function(n){var i=!1,r=[],o=n.find(function(n){return 7==n.type}),s=!1;n=t(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var p=!1;switch(u.type){case 1:p=s=!0;var m,y=u.data;o&&4<y.length&&(ki(m=new di(y)),T(m),2===(y=T(m))||4===y||7===y||9===y)&&(i=!0);break;case 5:i=p=s=!0;break;case 6:case 7:case 8:case 12:p=!0;break;case 9:s=p=!0;break;default:p=!1}s&&p&&(p=u.fullData.byteLength,(y=new Uint8Array(4))[0]=p>>24&255,y[1]=p>>16&255,y[2]=p>>8&255,y[3]=255&p,r.push(lg(y,u.fullData)))}return r.length?{data:lg.apply(fg,w(r)),Vc:i}:null}(D);if(R){null==x&&(x=j.dts);var P=void 0;P=M+1<I.length?(I[M+1].dts||0)-(j.dts||0):1<I.length?(j.dts||0)-(I[M-1].dts||0):9e4*(r.endTime-r.startTime),y.push({data:R.data,size:R.data.byteLength,duration:P,Ta:Math.round((j.pts||0)-(j.dts||0)),flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:R.Vc?2:1,Va:R.Vc?0:1}})}}var L=function(n){if(!n.length)return null;var i=n.find(function(n){return 7==n.type});if(n=n.find(function(n){return 8==n.type}),!i||!n)return null;var r=new di(i.data),o=ki(r);if(ki(r),ki(r),ii(r),rD.includes(o)&&(3===(o=T(r))&&fi(r,1),ii(r),ii(r),fi(r,1),U(r))){o=3!==o?8:12;for(var s=0;s<o;s++)U(r)&&(6>s?li(r,16):li(r,64))}if(ii(r),0===(o=T(r)))T(r);else if(1===o)for(fi(r,1),ii(r),ii(r),o=T(r),s=0;s<o;s++)ii(r);ii(r),fi(r,1);var u=T(r),p=T(r),m=gi(r,1);0===m&&fi(r,1),fi(r,1);var y=0,x=0,A=0,I=0;if(U(r)&&(y=T(r),x=T(r),A=T(r),I=T(r)),s=o=1,U(r)&&U(r)){var M=ki(r);0<M&&16>M?(o=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][M-1],s=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][M-1]):255===M&&(o=gi(r,16),s=gi(r,16))}return r=(2-m)*(p+1)*16-2*A-2*I,u=16*(u+1)-2*y-2*x,y=[],i=i.fullData,y.push(i.byteLength>>>8&255),y.push(255&i.byteLength),y=y.concat.apply(y,w(i)),i=[],n=n.fullData,i.push(n.byteLength>>>8&255),i.push(255&n.byteLength),i=i.concat.apply(i,w(n)),{height:r,width:u,la:n=new Uint8Array([1,y[3],y[4],y[5],255,225].concat(y,[1],i)),sa:o,ua:s}}(A);if(!L||null==x)throw new O(2,3,3018);i.height=L.height,i.width=L.width,m={id:i.id,type:"video",codecs:"avc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:o,Ra:[],fa:new Uint8Array([]),la:L.la,sa:L.sa,ua:L.ua,data:{gb:this.g,baseMediaDecodeTime:x,Oa:y},stream:i};break;case"hvc":if(I=[],j=null,D=[],!(y=u.kc()).length)throw new O(2,3,3023);for(R=0;R<y.length;R++){A=(x=y[R]).nalus,D.push.apply(D,w(A)),L=!1;var _=[],B=!1;for(P=(M=t(A)).next();!P.done;P=M.next()){var z=P.value;switch(z.type){case 1:case 0:var q=B=!0;break;case 19:case 20:case 21:L=q=B=!0;break;case 32:case 33:case 34:case 39:case 40:q=!0;break;case 35:B=q=!0;break;default:q=!1}if(B&&q){var V=z.fullData.byteLength,H=new Uint8Array(4);H[0]=V>>24&255,H[1]=V>>16&255,H[2]=V>>8&255,H[3]=255&V,_.push(lg(H,z.fullData))}}var G=_.length?{data:lg.apply(fg,w(_)),Vc:L}:null;G&&(null==j&&null!=x.dts&&(j=x.dts),L=void 0,L=R+1<y.length?(y[R+1].dts||0)-(x.dts||0):1<y.length?(x.dts||0)-(y[R-1].dts||0):9e4*(r.endTime-r.startTime),I.push({data:G.data,size:G.data.byteLength,duration:L,Ta:Math.round((x.pts||0)-(x.dts||0)),flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:G.Vc?2:1,Va:G.Vc?0:1}}))}var X=function(n){if(!n.length)return null;var i,r,o,s,u,p,m,y,x,A,I=n.find(function(n){return 32==n.type}),M=n.find(function(n){return 33==n.type}),j=n.find(function(n){return 34==n.type});if(!I||!M||!j)return null;var D=(i=I.fullData,r=new di(i,!0),ki(r),ki(r),gi(r,4),gi(r,2),gi(r,6),{Ze:(i=gi(r,3))+1,uf:r=U(r)});n=function(n){ki(n=new di(n,!0)),ki(n);var i=0,r=0,o=0,s=0;gi(n,4);var u=gi(n,3);U(n);for(var p=gi(n,2),m=gi(n,1),y=gi(n,5),x=ki(n),A=ki(n),I=ki(n),M=ki(n),j=ki(n),D=ki(n),R=ki(n),P=ki(n),L=ki(n),_=ki(n),B=ki(n),z=[],q=[],V=0;V<u;V++)z.push(U(n)),q.push(U(n));if(0<u)for(V=u;8>V;V++)gi(n,2);for(V=0;V<u;V++)z[V]&&gi(n,88),q[V]&&ki(n);T(n),3==(z=T(n))&&gi(n,1),q=T(n),V=T(n),U(n)&&(i+=T(n),r+=T(n),o+=T(n),s+=T(n));var H=T(n),G=T(n),X=T(n);if(U(n))for(var J=0;J<=u;J++)T(n),T(n),T(n);else T(n),T(n),T(n);if(T(n),T(n),T(n),T(n),T(n),T(n),U(n)&&U(n))for(J=0;4>J;J++)for(var $=0;$<(3===J?2:6);$++)if(U(n)){var ee=Math.min(64,1<<4+(J<<1));1<J&&ji(n);for(var en=0;en<ee;en++)ji(n)}else T(n);for(U(n),U(n),U(n)&&(ki(n),T(n),T(n),U(n)),J=T(n),ee=$=0;ee<J;ee++)if(en=!1,0!==ee&&(en=U(n)),en){ee===J&&T(n),U(n),T(n);for(var ea=en=0;ea<=$;ea++){var eo=U(n),eu=!1;eo||(eu=U(n)),(eo||eu)&&en++}$=en}else{for(eo=0,$=(ea=T(n))+(en=T(n));eo<ea;eo++)T(n),U(n);for(ea=0;ea<en;ea++)T(n),U(n)}if(U(n))for(J=T(n),$=0;$<J;$++){for(ee=0;ee<X+4;ee++)gi(n,1);gi(n,1)}if(J=X=1,$=0,U(n),U(n),U(n)){if(U(n)&&(ee=ki(n),en=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ea=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<ee&&16>ee?(X=en[ee-1],J=ea[ee-1]):255===ee&&(X=gi(n,16),J=gi(n,16))),U(n)&&U(n),U(n)&&(gi(n,3),U(n),U(n)&&(ki(n),ki(n),ki(n))),U(n)&&(T(n),T(n)),U(n),U(n),U(n),(ee=U(n))&&(T(n),T(n),T(n),T(n)),U(n)&&(gi(n,32),gi(n,32),U(n)&&T(n),U(n)))for(ea=!1,ee=U(n),en=U(n),(ee||en)&&((ea=U(n))&&(ki(n),gi(n,5),U(n),gi(n,5)),gi(n,4),gi(n,4),ea&&gi(n,4),gi(n,5),gi(n,5),gi(n,5)),eo=0;eo<=u;eo++){var ec=!0;eu=1,U(n)||(ec=U(n));var ep=!1;if(ec?T(n):ep=U(n),ep||(eu=T(n)+1),ee||en){for(ec=0;ec<eu;ec++)T(n),T(n),ea&&(T(n),T(n));U(n)}}U(n)&&(U(n),U(n),U(n),$=T(n),T(n),T(n),T(n),T(n))}return{xe:B,De:p,Ee:m,Ce:y,ye:x,ze:A,Ae:I,Be:M,re:j,se:D,te:R,ue:P,ve:L,we:_,Rd:$,oe:0,ne:z,me:H,le:G,width:q-(i+r)*(1===z||2===z?2:1),height:V-(o+s)*(1===z?2:1),Uh:X,Th:J}}(M.fullData);var R=(o=j.fullData,s=new di(o,!0),ki(s),ki(s),T(s),T(s),U(s),U(s),gi(s,3),U(s),U(s),T(s),T(s),ji(s),U(s),U(s),U(s)&&T(s),ji(s),ji(s),U(s),U(s),U(s),U(s),o=U(s),s=U(s),u=1,s&&o?u=0:s?u=3:o&&(u=2),{bf:u});return p=I.fullData,m=M.fullData,y=j.fullData,x={Ze:D.Ze,uf:D.uf,De:n.De,Ee:n.Ee,xe:n.xe,Ce:n.Ce,ye:n.ye,ze:n.ze,Ae:n.Ae,Be:n.Be,re:n.re,se:n.se,te:n.te,ue:n.ue,ve:n.ve,we:n.we,oe:n.oe,Rd:n.Rd,ne:n.ne,me:n.me,le:n.le,bf:R.bf},(A=new Uint8Array(23+(5+p.byteLength)+(5+m.byteLength)+(5+y.byteLength)))[0]=1,A[1]=(3&x.De)<<6|(x.Ee?1:0)<<5|31&x.Ce,A[2]=x.ye,A[3]=x.ze,A[4]=x.Ae,A[5]=x.Be,A[6]=x.re,A[7]=x.se,A[8]=x.te,A[9]=x.ue,A[10]=x.ve,A[11]=x.we,A[12]=x.xe,A[13]=240|(3840&x.Rd)>>8,A[14]=255&x.Rd,A[15]=252|3&x.bf,A[16]=252|3&x.ne,A[17]=248|7&x.me,A[18]=248|7&x.le,A[19]=0,A[20]=0,A[21]=(3&x.oe)<<6|(7&x.Ze)<<3|(x.uf?1:0)<<2|3,A[22]=3,A[23]=160,A[24]=0,A[25]=1,A[26]=(65280&p.byteLength)>>8,A[27]=(255&p.byteLength)>>0,A.set(p,28),A[23+(5+p.byteLength)]=161,A[p.byteLength+29]=0,A[p.byteLength+30]=1,A[p.byteLength+31]=(65280&m.byteLength)>>8,A[p.byteLength+32]=(255&m.byteLength)>>0,A.set(m,p.byteLength+33),A[23+(p.byteLength+10+m.byteLength)]=162,A[p.byteLength+10+m.byteLength+24]=0,A[p.byteLength+10+m.byteLength+25]=1,A[p.byteLength+10+m.byteLength+26]=(65280&y.byteLength)>>8,A[p.byteLength+10+m.byteLength+27]=(255&y.byteLength)>>0,A.set(y,p.byteLength+10+m.byteLength+28),I=A,{height:n.height,width:n.width,la:I,sa:n.Uh,ua:n.Th}}(D);if(!X||null==j)throw new O(2,3,3018);i.height=X.height,i.width=X.width,m={id:i.id,type:"video",codecs:"hvc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:o,Ra:[],fa:new Uint8Array([]),la:X.la,sa:X.sa,ua:X.ua,data:{gb:this.g,baseMediaDecodeTime:j,Oa:I},stream:i}}m&&(n.push(m),m=null)}if("audio"==s){switch(p.audio){case"aac":for(var J,$=[],ee=null,en=t(u.Mb()),ea=en.next();!ea.done;ea=en.next()){var eo=ea.value,eu=eo.data;if(eu){var ec=0;if(!(J=hA(eu,ec)))throw new O(2,3,3018);for(i.audioSamplingRate=J.sampleRate,i.channelsCount=J.channelCount,null==ee&&null!==eo.pts&&(ee=eo.pts);ec<eu.length;){var ep=gA(eu,ec);if(ep){var em=ep.Hd+ep.S;ec+em<=eu.length&&$.push({data:eu.subarray(ec+ep.Hd,ec+em),size:ep.S,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),ec+=em}else ec++}}}if(!J||null==ee){if(!u.kc().length)throw new O(2,3,3018);ee=9e4*r.startTime;var ev=Bc("audio",i.codecs.split(","));if(!ev||!i.channelsCount||!i.audioSamplingRate)throw new O(2,3,3018);J={sampleRate:i.audioSamplingRate,channelCount:i.channelsCount,ha:ev};var ew=function(n,i){if("mp4a.40.2"===n){if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i||3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(ev,i.channelsCount);if(!ew)throw new O(2,3,3018);var ex=ee+9e4*(r.endTime-r.startTime);for(u=ee;u<ex;)$.push({data:ew,size:ew.byteLength,duration:1024,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=1024/J.sampleRate*9e4}var eT=J.sampleRate;u=ee/9e4*eT,m={id:i.id,type:"audio",codecs:J.ha,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:eT,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:$},stream:i};break;case"ac3":J=[],eT=0,$=new Uint8Array([]),ee=null,ec=t(u.Mb());for(var eS=ec.next();!eS.done;eS=ec.next()){var eC=eS.value,ek=eC.data;for(null==ee&&null!==eC.pts&&(ee=eC.pts),u=0;u<ek.length;){var eE=lA(ek,u);eE?(i.audioSamplingRate=eE.sampleRate,i.channelsCount=eE.channelCount,eT=eE.sampleRate,$=eE.fa,J.push({data:ek.subarray(u,u+eE.S),size:eE.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=eE.S):u++}}if(0==eT||0==$.byteLength||null==ee)throw new O(2,3,3018);u=ee/9e4*eT,m={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:eT,duration:o,Ra:[],fa:$,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:J},stream:i};break;case"ec3":J=[],eT=0,ee=new Uint8Array([]),$=null;for(var eI=t(u.Mb()),eM=eI.next();!eM.done;eM=eI.next()){var eD=eM.value,eN=eD.data;for(null==$&&null!==eD.pts&&($=eD.pts),u=0;u<eN.length;){var eR=oA(eN,u);eR?(i.audioSamplingRate=eR.sampleRate,i.channelsCount=eR.channelCount,eT=eR.sampleRate,ee=eR.fa,J.push({data:eN.subarray(u,u+eR.S),size:eR.S,duration:1536,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=eR.S):u++}}if(0==eT||0==ee.byteLength||null==$)throw new O(2,3,3018);u=$/9e4*eT,m={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:eT,duration:o,Ra:[],fa:ee,la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:J},stream:i};break;case"mp3":J=[],eT=null;for(var eO,eP=t(u.Mb()),eL=eP.next();!eL.done;eL=eP.next()){var eU=eL.value,e_=eU.data;if(e_)for(null==eT&&null!==eU.pts&&(eT=eU.pts),u=0;u<e_.length;){var eK=yA(e_,u);eK?(eO||(eO=eK),u+eK.S<=e_.length&&J.push({data:e_.subarray(u,u+eK.S),size:eK.S,duration:1152,Ta:0,flags:{Ua:0,La:0,Ja:0,Ha:0,Ia:2,Va:0}}),u+=eK.S):u++}}if(!eO||null==eT)throw new O(2,3,3018);var eF=eO.sampleRate;u=eT/9e4*eF,m={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:eF,duration:o,Ra:[],fa:new Uint8Array([]),la:new Uint8Array([]),sa:0,ua:0,data:{gb:this.g,baseMediaDecodeTime:u,Oa:J},stream:i}}m&&n.push(m)}}catch(n){return n&&3023==n.code?Promise.resolve(new Uint8Array([])):Promise.reject(n)}return n.length?(n=new Cu(n),this.h.has(i.id)?o=this.h.get(i.id):(o=Iu(n),this.h.set(i.id,o)),i=Zu(n),this.g++,Promise.resolve(i=lg(o,i))):Promise.reject(new O(2,3,3018))},N("shaka.transmuxer.TsTransmuxer",KA),KA.prototype.transmux=KA.prototype.transmux,KA.prototype.getOriginalMimeType=KA.prototype.getOriginalMimeType,KA.prototype.convertCodecs=KA.prototype.convertCodecs,KA.prototype.isSupported=KA.prototype.isSupported,KA.prototype.destroy=KA.prototype.destroy;var rU=["aac","ac-3","ec-3","mp3"],r_=["avc","hevc"];function NA(){}function PA(){A?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(A=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=QA):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function QA(n,i){var r,o=this;return K(function(s){return 1==s.g?(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),C(s,A.call(o,n,i),2)):RA(r=s.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=A,s.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=SA,s.return(SA.call(o,n,i)))})}function SA(n,i){var r,o,s,u,p,m,y,x,I,M,j=this;return K(function(D){if(1==D.g){for(console.assert(j==navigator,'bad "this" for requestMediaKeySystemAccess'),r=TA(n),o=[],u=(s=t(i)).next();!u.done;u=s.next())m=UA((p=u.value).videoCapabilities,r),y=UA(p.audioCapabilities,r),p.videoCapabilities&&p.videoCapabilities.length&&!m.length||p.audioCapabilities&&p.audioCapabilities.length&&!y.length||((x=Object.assign({},p)).videoCapabilities=m,x.audioCapabilities=y,o.push(x));if(!o.length)throw(I=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",I.code=DOMException.NOT_SUPPORTED_ERR,I;return C(D,A.call(j,n,o),2)}return M=D.h,D.return(new VA(M,r))})}function UA(n,i){return n?n.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==i}):n}function WA(){}function YA(){I?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(I=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ZA):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ZA(n){var i,r,o,s=this;return K(function(u){switch(u.g){case 1:return console.assert(s==navigator.mediaCapabilities,'bad "this" for decodingInfo'),C(u,I.call(s,n),2);case 2:if(i=u.h,!n.keySystemConfiguration)return u.return(i);if((r=i.keySystemAccess)&&RA(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=I,u.return(i);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=$A,r){u.B(3);break}return o=i,C(u,aB(n),4);case 4:return o.keySystemAccess=u.h,u.return(i);case 3:return u.return($A.call(s,n))}})}function $A(n){var i,r,o,s,u,p,m,y,x=this;return K(function(A){switch(A.g){case 1:return console.assert(x==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=null,n.keySystemConfiguration&&(o=(r=n.keySystemConfiguration).keySystem,s=r.audio&&r.audio.encryptionScheme,u=r.video&&r.video.encryptionScheme,i=TA(o),p={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:n},s&&s!=i||u&&u!=i)?A.return(p):C(A,I.call(x,n),2);case 2:if((m=A.h).keySystemAccess){m.keySystemAccess=new VA(m.keySystemAccess,i),A.B(3);break}if(!n.keySystemConfiguration){A.B(3);break}return y=m,C(A,aB(n),5);case 5:y.keySystemAccess=A.h;case 3:return A.return(m)}})}function aB(n){var i,r;return K(function(o){if(1==o.g){var s=n.keySystemConfiguration,u=[],p=[];return s.audio&&u.push({robustness:s.audio.robustness||"",contentType:n.audio.contentType}),s.video&&p.push({robustness:s.video.robustness||"",contentType:n.video.contentType}),s={initDataTypes:s.initDataType?[s.initDataType]:[],distinctiveIdentifier:s.distinctiveIdentifier,persistentState:s.persistentState,sessionTypes:s.sessionTypes},u.length&&(s.audioCapabilities=u),p.length&&(s.videoCapabilities=p),i=s,C(o,navigator.requestMediaKeySystemAccess(n.keySystemConfiguration.keySystem,[i]),2)}return r=o.h,o.return(r)})}function VA(n,i){this.h=n,this.g=i,this.keySystem=n.keySystem}function TA(n){return n.startsWith("com.widevine")||n.startsWith("com.microsoft")||n.startsWith("com.chromecast")||n.startsWith("com.adobe")||n.startsWith("org.w3")?"cenc":n.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",n,"Please contribute!"),null)}function RA(n){var i=(n=n.getConfiguration()).audioCapabilities&&n.audioCapabilities[0];return!!(n=n.videoCapabilities&&n.videoCapabilities[0]||i)&&void 0!==n.encryptionScheme}function bB(){}function yx(){PA(),YA()}Yb("video/mp2t",function(){return new KA("video/mp2t")},eM),N("EmeEncryptionSchemePolyfill",NA),NA.install=PA,N("McEncryptionSchemePolyfill",WA),WA.install=YA,VA.prototype.getConfiguration=function(){var n=this.h.getConfiguration();if(n.videoCapabilities)for(var i=t(n.videoCapabilities),r=i.next();!r.done;r=i.next())r.value.encryptionScheme=this.g;if(n.audioCapabilities)for(r=(i=t(n.audioCapabilities)).next();!r.done;r=i.next())r.value.encryptionScheme=this.g;return n},VA.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},N("EncryptionSchemePolyfills",bB),bB.install=yx,void 0!==r&&r.exports&&(r.exports=bB)}).call(o,n,n,void 0),o.shaka)i[s]=o.shaka[s]}()}}]);