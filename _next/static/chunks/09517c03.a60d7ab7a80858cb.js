(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8675],{50857:function(n,i,r){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/!function(){var n="undefined"!=typeof window?window:r.g,o={};for(var s in(function(n,i,r){function ba(n){var i=0;return function(){return i<n.length?{done:!1,value:n[i++]}:{done:!0}}}var o,s,u,p,y,A,T,x,C,I="function"==typeof Object.defineProperties?Object.defineProperty:function(n,i,r){return n==Array.prototype||n==Object.prototype||(n[i]=r.value),n},M=function(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof n&&n,"object"==typeof self&&self,"object"==typeof i&&i];for(var o=0;o<r.length;++o){var s=r[o];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}(this);function ha(n,i){if(i)e:{var r=M;n=n.split(".");for(var o=0;o<n.length-1;o++){var s=n[o];if(!(s in r))break e;r=r[s]}(i=i(o=r[n=n[n.length-1]]))!=o&&null!=i&&I(r,n,{configurable:!0,writable:!0,value:i})}}function ia(n){return(n={next:n})[Symbol.iterator]=function(){return this},n}function t(n){var i="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return i?i.call(n):{next:ba(n)}}function w(n){if(!(n instanceof Array)){n=t(n);for(var i,r=[];!(i=n.next()).done;)r.push(i.value);n=r}return n}ha("Symbol",function(n){function c(n,i){this.g=n,I(this,"description",{configurable:!0,writable:!0,value:i})}if(n)return n;c.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function b(n){if(this instanceof b)throw TypeError("Symbol is not a constructor");return new c(i+(n||"")+"_"+r++,n)}}),ha("Symbol.iterator",function(n){if(n)return n;n=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<i.length;r++){var o=M[i[r]];"function"==typeof o&&"function"!=typeof o.prototype[n]&&I(o.prototype,n,{configurable:!0,writable:!0,value:function(){return ia(ba(this))}})}return n});var N,_,j="function"==typeof Object.create?Object.create:function(n){function b(){}return b.prototype=n,new b};if("function"==typeof Object.setPrototypeOf)_=Object.setPrototypeOf;else{e:{var B={};try{B.__proto__={a:!0},o=B.a;break e}catch(n){}o=!1}_=o?function(n,i){if(n.__proto__=i,n.__proto__!==i)throw TypeError(n+" is not extensible");return n}:null}var z=_;function pa(n,i){if(n.prototype=j(i.prototype),n.prototype.constructor=n,z)z(n,i);else for(var r in i)if("prototype"!=r){if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(n,r,o)}else n[r]=i[r]}n.Bk=i.prototype}function qa(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function ra(n){if(n.s)throw TypeError("Generator is already running");n.s=!0}function sa(n,i){n.i={Qg:i,$g:!0},n.g=n.m||n.j}function D(n,i,r){return n.g=r,{value:i}}function F(n){n.g=0}function ta(n,i,r){n.m=i,void 0!=r&&(n.j=r)}function ua(n,i){n.m=0,n.j=i||0}function va(n,i,r){n.g=i,n.m=r||0}function wa(n,i){return n.m=i||0,i=n.i.Qg,n.i=null,i}function xa(n){n.C=[n.i],n.m=0,n.j=0}function ya(n,i){var r=n.C.splice(0)[0];(r=n.i=n.i||r)?r.$g?n.g=n.m||n.j:void 0!=r.F&&n.j<r.F?(n.g=r.F,n.i=null):n.g=n.j:n.g=i}function za(n){this.g=new qa,this.h=n}function Ba(n,i,r,o){try{var s=i.call(n.g.l,r);if(!(s instanceof Object))throw TypeError("Iterator result "+s+" is not an object");if(!s.done)return n.g.s=!1,s;var u=s.value}catch(i){return n.g.l=null,sa(n.g,i),Da(n)}return n.g.l=null,o.call(n.g,u),Da(n)}function Da(n){for(;n.g.g;)try{var i=n.h(n.g);if(i)return n.g.s=!1,{value:i.value,done:!1}}catch(i){n.g.h=void 0,sa(n.g,i)}if(n.g.s=!1,n.g.i){if(i=n.g.i,n.g.i=null,i.$g)throw i.Qg;return{value:i.return,done:!0}}return{value:void 0,done:!0}}function Ea(n){this.next=function(i){return ra(n.g),n.g.l?i=Ba(n,n.g.l.next,i,n.g.u):(n.g.u(i),i=Da(n)),i},this.throw=function(i){return ra(n.g),n.g.l?i=Ba(n,n.g.l.throw,i,n.g.u):(sa(n.g,i),i=Da(n)),i},this.return=function(i){var r;return ra(n.g),(r=n.g.l)?Ba(n,"return"in r?r.return:function(n){return{value:n,done:!0}},i,n.g.return):(n.g.return(i),Da(n))},this[Symbol.iterator]=function(){return this}}function K(n){return function(n){function b(i){return n.next(i)}function c(i){return n.throw(i)}return new Promise(function(i,r){!function f(n){n.done?i(n.value):Promise.resolve(n.value).then(b,c).then(f,r)}(n.next())})}(new Ea(new za(n)))}function Ga(){for(var n=Number(this),i=[],r=n;r<arguments.length;r++)i[r-n]=arguments[r];return i}function Ha(n,i){return Object.prototype.hasOwnProperty.call(n,i)}function Ia(n,i){n instanceof String&&(n+="");var r=0,o=!1,s={next:function(){if(!o&&r<n.length){var s=r++;return{value:i(s,n[s]),done:!1}}return o=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}function Ja(n,i,r){n instanceof String&&(n=String(n));for(var o=n.length,s=0;s<o;s++){var u=n[s];if(i.call(r,u,s,n))return{Xg:s,v:u}}return{Xg:-1,v:void 0}}function Ka(n,i,r){if(null==n)throw TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(i instanceof RegExp)throw TypeError("First argument to String.prototype."+r+" must not be a regular expression");return n+""}qa.prototype.u=function(n){this.h=n},qa.prototype.return=function(n){this.i={return:n},this.g=this.j},qa.prototype.F=function(n){this.g=n},ha("Promise",function(n){function b(n){this.h=0,this.i=void 0,this.g=[],this.s=!1;var i=this.j();try{n(i.resolve,i.reject)}catch(n){i.reject(n)}}function c(){this.g=null}function d(n){return n instanceof b?n:new b(function(i){i(n)})}if(n)return n;c.prototype.h=function(n){if(null==this.g){this.g=[];var i=this;this.i(function(){i.l()})}this.g.push(n)};var i=M.setTimeout;c.prototype.i=function(n){i(n,0)},c.prototype.l=function(){for(;this.g&&this.g.length;){var n=this.g;this.g=[];for(var i=0;i<n.length;++i){var r=n[i];n[i]=null;try{r()}catch(n){this.j(n)}}}this.g=null},c.prototype.j=function(n){this.i(function(){throw n})},b.prototype.j=function(){function g(r){return function(o){i||(i=!0,r.call(n,o))}}var n=this,i=!1;return{resolve:g(this.H),reject:g(this.l)}},b.prototype.H=function(n){if(n===this)this.l(TypeError("A Promise cannot resolve to itself"));else if(n instanceof b)this.J(n);else{switch(typeof n){case"object":var i=null!=n;break;case"function":i=!0;break;default:i=!1}i?this.G(n):this.m(n)}},b.prototype.G=function(n){var i=void 0;try{i=n.then}catch(n){this.l(n);return}"function"==typeof i?this.K(i,n):this.m(n)},b.prototype.l=function(n){this.u(2,n)},b.prototype.m=function(n){this.u(1,n)},b.prototype.u=function(n,i){if(0!=this.h)throw Error("Cannot settle("+n+", "+i+"): Promise already settled in state"+this.h);this.h=n,this.i=i,2===this.h&&this.I(),this.C()},b.prototype.I=function(){var n=this;i(function(){if(n.D()){var i=M.console;void 0!==i&&i.error(n.i)}},1)},b.prototype.D=function(){if(this.s)return!1;var n=M.CustomEvent,i=M.Event,r=M.dispatchEvent;return void 0===r||("function"==typeof n?n=new n("unhandledrejection",{cancelable:!0}):"function"==typeof i?n=new i("unhandledrejection",{cancelable:!0}):(n=M.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,n),n.promise=this,n.reason=this.i,r(n))},b.prototype.C=function(){if(null!=this.g){for(var n=0;n<this.g.length;++n)r.h(this.g[n]);this.g=null}};var r=new c;return b.prototype.J=function(n){var i=this.j();n.Zd(i.resolve,i.reject)},b.prototype.K=function(n,i){var r=this.j();try{n.call(i,r.resolve,r.reject)}catch(n){r.reject(n)}},b.prototype.then=function(n,i){function k(n,i){return"function"==typeof n?function(i){try{r(n(i))}catch(n){o(n)}}:i}var r,o,s=new b(function(n,i){r=n,o=i});return this.Zd(k(n,r),k(i,o)),s},b.prototype.catch=function(n){return this.then(void 0,n)},b.prototype.Zd=function(n,i){function k(){switch(o.h){case 1:n(o.i);break;case 2:i(o.i);break;default:throw Error("Unexpected state: "+o.h)}}var o=this;null==this.g?r.h(k):this.g.push(k),this.s=!0},b.resolve=d,b.reject=function(n){return new b(function(i,r){r(n)})},b.race=function(n){return new b(function(i,r){for(var o=t(n),s=o.next();!s.done;s=o.next())d(s.value).Zd(i,r)})},b.all=function(n){var i=t(n),r=i.next();return r.done?d([]):new b(function(n,o){var s=[],u=0;do s.push(void 0),u++,d(r.value).Zd(function(i){return function(r){s[i]=r,0==--u&&n(s)}}(s.length-1),o),r=i.next();while(!r.done)})},b}),ha("WeakMap",function(n){function b(n){if(this.g=(r+=Math.random()+1).toString(),n){n=t(n);for(var i;!(i=n.next()).done;)i=i.value,this.set(i[0],i[1])}}function c(){}function d(n){var i=typeof n;return"object"===i&&null!==n||"function"===i}function e(n){Ha(n,i)||I(n,i,{value:new c})}function f(n){var i=Object[n];i&&(Object[n]=function(n){return n instanceof c?n:(Object.isExtensible(n)&&e(n),i(n))})}if(function(){if(!n||!Object.seal)return!1;try{var i=Object.seal({}),r=Object.seal({}),o=new n([[i,2],[r,3]]);if(2!=o.get(i)||3!=o.get(r))return!1;return o.delete(i),o.set(r,4),!o.has(i)&&4==o.get(r)}catch(n){return!1}}())return n;var i="$jscomp_hidden_"+Math.random();f("freeze"),f("preventExtensions"),f("seal");var r=0;return b.prototype.set=function(n,r){if(!d(n))throw Error("Invalid WeakMap key");if(e(n),!Ha(n,i))throw Error("WeakMap key fail: "+n);return n[i][this.g]=r,this},b.prototype.get=function(n){return d(n)&&Ha(n,i)?n[i][this.g]:void 0},b.prototype.has=function(n){return d(n)&&Ha(n,i)&&Ha(n[i],this.g)},b.prototype.delete=function(n){return!!(d(n)&&Ha(n,i)&&Ha(n[i],this.g))&&delete n[i][this.g]},b}),ha("Map",function(n){function b(){var n={};return n.Rb=n.next=n.head=n}function c(n,i){var r=n.g;return ia(function(){if(r){for(;r.head!=n.g;)r=r.Rb;for(;r.next!=r.head;)return{done:!1,value:i(r=r.next)};r=null}return{done:!0,value:void 0}})}function d(n,o){var s=o&&typeof o;"object"==s||"function"==s?i.has(o)?s=i.get(o):(s=""+ ++r,i.set(o,s)):s="p_"+o;var u=n.h[s];if(u&&Ha(n.h,s))for(n=0;n<u.length;n++){var p=u[n];if(o!=o&&p.key!=p.key||o===p.key)return{id:s,list:u,index:n,entry:p}}return{id:s,list:u,index:-1,entry:void 0}}function e(n){if(this.h={},this.g=b(),this.size=0,n){n=t(n);for(var i;!(i=n.next()).done;)i=i.value,this.set(i[0],i[1])}}if(function(){if(!n||"function"!=typeof n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),r=new n(t([[i,"s"]]));if("s"!=r.get(i)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var o=r.entries(),s=o.next();if(s.done||s.value[0]!=i||"s"!=s.value[1])return!1;return!(s=o.next()).done&&4==s.value[0].x&&"t"==s.value[1]&&!!o.next().done}catch(n){return!1}}())return n;var i=new WeakMap;e.prototype.set=function(n,i){var r=d(this,n=0===n?0:n);return r.list||(r.list=this.h[r.id]=[]),r.entry?r.entry.value=i:(r.entry={next:this.g,Rb:this.g.Rb,head:this.g,key:n,value:i},r.list.push(r.entry),this.g.Rb.next=r.entry,this.g.Rb=r.entry,this.size++),this},e.prototype.delete=function(n){return!!(n=d(this,n)).entry&&!!n.list&&(n.list.splice(n.index,1),n.list.length||delete this.h[n.id],n.entry.Rb.next=n.entry.next,n.entry.next.Rb=n.entry.Rb,n.entry.head=null,this.size--,!0)},e.prototype.clear=function(){this.h={},this.g=this.g.Rb=b(),this.size=0},e.prototype.has=function(n){return!!d(this,n).entry},e.prototype.get=function(n){return(n=d(this,n).entry)&&n.value},e.prototype.entries=function(){return c(this,function(n){return[n.key,n.value]})},e.prototype.keys=function(){return c(this,function(n){return n.key})},e.prototype.values=function(){return c(this,function(n){return n.value})},e.prototype.forEach=function(n,i){for(var r,o=this.entries();!(r=o.next()).done;)r=r.value,n.call(i,r[1],r[0],this)},e.prototype[Symbol.iterator]=e.prototype.entries;var r=0;return e}),ha("Array.prototype.keys",function(n){return n||function(){return Ia(this,function(n){return n})}}),ha("Set",function(n){function b(n){if(this.g=new Map,n){n=t(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return!function(){if(!n||"function"!=typeof n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var i=Object.seal({x:4}),r=new n(t([i]));if(!r.has(i)||1!=r.size||r.add(i)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var o=r.entries(),s=o.next();if(s.done||s.value[0]!=i||s.value[1]!=i)return!1;return!(s=o.next()).done&&s.value[0]!=i&&4==s.value[0].x&&s.value[1]==s.value[0]&&o.next().done}catch(n){return!1}}()?(b.prototype.add=function(n){return n=0===n?0:n,this.g.set(n,n),this.size=this.g.size,this},b.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},b.prototype.clear=function(){this.g.clear(),this.size=0},b.prototype.has=function(n){return this.g.has(n)},b.prototype.entries=function(){return this.g.entries()},b.prototype.values=function(){return this.g.values()},b.prototype.keys=b.prototype.values,b.prototype[Symbol.iterator]=b.prototype.values,b.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},b):n}),ha("Array.from",function(n){return n||function(n,i,r){i=null!=i?i:function(n){return n};var o=[],s="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];if("function"==typeof s){n=s.call(n);for(var u=0;!(s=n.next()).done;)o.push(i.call(r,s.value,u++))}else for(s=n.length,u=0;u<s;u++)o.push(i.call(r,n[u],u));return o}}),ha("Array.prototype.findIndex",function(n){return n||function(n,i){return Ja(this,n,i).Xg}}),ha("Object.is",function(n){return n||function(n,i){return n===i?0!==n||1/n==1/i:n!=n&&i!=i}}),ha("Array.prototype.includes",function(n){return n||function(n,i){var r=this;r instanceof String&&(r=String(r));var o=r.length;for(0>(i=i||0)&&(i=Math.max(i+o,0));i<o;i++){var s=r[i];if(s===n||Object.is(s,n))return!0}return!1}}),ha("String.prototype.includes",function(n){return n||function(n,i){return -1!==Ka(this,n,"includes").indexOf(n,i||0)}}),ha("Array.prototype.find",function(n){return n||function(n,i){return Ja(this,n,i).v}}),ha("String.prototype.startsWith",function(n){return n||function(n,i){var r=Ka(this,n,"startsWith"),o=r.length,s=n.length;i=Math.max(0,Math.min(0|i,r.length));for(var u=0;u<s&&i<o;)if(r[i++]!=n[u++])return!1;return u>=s}}),ha("WeakSet",function(n){function b(n){if(this.g=new WeakMap,n){n=t(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return!function(){if(!n||!Object.seal)return!1;try{var i=Object.seal({}),r=Object.seal({}),o=new n([i]);if(!o.has(i)||o.has(r))return!1;return o.delete(i),o.add(r),!o.has(i)&&o.has(r)}catch(n){return!1}}()?(b.prototype.add=function(n){return this.g.set(n,!0),this},b.prototype.has=function(n){return this.g.has(n)},b.prototype.delete=function(n){return this.g.delete(n)},b):n});var G="function"==typeof Object.assign?Object.assign:function(n,i){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o)for(var s in o)Ha(o,s)&&(n[s]=o[s])}return n};ha("Object.assign",function(n){return n||G}),ha("Array.prototype.values",function(n){return n||function(){return Ia(this,function(n,i){return i})}}),ha("Promise.prototype.finally",function(n){return n||function(n){return this.then(function(i){return Promise.resolve(n()).then(function(){return i})},function(i){return Promise.resolve(n()).then(function(){throw i})})}}),ha("Array.prototype.entries",function(n){return n||function(){return Ia(this,function(n,i){return[n,i]})}}),ha("String.prototype.repeat",function(n){return n||function(n){var i=Ka(this,null,"repeat");if(0>n||1342177279<n)throw RangeError("Invalid count value");n|=0;for(var r="";n;)1&n&&(r+=i),(n>>>=1)&&(i+=i);return r}}),ha("Number.isNaN",function(n){return n||function(n){return"number"==typeof n&&isNaN(n)}}),ha("Number.isFinite",function(n){return n||function(n){return"number"==typeof n&&!isNaN(n)&&1/0!==n&&-1/0!==n}}),ha("Object.values",function(n){return n||function(n){var i,r=[];for(i in n)Ha(n,i)&&r.push(n[i]);return r}}),ha("Math.log2",function(n){return n||function(n){return Math.log(n)/Math.LN2}}),ha("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),ha("Math.trunc",function(n){return n||function(n){if(isNaN(n=Number(n))||1/0===n||-1/0===n||0===n)return n;var i=Math.floor(Math.abs(n));return 0>n?-i:i}}),ha("Object.entries",function(n){return n||function(n){var i,r=[];for(i in n)Ha(n,i)&&r.push([i,n[i]]);return r}});var H=this||self;function L(n,i){n=n.split(".");var r,o=H;for((n[0]in o)||void 0===o.execScript||o.execScript("var "+n[0]);n.length&&(r=n.shift());)n.length||void 0===i?o=o[r]&&o[r]!==Object.prototype[r]?o[r]:o[r]={}:o[r]=i}function O(i,r){if(r){if(r instanceof Map)for(var o=t(r.keys()),s=o.next();!s.done;s=o.next())Object.defineProperty(this,s=s.value,{value:r.get(s),writable:!0,enumerable:!0});else for(o in r)Object.defineProperty(this,o,{value:r[o],writable:!0,enumerable:!0})}this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=n.performance&&n.performance.now?n.performance.now():Date.now(),this.type=i,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Na(n){var i,r=new O(n.type);for(i in n)Object.defineProperty(r,i,{value:n[i],writable:!0,enumerable:!0});return r}O.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},O.prototype.stopImmediatePropagation=function(){this.g=!0},O.prototype.stopPropagation=function(){},L("shaka.util.FakeEvent",O);var q={Aj:"abrstatuschanged",Bj:"adaptation",Cj:"buffering",Dj:"complete",Ej:"downloadfailed",Fj:"downloadheadersreceived",Gj:"drmsessionupdate",Ij:"emsg",Yj:"prft",Error:"error",Jj:"expirationupdated",Kj:"firstquartile",Lj:"gapjumped",Oj:"keystatuschanged",Qj:"loaded",Rj:"loading",Tj:"manifestparsed",Uj:"manifestupdated",Vj:"mediaqualitychanged",Metadata:"metadata",Wj:"midpoint",Xj:"onstatechange",$j:"ratechange",bk:"segmentappended",ck:"sessiondata",dk:"stalldetected",ek:"started",fk:"statechanged",gk:"streaming",hk:"textchanged",ik:"texttrackvisibility",jk:"thirdquartile",kk:"timelineregionadded",lk:"timelineregionenter",nk:"timelineregionexit",pk:"trackschanged",rk:"unloading",vk:"variantchanged"};function Pa(){}function Qa(){}function Ra(){}function Sa(n){var i=Ga.apply(1,arguments);Y.has(n)||(Y.add(n),Ra.apply(Pa,w(i)))}function Va(){}var Y=new Set;function Za(){this.g={}}function $a(){this.Aa=new Za,this.we=this}function ab(n,i){var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next())r.push(i(o.value));return r}function cb(n,i){n=t(n);for(var r=n.next();!r.done;r=n.next())if(i(r.value))return!0;return!1}function db(n,i){var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next())i(o=o.value)&&r.push(o);return r}n.console&&(Ra=function(){return console.warn.apply(console,w(Ga.apply(0,arguments)))},Qa=function(){console.error.apply(console,w(Ga.apply(0,arguments)))}),(N=Za.prototype).push=function(n,i){this.g.hasOwnProperty(n)?this.g[n].push(i):this.g[n]=[i]},N.get=function(n){return(n=this.g[n])?n.slice():null},N.remove=function(n,i){n in this.g&&(this.g[n]=this.g[n].filter(function(n){return n!=i}),0==this.g[n].length&&delete this.g[n])},N.forEach=function(n){for(var i in this.g)n(i,this.g[i])},N.size=function(){return Object.keys(this.g).length},N.keys=function(){return Object.keys(this.g)},$a.prototype.addEventListener=function(n,i){this.Aa&&this.Aa.push(n,i)},$a.prototype.removeEventListener=function(n,i){this.Aa&&this.Aa.remove(n,i)},$a.prototype.dispatchEvent=function(n){if(!this.Aa)return!0;var i=this.Aa.get(n.type)||[],r=this.Aa.get("All");for(r&&(i=i.concat(r)),r=(i=t(i)).next();!r.done;r=i.next()){r=r.value,n.target=this.we,n.currentTarget=this.we;try{r.handleEvent?r.handleEvent(n):r.call(this,n)}catch(n){}if(n.g)break}return n.defaultPrevented},$a.prototype.release=function(){this.Aa=null};var Q=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function fb(n){var i;n instanceof fb?(gb(this,n.wb),this.Bc=n.Bc,hb(this,n.Kb),jb(this,n.Tc),this.Ya=n.Ya,kb(this,n.g.clone()),this.pc=n.pc):n&&(i=String(n).match(Q))?(gb(this,i[1]||"",!0),this.Bc=lb(i[2]||""),hb(this,i[3]||"",!0),jb(this,i[4]),this.Ya=lb(i[5]||"",!0),kb(this,i[6]||"",!0),this.pc=lb(i[7]||"")):this.g=new mb(null)}function gb(n,i,r){n.wb=r?lb(i,!0):i,n.wb&&(n.wb=n.wb.replace(/:$/,""))}function hb(n,i,r){n.Kb=r?lb(i,!0):i}function jb(n,i){if(i){if(isNaN(i=Number(i))||0>i)throw Error("Bad port number "+i);n.Tc=i}else n.Tc=null}function kb(n,i,r){i instanceof mb?n.g=i:(r||(i=nb(i,es)),n.g=new mb(i))}function lb(n,i){return n?i?decodeURI(n):decodeURIComponent(n):""}function nb(n,i,r){return null!=n?(n=encodeURI(n).replace(i,vb),r&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function vb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}(N=fb.prototype).wb="",N.Bc="",N.Kb="",N.Tc=null,N.Ya="",N.pc="",N.toString=function(){var n=[],i=this.wb;if(i&&n.push(nb(i,J,!0),":"),i=this.Kb){n.push("//");var r=this.Bc;r&&n.push(nb(r,J,!0),"@"),n.push(encodeURIComponent(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.Tc)&&n.push(":",String(i))}return(i=this.Ya)&&(this.Kb&&"/"!=i.charAt(0)&&n.push("/"),n.push(nb(i,"/"==i.charAt(0)?ea:$,!0))),(i=this.g.toString())&&n.push("?",i),(i=this.pc)&&n.push("#",nb(i,ec)),n.join("")},N.resolve=function(n){var i=this.clone();"data"===i.wb&&(i=new fb);var r=!!n.wb;r?gb(i,n.wb):r=!!n.Bc,r?i.Bc=n.Bc:r=!!n.Kb,r?hb(i,n.Kb):r=null!=n.Tc;var o=n.Ya;if(r)jb(i,n.Tc);else if(r=!!n.Ya){if("/"!=o.charAt(0)){if(this.Kb&&!this.Ya)o="/"+o;else{var s=i.Ya.lastIndexOf("/");-1!=s&&(o=i.Ya.substr(0,s+1)+o)}}if(".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){s=0==o.lastIndexOf("/",0),o=o.split("/");for(var u=[],p=0;p<o.length;){var y=o[p++];"."==y?s&&p==o.length&&u.push(""):".."==y?((1<u.length||1==u.length&&""!=u[0])&&u.pop(),s&&p==o.length&&u.push("")):(u.push(y),s=!0)}o=u.join("/")}}return r?i.Ya=o:r=""!==n.g.toString(),r?kb(i,n.g.clone()):r=!!n.pc,r&&(i.pc=n.pc),i},N.clone=function(){return new fb(this)};var J=/[#\/\?@]/g,$=/[#\?:]/g,ea=/[#\?]/g,es=/[#\?@]/g,ec=/#/g;function mb(n){this.g=n||null}function wb(n){if(!n.Oa&&(n.Oa={},n.rd=0,n.g))for(var i=n.g.split("&"),r=0;r<i.length;r++){var o=i[r].indexOf("="),s=null;if(0<=o){var u=i[r].substring(0,o);s=i[r].substring(o+1)}else u=i[r];u=decodeURIComponent(u.replace(/\+/g," ")),s=s||"",n.add(u,decodeURIComponent(s.replace(/\+/g," ")))}}function P(n,i,r){var o=Ga.apply(3,arguments);if(this.severity=n,this.category=i,this.code=r,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code,ed)try{throw Error(this.message||"Shaka Error")}catch(n){this.stack=n.stack}}(N=mb.prototype).Oa=null,N.rd=null,N.add=function(n,i){wb(this),this.g=null;var r=this.Oa.hasOwnProperty(n)?this.Oa[n]:null;return r||(this.Oa[n]=r=[]),r.push(i),this.rd++,this},N.set=function(n,i){return wb(this),this.g=null,this.Oa.hasOwnProperty(n)?this.Oa[n]=[i]:this.add(n,i),this},N.get=function(n){return wb(this),this.Oa[n]||[]},N.toString=function(){if(this.g)return this.g;if(!this.Oa)return"";var n,i=[];for(n in this.Oa)for(var r=encodeURIComponent(n),o=this.Oa[n],s=0;s<o.length;s++){var u=r;""!==o[s]&&(u+="="+encodeURIComponent(o[s])),i.push(u)}return this.g=i.join("&")},N.clone=function(){var n=new mb;if(n.g=this.g,this.Oa){var i,r={};for(i in this.Oa)r[i]=this.Oa[i].concat();n.Oa=r,n.rd=this.rd}return n},P.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},L("shaka.util.Error",P);var ed=!0;function zb(n,i){if(0==i.length)return n;if(1==n.length&&1==i.length){var r=new fb(n[0]);return i=new fb(i[0]),[r.resolve(i).toString()]}i=i.map(function(n){return new fb(n)}),r=[],n=t(n);for(var o=n.next();!o.done;o=n.next()){o=new fb(o.value);for(var s=t(i),u=s.next();!u.done;u=s.next())r.push(o.resolve(u.value).toString())}return r}function Ab(n,i){return{keySystem:n,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i||[],keyIds:new Set}}function Bb(n,i){if(1==i.length)return i[0];if(null!=(n=Cb(n,i)))return n;throw new P(2,4,4025,i)}function Cb(n,i){for(var r=t(eg[n]),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=t(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.test(u.trim()))return u.trim()}return n==eh?"":null}P.Severity={RECOVERABLE:1,CRITICAL:2},P.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},P.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};var eh="text",ep={ia:"video",U:"audio",Da:eh,cf:"image",yj:"application"},eg={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ib(){}function Jb(n,i){return n=Kb(n),i=Kb(i),n.split("-")[0]==i.split("-")[0]}function Mb(n,i){return n=Kb(n),i=Kb(i),n=n.split("-"),i=i.split("-"),n[0]==i[0]&&1==n.length&&2==i.length}function Nb(n,i){return n=Kb(n),i=Kb(i),n=n.split("-"),i=i.split("-"),2==n.length&&2==i.length&&n[0]==i[0]}function Kb(n){var i=(n=t(n.split("-x-"))).next().value;i=void 0===i?"":i,n=void 0===(n=n.next().value)?"":n;var r=t(i.split("-"));return i=void 0===(i=r.next().value)?"":i,r=void 0===(r=r.next().value)?"":r,n=n?"x-"+n:"",i=i.toLowerCase(),i=em.get(i)||i,((r=r.toUpperCase())?i+"-"+r:i)+(n?"-"+n:"")}function Pb(n,i){var r=Qb(n),o=Qb(i);return n!=r&&i!=o&&r==o}function Rb(n,i){return n=Kb(n),(i=Kb(i))==n?4:Mb(i,n)?3:Nb(i,n)?2:Mb(n,i)?1:0}function Qb(n){var i=n.indexOf("-");return n=(n=0<=i?n.substring(0,i):n).toLowerCase(),n=em.get(n)||n}function Sb(n){return n.language?Kb(n.language):n.audio&&n.audio.language?Kb(n.audio.language):n.video&&n.video.language?Kb(n.video.language):"und"}function Tb(n,i){n=Kb(n);var r=new Set,o=t(i);for(i=o.next();!i.done;i=o.next())r.add(Kb(i.value));for(i=(o=t(r)).next();!i.done;i=o.next())if((i=i.value)==n)return i;for(i=(o=t(r)).next();!i.done;i=o.next())if(Mb(i=i.value,n))return i;for(i=(o=t(r)).next();!i.done;i=o.next())if(Nb(i=i.value,n))return i;for(i=(r=t(r)).next();!i.done;i=r.next())if(Mb(n,i=i.value))return i;return null}L("shaka.util.LanguageUtils",Ib),Ib.findClosestLocale=Tb,Ib.getLocaleForVariant=Sb,Ib.getLocaleForText=function(n){return Kb(n.language||"und")},Ib.getBase=Qb,Ib.relatedness=Rb,Ib.areSiblings=Pb,Ib.normalize=Kb,Ib.isSiblingOf=Nb,Ib.isParentOf=Mb,Ib.areLanguageCompatible=Jb,Ib.areLocaleCompatible=function(n,i){return(n=Kb(n))==(i=Kb(i))};var em=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ub(n){$a.call(this),this.j=Kb(n),this.i=new Map,this.g=new Set,this.h=new Map}function Vb(n){for(var i=n.h,r=n.j,o=n.g,s=new Set,u={},p=t(o),y=p.next();!y.done;u={Fc:u.Fc},y=p.next()){u.Fc=y.value,s.add(u.Fc),s.add(Qb(u.Fc)),(y=db(i.keys(),function(n){return function(i){return Pb(i,n.Fc)}}(u))).sort();var A=t(y);for(y=A.next();!y.done;y=A.next())s.add(y.value);for((y=db(i.keys(),function(n){return function(i){return Qb(i)==n.Fc}}(u))).sort(),y=(A=t(y)).next();!y.done;y=A.next())s.add(y.value)}for(s.add(r),r=[],y=(s=t(s)).next();!y.done;y=s.next())(y=i.get(y.value))&&r.push(y);for(r.reverse(),n.i.clear(),y=(i=t(r)).next();!y.done;y=i.next())y.value.forEach(function(i,r){n.i.set(r,i)});for(i=n.i.keys(),s=new Set,y=(r=t(n.g)).next();!y.done;y=r.next())!function(n,i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())o=o.value,n.get(o)||r.add(o)}(y=n.h.get(y.value)||new Map,i,s);0<s.size&&(o=(new Map).set("locales",Array.from(o)).set("missing",Array.from(s)),n.dispatchEvent(new O("missing-localizations",o)))}pa(Ub,$a),(N=Ub.prototype).release=function(){$a.prototype.release.call(this)},N.Ig=function(n){var i=this;this.g.clear(),n=t(n);for(var r=n.next();!r.done;r=n.next())this.g.add(Kb(r.value));Vb(this),(n=db(this.g,function(n){return!i.h.has(n)})).length&&this.dispatchEvent(new O("unknown-locales",(new Map).set("locales",n))),n=db(this.g,function(n){return i.h.has(n)}),n=(new Map).set("locales",n.length?n:[this.j]),this.dispatchEvent(new O("locale-changed",n))},N.ya=function(n,i,r){n=Kb(n),void 0===r&&(r=ev);var o=this.h.get(n)||new Map;return i.forEach(function(n,i){o.has(i)&&r!=ev||o.set(i,n)}),this.h.set(n,o),Vb(this),this.dispatchEvent(new O("locale-updated")),this},N.ij=function(n){for(var i=t(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,n.set(r,this.resolve(r))},N.resolve=function(n){var i=this.i.get(n);return i||(n=(new Map).set("locales",Array.from(this.g)).set("missing",n),this.dispatchEvent(new O("unknown-localization",n)),"")},N.bi=function(){return this.g},L("shaka.ui.Localization",Ub),Ub.prototype.getCurrentLocales=Ub.prototype.bi,Ub.prototype.resolve=Ub.prototype.resolve,Ub.prototype.resolveDictionary=Ub.prototype.ij,Ub.prototype.insert=Ub.prototype.ya,Ub.prototype.changeLocale=Ub.prototype.Ig,Ub.prototype.release=Ub.prototype.release;var ev=1;function Yb(n){this.g=Math.exp(Math.log(.5)/n),this.i=this.h=0}function Zb(n){return n.h/(1-Math.pow(n.g,n.i))}function $b(){this.h=new Yb(2),this.j=new Yb(5),this.g=0,this.i=128e3,this.l=16e3}function ac(i){if(eb.has(i))return eb.get(i);if(n.ManagedMediaSource){var r=ManagedMediaSource.isTypeSupported(i);return eb.set(i,r),r}return!!n.MediaSource&&(r=MediaSource.isTypeSupported(i),eb.set(i,r),r)}function fc(){return!!n.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}Ub.ConflictResolution={USE_OLD:0,USE_NEW:ev},Ub.UNKNOWN_LOCALES="unknown-locales",Ub.UNKNOWN_LOCALIZATION="unknown-localization",Ub.MISSING_LOCALIZATIONS="missing-localizations",Ub.LOCALE_CHANGED="locale-changed",Ub.LOCALE_UPDATED="locale-updated",Yb.prototype.sample=function(n,i){var r=Math.pow(this.g,n);isNaN(i=i*(1-r)+r*this.h)||(this.h=i,this.i+=n)},$b.prototype.configure=function(n){this.i=n.minTotalBytes,this.l=n.minBytes,this.h.g=Math.exp(Math.log(.5)/n.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/n.slowHalfLife)},$b.prototype.sample=function(n,i){if(!(i<this.l)){var r=8e3*i/n;n/=1e3,this.g+=i,this.h.sample(n,r),this.j.sample(n,r)}},$b.prototype.getBandwidthEstimate=function(n){return this.g<this.i?n:Math.min(Zb(this.h),Zb(this.j))};var eb=new Map;function gc(){}function hc(){}function ic(){}function jc(n,i){if(!n&&!i)return!0;if(!n||!i||n.byteLength!=i.byteLength)return!1;if(kc(n)==kc(i)&&(n.byteOffset||0)==(i.byteOffset||0))return!0;var r=lc(n);i=lc(i);for(var o=0;o<n.byteLength;o++)if(r[o]!=i[o])return!1;return!0}function kc(n){return n instanceof ArrayBuffer?n:n.buffer}function mc(n){return n instanceof ArrayBuffer?n:0==n.byteOffset&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function lc(n,i,r){return nc(n,void 0===i?0:i,r=void 0===r?1/0:r,Uint8Array)}function oc(n,i,r){return nc(n,void 0===i?0:i,r=void 0===r?1/0:r,Uint16Array)}function pc(n,i,r){return nc(n,void 0===i?0:i,r=void 0===r?1/0:r,DataView)}function nc(n,i,r,o){var s=kc(n),u=1;"BYTES_PER_ELEMENT"in o&&(u=o.BYTES_PER_ELEMENT);var p=((n.byteOffset||0)+n.byteLength)/u;return n=Math.floor(Math.max(0,Math.min(((n.byteOffset||0)+i)/u,p))),new o(s,n,Math.floor(Math.min(n+Math.max(r,0),p))-n)}function qc(){}function rc(n){this.l=new hc,(n=eA[n.toLowerCase()])&&(this.l=n()),this.g=new gc,(n=eT)&&(this.g=n())}gc.prototype.extract=function(){},gc.prototype.decode=function(){return[]},gc.prototype.clear=function(){},gc.prototype.getStreams=function(){return[]},hc.prototype.init=function(){},hc.prototype.parse=function(){return[]},L("shaka.util.BufferUtils",ic),ic.toDataView=pc,ic.toUint16=oc,ic.toUint8=lc,ic.toArrayBuffer=mc,ic.equal=jc,qc.prototype.init=function(){},qc.prototype.i=function(){},qc.prototype.h=function(){},qc.prototype.j=function(){},L("shaka.media.IClosedCaptionParser",qc),rc.prototype.init=function(n){this.l.init(n)},rc.prototype.i=function(n){n=t(n=this.l.parse(n));for(var i=n.next();!i.done;i=n.next()){var r=lc((i=i.value).packet);0<r.length&&this.g.extract(r,i.pts)}return this.g.decode()},rc.prototype.h=function(){this.g.clear()},rc.prototype.j=function(){return this.g.getStreams()},L("shaka.media.ClosedCaptionParser",rc),rc.findDecoder=function(){return eT},rc.unregisterDecoder=function(){eT=null},rc.registerDecoder=function(n){eT=n},rc.findParser=function(n){return eA[n]},rc.unregisterParser=function(n){delete eA[n]},rc.registerParser=function(n,i){eA[n]=i};var eA={},eT=null;function uc(n,i){return!!("number"==typeof n&&"number"==typeof i&&isNaN(n)&&isNaN(i))||n===i}function vc(n,i){-1<(i=n.indexOf(i))&&n.splice(i,1)}function wc(n,i,r){if(r||(r=uc),n.length!=i.length)return!1;i=i.slice();var o={};n=t(n);for(var s=n.next();!s.done;o={Ue:o.Ue},s=n.next()){if(o.Ue=s.value,-1==(s=i.findIndex(function(n){return function(i){return r(n.Ue,i)}}(o))))return!1;i[s]=i[i.length-1],i.pop()}return 0==i.length}function xc(n,i,r){if(r||(r=uc),n.length!=i.length)return!1;for(var o=0;o<n.length;o++)if(!r(n[o],i[o]))return!1;return!0}function yc(n,i,r){this.startTime=n,this.endTime=i,this.payload=r,this.region=new zc,this.position=null,this.positionAlign=eS,this.size=0,this.textAlign=ek,this.direction=eP,this.writingMode=eR,this.lineInterpretation=eN,this.line=null,this.lineHeight="",this.lineAlign=eU,this.displayAlign=eM,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=eF,this.fontStyle=eV,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={mc:32,rows:15}}function Kc(n,i){return(n=new yc(n,i,"")).lineBreak=!0,n}function Mc(n,i){if(n.startTime!=i.startTime||n.endTime!=i.endTime||n.payload!=i.payload)return!1;for(var r in n)if("startTime"!=r&&"endTime"!=r&&"payload"!=r){if("nestedCues"==r){if(!xc(n.nestedCues,i.nestedCues,Mc))return!1}else if("region"==r||"cellResolution"==r){for(var o in n[r])if(n[r][o]!=i[r][o])return!1}else if(Array.isArray(n[r])){if(!xc(n[r],i[r]))return!1}else if(n[r]!=i[r])return!1}return!0}yc.prototype.clone=function(){var n,i=new yc(0,0,"");for(n in this)i[n]=this[n],i[n]&&i[n].constructor==Array&&(i[n]=i[n].slice());return i},L("shaka.text.Cue",yc),yc.equal=Mc,yc.prototype.clone=yc.prototype.clone;var eS="auto";yc.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:eS};var ek="center",eI={LEFT:"left",RIGHT:"right",CENTER:ek,START:"start",END:"end"};yc.textAlign=eI;var eM="after",eL={BEFORE:"before",CENTER:"center",AFTER:eM};yc.displayAlign=eL;var eP="ltr";yc.direction={HORIZONTAL_LEFT_TO_RIGHT:eP,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var eR="horizontal-tb";yc.writingMode={HORIZONTAL_TOP_TO_BOTTOM:eR,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var eN=0;yc.lineInterpretation={LINE_NUMBER:eN,PERCENTAGE:1};var eU="start",eO={CENTER:"center",START:eU,END:"end"};yc.lineAlign=eO;var e_={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};yc.defaultTextColor=e_;var ej={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};yc.defaultTextBackgroundColor=ej;var eF=400;yc.fontWeight={NORMAL:eF,BOLD:700};var eV="normal",eK={NORMAL:eV,ITALIC:"italic",OBLIQUE:"oblique"};function zc(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=eG,this.scroll=eH}yc.fontStyle=eK,yc.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},L("shaka.text.CueRegion",zc);var eG=1;zc.units={PX:0,PERCENTAGE:eG,LINES:2};var eH="";function Vc(){}function Wc(n,i,r){eq[n.toLowerCase().split(";")[0]+"-"+r]={priority:r,Ge:i}}function Yc(n,i){for(var r=n.toLowerCase().split(";")[0],o=t([eZ,eY,eX,eW]),s=o.next();!s.done;s=o.next())if(s=eq[r+"-"+s.value]){var u=s.Ge(),p=u.isSupported(n,i);if(u.destroy(),p)return s.Ge}return null}zc.scrollMode={NONE:eH,UP:"up"},Vc.prototype.destroy=function(){},L("shaka.transmuxer.TransmuxerEngine",Vc),Vc.findTransmuxer=Yc,Vc.unregisterTransmuxer=function(n,i){delete eq[n.toLowerCase().split(";")[0]+"-"+i]},Vc.registerTransmuxer=Wc,Vc.prototype.destroy=Vc.prototype.destroy;var eq={},eW=1,eX=2,eY=3,eZ=4;function cd(){}function dd(n,i){var r=n;return i&&!eQ.includes(n)&&(r+='; codecs="'+i+'"'),r}function fd(n,i){return i&&(n+='; codecs="'+i+'"'),n}function gd(n,i,r){var o=dd(n,i);return Yc(i=fd(n,i))?(n=Yc(i))?(r=(n=n()).convertCodecs(r,i),n.destroy()):r=i:r="video/mp2t"!=n&&"audio"==r?o.replace("video","audio"):o,r}function hd(n){var i=kd(n);switch(n=i[0],i=i[1].toLowerCase(),!0){case"mp4a"===n&&"69"===i:case"mp4a"===n&&"6b"===i:case"mp4a"===n&&"40.34"===i:return"mp3";case"mp4a"===n&&"66"===i:case"mp4a"===n&&"67"===i:case"mp4a"===n&&"68"===i:case"mp4a"===n&&"40.2"===i:case"mp4a"===n&&"40.02"===i:case"mp4a"===n&&"40.5"===i:case"mp4a"===n&&"40.05"===i:case"mp4a"===n&&"40.29"===i:case"mp4a"===n&&"40.42"===i:return"aac";case"mp4a"===n&&"a5"===i:return"ac-3";case"mp4a"===n&&"a6"===i:return"ec-3";case"mp4a"===n&&"b2"===i:return"dtsx";case"mp4a"===n&&"a9"===i:return"dtsc";case"avc1"===n:case"avc3"===n:return"avc";case"hvc1"===n:case"hev1"===n:return"hevc";case"dvh1"===n:case"dvhe"===n:return"dovi"}return n}function ld(n){var i=[];n=t(n.split(","));for(var r=n.next();!r.done;r=n.next())i.push((r=kd(r.value))[0]);return i.sort().join(",")}function md(n){return n.split(";")[0]}function nd(n){return(n=n.split(/ *; */)).shift(),(n=n.find(function(n){return n.startsWith("codecs=")}))?n.split("=")[1].replace(/^"|"$/g,""):""}function kd(n){var i=(n=n.split("."))[0];return n.shift(),[i,n.join(".")]}Vc.PluginPriority={FALLBACK:eW,PREFERRED_SECONDARY:eX,PREFERRED:eY,APPLICATION:eZ},L("shaka.util.MimeUtils",cd),cd.getFullTypeWithAllCodecs=fd,cd.getFullType=dd,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var eQ=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function od(n){this.i=null,this.j=n,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.D="",this.s=new Map}function pd(n){return!!eJ[n]||("application/cea-608"==n||"application/cea-708"==n)&&!!eT}function td(n,i,r){if(n.D=i,i=n.s.get(i))for(var o=t(i.keys()),s=o.next();!s.done;s=o.next())(s=i.get(s.value).filter(function(n){return n.endTime<=r}))&&n.j.append(s)}od.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()},od.prototype.remove=function(n,i){var r=this;return K(function(o){if(1==o.g)return D(o,Promise.resolve(),2);!r.j||!r.j.remove(n,i)||null==r.g||i<=r.g||n>=r.h||(n<=r.g&&i>=r.h?r.g=r.h=null:n<=r.g&&i<r.h?r.g=i:n>r.g&&i>=r.h&&(r.h=n)),F(o)})},L("shaka.text.TextEngine",od),od.prototype.destroy=od.prototype.destroy,od.findParser=function(n){return eJ[n]},od.unregisterParser=function(n){delete eJ[n]},od.registerParser=function(n,i){eJ[n]=i};var eJ={};function xd(n,i){return n.concat(i)}function yd(){}function zd(n){return null!=n}function Ad(n){var i=new WeakSet;return function b(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(i.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;i.add(n);var o,s=r?[]:{};for(o in n)s[o]=b(n[o]);return r&&(s.length=n.length),s}}(n)}function Bd(n){var i,r={};for(i in n)r[i]=n[i];return r}function Cd(n){this.h=n,this.g=null}function Dd(n){this.h=n,this.g=null}function Ed(){var i=n.ManagedMediaSource||n.MediaSource;return!!i&&!!i.isTypeSupported}function Fd(n){return""!=Gd().canPlayType(n)}function Hd(){return!!navigator.userAgent.match(/Edge?\//)}function Id(){return Jd("Xbox One")}function Kd(){return Jd("Tizen")}function Ld(){return Jd("Tizen 3")}function Md(){return Jd("Tizen 2")}function Nd(){return Jd("Web0S")&&Jd("Chrome/38.0.2125.122 Safari/537.36")}function Od(){return Jd("CrKey")}function Pd(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Kd()&&!Jd("PC=EOS")&&!Jd("PC=APL")&&!Jd("VirginMedia")&&!Jd("SOPOpenBrowser")&&!Qd()&&!Jd("AFT")&&!Jd("WPE")}function Qd(){return Jd("PlayStation 4")}function Rd(){if(!Pd())return null;var n=navigator.userAgent.match(/Version\/(\d+)/);return n?parseInt(n[1],10):(n=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(n[1],10):null}function Jd(n){return(navigator.userAgent||"").includes(n)}function Gd(){return e0||(e$||(e$=new Dd(function(){e0=null})),(e0=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(e0=document.createElement("video")),e$.S(1)),e0}Cd.prototype.S=function(i){var r=this;this.stop();var o=!0,s=null;return this.g=function(){n.clearTimeout(s),o=!1},s=n.setTimeout(function(){o&&r.h()},1e3*i),this},Cd.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Dd.prototype.Qa=function(){return this.stop(),this.h(),this},Dd.prototype.S=function(n){var i=this;return this.stop(),this.g=new Cd(function(){i.h()}).S(n),this},Dd.prototype.za=function(n){var i=this;return this.stop(),this.g=new Cd(function(){i.g.S(n),i.h()}).S(n),this},Dd.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},L("shaka.util.Timer",Dd),Dd.prototype.stop=Dd.prototype.stop,Dd.prototype.tickEvery=Dd.prototype.za,Dd.prototype.tickAfter=Dd.prototype.S,Dd.prototype.tickNow=Dd.prototype.Qa;var e$=null,e0=null;function Yd(){}function Zd(n,i,r,o){var s=n.variants;if((i.length||r.length)&&(s=function(n,i,r){var o={};i=t(i);for(var s=i.next();!s.done;o={bf:o.bf},s=i.next())if(o.bf=s.value,(s=n.filter(function(n){return function(i){return i.video&&i.video.codecs.startsWith(n.bf)}}(o))).length){n=s;break}for(o={},i=(r=t(r)).next();!i.done;o={Se:o.Se},i=r.next())if(o.Se=i.value,(i=n.filter(function(n){return function(i){return i.audio&&i.audio.codecs.startsWith(n.Se)}}(o))).length){n=i;break}return n}(s,i,r)),o.length){for(i=new Za,s=(r=t(s)).next();!s.done;s=r.next())s=s.value,i.push(String(s.video.width||0),s);var u=[];i.forEach(function(n,i){n=0;var r=[],s={};i=t(i);for(var p=i.next();!p.done;s={md:s.md},p=i.next())s.md=p.value,(p=o.filter(function(n){return function(i){return n.md.decodingInfos[0][i]}}(s)).length)>n?(n=p,r=[s.md]):p==n&&r.push(s.md);u.push.apply(u,w(r))}),s=u}r=new Set,i=new Set;var p=t(s);for(s=p.next();!s.done;s=p.next())(s=s.value).audio&&r.add(s.audio),s.video&&i.add(s.video);r=Array.from(r).sort(function(n,i){return n.bandwidth-i.bandwidth});var y=[];for(s=new Map,p=(r=t(r)).next();!p.done;p=r.next()){var A=(p=p.value).language+(p.channelsCount||0)+(p.audioSamplingRate||0)+p.roles.join(",")+p.label+p.groupId+p.fastSwitching,T=s.get(A)||[];if(T.length){var x=T[T.length-1],C=hd(x.codecs),I=hd(p.codecs);C==I&&p.bandwidth>x.bandwidth&&(T.push(p),y.push(p.id))}else T.push(p),y.push(p.id);s.set(A,T)}r=Array.from(i).sort(function(n,i){return n.bandwidth&&i.bandwidth?n.bandwidth-i.bandwidth:n.width-i.width}),i=fc();var M=[];for(s=new Map,p=(r=t(r)).next();!p.done;p=r.next()){if(A=Math.round((p=p.value).frameRate||0)+(p.hdr||"")+p.fastSwitching,(T=s.get(A)||[]).length){if(x=T[T.length-1],!i&&(C=hd(x.codecs))!==(I=hd(p.codecs)))continue;p.width>x.width||p.height>x.height?(T.push(p),M.push(p.id)):p.width==x.width&&p.height==x.height&&(C=hd(x.codecs))==(I=hd(p.codecs))&&p.bandwidth>x.bandwidth&&(T.push(p),M.push(p.id))}else T.push(p),M.push(p.id);s.set(A,T)}n.variants=n.variants.filter(function(n){var i=n.audio;return n=n.video,(!i||!!y.includes(i.id))&&(!n||!!M.includes(n.id))})}function be(n,i,r){var o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z=n.video;return(!z||!z.width||!z.height||(o=z.width,s=i.minWidth,u=Math.min(i.maxWidth,r.width),o>=s&&o<=u&&(p=z.height,y=i.minHeight,A=Math.min(i.maxHeight,r.height),p>=y&&p<=A)&&(T=z.width*z.height,x=i.minPixels,C=i.maxPixels,T>=x&&T<=C)))&&(!n||!n.video||!n.video.frameRate||(I=n.video.frameRate,M=i.minFrameRate,N=i.maxFrameRate,I>=M&&I<=N))&&(_=n.bandwidth,j=i.minBandwidth,B=i.maxBandwidth,_>=j&&_<=B)}function ce(n,i,r){var o=!1;n=t(n);for(var s=n.next();!s.done;s=n.next()){var u=(s=s.value).allowedByApplication;s.allowedByApplication=be(s,i,r),u!=s.allowedByApplication&&(o=!0)}return o}function ee(n,i,r){var o,s,u,p,y;return K(function(A){if(1==A.g)return D(A,he(i.variants,r,!1,[]),2);o=null,n&&(s=n.g)&&(o=s.keySystem),u=ep,p=Id(),y=Jd("Firefox")&&Jd("Android"),i.variants=i.variants.filter(function(n){var i=n.video,r=i&&i.width||0,s=i&&i.height||0;if(p&&i&&(1920<r||1080<s)&&(i.codecs.includes("avc1.")||i.codecs.includes("avc3.")))return ie(n),!1;if(i){if(r=je(i.codecs),i.codecs.includes(",")){if(s=i.codecs.split(","),r=je(r=Bb(u.ia,s)),s=ke(s=Bb(u.U,s)),!ac(gd(i.mimeType,s,u.U)))return!1;r=[r,s].join()}if(!ac(s=gd(i.mimeType,r,u.ia)))return!1;i.codecs=r}if(i=n.audio,y&&i&&i.encrypted&&i.codecs.toLowerCase().includes("opus"))return ie(n),!1;if(i){if(r=ke(i.codecs),!ac(s=gd(i.mimeType,r,u.U)))return!1;i.codecs=r}return(i=n.decodingInfos.some(function(n){return!!n.supported&&(!o||!(n=n.keySystemAccess)||n.keySystem==o)}))||ie(n),i}),F(A)})}function me(n,i){var r,o,s,u,p,y,A;return K(function(T){if(1==T.g)return r=function le(n){var i=[];for(r in n)i.push(r);i.sort();var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=o.value;o=JSON.stringify(s),s=(s=n[s])instanceof Object?le(s):JSON.stringify(s),r.push(o+":"+s)}return"{"+r.join(",")+"}"}(i),(o=e1)[r]?(n.decodingInfos.push(o[r]),T.F(0)):D(T,function(n){var i=[""];n.video&&(i=nd(n.video.contentType).split(","));var r=[""];n.audio&&(r=nd(n.audio.contentType).split(","));var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){s=s.value;for(var u={},p=t(r),y=p.next();!y.done;u={ic:u.ic},y=p.next())y=y.value,u.ic=Ad(n),n.video&&(u.ic.video.contentType=dd(md(u.ic.video.contentType),s)),n.audio&&(u.ic.audio.contentType=dd(md(u.ic.audio.contentType),y)),o.push(new Promise(function(n){return function(i,r){navigator.mediaCapabilities.decodingInfo(n.ic).then(function(n){i(n)}).catch(r)}}(u)))}return Promise.all(o).catch(function(){return JSON.stringify(n),null})}(i),3);if((s=T.h)&&s.length){for(u=null,y=(p=t(s)).next();!y.done;y=p.next())A=y.value,u?(u.supported=u.supported&&A.supported,u.powerEfficient=u.powerEfficient&&A.powerEfficient,u.smooth=u.smooth&&A.smooth,A.keySystemAccess||(u.keySystemAccess=null)):u=A;u&&(o[r]=u,n.decodingInfos.push(u))}F(T)})}function he(n,i,r,o){var s,u,p,y,A,T,x,C,I,M,N,_,j,B;return K(function(z){switch(z.g){case 1:if(n.some(function(n){return n.decodingInfos.length}))return z.return();s={},p=(u=t(o)).next();case 2:if(p.done){z.F(4);break}s.We=p.value,y=!1,T=(A=t(n)).next();case 5:var G;if(T.done){z.F(7);break}I=(C=t(pe(x=T.value,i,r).filter((G=s,function(n){return(n.keySystemConfiguration&&n.keySystemConfiguration.keySystem)===G.We})))).next();case 8:if(I.done){z.F(10);break}return M=I.value,D(z,me(x,M),9);case 9:I=C.next(),z.F(8);break;case 10:x.decodingInfos.length&&(y=!0),T=A.next(),z.F(5);break;case 7:if(y)return z.return();s={We:s.We},p=u.next(),z.F(2);break;case 4:T=(N=t(n)).next();case 12:if(T.done){z.F(0);break}I=(j=t(pe(_=T.value,i,r).filter(function(n){return!(n=n.keySystemConfiguration&&n.keySystemConfiguration.keySystem)||!o.includes(n)}))).next();case 15:if(I.done){T=N.next(),z.F(12);break}return B=I.value,D(z,me(_,B),16);case 16:I=j.next(),z.F(15)}})}function pe(n,i,r){var o=n.audio,s=n.video;if(r={type:r?"file":"media-source"},s){var u=s.codecs;if(s.codecs.includes(",")){var p=s.codecs.split(",");u=je(u=Bb("video",p)),p=ke(p=Bb("audio",p)),p=gd(s.mimeType,p,"audio"),r.audio={contentType:p,channels:2,bitrate:n.bandwidth||1,samplerate:1,spatialRendering:!1}}if(u=je(u),u=gd(s.mimeType,u,"video"),r.video={contentType:u,width:s.width||64,height:s.height||64,bitrate:s.bandwidth||n.bandwidth||1,framerate:s.frameRate||1},s.hdr)switch(s.hdr){case"SDR":r.video.transferFunction="srgb";break;case"PQ":r.video.transferFunction="pq";break;case"HLG":r.video.transferFunction="hlg"}}if(o&&(u=ke(o.codecs),u=gd(o.mimeType,u,"audio"),r.audio={contentType:u,channels:o.channelsCount||2,bitrate:o.bandwidth||n.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio}),!(p=(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[])).length)return[r];n=[],u=new Map,p=t(p);for(var y=p.next();!y.done;y=p.next()){var A=y.value;u.get(A.keySystem)||u.set(A.keySystem,[]),u.get(A.keySystem).push(A)}p=i?"required":"optional",i=i?["persistent-license"]:["temporary"],A=t(u.keys());for(var T=A.next();!T.done;T=A.next()){var x=T.value;T=Object.assign({},r);var C=u.get(x);for(x={keySystem:x,initDataType:"cenc",persistentState:p,distinctiveIdentifier:"optional",sessionTypes:i},y=(C=t(C)).next();!y.done;y=C.next()){if((y=y.value).initData&&y.initData.length){for(var I=new Set,M=t(y.initData),N=M.next();!N.done;N=M.next())I.add(N.value.initDataType);x.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(x.distinctiveIdentifier="required"),y.persistentStateRequired&&(x.persistentState="required"),y.sessionType&&(x.sessionTypes=[y.sessionType]),o&&(""!=y.audioRobustness?x.audio?x.audio.robustness=x.audio.robustness||y.audioRobustness:x.audio={robustness:y.audioRobustness}:x.audio||(x.audio={})),s&&(""!=y.videoRobustness?x.video?x.video.robustness=x.video.robustness||y.videoRobustness:x.video={robustness:y.videoRobustness}:x.video||(x.video={}))}T.keySystemConfiguration=x,n.push(T)}return n}function ke(n){return"fLaC"!==n||Rd()?"Opus"===n?"opus":n:"flac"}function je(n){if(n.includes("avc1")){var i=n.split(".");if(3==i.length)return n=i.shift()+"."+parseInt(i.shift(),10).toString(16)+("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}else if("vp9"==n)return"vp09.00.41.08";return n}function te(n){var i=n.audio,r=n.video,o=i?i.mimeType:null,s=r?r.mimeType:null,u=i?i.codecs:null,p=r?r.codecs:null,y=[];p&&y.push(p),u&&y.push(u);var A=[];r&&A.push(r.mimeType),i&&A.push(i.mimeType),A=A[0]||null;var T=[];i&&T.push(i.kind),r&&T.push(r.kind),T=T[0]||null;var x=new Set;if(i)for(var C=t(i.roles),I=C.next();!I.done;I=C.next())x.add(I.value);if(r)for(I=(C=t(r.roles)).next();!I.done;I=C.next())x.add(I.value);return n={id:n.id,active:!1,type:"variant",bandwidth:n.bandwidth,language:n.language,label:null,kind:T,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:A,audioMimeType:o,videoMimeType:s,codecs:y.join(", "),audioCodec:u,videoCodec:p,primary:n.primary,roles:Array.from(x),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},r&&(n.videoId=r.id,n.originalVideoId=r.originalId,n.width=r.width||null,n.height=r.height||null,n.frameRate=r.frameRate||null,n.pixelAspectRatio=r.pixelAspectRatio||null,n.videoBandwidth=r.bandwidth||null,n.hdr=r.hdr||null,n.videoLayout=r.videoLayout||null),i&&(n.audioId=i.id,n.originalAudioId=i.originalId,n.channelsCount=i.channelsCount,n.audioSamplingRate=i.audioSamplingRate,n.audioBandwidth=i.bandwidth||null,n.spatialAudio=i.spatialAudio,n.label=i.label,n.audioRoles=i.roles,n.accessibilityPurpose=i.accessibilityPurpose,n.originalLanguage=i.originalLanguage),n}function ue(n){return{id:n.id,active:!1,type:eh,bandwidth:0,language:n.language,label:n.label,kind:n.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:n.mimeType,audioMimeType:null,videoMimeType:null,codecs:n.codecs||null,audioCodec:null,videoCodec:null,primary:n.primary,roles:n.roles,audioRoles:null,forced:n.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:n.originalId,originalImageId:null,accessibilityPurpose:n.accessibilityPurpose,originalLanguage:n.originalLanguage}}function ve(n){var i=n.width||null,r=n.height||null,o=null;n.segmentIndex&&(o=n.segmentIndex.get(0));var s=n.tilesLayout;return o&&(s=o.tilesLayout||s),s&&null!=i&&(i/=Number(s.split("x")[0])),s&&null!=r&&(r/=Number(s.split("x")[1])),{id:n.id,active:!1,type:"image",bandwidth:n.bandwidth||0,language:"",label:null,kind:null,width:i,height:r,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:n.mimeType,audioMimeType:null,videoMimeType:null,codecs:n.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:s||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:n.originalId,accessibilityPurpose:null,originalLanguage:null}}function we(n){return n.__shaka_id||(n.__shaka_id=e2++),n.__shaka_id}function ye(n){var i=ze(n);return i.active="disabled"!=n.mode,i.type="text",i.originalTextId=n.id,"captions"==n.kind&&(i.mimeType="application/cea-608"),"subtitles"==n.kind&&(i.mimeType="text/vtt"),n.kind&&(i.roles=[n.kind]),"forced"==n.kind&&(i.forced=!0),i}function Ae(n){var i=ze(n);return i.active=n.enabled,i.type="variant",i.originalAudioId=n.id,"main"==n.kind&&(i.primary=!0),n.kind&&(i.roles=[n.kind],i.audioRoles=[n.kind],i.label=n.label),i}function ze(n){var i=n.language;return{id:we(n),active:!1,type:"",bandwidth:0,language:Kb(i||"und"),label:n.label,kind:n.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:i}}function Be(n){return n.allowedByApplication&&n.allowedByKeySystem&&0==n.disabledUntilTime}function Ce(n){return n.filter(function(n){return Be(n)})}function De(n,i,r,o){var s=n,u=n.filter(function(n){return n.primary});u.length&&(s=u);var p=s.length?s[0].language:"";if(s=s.filter(function(n){return n.language==p}),i){var y=Tb(Kb(i),n.map(function(n){return n.language}));y&&(s=n.filter(function(n){return Kb(n.language)==y}))}if(s=s.filter(function(n){return n.forced==o}),r){if((n=Ee(s,r)).length)return n}else if((n=s.filter(function(n){return 0==n.roles.length})).length)return n;return(n=s.map(function(n){return n.roles}).reduce(xd,[])).length?Ee(s,n[0]):s}function Ee(n,i){return n.filter(function(n){return n.roles.includes(i)})}function ie(n){var i=[];return n.audio&&i.push(Fe(n.audio)),n.video&&i.push(Fe(n.video)),i.join(", ")}function Fe(n){return"audio"==n.type?"type=audio codecs="+n.codecs+" bandwidth="+n.bandwidth+" channelsCount="+n.channelsCount+" audioSamplingRate="+n.audioSamplingRate:"video"==n.type?"type=video codecs="+n.codecs+" bandwidth="+n.bandwidth+" frameRate="+n.frameRate+" width="+n.width+" height="+n.height:"unexpected stream type"}L("shaka.util.StreamUtils",Yd),Yd.meetsRestrictions=be;var e1={},e2=0,e3=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),e4=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ge(){var n=this;this.u=null,this.l=!1,this.i=new $b,this.D=null,navigator.connection&&navigator.connection.addEventListener&&(this.D=function(){if(n.l&&n.g.useNetworkInformation){n.i=new $b,n.g&&n.i.configure(n.g.advanced);var i=n.chooseVariant();i&&navigator.onLine&&n.u(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.D)),this.s=[],this.G=1,this.I=!1,this.h=this.m=this.g=this.C=null,this.H=new Dd(function(){if(n.g.restrictToElementSize){var i=n.chooseVariant();i&&n.u(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}}),this.j=null}function Je(n){if(n.I){if(Date.now()-n.C<1e3*n.g.switchInterval)return}else{var i=n.i;if(!(i.g>=i.i))return;n.I=!0}i=n.chooseVariant(),n.getBandwidthEstimate(),i&&n.u(i,n.g.clearBufferSwitch,n.g.safeMarginSwitch)}function He(n,i,r,o,s){if(n.j){var u=n.j.Ug();u&&(r=r.filter(function(n){return!n.bandwidth||!u||n.bandwidth<=u}))}return i&&(r=r.filter(function(n){return be(n,i,{width:s,height:o})})),r.sort(function(n,i){return n.bandwidth-i.bandwidth})}(N=Ge.prototype).stop=function(){this.u=null,this.l=!1,this.s=[],this.G=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.H.stop(),this.j=null},N.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.D),this.D=null),this.H=null},N.init=function(n){this.u=n},N.chooseVariant=function(i){i=void 0!==i&&i;var r=1/0,o=1/0;if(this.g.restrictToScreenSize&&(o=this.g.ignoreDevicePixelRatio?1:n.devicePixelRatio,r=n.screen.height*o,o*=n.screen.width),this.h&&this.g.restrictToElementSize){var s=this.g.ignoreDevicePixelRatio?1:n.devicePixelRatio;r=Math.min(r,this.m.clientHeight*s),o=Math.min(o,this.m.clientWidth*s)}var u=this.s.filter(function(n){return!(n.audio&&n.audio.fastSwitching||n.video&&n.video.fastSwitching)});if(u.length||(u=this.s),s=u,i&&u.length!=this.s.length&&(s=this.s.filter(function(n){return!!n.audio&&!!n.audio.fastSwitching||!!n.video&&!!n.video.fastSwitching})),i=He(this,this.g.restrictions,s,1/0,1/0),1/0!=r||1/0!=o){for(u=(i=t(i=function(n){var i=[];n=t(n);for(var r=n.next();!r.done;r=n.next())(r=r.value.video)&&r.height&&r.width&&i.push({height:r.height,width:r.width});return i.sort(function(n,i){return n.width-i.width})}(i))).next();!u.done;u=i.next())if((u=u.value).height>=r&&u.width>=o){r=u.height,o=u.width;break}i=He(this,this.g.restrictions,s,r,o)}for(r=this.getBandwidthEstimate(),s.length&&!i.length&&(i=[(i=He(this,null,s,1/0,1/0))[0]]),o=i[0]||null,s=0;s<i.length;s++){u=i[s];for(var p=isNaN(this.G)?1:Math.abs(this.G),y=p*u.bandwidth/this.g.bandwidthDowngradeTarget,A={bandwidth:1/0},T=s+1;T<i.length;T++)if(u.bandwidth!=i[T].bandwidth){A=i[T];break}p=p*A.bandwidth/this.g.bandwidthUpgradeTarget,r>=y&&r<=p&&o.bandwidth!=u.bandwidth&&(o=u)}return this.C=Date.now(),o},N.enable=function(){this.l=!0},N.disable=function(){this.l=!1},N.segmentDownloaded=function(n,i,r){this.i.sample(n,i),r&&null!=this.C&&this.l&&Je(this)},N.trySuggestStreams=function(){null!=this.C&&this.l&&Je(this)},N.getBandwidthEstimate=function(){var n=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(n=1e6*navigator.connection.downlink),n=this.i.getBandwidthEstimate(n),this.j?this.j.getBandwidthEstimate(n):n},N.setVariants=function(n){this.s=n},N.playbackRateChanged=function(n){this.G=n},N.setMediaElement=function(i){var r=this;this.m=i,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in n&&(this.h=new ResizeObserver(function(){r.H.S(e5)}),this.h.observe(this.m))},N.setCmsdManager=function(n){this.j=n},N.configure=function(n){this.g=n,this.i&&this.g&&this.i.configure(this.g.advanced)},L("shaka.abr.SimpleAbrManager",Ge),Ge.prototype.configure=Ge.prototype.configure,Ge.prototype.setCmsdManager=Ge.prototype.setCmsdManager,Ge.prototype.setMediaElement=Ge.prototype.setMediaElement,Ge.prototype.playbackRateChanged=Ge.prototype.playbackRateChanged,Ge.prototype.setVariants=Ge.prototype.setVariants,Ge.prototype.getBandwidthEstimate=Ge.prototype.getBandwidthEstimate,Ge.prototype.trySuggestStreams=Ge.prototype.trySuggestStreams,Ge.prototype.segmentDownloaded=Ge.prototype.segmentDownloaded,Ge.prototype.disable=Ge.prototype.disable,Ge.prototype.enable=Ge.prototype.enable,Ge.prototype.chooseVariant=Ge.prototype.chooseVariant,Ge.prototype.init=Ge.prototype.init,Ge.prototype.release=Ge.prototype.release,Ge.prototype.stop=Ge.prototype.stop;var e5=1;function Le(n,i){this.g=n,this.h=i}function Me(n,i){var r=new Le(5,0),o=e8,s=o.g,u=r.h-s.h;(0<(r.g-s.g||u)?o.i:o.h)(o.g,r,n,i)}function Oe(n,i,r,o){Ra([r,"has been deprecated and will be removed in",i,". We are currently at version",n,". Additional information:",o].join(" "))}function Pe(n,i,r,o){Qa([r,"has been deprecated and has been removed in",i,". We are now at version",n,". Additional information:",o].join(" "))}Le.prototype.toString=function(){return"v"+this.g+"."+this.h};var e8=null;function Qe(n,i,r,o){for(r=void 0===r||r,o=void 0!==o&&o,this.h=n,this.g=new Set([n]),i=(n=t(i=i||[])).next();!i.done;i=n.next())this.add(i.value,r,o)}function Re(n,i,r,o){var s;if(!(s=!!n.audio!=!!i.audio||!!n.video!=!!i.video||n.language!=i.language)&&(s=n.audio&&i.audio)){s=n.audio;var u=i.audio;s=!!((!s.channelsCount||!u.channelsCount||2<s.channelsCount||2<u.channelsCount)&&s.channelsCount!=u.channelsCount||r&&!Se(s,u)||!Te(s.roles,u.roles)||o&&s.groupId!==u.groupId)}return!(o=s)&&(o=n.video&&i.video)&&(n=n.video,i=i.video,o=!((!r||Se(n,i))&&Te(n.roles,i.roles))),!o}function Se(n,i){if(n.mimeType!=i.mimeType||(n=n.codecs.split(",").map(function(n){return ld(n)}),i=i.codecs.split(",").map(function(n){return ld(n)}),n.length!=i.length))return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Te(n,i){if(n=new Set(n),i=new Set(i),n.delete("main"),i.delete("main"),n.size!=i.size)return!1;n=t(n);for(var r=n.next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Ue(n,i,r){i=void 0===i?"reload":i,r=void 0!==r&&r,this.i=n,this.h=i,this.g=r,this.j=new Ve(n.language,"",n.audio&&n.audio.channelsCount?n.audio.channelsCount:0,"",!1,"","","",i,r)}function Ve(n,i,r,o,s,u,p,y,A,T){this.u=n,this.C=i,this.h=r,this.i=o,this.D=s,this.l=u,this.g=void 0===p?"":p,this.j=void 0===y?"":y,this.m=void 0===A?"reload":A,this.s=void 0!==T&&T}function ef(){this.g=e9,this.h=(new Map).set(e9,2).set(e6,1)}function hf(n,i,r){n.h.set(e9,r).set(e6,i)}L("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),L("shaka.config.CodecSwitchingStrategy",{Zj:"reload",Eh:"smooth"}),Qe.prototype.add=function(n,i,r){return!!Re(this.h,n,void 0===i||i,void 0!==r&&r)&&(this.g.add(n),!0)},Qe.prototype.values=function(){return this.g.values()},Ue.prototype.create=function(n){var i=this,r="smooth"==this.h&&fc(),o=n.filter(function(n){return Re(i.i,n,!r,i.g)});return o.length?new Qe(o[0],o,!r,this.g):this.j.create(n)},Ve.prototype.create=function(i){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G=[];r=i,G=(s=Tb(Kb(this.u),r.map(function(n){return Sb(n)})))?r.filter(function(n){return s==Sb(n)}):[];var H=i.filter(function(n){return n.primary});return(u=G=G.length?G:H.length?H:i,p=this.C,i=u.filter(function(n){return!!n.audio&&(p?n.audio.roles.includes(p):0==n.audio.roles.length)})).length&&(G=i),this.l&&(y=G,A=this.l,i=y.filter(function(n){return!n.video||!n.video.videoLayout||n.video.videoLayout==A})).length&&(G=i),this.i&&(T=G,"AUTO"==(x=this.i)&&(x=n.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),i=T.filter(function(n){return!n.video||!n.video.hdr||n.video.hdr==x})).length&&(G=i),this.h&&(C=G,I=this.h,i=C.filter(function(n){return!n.audio||!n.audio.channelsCount||n.audio.channelsCount==I})).length&&(G=i),this.g&&(M=G,N=this.g,i=M.filter(function(n){return!!n.audio&&!!n.audio.label&&n.audio.label.toLowerCase()==N.toLowerCase()})).length&&(G=i),this.j&&(_=G,j=this.j,i=_.filter(function(n){return!!n.video&&!!n.video.label&&n.video.label.toLowerCase()==j.toLowerCase()})).length&&(G=i),(B=G,z=this.D,i=B.filter(function(n){return!n.audio||n.audio.spatialAudio==z})).length&&(G=i),new Qe(G[0],G,!("smooth"==this.m&&fc()),this.s)};var e6=0,e9=1;function jf(n,i){var r=kf();this.l=null==n.maxAttempts?r.maxAttempts:n.maxAttempts,this.j=null==n.baseDelay?r.baseDelay:n.baseDelay,this.s=null==n.fuzzFactor?r.fuzzFactor:n.fuzzFactor,this.m=null==n.backoffFactor?r.backoffFactor:n.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==i&&i)&&(this.g=1)}function lf(n){var i,r;return K(function(o){if(1==o.g){if(n.g>=n.l){if(n.i)n.g=1,n.h=n.j;else throw new P(2,7,1010)}return(i=n.g,n.g++,0==i)?o.return():(r=n.h*(1+(2*Math.random()-1)*n.s),D(o,new Promise(function(n){new Dd(n).S(r/1e3)}),2))}n.h*=n.m,F(o)})}function kf(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function mf(){var n,i,r=new Promise(function(r,o){n=r,i=o});return r.resolve=n,r.reject=i,r}function nf(n,i){this.promise=n,this.i=i,this.g=!1}function of(n){return new nf(Promise.reject(n),function(){return Promise.resolve()})}function pf(){var n=Promise.reject(new P(2,7,7001));return n.catch(function(){}),new nf(n,function(){return Promise.resolve()})}function qf(n){return new nf(Promise.resolve(n),function(){return Promise.resolve()})}function rf(n){return new nf(n,function(){return n.catch(function(){})})}function sf(n){return new nf(Promise.all(n.map(function(n){return n.promise})),function(){return Promise.all(n.map(function(n){return n.abort()}))})}function uf(){this.g=[]}function vf(n,i){n.g.push(i.finally(function(){vc(n.g,i)}))}function wf(n,i,r,o,s){$a.call(this),this.i=!1,this.m=new uf,this.g=new Set,this.h=new Set,this.l=n||null,this.j=i||null,this.u=r||null,this.C=o||null,this.D=s||null,this.s=!1}function xf(n,i,r,o){r=r||to;var s=ts[n];(!s||r>=s.priority)&&(ts[n]={priority:r,Ge:i,$i:void 0!==o&&o})}function Af(n,i,r){return{uris:n,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:i,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===r?null:r}}function Hf(n){if(n){var i=n.segment;if(n=n.stream,i&&n&&n.fastSwitching&&i.Fd)return!1}return!0}function Bf(){this.g=0}function Cf(n,i,r){nf.call(this,n,i),this.h=r}mf.prototype.resolve=function(){},mf.prototype.reject=function(){},nf.prototype.abort=function(){return this.g=!0,this.i()},nf.prototype.finally=function(n){return this.promise.then(function(){return n(!0)},function(){return n(!1)}),this},nf.prototype.Fa=function(n,i){function c(u){return function(p){if(r.g&&u)o.reject(s);else{var y=u?n:i;y?d=function(n,i,r){try{var o=n(i);if(o&&o.promise&&o.abort)return r.resolve(o.promise),function(){return o.abort()};return r.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})}}catch(n){return r.reject(n),function(){return Promise.resolve()}}}(y,p,o):(u?o.resolve:o.reject)(p)}}}function d(){return o.reject(s),r.abort()}var r=this,o=new mf,s=new P(2,7,7001);return this.promise.then(c(!0),c(!1)),new nf(o,function(){return d()})},L("shaka.util.AbortableOperation",nf),nf.prototype.chain=nf.prototype.Fa,nf.prototype.finally=nf.prototype.finally,nf.all=sf,nf.prototype.abort=nf.prototype.abort,nf.notAbortable=rf,nf.completed=qf,nf.aborted=pf,nf.failed=of,uf.prototype.destroy=function(){for(var n=[],i=t(this.g),r=i.next();!r.done;r=i.next())(r=r.value).promise.catch(function(){}),n.push(r.abort());return this.g=[],Promise.all(n)},pa(wf,$a),(N=wf.prototype).mg=function(n){this.s=n},N.aj=function(n){this.g.add(n)},N.uj=function(n){this.g.delete(n)},N.Lh=function(){this.g.clear()},N.bj=function(n){this.h.add(n)},N.vj=function(n){this.h.delete(n)},N.Mh=function(){this.h.clear()},N.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),$a.prototype.release.call(this),this.m.destroy()},N.request=function(n,i,r){var o=this,s=new Bf;if(this.i){var u=Promise.reject(new P(2,7,7001));return u.catch(function(){}),new Cf(u,function(){return Promise.resolve()},s)}i.method=i.method||"GET",i.headers=i.headers||{},i.retryParameters=i.retryParameters?Ad(i.retryParameters):kf(),i.uris=Ad(i.uris);var p=(u=function(n,i,r,o){function e(n){s=s.Fa(function(){return r.body&&(r.body=mc(r.body)),n(i,r,o)})}var s=qf(void 0);n.C&&e(n.C),n=t(n.g);for(var u=n.next();!u.done;u=n.next())e(u.value);return s.Fa(void 0,function(n){if(n instanceof P&&7001==n.code)throw n;throw new P(2,1,1006,n)})}(this,n,i,r)).Fa(function(){return function Ef(n,i,r,o,s,u,p,y){n.s&&(r.uris[u]=r.uris[u].replace("http://","https://")),0<u&&n.D&&n.D(i,o,r.uris[u],r.uris[u-1]);var A=new fb(r.uris[u]),T=A.wb,x=!1;T||(gb(A,T=(T=location.protocol).slice(0,-1)),r.uris[u]=A.toString());var C=(T=ts[T=T.toLowerCase()])?T.Ge:null;if(!C)return of(new P(2,1,1e3,A));var I,M=T.$i,N=null,_=null,j=!1,B=!1;return rf(lf(s)).Fa(function(){if(n.i)return pf();I=Date.now();var s=C(r.uris[u],r,i,function(r,s,u){N&&N.stop(),_&&_.S(A/1e3),n.l&&i==e7&&(n.l(r,s,Hf(o)),x=!0,y.g=u)},function(o){n.j&&n.j(o,r,i),B=!0});if(!M)return s;var p=r.retryParameters.connectionTimeout;p&&(N=new Dd(function(){j=!0,s.abort()})).S(p/1e3);var A=r.retryParameters.stallTimeout;return A&&(_=new Dd(function(){j=!0,s.abort()})),s}).Fa(function(o){N&&N.stop(),_&&_.stop(),void 0==o.timeMs&&(o.timeMs=Date.now()-I);var s={response:o,Gi:x};return!B&&n.j&&n.j(o.headers,r,i),s},function(A){if(N&&N.stop(),_&&_.stop(),n.u){var T=null,x=0;A instanceof P&&(T=A,1001==A.code&&(x=A.data[1])),n.u(r,T,x,j)}if(n.i)return pf();if(j&&(A=new P(1,1,1003,r.uris[u],i)),A instanceof P){if(7001==A.code)throw A;if(1010==A.code)throw p;if(1==A.severity)return T=(new Map).set("error",A),T=new O("retry",T),n.dispatchEvent(T),u=(u+1)%r.uris.length,Ef(n,i,r,o,s,u,A,y)}throw A})}(o,n,i,r,new jf(i.retryParameters,!1),0,null,s)}),y=p.Fa(function(i){return function(n,i,r,o){var s=qf(void 0),u={};n=t(n.h);for(var p=n.next();!p.done;u={Ye:u.Ye},p=n.next())u.Ye=p.value,s=s.Fa(function(n){return function(){var s=r.response;return s.data&&(s.data=mc(s.data)),n.Ye(i,s,o)}}(u));return s.Fa(function(){return r},function(n){var i=2;if(n instanceof P){if(7001==n.code)throw n;i=n.severity}throw new P(i,1,1007,n)})}(o,n,i,r)}),A=Date.now(),T=0;u.promise.then(function(){T=Date.now()-A},function(){});var x=0;p.promise.then(function(){x=Date.now()},function(){});var C=y.Fa(function(s){var u=Date.now()-x,p=s.response;return p.timeMs+=T,p.timeMs+=u,s.Gi||!o.l||p.fromCache||"HEAD"==i.method||n!=e7||o.l(p.timeMs,p.data.byteLength,Hf(r)),p},function(n){throw n&&(n.severity=2),n});return u=new Cf(C.promise,function(){return C.abort()},s),vf(this.m,u),u},L("shaka.net.NetworkingEngine",wf),wf.prototype.request=wf.prototype.request,wf.prototype.destroy=wf.prototype.destroy,wf.makeRequest=Af,wf.defaultRetryParameters=function(){return kf()},wf.prototype.clearAllResponseFilters=wf.prototype.Mh,wf.prototype.unregisterResponseFilter=wf.prototype.vj,wf.prototype.registerResponseFilter=wf.prototype.bj,wf.prototype.clearAllRequestFilters=wf.prototype.Lh,wf.prototype.unregisterRequestFilter=wf.prototype.uj,wf.prototype.registerRequestFilter=wf.prototype.aj,wf.unregisterScheme=function(n){delete ts[n]},wf.registerScheme=xf,wf.prototype.setForceHTTPS=wf.prototype.mg,wf.NumBytesRemainingClass=Bf,pa(Cf,nf),wf.PendingRequest=Cf;var e7=1;wf.RequestType={MANIFEST:0,SEGMENT:e7,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},wf.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var to=3;wf.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:to};var ts={};function If(n){this.g=!1,this.h=new mf,this.i=n}function Jf(n,i){if(n.g){if(i instanceof P&&7003==i.code)throw i;throw new P(2,7,7003,i)}}function Kf(){this.g=new Za}function Lf(n,i,r,o){this.target=n,this.type=i,this.listener=r,this.g=function(n,i){if(void 0==i)return!1;if("boolean"==typeof i)return i;var r=new Set(["passive","capture"]);return Object.keys(i).filter(function(n){return!r.has(n)}),!function(n){var i=tu;if(void 0==i){i=!1;try{var r={},o={get:function(){return i=!0,!1}};Object.defineProperty(r,"passive",o),Object.defineProperty(r,"capture",o),o=function(){},n.addEventListener("test",o,r),n.removeEventListener("test",o,r)}catch(n){i=!1}tu=i}return i||!1}(n)?i.capture||!1:i}(n,o),this.target.addEventListener(i,r,this.g)}If.prototype.destroy=function(){var n=this;return this.g?this.h:(this.g=!0,this.i().then(function(){n.h.resolve()},function(){n.h.resolve()}))},(N=Kf.prototype).release=function(){this.ub(),this.g=null},N.o=function(n,i,r,o){this.g&&(n=new Lf(n,i,r,o),this.g.push(i,n))},N.na=function(n,i,r,o){var s=this;this.o(n,i,function e(o){s.hc(n,i,e),r(o)},o)},N.hc=function(n,i,r){if(this.g){var o=this.g.get(i)||[];o=t(o);for(var s=o.next();!s.done;s=o.next())(s=s.value).target!=n||r!=s.listener&&r||(s.hc(),this.g.remove(i,s))}},N.ub=function(){if(this.g){var n,i=this.g,r=[];for(n in i.g)r.push.apply(r,w(i.g[n]));for(r=(i=t(r)).next();!r.done;r=i.next())r.value.hc();this.g.g={}}},L("shaka.util.EventManager",Kf),Kf.prototype.removeAll=Kf.prototype.ub,Kf.prototype.unlisten=Kf.prototype.hc,Kf.prototype.listenOnce=Kf.prototype.na,Kf.prototype.listen=Kf.prototype.o,Kf.prototype.release=Kf.prototype.release,Lf.prototype.hc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var tu=void 0;function Pf(n){this.h=n,this.g=void 0}function Qf(n){for(var i=new Map,r=t(Object.keys(n)),o=r.next();!o.done;o=r.next())o=o.value,i.set(o,n[o]);return i}function Rf(n){var i={};return n.forEach(function(n,r){i[r]=n}),i}function Sf(){}function Tf(i){if(!i)return"";if(239==(i=lc(i))[0]&&187==i[1]&&191==i[2]&&(i=i.subarray(3)),n.TextDecoder&&!Qd())return(i=(new TextDecoder).decode(i)).includes("")&&Qa('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),i;for(var r="",o=0;o<i.length;++o){var s=65533;if(0==(128&i[o])?s=i[o]:i.length>=o+2&&192==(224&i[o])&&128==(192&i[o+1])?(s=(31&i[o])<<6|63&i[o+1],o+=1):i.length>=o+3&&224==(240&i[o])&&128==(192&i[o+1])&&128==(192&i[o+2])?(s=(15&i[o])<<12|(63&i[o+1])<<6|63&i[o+2],o+=2):i.length>=o+4&&240==(241&i[o])&&128==(192&i[o+1])&&128==(192&i[o+2])&&128==(192&i[o+3])&&(s=(7&i[o])<<18|(63&i[o+1])<<12|(63&i[o+2])<<6|63&i[o+3],o+=3),65535>=s)r+=String.fromCharCode(s);else{var u=1023&(s-=65536);r+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(56320+u)}}return r}function Uf(n,i,r){if(!n)return"";if(!r&&0!=n.byteLength%2)throw new P(2,2,2004);r=Math.floor(n.byteLength/2);var o=new Uint16Array(r);n=pc(n);for(var s=0;s<r;s++)o[s]=n.getUint16(2*s,i);return tl.value()(o)}function Wf(n){function b(n){return i.byteLength<=n||32<=i[n]&&126>=i[n]}if(!n)return"";var i=lc(n);if(239==i[0]&&187==i[1]&&191==i[2])return Tf(i);if(254==i[0]&&255==i[1])return Uf(i.subarray(2),!1);if(255==i[0]&&254==i[1])return Uf(i.subarray(2),!0);if(0==i[0]&&0==i[2])return Uf(n,!1);if(0==i[1]&&0==i[3])return Uf(n,!0);if(b(0)&&b(1)&&b(2)&&b(3))return Tf(n);throw new P(2,2,2003)}function Xf(i){if(n.TextEncoder&&!Qd()){var r=new TextEncoder;return mc(r.encode(i))}i=unescape(i=encodeURIComponent(i)),r=new Uint8Array(i.length);for(var o=0;o<i.length;o++)r[o]=i[o].charCodeAt(0);return mc(r)}function Yf(n,i){for(var r=new ArrayBuffer(2*n.length),o=new DataView(r),s=0;s<n.length;++s)o.setUint16(2*s,n.charCodeAt(s),i);return r}Pf.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},L("shaka.util.StringUtils",Sf),Sf.resetFromCharCode=function(){tl.g=void 0},Sf.toUTF16=Yf,Sf.toUTF8=Xf,Sf.fromBytesAutoDetect=Wf,Sf.fromUTF16=Uf,Sf.fromUTF8=Tf;var tl=new Pf(function(){for(var n={Wb:65536};0<n.Wb;n={Wb:n.Wb},n.Wb/=2)if(function(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch(n){return!1}}(n.Wb))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.Wb)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.Wb));return r}}(n);return null});function Zf(n,i){this.h=pc(n),this.i=i==tc,this.g=0}function ag(){return new P(2,3,3e3)}(N=Zf.prototype).xa=function(){return this.g<this.h.byteLength},N.Ga=function(){return this.g},N.getLength=function(){return this.h.byteLength},N.ra=function(){try{var n=this.h.getUint8(this.g);return this.g+=1,n}catch(n){throw ag()}},N.Ua=function(){try{var n=this.h.getUint16(this.g,this.i);return this.g+=2,n}catch(n){throw ag()}},N.O=function(){try{var n=this.h.getUint32(this.g,this.i);return this.g+=4,n}catch(n){throw ag()}},N.ih=function(){try{var n=this.h.getInt32(this.g,this.i);return this.g+=4,n}catch(n){throw ag()}},N.Uc=function(){try{if(this.i)var n=this.h.getUint32(this.g,!0),i=this.h.getUint32(this.g+4,!0);else i=this.h.getUint32(this.g,!1),n=this.h.getUint32(this.g+4,!1)}catch(n){throw ag()}if(2097151<i)throw new P(2,3,3001);return this.g+=8,4294967296*i+n},N.Sb=function(n){if(this.g+n>this.h.byteLength)throw ag();var i=lc(this.h,this.g,n);return this.g+=n,i},N.skip=function(n){if(this.g+n>this.h.byteLength)throw ag();this.g+=n},N.jj=function(n){if(this.g<n)throw ag();this.g-=n},N.seek=function(n){if(0>n||n>this.h.byteLength)throw ag();this.g=n},N.Hd=function(){for(var n=this.g;this.xa()&&0!=this.h.getUint8(this.g);)this.g+=1;return n=lc(this.h,n,this.g-n),this.g+=1,Tf(n)},L("shaka.util.DataViewReader",Zf),Zf.prototype.readTerminatedString=Zf.prototype.Hd,Zf.prototype.seek=Zf.prototype.seek,Zf.prototype.rewind=Zf.prototype.jj,Zf.prototype.skip=Zf.prototype.skip,Zf.prototype.readBytes=Zf.prototype.Sb,Zf.prototype.readUint64=Zf.prototype.Uc,Zf.prototype.readInt32=Zf.prototype.ih,Zf.prototype.readUint32=Zf.prototype.O,Zf.prototype.readUint16=Zf.prototype.Ua,Zf.prototype.readUint8=Zf.prototype.ra,Zf.prototype.getLength=Zf.prototype.getLength,Zf.prototype.getPosition=Zf.prototype.Ga,Zf.prototype.hasMoreData=Zf.prototype.xa;var tc=1;function bg(){this.i=[],this.h=[],this.g=!1}function gg(n){for(var i=hg(n);n.reader.xa()&&!n.parser.g;)n.parser.Ed(n.start+i,n.reader,n.partialOkay)}function ig(n){for(var i=hg(n),r=n.reader.O(),o=0;o<r&&(n.parser.Ed(n.start+i,n.reader,n.partialOkay),!n.parser.g);o++);}function jg(n){var i=hg(n);for(n.reader.skip(78);n.reader.xa()&&!n.parser.g;)n.parser.Ed(n.start+i,n.reader,n.partialOkay)}function kg(n){return function(i){n(i.reader.Sb(i.reader.getLength()-i.reader.Ga()))}}function cg(n){var i=0;n=t(n);for(var r=n.next();!r.done;r=n.next())i=i<<8|r.value.charCodeAt(0);return i}function fg(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}function hg(n){return 8+(n.has64BitSize?8:0)+(null!=n.flags?4:0)}Zf.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:tc},(N=bg.prototype).box=function(n,i){return n=cg(n),this.i[n]=th,this.h[n]=i,this},N.T=function(n,i){return n=cg(n),this.i[n]=tf,this.h[n]=i,this},N.stop=function(){this.g=!0},N.parse=function(n,i,r){for(n=new Zf(n,0),this.g=!1;n.xa()&&!this.g;)this.Ed(0,n,i,r)},N.Ed=function(n,i,r,o){var s=i.Ga();if(o&&s+8>i.getLength())this.g=!0;else{var u=i.O(),p=i.O(),y=fg(p),A=!1;switch(u){case 0:u=i.getLength()-s;break;case 1:if(o&&i.Ga()+8>i.getLength()){this.g=!0;return}u=i.Uc(),A=!0}var T=this.h[p];if(T){var x=null,C=null;if(this.i[p]==tf){if(o&&i.Ga()+4>i.getLength()){this.g=!0;return}x=(C=i.O())>>>24,C&=16777215}p=s+u,r&&p>i.getLength()&&(p=i.getLength()),o&&p>i.getLength()?this.g=!0:(i=0<(o=p-i.Ga())?i.Sb(o):new Uint8Array(0),T({name:y,parser:this,partialOkay:r||!1,version:x,flags:C,reader:i=new Zf(i,0),size:u,start:s+n,has64BitSize:A}))}else i.skip(Math.min(s+u-i.Ga(),i.getLength()-i.Ga()))}},L("shaka.util.Mp4Parser",bg),bg.headerSize=hg,bg.typeToString=fg,bg.allData=kg,bg.visualSampleEntry=jg,bg.sampleDescription=ig,bg.children=gg,bg.prototype.parseNext=bg.prototype.Ed,bg.prototype.parse=bg.prototype.parse,bg.prototype.stop=bg.prototype.stop,bg.prototype.fullBox=bg.prototype.T,bg.prototype.box=bg.prototype.box;var th=0,tf=1;function lg(){}function og(n){return n=lc(n),btoa(n=tl.value()(n))}function pg(n,i){return i=void 0==i||i,n=og(n).replace(/\+/g,"-").replace(/\//g,"_"),i?n:n.replace(/[=]*$/,"")}function qg(i){i=n.atob(i.replace(/-/g,"+").replace(/_/g,"/"));for(var r=new Uint8Array(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}function rg(i){for(var r=i.length/2,o=new Uint8Array(r),s=0;s<r;s++)o[s]=n.parseInt(i.substr(2*s,2),16);return o}function sg(n){var i=lc(n);n="",i=t(i);for(var r=i.next();!r.done;r=i.next())1==(r=(r=r.value).toString(16)).length&&(r="0"+r),n+=r;return n}function tg(){for(var n=Ga.apply(0,arguments),i=0,r=0;r<n.length;++r)i+=n[r].byteLength;i=new Uint8Array(i);for(var o=r=0;o<n.length;++o){var s=n[o];s instanceof Uint8Array?i.set(s,r):i.set(lc(s),r),r+=s.byteLength}return i}function ug(n){var i=this;this.g=[],this.h=[],this.data=[],(new bg).box("moov",gg).box("moof",gg).T("pssh",function(n){if(!(1<n.version)){var r=lc(n.reader.h,-12,n.size);if(i.data.push(r),i.g.push(sg(n.reader.Sb(16))),0<n.version){r=n.reader.O();for(var o=0;o<r;o++){var s=sg(n.reader.Sb(16));i.h.push(s)}}}}).parse(n)}function vg(n,i,r,o){var s=n.length,u=i.length+16+s;0<o&&(u+=4+16*r.size);var p=new Uint8Array(u),y=pc(p),A=0;if(y.setUint32(A,u),A+=4,y.setUint32(A,1886614376),A+=4,1>o?y.setUint32(A,0):y.setUint32(A,16777216),A+=4,p.set(i,A),A+=i.length,0<o)for(y.setUint32(A,r.size),A+=4,r=(i=t(r)).next();!r.done;r=i.next())r=rg(r.value),p.set(r,A),A+=r.length;return y.setUint32(A,s),p.set(n,A+4),p}function wg(n,i){return 1!=(n=xg(n,i)).length?null:n[0]}function yg(n,i,r){return 1!=(n=zg(n,i,r)).length?null:n[0]}function xg(n,i){var r=[];n=t(n.childNodes);for(var o=n.next();!o.done;o=n.next())(o=o.value)instanceof Element&&o.tagName==i&&r.push(o);return r}function zg(n,i,r){var o=[];n=t(n.childNodes);for(var s=n.next();!s.done;s=n.next())(s=s.value)instanceof Element&&s.localName==r&&s.namespaceURI==i&&o.push(s);return o}function Bg(n,i,r){return n.hasAttributeNS(i,r)?n.getAttributeNS(i,r):null}function Cg(n,i,r){i=t(i);for(var o=i.next();!o.done;o=i.next())if(o=o.value,n.hasAttributeNS(o,r))return n.getAttributeNS(o,r);return null}function Dg(n){return Array.from(n.childNodes).every(Eg)?n.textContent.trim():null}function Eg(n){return n.nodeType==Node.TEXT_NODE||n.nodeType==Node.CDATA_SECTION_NODE}function Fg(n,i,r,o){o=void 0===o?null:o;var s=null;return null!=(n=n.getAttribute(i))&&(s=r(n)),null==s?o:s}function Gg(n){return n?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),isNaN(n=Date.parse(n))?null:n/1e3):null}function Hg(n){return n&&(n=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(n))&&isFinite(n=31536e3*Number(n[1]||null)+2592e3*Number(n[2]||null)+86400*Number(n[3]||null)+3600*Number(n[4]||null)+60*Number(n[5]||null)+Number(n[6]||null))?n:null}function Ig(n){var i=/([0-9]+)-([0-9]+)/.exec(n);return i&&isFinite(n=Number(i[1]))&&isFinite(i=Number(i[2]))?{start:n,end:i}:null}function Jg(n){return 0==(n=Number(n))%1?n:null}function Kg(n){return 0==(n=Number(n))%1&&0<n?n:null}function Lg(n){return 0==(n=Number(n))%1&&0<=n?n:null}function Mg(n){return isNaN(n=Number(n))?null:n}function Ng(n){return!!n&&"true"===n.toLowerCase()}function Og(n){var i,r=(i=n.match(/^(\d+)\/(\d+)$/))?Number(i[1])/Number(i[2]):Number(n);return isNaN(r)?null:r}function Pg(n,i){var r=new DOMParser,o=tv.value()(n);n=null;try{n=r.parseFromString(o,"text/xml")}catch(n){return null}if(!(r=n.documentElement)||r.getElementsByTagName("parsererror").length||r.tagName!=i)return null;if(!("createNodeIterator"in document))return r;for(i=document.createNodeIterator(n,NodeFilter.SHOW_ALL);n=i.nextNode();)if(n instanceof HTMLElement||n instanceof SVGElement)return null;return r}function Rg(n,i){try{var r=Wf(n);return Pg(r,i)}catch(n){return null}}L("shaka.util.Uint8ArrayUtils",lg),lg.concat=tg,lg.toHex=sg,lg.fromHex=rg,lg.fromBase64=qg,lg.toBase64=pg,lg.toStandardBase64=og;var tv=new Pf(function(){if("undefined"!=typeof trustedTypes){var n=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(n){return n}});return function(i){return n.createHTML(i)}}return function(n){return n}});function Sg(n,i){var r=this;i=void 0===i?1:i,this.G=n,this.J=new Set,this.m=this.u=null,this.ha=this.$=!1,this.K=0,this.g=null,this.D=new Kf,this.i=new Map,this.C=new Map,this.l=new mf,this.h=null,this.s=function(i){2==i.severity&&r.l.reject(i),n.onError(i)},this.V=new Map,this.aa=new Map,this.W=new Dd(function(){var n,i,o;return i=(n=r).V,void((o=n.aa).clear(),i.forEach(function(n,i){return o.set(i,n)}),(i=Array.from(o.values())).length&&i.every(function(n){return"expired"==n})&&n.s(new P(2,6,6014)),n.G.Fe(Rf(o)))}),this.M=!1,this.L=[],this.N=!1,this.Aa=new Dd(function(){(function(n){n.i.forEach(function(i,r){var o=i.Yf,s=r.expiration;isNaN(s)&&(s=1/0),s!=o&&(n.G.onExpirationUpdated(r.sessionId,s),i.Yf=s)})})(r)}).za(i),this.l.catch(function(){}),this.j=new If(function(){var n;return n=r,K(function(i){switch(i.g){case 1:return n.D.release(),n.D=null,n.l.reject(),n.Aa.stop(),n.Aa=null,n.W.stop(),n.W=null,D(i,Wg(n),2);case 2:if(!n.m){i.F(3);break}return ta(i,4),D(i,n.m.setMediaKeys(null),6);case 6:va(i,5);break;case 4:wa(i);case 5:n.m=null;case 3:n.g=null,n.J.clear(),n.u=null,n.C=new Map,n.h=null,n.s=function(){},n.G=null,n.Z=!1,n.I=null,F(i)}})}),this.Z=!1,this.H=this.I=null}function Zg(n,i,r){n.C=new Map,r=t(r);for(var o=r.next();!o.done;o=r.next())n.C.set(o.value,{initData:null,initDataType:null});for(o=(r=t(n.h.persistentSessionsMetadata)).next();!o.done;o=r.next())o=o.value,n.C.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return n.M=0<n.C.size,Yg(n,i)}function Yg(i,r){var o,s,u,p,y,A,T,x,C,I,M,N;return K(function(_){if(1==_.g){if(o=function(i){if(0==(i=Qf(i.h.clearKeys)).size)return null;var r=[],o=[];i.forEach(function(n,i){var s=i;22!=s.length&&(s=pg(rg(i),!1)),22!=(i=n).length&&(i=pg(rg(n),!1)),n={kty:"oct",kid:s,k:i},r.push(n),o.push(n.kid)}),i=JSON.stringify({keys:r});var s=JSON.stringify({kids:o});return s=[{initData:lc(Xf(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+n.btoa(i),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(o)}}(i))for(u=(s=t(r)).next();!u.done;u=s.next())(p=u.value).video&&(p.video.drmInfos=[o]),p.audio&&(p.audio.drmInfos=[o]);for((y=r.some(function(n){return!!n.video&&!!n.video.drmInfos.length||!!n.audio&&!!n.audio.drmInfos.length}))||function(n,i){var r=[];for(i.forEach(function(n,i){r.push({keySystem:i,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),i=(n=t(n)).next();!i.done;i=n.next())(i=i.value).video&&(i.video.drmInfos=r),i.audio&&(i.audio.drmInfos=r)}(r,Qf(i.h.servers)),A=new Set,u=(T=t(r)).next();!u.done;u=T.next())for(C=(x=t(dh(u.value))).next();!C.done;C=x.next())I=C.value,A.add(I);for(C=(M=t(A)).next();!C.done;C=M.next())!function(i,r,o,s){var u=i.keySystem;u&&("org.w3.clearkey"!=u||!i.licenseServerUri)&&(r.size&&(r=r.get(u)||"",i.licenseServerUri=r),i.keyIds||(i.keyIds=new Set),(o=o.get(u))&&(i.distinctiveIdentifierRequired||(i.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),i.persistentStateRequired||(i.persistentStateRequired=o.persistentStateRequired),i.videoRobustness||(i.videoRobustness=o.videoRobustness),i.audioRobustness||(i.audioRobustness=o.audioRobustness),i.serverCertificate||(i.serverCertificate=o.serverCertificate),o.sessionType&&(i.sessionType=o.sessionType),i.serverCertificateUri||(i.serverCertificateUri=o.serverCertificateUri)),s[u]&&(i.keySystem=s[u]),n.cast&&n.cast.__platform__&&"com.microsoft.playready"==u&&(i.keySystem="com.chromecast.playready"))}(C.value,Qf(i.h.servers),Qf(i.h.advanced||{}),i.h.keySystemsMapping);return D(_,he(r,i.M,i.Z,i.h.preferredKeySystems),2)}return y||Object.keys(i.h.servers).length?(N=ah(i,void 0,r),_.return(y?N:N.catch(function(){}))):(i.$=!0,_.return(Promise.resolve()))})}function fh(n){var i;return K(function(r){switch(r.g){case 1:if(n.m.mediaKeys)return r.return();if(!n.I){r.F(2);break}return D(r,n.I,3);case 3:return Jf(n.j),r.return();case 2:return ta(r,4),n.I=n.m.setMediaKeys(n.u),D(r,n.I,6);case 6:va(r,5);break;case 4:i=wa(r),n.s(new P(2,6,6003,i.message));case 5:Jf(n.j),F(r)}})}function jh(n){var i,r,o,s;return K(function(u){if(1==u.g)return n.C.size?(n.C.forEach(function(i,r){mh(n,r,i)}),D(u,n.l,3)):u.F(2);if(2!=u.g){if(0<(n.g&&n.g.keyIds||new Set([])).size&&function(n){for(var i=t(n.g&&n.g.keyIds||new Set([])),r=i.next();!r.done;r=i.next())if("usable"!==n.V.get(r.value))return!1;return!0}(n))return u.return(n.l);n.l=new mf,n.l.catch(function(){})}for(o=(r=t(i=(n.g?n.g.initData:[])||[])).next();!o.done;o=r.next())hh(n,(s=o.value).initDataType,s.initData);return i.length||n.l.resolve(),u.return(n.l)})}function hh(n,i,r){if(r.length){var o=n.i.values();o=t(o);for(var s=o.next();!s.done;s=o.next())if(jc(r,s.value.initData)&&n.h.ignoreDuplicateInitData)return;0<n.i.size&&oh(n)&&(n.l.resolve(),n.l=new mf,n.l.catch(function(){})),function(n,i,r,o){try{var s=n.u.createSession(o)}catch(i){n.s(new P(2,6,6005,i.message));return}n.D.o(s,"message",function(i){n.m&&n.h.delayLicenseRequestUntilPlayed&&n.m.paused&&!n.N?n.L.push(i):ih(n,i)}),n.D.o(s,"keystatuseschange",function(i){return yh(n,i)}),n.i.set(s,{initData:r,initDataType:i,loaded:!1,Yf:1/0,Db:null,type:o});try{r=n.h.initDataTransform(r,i,n.g)}catch(r){i=r,r instanceof P||(i=new P(2,6,6016,r)),n.s(i);return}n.h.logLicenseExchange&&pg(r),s.generateRequest(i,r).catch(function(i){if(!n.j.g){n.i.delete(s);var r=i.errorCode;if(r&&r.systemCode){var o=r.systemCode;0>o&&(o+=4294967296),o="0x"+o.toString(16)}n.s(new P(2,6,6006,i.message,i,o))}})}(n,i,r,n.g.sessionType)}}function qh(n){return!!n&&!!n.match(/^com\.(microsoft|chromecast)\.playready/)}function rh(n){return Array.from(n=ab(n=n.i.keys(),function(n){return n.sessionId}))}function ah(n,i,r){var o,s,u,p,y,A,T,x,C,I,M,N,_,j;return K(function(B){switch(B.g){case 1:var z,G,H,q,Y,Q,J,$,ea,es,ec,ed,eh,ep,eg,em;if(o=new Map,r.length){s=function(n,i,r){for(var o=t(i),s=o.next();!s.done;s=o.next()){var u=t(dh(s.value));for(s=u.next();!s.done;s=u.next())s=s.value,r.has(s.keySystem)||r.set(s.keySystem,[]),r.get(s.keySystem).push(s)}if(1==r.size&&r.has(""))throw new P(2,6,6e3);for(o={},s=(n=t(n.h.preferredKeySystems)).next();!s.done;o={Xe:o.Xe},s=n.next())for(o.Xe=s.value,s=(u=t(i)).next();!s.done;s=u.next())if(s=s.value.decodingInfos.find(function(n){return function(i){return i.supported&&null!=i.keySystemAccess&&i.keySystemAccess.keySystem==n.Xe}}(o)))return s.keySystemAccess;for(s=(n=t([!0,!1])).next();!s.done;s=n.next())for(o=s.value,s=(u=t(i)).next();!s.done;s=u.next()){var p=t(s.value.decodingInfos);for(s=p.next();!s.done;s=p.next()){var y=s.value;if(y.supported&&y.keySystemAccess){var A=t(s=r.get(y.keySystemAccess.keySystem));for(s=A.next();!s.done;s=A.next())if(!!s.value.licenseServerUri==o)return y.keySystemAccess}}}return null}(n,r,o),B.F(2);break}return D(B,(z=n,G=i,K(function(n){switch(n.g){case 1:if(1==G.size&&G.has(""))throw new P(2,6,6e3);for(Y=(q=t(G.values())).next();!Y.done;Y=q.next())0==(Q=Y.value).audioCapabilities.length&&delete Q.audioCapabilities,0==Q.videoCapabilities.length&&delete Q.videoCapabilities;$=(J=t(z.h.preferredKeySystems)).next();case 2:if($.done){n.F(4);break}if(ea=$.value,!G.has(ea)){n.F(3);break}return es=G.get(ea),ta(n,6),D(n,navigator.requestMediaKeySystemAccess(ea,[es]),8);case 8:return H=n.h,n.return(H);case 6:wa(n);case 7:Jf(z.j);case 3:$=J.next(),n.F(2);break;case 4:ed=(ec=t([!0,!1])).next();case 9:if(ed.done){n.F(11);break}eh=ed.value,$=(ep=t(G.keys())).next();case 12:if($.done){ed=ec.next(),n.F(9);break}if(eg=$.value,(em=G.get(eg)).drmInfos.some(function(n){return!!n.licenseServerUri})!=eh){n.F(13);break}return ta(n,15),D(n,navigator.requestMediaKeySystemAccess(eg,[em]),17);case 17:return H=n.h,n.return(H);case 15:wa(n);case 16:Jf(z.j);case 13:$=ep.next(),n.F(12);break;case 11:return n.return(H)}})),3);case 3:s=B.h;case 2:if(!(u=s))throw new P(2,6,6001);for(Jf(n.j),ta(B,4),n.J.clear(),y=(p=u.getConfiguration()).audioCapabilities||[],A=p.videoCapabilities||[],x=(T=t(y)).next();!x.done;x=T.next())C=x.value,n.J.add(C.contentType.toLowerCase());for(x=(I=t(A)).next();!x.done;x=I.next())M=x.value,n.J.add(M.contentType.toLowerCase());if(r.length){var ev,eb,eA,eT,eS=u.keySystem,ek=o.get(u.keySystem),eI=[],eM=[],eL=[],eP=[],eR=new Set;uh(ek,eI,eL,eM,eP,eR);var eN=n.M?"persistent-license":"temporary";for(eS={keySystem:eS,licenseServerUri:eI[0],distinctiveIdentifierRequired:ek[0].distinctiveIdentifierRequired,persistentStateRequired:ek[0].persistentStateRequired,sessionType:ek[0].sessionType||eN,audioRobustness:ek[0].audioRobustness||"",videoRobustness:ek[0].videoRobustness||"",serverCertificate:eL[0],serverCertificateUri:eM[0],initData:eP,keyIds:eR},eI=(ek=t(ek)).next();!eI.done;eI=ek.next())(eI=eI.value).distinctiveIdentifierRequired&&(eS.distinctiveIdentifierRequired=eI.distinctiveIdentifierRequired),eI.persistentStateRequired&&(eS.persistentStateRequired=eI.persistentStateRequired);ek=eS}else ek=u.keySystem,eS=i.get(u.keySystem),eI=[],eM=[],eL=[],eP=[],eR=new Set,uh(eS.drmInfos,eI,eL,eM,eP,eR),ek={keySystem:ek,licenseServerUri:eI[0],distinctiveIdentifierRequired:"required"==eS.distinctiveIdentifier,persistentStateRequired:"required"==eS.persistentState,sessionType:eS.sessionTypes[0]||"temporary",audioRobustness:(eS.audioCapabilities?eS.audioCapabilities[0].robustness:"")||"",videoRobustness:(eS.videoCapabilities?eS.videoCapabilities[0].robustness:"")||"",serverCertificate:eL[0],serverCertificateUri:eM[0],initData:eP,keyIds:eR};if(n.g=ek,!n.g.licenseServerUri)throw new P(2,6,6012,n.g.keySystem);return D(B,u.createMediaKeys(),6);case 6:if(N=B.h,Jf(n.j),n.u=N,!(""!=n.h.minHdcpVersion&&"getStatusForPolicy"in n.u)){B.F(7);break}return ta(B,8),D(B,n.u.getStatusForPolicy({minHdcpVersion:n.h.minHdcpVersion}),10);case 10:if("usable"!=B.h)throw new P(2,6,6018);Jf(n.j),va(B,7,4);break;case 8:if((_=wa(B,4))instanceof P)throw _;throw new P(2,6,6019,_.message);case 7:return n.$=!0,D(B,K(function(i){switch(i.g){case 1:if(!n.u||!n.g)return i.return();if(!n.g.serverCertificateUri||n.g.serverCertificate&&n.g.serverCertificate.length){i.F(2);break}return ev=Af([n.g.serverCertificateUri],n.h.retryParameters),ta(i,3),D(i,n.G.zc.request(5,ev).promise,5);case 5:eb=i.h,n.g.serverCertificate=lc(eb.data),va(i,4);break;case 3:throw eA=wa(i),new P(2,6,6017,eA);case 4:if(n.j.g)return i.return();case 2:if(!n.g.serverCertificate||!n.g.serverCertificate.length)return i.return();return ta(i,6),D(i,n.u.setServerCertificate(n.g.serverCertificate),8);case 8:va(i,0);break;case 6:throw eT=wa(i),new P(2,6,6004,eT.message)}}),11);case 11:Jf(n.j),va(B,0);break;case 4:if(j=wa(B),Jf(n.j,j),n.g=null,n.J.clear(),j instanceof P)throw j;throw new P(2,6,6002,j.message)}})}function vh(n){oh(n)&&n.l.resolve()}function wh(n,i){new Dd(function(){i.loaded=!0,vh(n)}).S(tT)}function mh(n,i,r){var o,s,u,p,y,A,T;return K(function(x){switch(x.g){case 1:try{o=n.u.createSession("persistent-license")}catch(i){return s=new P(2,6,6005,i.message),n.s(s),x.return(Promise.reject(s))}return n.D.o(o,"message",function(i){n.m&&n.h.delayLicenseRequestUntilPlayed&&n.m.paused&&!n.N?n.L.push(i):ih(n,i)}),n.D.o(o,"keystatuseschange",function(i){return yh(n,i)}),u={initData:r.initData,initDataType:r.initDataType,loaded:!1,Yf:1/0,Db:null,type:"persistent-license"},n.i.set(o,u),ta(x,2),D(x,o.load(i),4);case 4:return p=x.h,Jf(n.j),p||(n.i.delete(o),y=n.h.persistentSessionOnlinePlayback?1:2,n.s(new P(y,6,6013)),u.loaded=!0),wh(n,u),vh(n),x.return(o);case 2:A=wa(x),Jf(n.j,A),n.i.delete(o),T=n.h.persistentSessionOnlinePlayback?1:2,n.s(new P(T,6,6005,A.message)),u.loaded=!0,vh(n);case 3:return x.return(Promise.resolve())}})}function ih(n,i){var r,o,s,u,p,y,A,T,x,C,I,M;K(function(N){switch(N.g){case 1:if(r=i.target,n.h.logLicenseExchange&&pg(i.message),o=n.i.get(r),s=n.g.licenseServerUri,u=n.h.advanced[n.g.keySystem],"individualization-request"==i.messageType&&u&&u.individualizationServer&&(s=u.individualizationServer),(p=Af([s],n.h.retryParameters)).body=i.message,p.method="POST",p.licenseRequestType=i.messageType,p.sessionId=r.sessionId,p.drmInfo=n.g,o&&(p.initData=o.initData,p.initDataType=o.initDataType),qh(n.g.keySystem)){var _=Uf(p.body,!0,!0);if(_.includes("PlayReadyKeyMessage")){_=Pg(_,"PlayReadyKeyMessage");for(var j=t(_.getElementsByTagName("HttpHeader")),B=j.next();!B.done;B=j.next())B=B.value,p.headers[B.getElementsByTagName("name")[0].textContent]=B.getElementsByTagName("value")[0].textContent;p.body=qg(_.getElementsByTagName("Challenge")[0].textContent)}else p.headers["Content-Type"]="text/xml; charset=utf-8"}return y=Date.now(),ta(N,2),D(N,n.G.zc.request(2,p).promise,4);case 4:A=N.h,va(N,3);break;case 2:return T=wa(N),x=new P(2,6,6007,T),n.s(x),o&&o.Db&&o.Db.reject(x),N.return();case 3:if(n.j.g)return N.return();return n.K+=(Date.now()-y)/1e3,n.h.logLicenseExchange&&pg(A.data),ta(N,5),D(N,r.update(A.data),7);case 7:va(N,6);break;case 5:return C=wa(N),I=new P(2,6,6008,C.message),n.s(I),o&&o.Db&&o.Db.reject(I),N.return();case 6:if(n.j.g)return N.return();M=new O("drmsessionupdate"),n.G.onEvent(M),o&&(o.Db&&o.Db.resolve(),wh(n,o)),F(N)}})}function yh(n,i){i=i.target;var r=n.i.get(i),o=!1;i.keyStatuses.forEach(function(i,s){if("string"==typeof s){var u=s;s=i,i=u}if(qh(n.g.keySystem)&&16==s.byteLength&&(Hd()||Qd())){var p=(u=pc(s)).getUint32(0,!0),y=u.getUint16(4,!0),A=u.getUint16(6,!0);u.setUint32(0,p,!1),u.setUint16(4,y,!1),u.setUint16(6,A,!1)}"status-pending"!=i&&(r.loaded=!0),"expired"==i&&(o=!0),s=sg(s).slice(0,32),n.V.set(s,i)});var s=i.expiration-Date.now();(0>s||o&&1e3>s)&&r&&!r.Db&&(n.i.delete(i),i.close().catch(function(){})),oh(n)&&(n.l.resolve(),n.W.S(tx))}function Wg(n){var i;return K(function(r){return i=Array.from(n.i.entries()),n.i.clear(),D(r,Promise.all(i.map(function(i){var r=(i=t(i)).next().value,o=i.next().value;return K(function(i){if(1==i.g){var s;return ta(i,2),n.ha||n.C.has(r.sessionId)||"persistent-license"!==o.type||n.h.persistentSessionOnlinePlayback?D(i,K(function(n){return 1==n.g?(s=new Promise(function(n,i){new Dd(i).S(tb)}),ta(n,2),D(n,Promise.race([Promise.all([r.close(),r.closed]),s]),4)):2!=n.g?va(n,0):void(wa(n),F(n))}),5):D(i,r.remove(),5)}if(2!=i.g)return va(i,0);wa(i),F(i)})})),0)})}function Dh(n,i){return!n.length||!i.length||n===i||0<Eh(n,i).length}function Eh(n,i){if(!n.length)return i;if(!i.length)return n;var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;for(var s=t(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.keySystem==u.keySystem){s=new Map;for(var p=t((o.initData||[]).concat(u.initData||[])),y=p.next();!y.done;y=p.next())y=y.value,s.set(y.keyId,y);s=Array.from(s.values()),p=o.keyIds&&u.keyIds?new Set([].concat(w(o.keyIds),w(u.keyIds))):o.keyIds||u.keyIds,r.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||u.persistentStateRequired,videoRobustness:o.videoRobustness||u.videoRobustness,audioRobustness:o.audioRobustness||u.audioRobustness,serverCertificate:o.serverCertificate||u.serverCertificate,serverCertificateUri:o.serverCertificateUri||u.serverCertificateUri,initData:s,keyIds:p});break}}return r}function dh(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[])}function oh(n){return function(n,i){n=t(n);for(var r=n.next();!r.done;r=n.next())if(!i(r.value))return!1;return!0}(n=n.i.values(),function(n){return n.loaded})}function uh(n,i,r,o,s,u){var p={};n=t(n);for(var y=n.next();!y.done;p={Va:p.Va},y=n.next()){if(p.Va=y.value,i.includes(p.Va.licenseServerUri)||i.push(p.Va.licenseServerUri),o.includes(p.Va.serverCertificateUri)||o.push(p.Va.serverCertificateUri),p.Va.serverCertificate&&(r.some(function(n){return function(i){return jc(i,n.Va.serverCertificate)}}(p))||r.push(p.Va.serverCertificate)),p.Va.initData){y={};for(var A=t(p.Va.initData),T=A.next();!T.done;y={Sd:y.Sd},T=A.next())y.Sd=T.value,s.some(function(n){return function(i){var r=n.Sd;return!!i.keyId&&i.keyId==r.keyId||i.initDataType==r.initDataType&&jc(i.initData,r.initData)}}(y))||s.push(y.Sd)}if(p.Va.keyIds)for(A=(y=t(p.Va.keyIds)).next();!A.done;A=y.next())u.add(A.value)}}(N=Sg.prototype).destroy=function(){return this.j.destroy()},N.configure=function(n){this.h=n},N.Gc=function(n){var i=this;return K(function(r){if(1==r.g)return i.u?(i.m=n,i.D.na(i.m,"play",function(){for(var n=t(i.L),r=n.next();!r.done;r=n.next())ih(i,r.value);i.N=!0,i.L=[]}),"webkitCurrentPlaybackTargetIsWireless"in i.m&&i.D.o(i.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Wg(i)}),i.H=i.g&&i.g.initData.find(function(n){return 0<n.initData.length})||null,i.H||"com.apple.fps"!==i.g.keySystem||i.C.size?D(r,fh(i),2):r.F(2)):(i.D.na(n,"encrypted",function(){i.s(new P(2,6,6010))}),r.return());jh(i).catch(function(){}),i.H||i.C.size||i.h.parseInbandPsshEnabled||i.D.o(i.m,"encrypted",function(n){return K(function(r){if(1==r.g)return D(r,fh(i),2);hh(i,n.initDataType,lc(n.initData)),F(r)})}),F(r)})},N.Ff=function(){var n=this,i=this.i.keys();return Array.from(i=ab(i,function(i){var r=n.i.get(i);return{sessionId:i.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}))},N.td=function(){var n=1/0,i=this.i.keys();i=t(i);for(var r=i.next();!r.done;r=i.next())isNaN((r=r.value).expiration)||(n=Math.min(n,r.expiration));return n},N.ge=function(){return Rf(this.aa)};var tb=1,tT=5,tx=.5,tS=new Pf(function(){return mc(new Uint8Array([0]))});function Gh(){}function Hh(n,i){if(i){var r=tI[i.toLowerCase()];if(r)return r}throw new P(2,4,4e3,n,i)}L("shaka.media.ManifestParser",Gh),Gh.unregisterParserByMime=function(n){delete tI[n]},Gh.registerParserByMime=function(n,i){tI[n]=i},Gh.registerParserByExtension=function(){Me("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Gh.AccessibilityPurpose={tk:"visually impaired",Mj:"hard of hearing"};var tI={};function Mh(n,i,r){0!=(i=(n=pc(n,i)).getUint32(0))&&(1==i?(n.setUint32(8,r>>32),n.setUint32(12,4294967295&r)):n.setUint32(0,r))}var tM=new Pf(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Nh(n,i,r,o,s,u,p){this.ba=n,this.hb=i,this.Na=r,this.Uf=void 0===o?null:o,this.timescale=void 0===s?null:s,this.g=void 0===u?null:u,this.aes128Key=void 0===p?null:p,this.mimeType=this.codecs=null}function Oh(n,i){return n===i||(n&&i?n.Pb()==i.Pb()&&n.Mb()==i.Mb()&&xc(n.ba().sort(),i.ba().sort())&&jc(n.g,i.g):n==i)}function Ph(n,i,r,o,s,u,p,y,A,T,x,C,I,M,N,_){for(T=void 0===T?[]:T,M=void 0===M?tL:M,this.startTime=n,this.h=this.endTime=i,this.D=r,this.hb=o,this.Na=s,this.ka=u,this.timestampOffset=p,this.appendWindowStart=y,this.appendWindowEnd=A,this.g=T,this.tilesLayout=void 0===x?"":x,this.C=void 0===C?null:C,this.oa=void 0===I?null:I,this.status=M,this.l=!1,this.j=!0,this.m=!1,this.aes128Key=void 0===N?null:N,this.u=null,this.i=0,this.s=void 0!==_&&_,this.ue=this.Fd=!1,i=(n=t(this.g)).next();!i.done;i=n.next())i.value.eh();this.s&&this.g.length&&this.g[this.g.length-1].dh(),this.mimeType=this.codecs=null}Nh.prototype.Pb=function(){return this.hb},Nh.prototype.Mb=function(){return this.Na},L("shaka.media.InitSegmentReference",Nh),Nh.prototype.getEndByte=Nh.prototype.Mb,Nh.prototype.getStartByte=Nh.prototype.Pb,(N=Ph.prototype).ba=function(){return this.D()},N.getStartTime=function(){return this.startTime},N.di=function(){return this.endTime},N.Pb=function(){return this.hb},N.Mb=function(){return this.Na},N.Bi=function(){return this.tilesLayout},N.Ai=function(){return this.C},N.sc=function(){return this.status},N.Ti=function(){this.status=tP},N.Tf=function(){this.l=!0},N.Ni=function(){return this.l},N.xe=function(){this.j=!1},N.Ki=function(){return this.j},N.eh=function(){this.Fd=!0},N.Mi=function(){return this.Fd},N.dh=function(){this.ue=!0},N.Li=function(){return this.ue},N.bh=function(){this.m=!0},N.Hi=function(){return this.m},N.rh=function(n){this.u=n},N.zi=function(){return this.u},N.offset=function(n){this.startTime+=n,this.endTime+=n,this.h+=n;for(var i=t(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.startTime+=n,r.endTime+=n,r.h+=n},N.sg=function(n){null==this.oa?Qa("Sync attempted without sync time!"):.001<=Math.abs(n=this.oa-n-this.startTime)&&this.offset(n)},L("shaka.media.SegmentReference",Ph),Ph.prototype.syncAgainst=Ph.prototype.sg,Ph.prototype.offset=Ph.prototype.offset,Ph.prototype.getThumbnailSprite=Ph.prototype.zi,Ph.prototype.setThumbnailSprite=Ph.prototype.rh,Ph.prototype.hasByterangeOptimization=Ph.prototype.Hi,Ph.prototype.markAsByterangeOptimization=Ph.prototype.bh,Ph.prototype.isLastPartial=Ph.prototype.Li,Ph.prototype.markAsLastPartial=Ph.prototype.dh,Ph.prototype.isPartial=Ph.prototype.Mi,Ph.prototype.markAsPartial=Ph.prototype.eh,Ph.prototype.isIndependent=Ph.prototype.Ki,Ph.prototype.markAsNonIndependent=Ph.prototype.xe,Ph.prototype.isPreload=Ph.prototype.Ni,Ph.prototype.markAsPreload=Ph.prototype.Tf,Ph.prototype.markAsUnavailable=Ph.prototype.Ti,Ph.prototype.getStatus=Ph.prototype.sc,Ph.prototype.getTileDuration=Ph.prototype.Ai,Ph.prototype.getTilesLayout=Ph.prototype.Bi,Ph.prototype.getEndByte=Ph.prototype.Mb,Ph.prototype.getStartByte=Ph.prototype.Pb,Ph.prototype.getEndTime=Ph.prototype.di,Ph.prototype.getStartTime=Ph.prototype.getStartTime,Ph.prototype.getUris=Ph.prototype.ba;var tL=0,tP=1;function Sh(n){return!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:n.length?n.end(n.length-1):null}function Th(n,i){return!(!n||!n.length||1==n.length&&1e-6>n.end(0)-n.start(0)||i>n.end(n.length-1))&&i>=n.start(0)}function Uh(n,i){if(!n||!n.length||1==n.length&&1e-6>n.end(0)-n.start(0))return 0;var r=0;n=t(Vh(n));for(var o=n.next();!o.done;o=n.next()){var s=o.value;o=s.start,(s=s.end)>i&&(r+=s-Math.max(o,i))}return r}function Vh(n){if(!n)return[];for(var i=[],r=0;r<n.length;r++)i.push({start:n.start(r),end:n.end(r)});return i}function Xh(){}function Yh(n,i){return i+10<=n.length&&73===n[i]&&68===n[i+1]&&51===n[i+2]&&255>n[i+3]&&255>n[i+4]&&128>n[i+6]&&128>n[i+7]&&128>n[i+8]&&128>n[i+9]}function Zh(n,i){return i+10<=n.length&&51===n[i]&&68===n[i+1]&&73===n[i+2]&&255>n[i+3]&&255>n[i+4]&&128>n[i+6]&&128>n[i+7]&&128>n[i+8]&&128>n[i+9]}function $h(n,i){var r=(127&n[i])<<21;return r|=(127&n[i+1])<<14,(r|=(127&n[i+2])<<7)|127&n[i+3]}function bi(n){for(var i=0,r=[];Yh(n,i);){var o=$h(n,i+6);for(n[i+5]>>6&1&&(i+=10),i+=10,o=i+o;i+10<o;){var s=n.subarray(i),u=$h(s,4);(u=function(n){var i={key:n.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===n.type){if(2>n.size||3!==n.data[0])return null;var r=n.data.subarray(1).indexOf(0);if(-1===r)return null;var o=Tf(lc(n.data,1,r)),s=n.data[2+r],u=n.data.subarray(3+r).indexOf(0);if(-1===u)return null;var p,y=Tf(lc(n.data,3+r,u));return p="-->"===o?Tf(lc(n.data,4+r+u)):mc(n.data.subarray(4+r+u)),i.mimeType=o,i.pictureType=s,i.description=y,i.data=p,i}return"TXXX"===n.type||"WXXX"===n.type?2>n.size||3!==n.data[0]||-1===(o=n.data.subarray(1).indexOf(0))?null:(r=Tf(lc(n.data,1,o)),n=Tf(lc(n.data,2+o)).replace(/\0*$/,""),i.description=r,i.data=n,i):"PRIV"===n.type?2>n.size||-1===(r=n.data.indexOf(0))?null:(r=Tf(lc(n.data,0,r)),i.description=r,"com.apple.streaming.transportStreamTimestamp"==r?(n=1&(r=n.data.subarray(r.length+1))[3],r=((r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7])/45,n&&(r+=47721858.84),i.data=r):(n=mc(n.data.subarray(r.length+1)),i.data=n),i):"T"===n.type[0]?2>n.size||3!==n.data[0]?null:(n=Tf(n.data.subarray(1)).replace(/\0*$/,""),i.data=n,i):"W"===n.type[0]?(n=Tf(n.data).replace(/\0*$/,""),i.data=n,i):n.data?(i.data=mc(n.data),i):null}(s={type:String.fromCharCode(s[0],s[1],s[2],s[3]),size:u,data:s.subarray(10,10+u)}))&&r.push(u),i+=s.size+10}Zh(n,i)&&(i+=10)}return r}function ci(n,i){for(var r=i=void 0===i?0:i,o=0;Yh(n,i);)n[i+5]>>6&1&&(o+=10),o+=10+$h(n,i+6),Zh(n,i+10)&&(o+=10),i+=o;return 0<o?n.subarray(r,r+o):new Uint8Array([])}function di(n,i){var r=null,o=null,s=null,u=n.O();return 1&i&&(s=n.Uc()),2&i&&n.skip(4),8&i&&(r=n.O()),16&i&&(o=n.O()),{trackId:u,Og:r,Qh:o,wk:s}}function ei(n,i){return 1==i?{baseMediaDecodeTime:4294967296*(i=n.O())+(n=n.O())}:{baseMediaDecodeTime:n.O()}}function fi(n,i){return 1==i?(n.skip(8),n.skip(8)):(n.skip(4),n.skip(4)),i=n.O(),n.skip(4),{timescale:i,language:String.fromCharCode(((n=n.Ua())>>10)+96)+String.fromCharCode(((960&n)>>5)+96)+String.fromCharCode((31&n)+96)}}function gi(n,i,r){var o=n.O(),s=[],u=null;1&r&&(u=n.O()),4&r&&n.skip(4);for(var p=0;p<o;p++){var y={gg:null,sampleSize:null,Ke:null};256&r&&(y.gg=n.O()),512&r&&(y.sampleSize=n.O()),1024&r&&n.skip(4),2048&r&&(y.Ke=0==i?n.O():n.ih()),s.push(y)}return{Ak:o,lh:s,Ph:u}}function hi(n,i){1==i?(n.skip(8),n.skip(8)):(n.skip(4),n.skip(4));var r=n.O();return 1==i?n.skip(8):n.skip(4),n.skip(4),n.skip(8),n.skip(2),n.skip(2),n.skip(2),n.skip(2),n.skip(36),{trackId:r,width:i=n.Ua()+n.Ua()/16,height:n=n.Ua()+n.Ua()/16}}function ki(n,i){return n.skip(87),{wa:i+"."+this.g(n.ra())+this.g(n.ra())+this.g(n.ra())}}function li(n){return{wa:fg(n=n.O())}}function mi(n,i){if(this.j=n,void 0===i?0:i){i=new Uint8Array(n.byteLength);for(var r=0,o=0;o<n.byteLength;o++)2<=o&&3==n[o]&&0==n[o-1]&&0==n[o-2]||(i[r]=n[o],r++);this.j=lc(i,0,r)}this.i=this.j.byteLength,this.g=this.h=0}function ni(n){var i=n.j.byteLength-n.i,r=new Uint8Array(4),o=Math.min(4,n.i);0!==o&&(r.set(n.j.subarray(i,i+o)),n.h=new Zf(r,0).O(),n.g=8*o,n.i-=o)}function oi(n,i){if(n.g<=i){var r=Math.floor((i-=n.g)/8);i-=8*r,n.g-=r,ni(n)}n.h<<=i,n.g-=i}function pi(n,i){var r=Math.min(n.g,i),o=n.h>>>32-r;return n.g-=r,0<n.g?n.h<<=r:0<n.i&&ni(n),0<(r=i-r)?o<<r|pi(n,r):o}function qi(n){var i;for(i=0;i<n.g;++i)if(0!=(n.h&2147483648>>>i))return n.h<<=i,n.g-=i,i;return ni(n),i+qi(n)}function ri(n){oi(n,1+qi(n))}function R(n){var i=qi(n);return pi(n,i+1)-1}function si(n){return 1&(n=R(n))?1+n>>>1:-1*(n>>>1)}function S(n){return 1===pi(n,1)}function ti(n){return pi(n,8)}function ui(n,i){for(var r=8,o=8,s=0;s<i;s++)0!==o&&(o=(r+(o=si(n))+256)%256),r=0===o?r:o}function wi(){this.D=null,this.G=!1,this.m=this.H=null,this.j=[],this.g=[],this.s=this.u=null,this.i=[],this.h=[],this.C=null,this.l=[]}function yi(n){if(1!=(n[0]<<16|n[1]<<8|n[2]))return null;var i={data:new Uint8Array(0),packetLength:n[4]<<8|n[5],pts:null,dts:null,nalus:[]};if(i.packetLength&&i.packetLength>n.byteLength-6)return null;var r=n[7];return(192&r&&(i.pts=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,i.dts=i.pts,64&r&&(i.dts=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)),r=n[8]+9,n.byteLength<=r)?null:(i.data=n.subarray(r),i)}function Ci(n){return!(0>xi(n))}function xi(n){for(var i=Math.min(1e3,n.length-564),r=0;r<i;){if(71==n[r]&&71==n[r+188]&&71==n[r+376])return r;r++}return -1}Ph.Status={zj:tL,qk:tP,Sj:2},L("shaka.util.Id3Utils",Xh),Xh.getID3Data=ci,Xh.getID3Frames=bi,L("shaka.util.ExpGolomb",mi),(N=wi.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},N.parse=function(n){if(564>n.length)return this;for(var i=Math.max(0,xi(n)),r=n.length-(n.length+i)%188,o=!1,s=i;s<r;s+=188)if(71==n[s]){var u=!!(64&n[s+1]),p=((31&n[s+1])<<8)+n[s+2];if(1<(48&n[s+3])>>4){var y=s+5+n[s+4];if(y==s+188)continue}else y=s+4;switch(p){case 0:u&&(y+=n[y]+1),this.D=(31&n[y+10])<<8|n[y+11];break;case 17:case 8191:break;case this.D:u&&(y+=n[y]+1),p={audio:-1,video:-1,pe:-1,audioCodec:"",videoCodec:""};var A=y+3+((15&(u=n)[y+1])<<8|u[y+2])-4;for(y+=12+((15&u[y+10])<<8|u[y+11]);y<A;){var T=(31&u[y+1])<<8|u[y+2],x=(15&u[y+3])<<8|u[y+4];switch(u[y]){case 6:if(-1==p.audio&&0<x)for(var C=y+5,I=x;2<I;){switch(u[C]){case 106:p.audio=T,p.audioCodec="ac3";break;case 122:p.audio=T,p.audioCodec="ec3"}var M=u[C+1]+2;C+=M,I-=M}break;case 15:-1==p.audio&&(p.audio=T,p.audioCodec="aac");break;case 21:-1==p.pe&&(p.pe=T);break;case 27:-1==p.video&&(p.video=T,p.videoCodec="avc");break;case 3:case 4:-1==p.audio&&(p.audio=T,p.audioCodec="mp3");break;case 36:-1==p.video&&(p.video=T,p.videoCodec="hvc");break;case 129:-1==p.audio&&(p.audio=T,p.audioCodec="ac3");break;case 132:case 135:-1==p.audio&&(p.audio=T,p.audioCodec="ec3")}y+=x+5}-1!=(u=p).video&&(this.H=u.video,this.m=u.videoCodec),-1!=u.audio&&(this.u=u.audio,this.s=u.audioCodec),-1!=u.pe&&(this.C=u.pe),o&&!this.G&&(o=!1,s=i-188),this.G=!0;break;case this.H:y=n.subarray(y,s+188),u?this.j.push([y]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(y);break;case this.u:y=n.subarray(y,s+188),u?this.i.push([y]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(y);break;case this.C:y=n.subarray(y,s+188),u?this.l.push([y]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(y);break;default:o=!0}}return this},N.Zi=function(n){return Me("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.ag(n)},N.ag=function(n,i,r){var o=n.pts?n.pts/9e4:null,s=(n=n.data).byteLength,u=1;"hvc"==this.m&&(u=2);for(var p,y=r||0,A=[],T=-1,x=0,C=0;C<s;++C){var I=n[C];if(I){if(2<=y&&1==I){if(i&&!A.length&&-1==T&&(I=C-(3<y?3:y),r&&0!=I&&(I=n.subarray(0,I),i.data=tg(i.data,I),i.fullData=tg(i.fullData,I))),0<=T?(y=C-((3<y?3:y)+1),A.push({data:n.subarray(T+u,y+1),fullData:n.subarray(T,y+1),type:x,time:o})):i&&!A.length&&0<(T=C-y)&&(T=n.subarray(0,T),i.data=tg(i.data,T),i.fullData=tg(i.fullData,T)),C>=s-u)return A;T=++C,x="hvc"==this.m?n[C]>>1&63:31&n[C]}y=0}else y++;C>=s-1&&0<=T&&0<=y&&(p={data:n.subarray(T+u,s),fullData:n.subarray(T,s),type:x,time:o})}return p&&A.push(p),!A.length&&i&&(i.data=tg(i.data,n),i.fullData=tg(i.fullData,n)),A},N.getMetadata=function(){for(var n=[],i=t(this.l),r=i.next();!r.done;r=i.next())(r=yi(r=tg.apply(lg,w(r.value))))&&n.push({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:bi(r.data),dts:r.dts,pts:r.pts});return n},N.qc=function(){if(this.i.length&&!this.h.length){for(var n=!1,i=t(this.i),r=i.next();!r.done;r=i.next()){var o=tg.apply(lg,w(r.value)),s=yi(o);r=this.h.length?this.h[this.h.length-1]:null,s&&null!=s.pts&&null!=s.dts&&(!r||r.pts!=s.pts&&r.dts!=s.dts)?(this.h.length&&s.dts<(r.dts||0)&&(n=!0),this.h.push(s)):this.h.length&&(o=s?s.data:o)&&((r=this.h.pop()).data=tg(r.data,o),this.h.push(r))}n&&(this.h=this.h.sort(function(n,i){var r=(n.pts||0)-(i.pts||0);return(n.dts||0)-(i.dts||0)||r}))}return this.h},N.Oc=function(n){if(n=void 0===n||n,this.j.length&&!this.g.length){for(var i,r=!1,o=t(this.j),s=o.next();!s.done;s=o.next()){var u=tg.apply(lg,w(s.value)),p=yi(u);s=this.g.length?this.g[this.g.length-1]:null,p&&null!=p.pts&&null!=p.dts&&(!s||s.pts!=p.pts&&s.dts!=p.dts)?(this.g.length&&p.dts<(s.dts||0)&&(r=!0),this.g.push(p)):this.g.length&&(u=p?p.data:u)&&((s=this.g.pop()).data=tg(s.data,u),this.g.push(s))}if(n){for(s=(o=t(this.g)).next();!s.done;s=o.next())(s=s.value).nalus=this.ag(s,i,void 0),s.nalus.length&&(i=s.nalus[s.nalus.length-1]);this.g=this.g.filter(function(n){return n.nalus.length})}r&&(this.g=this.g.sort(function(n,i){var r=(n.pts||0)-(i.pts||0);return(n.dts||0)-(i.dts||0)||r}))}return n?this.g:(n=this.g,this.g=[],n)},N.getStartTime=function(n){if("audio"==n){n=null;var i=this.qc();return i.length&&(n=Math.min((n=i[0]).dts,n.pts)/9e4),n}return"video"==n?(n=null,(i=this.Oc(!1)).length&&(n=Math.min((n=i[0]).dts,n.pts)/9e4),n):null},N.sd=function(){return{audio:this.s,video:this.m}},N.le=function(){for(var n=[],i=t(this.Oc()),r=i.next();!r.done;r=i.next())n.push.apply(n,w(r.value.nalus));return n},N.Ei=function(){Me("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var n=this.Lf();return{height:n.height,width:n.width}},N.Lf=function(){return"hvc"==this.m?function(n){var i={height:null,width:null,wa:null};if(!(n=n.le()).length||!(n=n.find(function(n){return 33==n.type})))return i;var r=new mi(n.fullData,!0);ti(r),ti(r),pi(r,4);var o=pi(r,3);S(r);var s=pi(r,2),u=pi(r,1),p=pi(r,5),y=pi(r,32);n=ti(r);for(var A=ti(r),T=ti(r),x=ti(r),C=ti(r),I=ti(r),M=ti(r),N=[],_=[],j=0;j<o;j++)N.push(S(r)),_.push(S(r));if(0<o)for(j=o;8>j;j++)pi(r,2);for(j=0;j<o;j++)N[j]&&pi(r,88),_[j]&&ti(r);R(r),3==(o=R(r))&&pi(r,1),N=R(r),_=R(r);var B=j=0,z=0,G=0;return S(r)&&(j+=R(r),B+=R(r),z+=R(r),G+=R(r)),i.width=String(N-(j+B)*(1===o||2===o?2:1)),i.height=String(_-(z+G)*(1===o?2:1)),r=function(n){for(var i=0,r=0;32>r;r++)i|=(n>>r&1)<<31-r;return i>>>0}(y),u=1==u?"H":"L",s="hvc1."+["","A","B","C"][s]+p+"."+r.toString(16).toUpperCase()+"."+u+M,I&&(s+="."+I.toString(16).toUpperCase()),C&&(s+="."+C.toString(16).toUpperCase()),x&&(s+="."+x.toString(16).toUpperCase()),T&&(s+="."+T.toString(16).toUpperCase()),A&&(s+="."+A.toString(16).toUpperCase()),n&&(s+="."+n.toString(16).toUpperCase()),i.wa=s,i}(this):function(n){var i={height:null,width:null,wa:null};if(!(n=n.le()).length||!(n=n.find(function(n){return 7==n.type})))return i;var r=ti(n=new mi(n.data)),o=ti(n),s=ti(n);if(ri(n),tR.includes(r)){var u=R(n);if(3===u&&oi(n,1),ri(n),ri(n),oi(n,1),S(n)){u=3!==u?8:12;for(var p=0;p<u;p++)S(n)&&(6>p?ui(n,16):ui(n,64))}}if(ri(n),0===(u=R(n)))R(n);else if(1===u)for(oi(n,1),ri(n),ri(n),u=R(n),p=0;p<u;p++)ri(n);ri(n),oi(n,1),u=R(n),p=R(n);var y=pi(n,1);0===y&&oi(n,1),oi(n,1);var A=0,T=0,x=0,C=0;return S(n)&&(A=R(n),T=R(n),x=R(n),C=R(n)),i.height=String((2-y)*(p+1)*16-2*x-2*C),i.width=String(16*(u+1)-2*A-2*T),i.wa="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2),i}(this)},L("shaka.util.TsParser",wi),wi.syncOffset=xi,wi.probe=Ci,wi.prototype.getVideoInfo=wi.prototype.Lf,wi.prototype.getVideoResolution=wi.prototype.Ei,wi.prototype.getVideoNalus=wi.prototype.le,wi.prototype.getCodecs=wi.prototype.sd,wi.prototype.getStartTime=wi.prototype.getStartTime,wi.prototype.getVideoData=wi.prototype.Oc,wi.prototype.getAudioData=wi.prototype.qc,wi.prototype.getMetadata=wi.prototype.getMetadata,wi.prototype.parseNalus=wi.prototype.ag,wi.prototype.parseAvcNalus=wi.prototype.Zi,wi.prototype.parse=wi.prototype.parse,wi.prototype.clearData=wi.prototype.clearData,wi.Timescale=9e4;var tR=[100,110,122,244,44,83,86,118,128,138,139,134];function Di(n,i,r){this.g=null,this.s=-1,this.l=n,this.i=i,this.m=r,this.j=!1;e:{if("undefined"==typeof libDPIModule&&Ra("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else if("undefined"!=typeof LcevcDil)this.h=LcevcDil,this.j=!0,Me("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ra("Could not find LCEVC Library on this page"),n=!1;break e}void 0===this.h.SupportObject?(Ra("Could not find LCEVC Library on this page"),n=!1):(this.h.SupportObject.SupportStatus||Ra(this.h.SupportObject.SupportError),n=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}n&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Ei(n){n.g&&n.i.classList.add("shaka-hidden")}function Fi(n,i,r){var o=tN,s=tV;switch(i.mimeType){case"video/webm":o=tU;break;case"video/mp4":o=tO}switch(r){case"DASH":s=tF;break;case"HLS":s=t_}n.g&&(n.s=i.id,n.g.setLevelSwitching(i.id,!0),n.g.setContainerFormat(o),n.j||n.g.setStreamingFormat(s))}Di.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},L("shaka.lcevc.Dec",Di),Di.prototype.release=Di.prototype.release;var tN=0,tU=1,tO=2,t_=0,tF=1,tV=-1;function Mi(n,i,r,o){var s=this;this.i=n,this.G=null,this.H=i,this.g={},this.I={},this.ha={},this.h=null,this.Z=!1,this.ua=r||function(){},this.N=o||null,this.j={},this.u=new Kf,this.m={},this.J=null,this.L=new mf,this.M="",this.$=!1,this.l=Ni(this,this.L),this.D=!1,this.K=new If(function(){var n,i,r,o,u,p,y,A;return n=s,K(function(s){if(1==s.g){for(r in i=[],n.j)for(u=(o=n.j[r])[0],n.j[r]=o.slice(0,1),u&&i.push(u.p.catch(yd)),y=(p=t(o.slice(1))).next();!y.done;y=p.next())y.value.p.reject(new P(2,7,7003,void 0));for(A in n.h&&i.push(n.h.destroy()),n.H&&i.push(n.H.destroy()),n.m)i.push(n.m[A].destroy());return D(s,Promise.all(i),2)}n.u&&(n.u.release(),n.u=null),n.i&&(n.i.removeAttribute("src"),n.i.load(),n.i=null),n.G=null,n.l=null,n.h=null,n.H=null,n.g={},n.m={},n.J=null,n.j={},n.N=null,F(s)})}),this.C=!1,this.W="UNKNOWN",this.Aa=this.sa=!1,this.va=new mf,this.s=!1,this.aa=!0,this.V=null}function Ni(i,r){if(n.ManagedMediaSource){i.i.disableRemotePlayback=!0;var o=new ManagedMediaSource;return i.u.o(o,"startstreaming",function(){i.aa=!0}),i.u.o(o,"endstreaming",function(){i.aa=!1}),i.u.na(o,"sourceopen",function(){URL.revokeObjectURL(i.M),r.resolve()}),i.u.na(i.i,"playing",function(){i.$=!0}),i.M=tK(o),i.i.src=i.M,o}return o=new MediaSource,i.u.na(o,"sourceopen",function(){URL.revokeObjectURL(i.M),r.resolve()}),i.u.na(i.i,"playing",function(){i.$=!0}),i.M=tK(o),i.i.src=i.M,o}function Qi(n,i,r,o,s){s=void 0!==s&&s;var u=dd(r.mimeType,o);if(i==eh)Ri(n,u,n.C,r.external);else{var p=n.G.forceTransmux||s;if((!ac(u)||!n.C&&eQ.includes(u))&&(p=!0),s=fd(r.mimeType,o),p){if(p=Cb("audio",(o||"").split(",")),o=Cb("video",(o||"").split(",")),p&&o){n.s=!0,Qi(n,"audio",r,p,!0),Qi(n,"video",r,o,!0);return}(o=Yc(s))&&(u=o(),n.m[i]=u,u=u.convertCodecs(i,s))}s=u+n.G.sourceBufferExtraFeatures,Jf(n.K);try{var y=n.l.addSourceBuffer(s)}catch(i){throw new P(2,3,3015,i,"The mediaSource_ status was "+n.l.readyState+" expected 'open'")}n.C&&(y.mode=tG),n.u.o(y,"error",function(){n.j[i][0].p.reject(new P(2,3,3014,n.i.error?n.i.error.code:0))}),n.u.o(y,"updateend",function(){return Ti(n,i)}),n.g[i]=y,n.I[i]=u,n.ha[i]=!!r.drmInfos.length}}function Ri(n,i,r,o){n.h||(n.h=new od(n.H));var s=n.h;o=o||n.Z,n=n.W,"application/cea-608"==i||"application/cea-708"==i?s.i=null:(s.i=(0,eJ[i])(),s.i.setSequenceMode?s.i.setSequenceMode(r):Ra('Text parsers should have a "setSequenceMode" method!'),s.i.setManifestType?s.i.setManifestType(n):Ra('Text parsers should have a "setManifestType" method!'),s.C=o)}function Ui(n){return!n.D&&(!n.l||"ended"==n.l.readyState)}function Vi(n,i){return n=n.D||!Object.keys(n.g).length?null:i==eh?n.h.g:!(n=Wi(n,i))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null}function Xi(n,i){return n.D?null:i==eh?n.h.h:Sh(Wi(n,i))}function Wi(n,i){try{return n.g[i].buffered}catch(n){return null}}function $i(n,i,r,o,s,u,p,y,A,T){var x,C,I,M,N,_,j,B,z,G;return p=void 0!==p&&p,y=void 0!==y&&y,A=void 0!==A&&A,T=void 0!==T&&T,K(function(H){var q,Y,Q,J,$,ea,es,ec,ed,eh,eg,em,ev;switch(H.g){case 1:if(i!=(x=ep).Da){H.F(2);break}if(!n.C){H.F(3);break}return D(H,n.va,4);case 4:C=H.h,n.h.u=C;case 3:return D(H,(q=n.h,Y=r,Q=o?o.startTime:null,J=o?o.endTime:null,$=o?o.ba()[0]:null,K(function(n){return 1==n.g?D(n,Promise.resolve(),2):q.i&&q.j?null==Q||null==J?(q.i.parseInit(lc(Y)),n.return()):void(ea=q.C?Q:q.u,es={periodStart:q.u,segmentStart:Q,segmentEnd:J,vttOffset:ea},ec=q.i.parseMedia(lc(Y),es,$).filter(function(n){return n.startTime>=q.l&&n.startTime<q.m}),q.j.append(ec),null==q.g&&(q.g=Math.max(Q,q.l)),q.h=Math.min(J,q.m),F(n)):n.return()})),5);case 5:case 8:return H.return();case 2:if(T||!n.s){H.F(6);break}return D(H,$i(n,x.U,r,o,s,u,p,y,A,!0),7);case 7:return D(H,$i(n,x.ia,r,o,s,u,p,y,A,!0),8);case 6:if(!n.g[i])return H.return();if(I=n.g[i].timestampOffset,M=n.I[i],n.m[i]&&(M=n.m[i].getOriginalMimeType()),o&&null!=(N=function(n,i,r,o,s,u){var p=null,y=lc(r);if(eQ.includes(s))(u=bi(y)).length&&o&&((i=u.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&i.data&&(p=Math.round(i.data)/1e3),n.ua([{cueTime:o.startTime,data:y,frames:u,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(s.includes("/mp4")&&o&&0==o.timestampOffset&&o.ka&&o.ka.timescale){var A=o.ka.timescale;if(!isNaN(A)){var T=0,x=!1;(new bg).box("moof",gg).box("traf",gg).T("tfdt",function(n){T=ei(n.reader,n.version).baseMediaDecodeTime/A,x=!0,n.parser.stop()}).parse(r,!0),x&&(p=T)}}else s.includes("/mp4")||s.includes("/webm")||!Ci(y)||(null!=(i=(y=(new wi).parse(y)).getStartTime(i))&&(p=i),(y=y.getMetadata()).length&&n.ua(y,u,o?o.endTime:null));return p}(n,i,r,o,M,I))&&(_=o.startTime-N,(.001<=Math.abs(I-_)||p||y)&&(!A||0<_||!I)&&(I=_,n.Aa&&(aj(n,i,function(){return bj(n,i)}),aj(n,i,function(){return cj(n,i,I)}))),j=i==x.ia||!(x.ia in n.g),n.C&&j&&n.va.resolve(I)),u&&i==x.ia&&(n.h||Ri(n,"application/cea-608",n.C,!1),n.J||(B=M.split(";",1)[0],n.J=new rc(B)),o?(z=n.J.i(r)).length&&function(n,i,r,o,s){var u=r+" "+o,p=new Map;i=t(i);for(var y=i.next();!y.done;y=i.next()){var A=y.value;y=A.stream,A=A.cue,p.has(y)||p.set(y,new Map),p.get(y).has(u)||p.get(y).set(u,[]),function ud(n,i,r){i.startTime+=r,i.endTime+=r,i=t(i.nestedCues);for(var o=i.next();!o.done;o=i.next())ud(n,o.value,r)}(n,A,s),A.startTime>=n.l&&A.startTime<n.m&&(p.get(y).get(u).push(A),y==n.D&&n.j.append([A]))}for(u=(s=t(p.keys())).next();!u.done;u=s.next())for(u=u.value,n.s.has(u)||n.s.set(u,new Map),y=(i=t(p.get(u).keys())).next();!y.done;y=i.next())y=y.value,A=p.get(u).get(y),n.s.get(u).set(y,A);n.g=null==n.g?Math.max(r,n.l):Math.min(n.g,Math.max(r,n.l)),n.h=Math.max(n.h,Math.min(o,n.m))}(n.h,z,o.startTime,o.endTime,I):n.J.init(r)),!n.m[i]){H.F(9);break}return D(H,n.m[i].transmux(r,s,o,n.l.duration,i),10);case 10:r=H.h;case 9:return ed=n,eh=r,eg=o?o.startTime:null,em=i,ev=ed.ha[em],ed.G.insertFakeEncryptionInInit&&null==eg&&ev&&(Kd()||Id()||Jd("SOPOpenBrowser"))&&"mp4"==ed.I[em].split(";")[0].split("/")[1]&&(eh=function(n){function b(){r=!0}function c(n){o.push(n),gg(n)}n=lc(n);var i,r=!1,o=[],s=[];if((new bg).box("moov",c).box("trak",c).box("mdia",c).box("minf",c).box("stbl",c).T("stsd",function(n){i=n,o.push(n),ig(n)}).T("encv",b).T("enca",b).T("dvav",function(n){s.push({box:n,cb:1701733238})}).T("dva1",function(n){s.push({box:n,cb:1701733238})}).T("dvh1",function(n){s.push({box:n,cb:1701733238})}).T("dvhe",function(n){s.push({box:n,cb:1701733238})}).T("hev1",function(n){s.push({box:n,cb:1701733238})}).T("hvc1",function(n){s.push({box:n,cb:1701733238})}).T("avc1",function(n){s.push({box:n,cb:1701733238})}).T("avc3",function(n){s.push({box:n,cb:1701733238})}).T("ac-3",function(n){s.push({box:n,cb:1701733217})}).T("ec-3",function(n){s.push({box:n,cb:1701733217})}).T("ac-4",function(n){s.push({box:n,cb:1701733217})}).T("mp4a",function(n){s.push({box:n,cb:1701733217})}).parse(n),r)return n;if(0==s.length||!i)throw sg(n),new P(2,3,3019);s.reverse();for(var u=t(s),p=u.next();!p.done;p=u.next())p=p.value,n=function(n,i,r,o,s){var u=tM.value(),p=n.subarray(r.start,r.start+r.size),y=pc(p),A=new Uint8Array(r.size+u.byteLength);for(A.set(p,0),(p=pc(A)).setUint32(4,s),A.set(u,r.size),s=y.getUint32(4),p.setUint32(r.size+16,s),Mh(A,0,A.byteLength),s=new Uint8Array(n.byteLength+A.byteLength),r=Id()?r.start:r.start+r.size,u=n.subarray(r),s.set(n.subarray(0,r)),s.set(A,r),s.set(u,r+A.byteLength),o=(n=t(o)).next();!o.done;o=n.next())Mh(s,(o=o.value).start,o.size+A.byteLength);return A=pc(s,i.start),i=hg(i),n=A.getUint32(i),A.setUint32(i,n+1),s}(n,i,p.box,o,p.cb);return n}(eh)),r=eh,o&&n.C&&i!=x.Da&&(p||y)&&(G=o.startTime,aj(n,i,function(){return bj(n,i)}),aj(n,i,function(){return cj(n,i,G)})),D(H,aj(n,i,function(){var o=r;if("video"==i&&n.N){var s=n.N;s.g&&s.g.appendBuffer(o,"video",s.s,-I)}n.g[i].appendBuffer(o)}),11);case 11:F(H)}})}function hj(n,i){var r;return K(function(o){return 1==o.g?i==(r=ep).Da?n.h?D(o,n.h.remove(0,1/0),0):o.return():D(o,aj(n,i,function(){return gj(n,i,0,n.l.duration)}),4):n.s?D(o,aj(n,r.U,function(){return gj(n,r.U,0,n.l.duration)}),0):o.F(0)})}function gj(n,i,r,o){o<=r?Ti(n,i):n.g[i].remove(r,o)}function bj(n,i){var r=n.g[i].appendWindowStart,o=n.g[i].appendWindowEnd;n.g[i].abort(),n.g[i].appendWindowStart=r,n.g[i].appendWindowEnd=o,Ti(n,i)}function cj(n,i,r){0>r&&(r+=.001),n.g[i].timestampOffset=r,Ti(n,i)}function Ti(n,i){if(!n.D){var r=n.j[i][0];r&&(r.p.resolve(),mj(n,i))}}function aj(n,i,r){return Jf(n.K),r={start:r,p:new mf},n.j[i].push(r),1==n.j[i].length&&nj(n,i),r.p}function lj(n,i){var r,o,s,u,p,y;return K(function(A){switch(A.g){case 1:for(s in Jf(n.K),r=[],o={},n.g)o.dd=new mf,u={start:function(n){return function(){return n.dd.resolve()}}(o),p:o.dd},n.j[s].push(u),r.push(o.dd),1==n.j[s].length&&u.start(),o={dd:o.dd};return ta(A,2),D(A,Promise.all(r),4);case 4:va(A,3);break;case 2:throw wa(A);case 3:return ta(A,5,6),D(A,i(),6);case 6:for(p in xa(A),n.g)mj(n,p);ya(A,0);break;case 5:throw y=wa(A),new P(2,3,3015,y,n.i.error||"No error in the media element")}})}function mj(n,i){n.j[i].shift(),nj(n,i)}function nj(n,i){var r=n.j[i][0];if(r)try{r.start()}catch(o){"QuotaExceededError"==o.name?r.p.reject(new P(2,3,3017,i)):r.p.reject(new P(2,3,3015,o,n.i.error||"No error in the media element")),mj(n,i)}}function qj(n,i){return lj(n,function(){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q;return K(function(J){switch(J.g){case 1:for(y in r=ep,n.D=!0,n.s=!1,o=n.i.currentTime,s=n.i.autoplay,u=n.i.paused,n.$&&(n.i.autoplay=!1),ua(J,2),n.u.ub(),p=[],n.m)p.push(n.m[y].destroy());for(A in n.j)for(x=(T=n.j[A])[0],n.j[A]=T.slice(0,1),x&&p.push(x.p.catch(yd)),I=(C=t(T.slice(1))).next();!I.done;I=C.next())I.value.p.reject(new P(2,7,7003,void 0));for(M in n.g){N=n.g[M];try{n.l.removeSourceBuffer(N)}catch(n){}}return D(J,Promise.all(p),4);case 4:return n.m={},n.g={},_=n.l.duration,n.L=new mf,n.l=Ni(n,n.L),D(J,n.L,5);case 5:for(!isNaN(_)&&_?n.l.duration=_:!isNaN(n.V)&&n.V&&(n.l.duration=n.V),j=new mf,B=n.l.sourceBuffers,z=i.size,G=0,n.u.o(B,"addsourcebuffer",function(){++G===z&&j.resolve()}),q=(H=t(i.keys())).next();!q.done;q=H.next())Y=q.value,Q=i.get(Y),Qi(n,Y,Q,Q.codecs),n.s?(n.j[r.U]=[],n.j[r.ia]=[]):n.j[Y]=[];return n.i.currentTime=o,D(J,j,2);case 2:xa(J),n.D=!1,Jf(n.K),n.u.na(n.i,"canplaythrough",function(){Jf(n.K),n.i.autoplay=s,u||n.i.play()}),ya(J,0)}})})}(N=Mi.prototype).destroy=function(){return this.K.destroy()},N.init=function(n,i,r,o){i=void 0!==i&&i,r=void 0===r?"UNKNOWN":r,o=void 0!==o&&o;var s,u,p,y,A,T=this;return K(function(x){if(1==x.g)return s=ep,D(x,T.L,2);for(T.C=i,T.W=r,T.sa=o,T.Aa=!T.C&&"HLS"==T.W&&!T.sa,p=(u=t(n.keys())).next();!p.done;p=u.next())y=p.value,A=n.get(y),Qi(T,y,A,A.codecs),T.s?(T.j[s.U]=[],T.j[s.ia]=[]):T.j[y]=[];F(x)})},N.configure=function(n){this.G=n},N.Lb=function(){var n={total:this.D?[]:Vh(this.i.buffered),audio:this.D?[]:Vh(Wi(this,"audio")),video:this.D?[]:Vh(Wi(this,"video")),text:[]};if(this.h){var i=this.h.g,r=this.h.h;null!=i&&null!=r&&n.text.push({start:i,end:r})}return n},N.remove=function(n,i,r){var o,s=this;return K(function(u){return 1==u.g?n==(o=ep).Da?D(u,s.h.remove(i,r),0):D(u,aj(s,n,function(){return gj(s,n,i,r)}),4):s.s?D(u,aj(s,o.U,function(){return gj(s,o.U,i,r)}),0):u.F(0)})},N.flush=function(n){var i,r=this;return K(function(o){return 1==o.g?n==(i=ep).Da?o.return():D(o,aj(r,n,function(){r.i.currentTime-=.001,Ti(r,n)}),2):r.s?D(o,aj(r,i.U,function(){var n=i.U;r.i.currentTime-=.001,Ti(r,n)}),0):o.F(0)})},N.endOfStream=function(n){var i=this;return K(function(r){return D(r,lj(i,function(){Ui(i)||"closed"===i.l.readyState||(n?i.l.endOfStream(n):i.l.endOfStream())}),0)})},N.gb=function(n){var i=this;return K(function(r){return D(r,lj(i,function(){if(n<i.l.duration)for(var r in i.g){var o={start:function(){},p:new mf};i.j[r].unshift(o)}i.l.duration=n,i.V=n}),0)})},N.getDuration=function(){return this.l.duration};var tK=n.URL.createObjectURL,tG="sequence";function sj(n,i,r){this.i=n,this.s=i,this.C=this.j=1/0,this.g=1,this.h=this.l=null,this.u=0,this.G=!0,this.H=0,this.D=void 0===r||r,this.I=0,this.m=!1}function tj(n,i,r){this.j=r,this.l=n,this.u=uj(n),this.g=n.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.C=i,this.i=function(){}}function wj(n){this.g=n}function uj(n){if(n.g.paused||0==n.g.buffered.length)var i=!1;else e:{i=n.g.currentTime,n=t(Vh(n.g.buffered));for(var r=n.next();!r.done;r=n.next())if(!(i<(r=r.value).start-.1||i>r.end-.5)){i=!0;break e}i=!1}return i}function xj(n,i,r,o,s){var u=this;this.C=s,this.g=n,this.D=i,this.u=r,this.l=new Kf,this.j=!1,this.H=n.readyState,this.G=this.i=0,this.h=o,this.s=!1,this.l.o(n,"waiting",function(){return yj(u)}),this.m=new Dd(function(){yj(u)}).za(this.u.gapJumpTimerTime)}function yj(n){if(0!=n.g.readyState){if(n.g.seeking){if(!n.j)return}else n.j=!1;if(!n.g.paused||n.g.currentTime==n.i&&(n.g.autoplay||n.g.currentTime!=n.i)){if(n.g.readyState!=n.H&&(n.H=n.g.readyState),!(s=!n.h)){var i,r,o,s,u=(s=n.h).l,p=uj(u),y=u.g.currentTime,A=Date.now()/1e3;(s.g!=y||s.u!=p)&&(s.m=A,s.g=y,s.u=p,s.h=!1),(p=(y=A-s.m)>=s.C&&p&&!s.h)&&(s.i(s.g,y),s.h=!0,s.g=u.g.currentTime,s.s++,s.j(new O("stalldetected"))),s=!p}s&&(s=n.g.currentTime,i=u=n.g.buffered,r=s,o=n.u.gapDetectionThreshold,null==(p=!i||!i.length||1==i.length&&1e-6>i.end(0)-i.start(0)?null:0<=(i=Vh(i).findIndex(function(n,i,s){return n.start>r&&(0==i||s[i-1].end-r<=o)}))?i:null)||0==p&&!n.s||(y=u.start(p))>=n.D.Ob()||.001>y-s||(0!=p&&u.end(p-1),n.g.currentTime=y,s==n.i&&(n.i=y),n.G++,n.C(new O("gapjumped"))))}}}function zj(n,i,r,o){i==HTMLMediaElement.HAVE_NOTHING||n.readyState>=i?o():(i=tH.value().get(i),r.na(n,i,o))}(N=sj.prototype).getDuration=function(){return this.j},N.mi=function(){return this.g},N.og=function(n){this.i=n},N.gb=function(n){this.j=n},N.pi=function(){return this.i},N.nh=function(n){this.u=n},N.Vc=function(n){this.G=n},N.Ne=function(n){this.C=n},N.oh=function(n){this.s=n},N.ci=function(){return this.s},N.hh=function(n,i){if(0!=n.length){var r=n[n.length-1].end+i;this.Ce(n[0].start+i),this.g=n.reduce(function(n,i){return Math.max(n,i.end-i.start)},this.g),this.h=Math.max(this.h,r),null!=this.i&&this.D&&!this.m&&(this.i=(Date.now()+this.u)/1e3-this.h-this.g)}},N.Dd=function(n){if(0!=n.length){var i=n[0].startTime,r=n[0].endTime,o=(Date.now()+this.u)/1e3;n=t(n);for(var s=n.next();!s.done;s=n.next())o<(s=s.value).startTime||(i=Math.min(i,s.startTime),r=Math.max(r,s.endTime),this.g=Math.max(this.g,s.endTime-s.startTime));this.Ce(i),this.h=Math.max(this.h,r),null!=this.i&&this.D&&!this.m&&(this.i=o-this.h-this.g)}},N.ve=function(){this.m=!0},N.Pi=function(){return this.m},N.Ce=function(n){this.l=null==this.l?n:Math.min(this.l,n)},N.Wf=function(n){this.g=Math.max(this.g,n)},N.offset=function(n){null!=this.l&&(this.l+=n),null!=this.h&&(this.h+=n)},N.R=function(){return 1/0==this.j&&!this.G},N.wc=function(){return 1/0!=this.j&&!this.G},N.Ab=function(){return Math.max(this.H,this.ac()-this.C)},N.sh=function(n){this.H=n},N.ac=function(){return this.R()||this.wc()?Math.min(Math.max(0,(Date.now()+this.u)/1e3-this.g-this.i)+this.I,this.j):this.h?Math.min(this.h,this.j):this.j},N.ud=function(n){var i=Math.max(this.l,this.H);return 1/0==this.C?Math.ceil(1e3*i)/1e3:Math.max(i,Math.min(this.ac()-this.C+n,this.Ob()))},N.Nc=function(){return this.ud(0)},N.Ob=function(){return Math.max(0,this.ac()-(this.R()||this.wc()?this.s:0))},N.yh=function(){return null!=this.i&&(null==this.h||!this.D)},N.mh=function(n){this.I=n},L("shaka.media.PresentationTimeline",sj),sj.prototype.setAvailabilityTimeOffset=sj.prototype.mh,sj.prototype.usingPresentationStartTime=sj.prototype.yh,sj.prototype.getSeekRangeEnd=sj.prototype.Ob,sj.prototype.getSeekRangeStart=sj.prototype.Nc,sj.prototype.getSafeSeekRangeStart=sj.prototype.ud,sj.prototype.getSegmentAvailabilityEnd=sj.prototype.ac,sj.prototype.setUserSeekStart=sj.prototype.sh,sj.prototype.getSegmentAvailabilityStart=sj.prototype.Ab,sj.prototype.isInProgress=sj.prototype.wc,sj.prototype.isLive=sj.prototype.R,sj.prototype.offset=sj.prototype.offset,sj.prototype.notifyMaxSegmentDuration=sj.prototype.Wf,sj.prototype.notifyMinSegmentStartTime=sj.prototype.Ce,sj.prototype.isStartTimeLocked=sj.prototype.Pi,sj.prototype.lockStartTime=sj.prototype.ve,sj.prototype.notifySegments=sj.prototype.Dd,sj.prototype.notifyTimeRange=sj.prototype.hh,sj.prototype.getDelay=sj.prototype.ci,sj.prototype.setDelay=sj.prototype.oh,sj.prototype.setSegmentAvailabilityDuration=sj.prototype.Ne,sj.prototype.setStatic=sj.prototype.Vc,sj.prototype.setClockOffset=sj.prototype.nh,sj.prototype.getPresentationStartTime=sj.prototype.pi,sj.prototype.setDuration=sj.prototype.gb,sj.prototype.setPresentationStartTime=sj.prototype.og,sj.prototype.getMaxSegmentDuration=sj.prototype.mi,sj.prototype.getDuration=sj.prototype.getDuration,tj.prototype.release=function(){this.j=this.l=null,this.i=function(){}},xj.prototype.release=function(){this.l&&(this.l.release(),this.l=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.D=this.C=null},xj.prototype.Zf=function(){this.s=!0,yj(this)};var tH=new Pf(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Bj(n,i,r,o){var s=this;this.g=n,this.m=i,this.u=r,this.l=null,this.j=function(){return null==s.l&&(s.l=o()),s.l},this.s=!1,this.h=new Kf,this.i=new Cj(n),zj(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Dj(s,s.j())})}function Ej(n){return n.s?n.g.currentTime:n.j()}function Fj(n,i){0<n.g.readyState?Gj(n.i,i):zj(n.g,HTMLMediaElement.HAVE_METADATA,n.h,function(){Dj(n,n.j())})}function Dj(n,i){.001>Math.abs(n.g.currentTime-i)?Hj(n):(n.h.na(n.g,"seeking",function(){Hj(n)}),Gj(n.i,n.g.currentTime&&0!=n.g.currentTime?n.g.currentTime:i))}function Hj(n){n.s=!0,n.h.o(n.g,"seeking",function(){return n.m()}),n.u(n.g.currentTime)}function Cj(n){var i=this;this.h=n,this.m=10,this.l=this.j=this.i=0,this.g=new Dd(function(){0>=i.i?i.g.stop():i.h.currentTime!=i.j?i.g.stop():(i.h.currentTime=i.l,i.i--)})}function Gj(n,i){n.j=n.h.currentTime,n.l=i,n.i=n.m,n.h.currentTime=i,n.g.za(.1)}function Ij(n){this.g=n,this.j=!1,this.h=null,this.i=new Kf}function Jj(n,i,r,o,s,u){var p=this;this.i=n,this.g=i.presentationTimeline,this.D=i.minBufferTime||0,this.l=r,this.C=s,this.u=null,this.s=function(n,i,r){if(!i.stallEnabled)return null;var o=i.stallSkip;return(i=new tj(new wj(n),i.stallThreshold,r)).i=function(){o?n.currentTime+=o:(n.pause(),n.play())},i}(n,r,u),this.j=new xj(n,i.presentationTimeline,r,this.s,u),this.h=new Bj(n,function(){e:{var n=p.j;n.j=!0,n.s=!1;var i=Ej(p.h);if(.001<Math.abs((n=Lj(p,i))-i)&&(i=Date.now()/1e3,!p.u||p.u<i-1)){p.u=i,Fj(p.h,n),n=void 0;break e}p.C(),n=void 0}return n},function(n){var i=p.j;i.g.seeking&&!i.j&&(i.j=!0,i.i=n)},function(){var n=o;return null==n?n=1/0>p.g.getDuration()?p.g.Nc():p.g.Ob():0>n&&(n=p.g.Ob()+n),Mj(p,Nj(p,n))}),this.m=new Dd(function(){if(0!=p.i.readyState&&!p.i.paused){var n=Ej(p.h),i=p.g.Nc(),r=p.g.Ob();3>r-i&&(i=r-3),n<i&&(n=Lj(p,n),p.i.currentTime=n)}})}function Mj(n,i){var r=n.g.getDuration();return i>=r?r-n.l.durationBackoff:i}function Lj(n,i){var r=Math.max(n.D,n.l.rebufferingGoal),o=n.l.safeSeekOffset,s=n.g.Nc(),u=n.g.Ob(),p=n.g.getDuration();3>u-s&&(s=u-3);var y=n.g.ud(r),A=n.g.ud(o);return r=n.g.ud(r+o),i>=p?Mj(n,i):i>u?u:i<s?Th(n.i.buffered,A)?A:r:i>=y||Th(n.i.buffered,i)?i:r}function Nj(n,i){var r=n.g.Nc();return i<r?r:i>(n=n.g.Ob())?n:i}function Oj(n){this.g=n,this.m=null,this.j=0,this.s=!1}function Pj(n,i){n=t(n.g);for(var r=n.next();!r.done;r=n.next())i(r.value)}function Rj(n,i,r){return n=new Ph(n,n+i,function(){return r},0,null,null,n,n,n+i),new Oj([n])}function Qj(n,i,r){this.i=n,this.g=i,this.h=r}function Sj(){Oj.call(this,[]),this.h=[]}function Tj(n){var i=this;this.g=n,this.h=this.g.ke(),this.i=new Dd(function(){i.g.fh(.25*i.h)})}function Uj(n){var i=this;this.h=n,this.g=new Set,this.i=new Dd(function(){Vj(i,!1)}).za(.25)}function Vj(n,i){for(var r=t(n.g),o=r.next();!o.done;o=r.next())o.value.j(n.h.currentTime,i)}function Wj(n){$a.call(this),this.g=new Map,this.h=n}function ak(n){$a.call(this);var i=this;this.g=new Set,this.i=n,this.h=new Dd(function(){for(var n=i.i(),r=t(i.g),o=r.next();!o.done;o=r.next())(o=o.value).endTime<n.start&&(i.g.delete(o),o=new O("regionremove",new Map([["region",o]])),i.dispatchEvent(o))}).za(2)}function bk(n,i){$a.call(this);var r=this;this.i=n,this.l=i,this.g=new Map,this.m=[{Dc:null,Cc:tX,vc:function(n,i){return dk(r,"enter",n,i)}},{Dc:tW,Cc:tX,vc:function(n,i){return dk(r,"enter",n,i)}},{Dc:tY,Cc:tX,vc:function(n,i){return dk(r,"enter",n,i)}},{Dc:tX,Cc:tW,vc:function(n,i){return dk(r,"exit",n,i)}},{Dc:tX,Cc:tY,vc:function(n,i){return dk(r,"exit",n,i)}},{Dc:tW,Cc:tY,vc:function(n,i){return dk(r,"skip",n,i)}},{Dc:tY,Cc:tW,vc:function(n,i){return dk(r,"skip",n,i)}}],this.h=new Kf,this.h.o(this.i,"regionremove",function(n){r.g.delete(n.region)})}function dk(n,i,r,o){i=new O(i,new Map([["region",r],["seeking",o]])),n.dispatchEvent(i)}Bj.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Cj.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(N=Ij.prototype).df=function(){var n=this;zj(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){null==n.h||0==n.h?n.j=!0:(n.i.na(n.g,"seeking",function(){n.j=!0}),n.g.currentTime=Math.max(0,n.g.currentTime+n.h))})},N.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},N.ef=function(n){this.h=this.j?this.h:n},N.Yd=function(){return(this.j?this.g.currentTime:this.h)||0},N.Cg=function(){return 0},N.Bg=function(){return 0},N.gh=function(){},(N=Jj.prototype).df=function(){this.m.za(.25)},N.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},N.ef=function(n){Fj(this.h,n)},N.Yd=function(){var n=Ej(this.h);return 0<this.i.readyState&&!this.i.paused?Nj(this,n):n},N.Cg=function(){return this.s?this.s.s:0},N.Bg=function(){return this.j.G},N.gh=function(){this.j.Zf()},(N=Oj.prototype).$b=function(){return this.g.length},N.release=function(){this.s||(this.g=[],this.m&&this.m.stop(),this.m=null)},N.Ui=function(){this.s=!0},N.find=function(n){for(var i=this.g.length-1,r=i;0<=r;--r){var o=this.g[r],s=r<i?this.g[r+1].startTime:o.endTime;if(n>=o.startTime&&n<s)return r+this.j}return this.g.length&&n<this.g[0].startTime?this.j:null},N.get=function(n){return 0==this.g.length?null:0>(n-=this.j)||n>=this.g.length?null:this.g[n]},N.offset=function(n){if(!this.s)for(var i=t(this.g),r=i.next();!r.done;r=i.next())r.value.offset(n)},N.ze=function(n){if(!this.s&&n.length){var i=Math.round(1e3*n[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<i}),this.g.push.apply(this.g,w(n))}},N.Cd=function(n,i){var r=this;n=n.filter(function(n){return n.endTime>i&&(0==r.g.length||n.endTime>r.g[0].startTime)}),this.ze(n),this.yb(i)},N.yb=function(n){if(!this.s){var i=this.g.length;this.g=this.g.filter(function(i){return i.endTime>n}),this.j+=i-this.g.length}},N.Ic=function(n,i,r){if(r=void 0!==r&&r,!this.s){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=i)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=n)this.g.shift(),r||this.j++;else break;0!=this.g.length&&(n=this.g[this.g.length-1],this.g[this.g.length-1]=new Ph(n.startTime,i,n.D,n.hb,n.Na,n.ka,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd,n.g,n.tilesLayout,n.C,n.oa,n.status,n.aes128Key),this.g[this.g.length-1].i=n.i)}},N.Qe=function(n,i){var r=this;this.s||(this.m&&this.m.stop(),this.m=new Dd(function(){var n=i();n?r.g.push.apply(r.g,w(n)):(r.m.stop(),r.m=null)}),this.m.za(n))},Oj.prototype[Symbol.iterator]=function(){return this.rc(0)},Oj.prototype.rc=function(n){var i=this.find(n);if(null==i)return null;i--;var r=this.get(i+1),o=-1;if(r&&0<r.g.length)for(var s=r.g.length-1;0<=s;--s){var u=r.g[s];if(n>=u.startTime&&n<u.endTime){for(;s&&!u.j;)s--,u=r.g[s];if(!u.j)return Qa("No independent partial segment found!"),null;i++,o=s-1;break}}return new Qj(this,i,o)},L("shaka.media.SegmentIndex",Oj),Oj.forSingleSegment=Rj,Oj.prototype.getIteratorForTime=Oj.prototype.rc,Oj.prototype.updateEvery=Oj.prototype.Qe,Oj.prototype.fit=Oj.prototype.Ic,Oj.prototype.evict=Oj.prototype.yb,Oj.prototype.mergeAndEvict=Oj.prototype.Cd,Oj.prototype.offset=Oj.prototype.offset,Oj.prototype.get=Oj.prototype.get,Oj.prototype.find=Oj.prototype.find,Oj.prototype.markImmutable=Oj.prototype.Ui,Oj.prototype.release=Oj.prototype.release,Qj.prototype.Oh=function(){return this.g},Qj.prototype.current=function(){var n=this.i.get(this.g);return n&&0<n.g.length&&n.s&&this.h>=n.g.length&&(this.g++,this.h=0,n=this.i.get(this.g)),n&&0<n.g.length?n.g[this.h]:n},Qj.prototype.next=function(){var n=this.i.get(this.g);return n&&0<n.g.length?(this.h++,n.s&&this.h==n.g.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:n=this.current(),done:!n}},L("shaka.media.SegmentIterator",Qj),Qj.prototype.next=Qj.prototype.next,Qj.prototype.current=Qj.prototype.current,Qj.prototype.currentPosition=Qj.prototype.Oh,pa(Sj,Oj),(N=Sj.prototype).clone=function(){var n=new Sj;return n.h=this.h.slice(),n},N.release=function(){for(var n=t(this.h),i=n.next();!i.done;i=n.next())i.value.release();this.h=[]},N.find=function(n){for(var i=0,r=t(this.h),o=r.next();!o.done;o=r.next()){var s=(o=o.value).find(n);if(null!=s)return s+i;i+=o.j+o.$b()}return null},N.get=function(n){for(var i=0,r=t(this.h),o=r.next();!o.done;o=r.next()){var s=(o=o.value).get(n-i);if(s)return s;i+=o.j+o.$b()}return null},N.offset=function(){},N.ze=function(){},N.yb=function(){},N.Cd=function(){},N.Ic=function(){},N.Qe=function(){},L("shaka.media.MetaSegmentIndex",Sj),Sj.prototype.updateEvery=Sj.prototype.Qe,Sj.prototype.fit=Sj.prototype.Ic,Sj.prototype.mergeAndEvict=Sj.prototype.Cd,Sj.prototype.evict=Sj.prototype.yb,Sj.prototype.merge=Sj.prototype.ze,Sj.prototype.offset=Sj.prototype.offset,Sj.prototype.get=Sj.prototype.get,Sj.prototype.find=Sj.prototype.find,Sj.prototype.release=Sj.prototype.release,Tj.prototype.release=function(){this.set(this.Lc()),this.i&&(this.i.stop(),this.i=null),this.g=null},Tj.prototype.set=function(n){if(this.h!=n)e:{if(this.h=n,this.i.stop(),0<=this.h)try{var i=this.h;this.g.ke()!=i&&this.g.pg(i);break e}catch(n){}this.i.za(.25),0!=this.g.ke()&&this.g.pg(0)}},Tj.prototype.Lc=function(){return this.g.Lc()},Uj.prototype.release=function(){this.i.stop();for(var n=t(this.g),i=n.next();!i.done;i=n.next())i.value.release();this.g.clear()},pa(Wj,$a),Wj.prototype.release=function(){this.g.clear(),$a.prototype.release.call(this)},Wj.prototype.j=function(n){for(var i=t(this.g.values()),r=i.next();!r.done;r=i.next()){r=r.value;e:{for(var o=r.Gd,s=o.length-1;0<=s;s--){var u=o[s];if(u.position<=n){o=u.Uf;break e}}o=null}if((s=o)&&(s=!((s=r.Mg)===o||s&&o&&s.bandwidth==o.bandwidth&&s.audioSamplingRate==o.audioSamplingRate&&s.codecs==o.codecs&&s.contentType==o.contentType&&s.frameRate==o.frameRate&&s.height==o.height&&s.mimeType==o.mimeType&&s.channelsCount==o.channelsCount&&s.pixelAspectRatio==o.pixelAspectRatio&&s.width==o.width)),s)e:{if(s=n,u=o.contentType,(u=this.h()[u])&&0<u.length){var p=u[u.length-1].end;if(s>=u[0].start&&s<p){s=!0;break e}}s=!1}s&&(r.Mg=o,JSON.stringify(o),r=new O("qualitychange",new Map([["quality",o],["position",n]])),this.dispatchEvent(r))}},pa(ak,$a),ak.prototype.release=function(){this.g.clear(),this.h.stop(),$a.prototype.release.call(this)},pa(bk,$a),bk.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,$a.prototype.release.call(this)},bk.prototype.j=function(n,i){if(!this.l||0!=n){this.l=!1;for(var r=t(this.i.g),o=r.next();!o.done;o=r.next()){o=o.value;var s=this.g.get(o),u=n<o.startTime?tW:n>o.endTime?tY:tX;this.g.set(o,u);for(var p=t(this.m),y=p.next();!y.done;y=p.next())(y=y.value).Dc==s&&y.Cc==u&&y.vc(o,i)}}};var tW=1,tX=2,tY=3;function gk(n,i,r){this.i=n,this.h=i,this.j=0,this.l=r,this.g=new Map}function hk(n,i,r){if(r=void 0!==r&&r,n.h.segmentIndex){var o=n.h.segmentIndex.rc(Math.max(i.startTime,n.j));if(o){var s=i;for(r&&(s=o.next().value)&&s.startTime==i.startTime&&s.endTime==i.endTime&&(s=null);n.g.size<n.i&&null!=s&&(i=!0,s.l&&null!=s.Na&&(i=!1),2==s.sc()&&(i=!1),i&&!n.g.has(s)&&(jk(i=new ik(n.l),s,n.h),n.g.set(s,i)),n.j=s.startTime,!n.h.fastSwitching||!s.Fd||!s.ue);)s=o.next().value}}}function lk(n){if(0!==n.g.size){for(var i=t(n.g.keys()),r=i.next();!r.done;r=i.next())(r=r.value)&&mk(n,r);n.j=0}}function mk(n,i){var r=n.g.get(i);n.g.delete(i),r&&r.abort()}function ik(n){this.i=n,this.g=this.h=null}function jk(n,i,r){var o=new Uint8Array(0);n.g=n.i(i,r,function(i){return K(function(r){if(1==r.g)return o=0<o.byteLength?tg(o,i):i,n.h?D(r,n.h(o),3):r.F(0);o=new Uint8Array(0),F(r)})})}function ok(n,i,r,o,s){return n=Af(n,o,s),(0!=i||null!=r)&&(n.headers.Range=r?"bytes="+i+"-"+r:"bytes="+i+"-"),n}function pk(n,i){var r=this;this.g=i,this.m=n,this.h=null,this.C=1,this.s=this.j=null,this.H=0,this.G=!1,this.i=new Map,this.D=!1,this.I=null,this.u=!1,this.l=new If(function(){var n,i,o,s,u;return n=r,K(function(r){if(1==r.g){for(i=[],s=(o=t(n.i.values())).next();!s.done;s=o.next())rk(u=s.value),i.push(sk(u));return D(r,Promise.all(i),2)}n.i.clear(),n.g=null,n.m=null,n.h=null,F(r)})}),this.J=Date.now()/1e3}function zk(n,i){var r=n.i.get("video");if(r){var o=r.stream;o&&(i?(i=o.trickModeVideo)&&!r.Ac&&(Ak(n,i,!1,0,!1),r.Ac=o):(o=r.Ac)&&(r.Ac=null,Ak(n,o,!0,0,!1)))}}function Bk(n,i,r,o,s,u){r=void 0!==r&&r,o=void 0===o?0:o,s=void 0!==s&&s,u=void 0!==u&&u,n.j=i,n.D&&(i.video&&Ak(n,i.video,r,o,s,u),i.audio&&Ak(n,i.audio,r,o,s,u))}function Ck(n,i){K(function(r){if(1==r.g)return n.s=i,n.D?i.segmentIndex?r.F(2):D(r,i.createSegmentIndex(),2):r.return();Ak(n,i,!0,0,!1),F(r)})}function Ak(n,i,r,o,s,u){var p,y,A,T,x,C,I,M,N,_,j,B,z=n.i.get(i.type);z||i.type!=eh?z&&(z.Ac&&(i.trickModeVideo?(z.Ac=i,i=i.trickModeVideo):z.Ac=null),z.stream!=i||s)&&(z.Ia&&(x=z.Ia,(C=i)&&C!==x.h&&(lk(x),x.h=C)),i.type==eh&&(s=dd(i.mimeType,i.codecs),Ri(n.g.Y,s,n.m.sequenceMode,i.external)),z.stream.closeSegmentIndex&&z.stream.closeSegmentIndex(),z.stream=i,z.ea=null,z.Dg=!!u,r&&(z.pd?z.Re=!0:z.Ta?(z.Ub=!0,z.be=o,z.Re=!0):(rk(z),Dk(n,z,!0,o).catch(function(i){n.g&&n.g.onError(i)}))),(p=n,y=z,K(function(n){if(1==n.g)return y.eb?(A=y.stream,T=y.eb,A.segmentIndex?n.F(2):D(n,A.createSegmentIndex(),2)):n.return();if(y.eb!=T||y.stream!=A)return n.return();var i=p.g.je(),r=Xi(p.g.Y,y.type),o=y.stream.segmentIndex.find(y.Sa?y.Sa.endTime:i),s=null==o?null:y.stream.segmentIndex.get(o);o=s&&s.Na?s.Na-s.hb:null,s&&!o&&(o=(s.endTime-s.getStartTime())*(y.stream.bandwidth||0)/8),o?((s=s.ka)&&(o+=(s.Na?s.Na-s.hb:null)||0),i=8*o/(s=p.g.getBandwidthEstimate())<(r||0)-i-Math.max(p.m.minBufferTime||0,p.h.rebufferingGoal)||y.eb.h.g>o):i=!1,i&&y.eb.abort(),F(n)})).catch(function(i){n.g&&n.g.onError(i)})):(I=i,K(function(i){switch(i.g){case 1:return M=ep,n.H++,N=n.H,ta(i,2),D(i,hj(n.g.Y,M.Da),4);case 4:va(i,3);break;case 2:_=wa(i),n.g&&n.g.onError(_);case 3:j=dd(I.mimeType,I.codecs),Ri(n.g.Y,j,n.m.sequenceMode,I.external),(n.g.Y.H.isTextVisible()||n.h.alwaysStreamText)&&n.H==N&&(B=wk(n,I),n.i.set(M.Da,B),xk(n,B,0)),F(i)}}))}function Fk(n,i){i.pd||i.Ub||(i.Ta?(i.Ub=!0,i.be=0):null==Vi(n.g.Y,i.type)?null==i.Eb&&xk(n,i,0):(rk(i),Dk(n,i,!1,0).catch(function(i){n.g&&n.g.onError(i)})))}function wk(n,i){return{stream:i,type:i.type,ea:null,Ia:tk(n,i),Sa:null,ec:null,Rf:null,Pf:null,Of:null,Ac:null,endOfStream:!1,Ta:!1,Eb:null,Ub:!1,be:0,Re:!1,pd:!1,Kd:!0,Vf:!1,dg:!1,wd:!1,eb:null}}function tk(n,i){return"video"!==i.type&&"audio"!==i.type?null:0<n.h.segmentPrefetchLimit?new gk(n.h.segmentPrefetchLimit,i,function(i,r,o){return Gk(n,i,r,o)}):null}function Pk(n,i,r,o,s,u,p){var y,A,T,x,C,I;return p=void 0!==p&&p,K(function(M){switch(M.g){case 1:var N,_,j,B,z,G;return y=o.closedCaptions&&0<o.closedCaptions.size,T=null!=o.emsgSchemeIdUris&&0<o.emsgSchemeIdUris.length||n.h.dispatchAllEmsgBoxes,x=n.h.parsePrftBox&&!n.G,(T||x)&&(A=new bg),T&&A.T("emsg",function(i){var r=o.emsgSchemeIdUris;if(0===i.version)var u=i.reader.Hd(),p=i.reader.Hd(),y=i.reader.O(),A=i.reader.O(),T=i.reader.O(),x=i.reader.O(),C=s.startTime+A/y;else y=i.reader.O(),A=(C=i.reader.Uc()/y+s.timestampOffset)-s.startTime,T=i.reader.O(),x=i.reader.O(),u=i.reader.Hd(),p=i.reader.Hd();i=i.reader.Sb(i.reader.getLength()-i.reader.Ga()),(r&&r.includes(u)||n.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==u?n.g.Xi():(r=(new Map).set("detail",{startTime:C,endTime:C+T/y,schemeIdUri:u,value:p,timescale:y,presentationTimeDelta:A,eventDuration:T,id:x,messageData:i}),(r=new O("emsg",r)).cancelable=!0,n.g.onEvent(r),r.defaultPrevented||"https://aomedia.org/emsg/ID3"!=u&&"https://developer.apple.com/streaming/emsg-id3"!=u||(u=bi(i)).length&&s&&n.g.Yi([{cueTime:s.startTime,data:i,frames:u,dts:s.startTime,pts:s.startTime}],0,s.endTime)))}),x&&A.T("prft",function(i){if(!n.G&&s.ka.timescale){var r=i.reader,o=i.version;r.O(),i=1e3*(i=r.O())+r.O()/4294967296*1e3,r=0===o?r.O():4294967296*(o=r.O())+(r=r.O()),i=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+i).getTime(),r=(new Map).set("detail",{wallClockTime:i,programStartDate:new Date(i-r/s.ka.timescale*1e3)}),r=new O("prft",r),n.g.onEvent(r),n.G=!0}}),(T||x)&&A.parse(u),D(M,(N=n,_=i,j=r,K(function(n){if(1==n.g)return(B=Math.max(N.h.bufferBehind,N.m.presentationTimeline.g),null==(z=Vi(N.g.Y,_.type)))?n.return():1>=(G=j-z-B)?n.return():D(n,N.g.Y.remove(_.type,z,z+G),2);Jf(N.l),F(n)})),2);case 2:return Jf(n.l),C=i.Kd,i.Kd=!1,I=i.Dg,i.Dg=!1,D(M,n.g.Gg(i.type,u),3);case 3:return D(M,$i(n.g.Y,i.type,u,s,o,y,C,I,p),4);case 4:Jf(n.l),F(M)}})}function Kk(n){return n&&n.type==eh&&("application/cea-608"==n.stream.mimeType||"application/cea-708"==n.stream.mimeType)}function Qk(i,r,o,s){var u,p,y,A,T;return K(function(x){switch(x.g){case 1:if(o instanceof Nh&&(u=o.g))return x.return(u);if(p=null,r.Ia){var C,I,M,N,_,j,B,z=r.Ia;if(z.g.has(o)){var G=z.g.get(o);s&&(G.h=s),z.g.delete(o),p=G.g}else p=null}return p||(p=Gk(i,o,r.stream,s)),y=0,r.ea&&(y=r.ea.g),r.eb=p,D(x,p.promise,2);case 2:if(A=x.h,r.eb=null,T=A.data,!o.aes128Key){x.F(3);break}return D(x,(C=T,I=o.aes128Key,M=y,K(function(i){if(1==i.g)return(N=I).cryptoKey?i.F(2):D(i,N.fetchKey(),3);if(!(_=N.iv))for(_=lc(new ArrayBuffer(16)),j=N.firstMediaSequenceNumber+M,B=_.byteLength-1;0<=B;B--)_[B]=255&j,j>>=8;return i.return(n.crypto.subtle.decrypt({name:"AES-CBC",iv:_},N.cryptoKey,C))})),4);case 4:T=x.h;case 3:return x.return(T)}})}function Gk(n,i,r,o){var s=i instanceof Ph?i:void 0;return i=ok(i.ba(),i.hb,i.Na,n.h.retryParameters,o),n.g.zc.request(e7,i,{type:s?1:0,stream:r,segment:s})}function Dk(n,i,r,o){var s,u;return K(function(p){return 1==p.g?(i.Ub=!1,i.Re=!1,i.be=0,i.pd=!0,i.Sa=null,i.ec=null,i.ea=null,i.Ia&&lk(i.Ia),o?(s=n.g.je(),u=n.g.Y.getDuration(),D(p,n.g.Y.remove(i.type,s+o,u),3)):D(p,hj(n.g.Y,i.type),4)):3!=p.g?(Jf(n.l),r?D(p,n.g.Y.flush(i.type),3):p.F(3)):void(Jf(n.l),i.pd=!1,i.endOfStream=!1,i.Ta||i.Eb||xk(n,i,0),F(p))})}function xk(i,r,o){var s=r.type;(s!=eh||i.i.has(s))&&(r.Eb=new Cd(function(){var o;return K(function(s){if(1==s.g){var u,p,y,A,T;return ta(s,2),D(s,K(function(o){switch(o.g){case 1:if(Jf(i.l),r.Ta||null==r.Eb||r.pd)return o.return();if(r.Eb=null,!r.Ub){o.F(2);break}return D(o,Dk(i,r,r.Re,r.be),3);case 3:return o.return();case 2:if(r.stream.segmentIndex){o.F(4);break}return u=r.stream,D(o,r.stream.createSegmentIndex(),5);case 5:if(u!=r.stream)return u.closeSegmentIndex&&u.closeSegmentIndex(),r.Ta||r.Eb||xk(i,r,0),o.return();case 4:ta(o,6),null!=(p=function(i,r){if(Kk(r))return H=i.g.Y,q=r.stream.originalId||"",Y=Xi(H,"video")||0,td(H.h,q,Y),null;if(r.type==eh&&(Q=i.g.Y).h&&td(Q.h,"",0),!i.g.Y.aa&&r.type!=eh)return i.h.updateIntervalSeconds/2;var o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea=i.g.je(),es=r.Sa?r.Sa.endTime:ea,ec=(J=i.g.Y,$=r.type,J.D?0:$==eh?null==(J=J.h).h||J.h<ea?0:J.h-Math.max(ea,J.g):Uh(J=Wi(J,$),ea)),ed=Math.max(1,Math.max(i.m.minBufferTime||0,i.h.rebufferingGoal,i.h.bufferingGoal)*i.C),eg=i.m.presentationTimeline.getDuration()-es,em=Xi(i.g.Y,r.type);if(1e-6>eg&&em)return r.endOfStream=!0,"video"==r.type&&(i=i.i.get(eh))&&Kk(i)&&(i.endOfStream=!0),null;if(r.endOfStream=!1,ec>=ed)return i.h.updateIntervalSeconds/2;if(!(ec=function(n,i,r,o){if(i.ea)return i.ea.current();if(i.Sa||o)return r=i.Sa?i.Sa.endTime:o,i.Vf=!0,i.ea=i.stream.segmentIndex.rc(r),i.ea&&i.ea.next().value;o=Math.max(r-(n=n.h.inaccurateManifestTolerance),0);var s=null;return n&&(i.ea=i.stream.segmentIndex.rc(o),s=i.ea&&i.ea.next().value),s||(i.ea=i.stream.segmentIndex.rc(r),s=i.ea&&i.ea.next().value),s}(i,r,ea,em)))return i.h.updateIntervalSeconds;for(ed=1/0,em=(eg=t(eg=Array.from(i.i.values()))).next();!em.done;em=eg.next())Kk(em=em.value)||em.ea&&!em.ea.current()||(ed=Math.min(ed,em.Sa?em.Sa.endTime:ea));return es>=ed+i.m.presentationTimeline.g?i.h.updateIntervalSeconds:(r.Ia&&r.ea&&(!(es=ec.ka)||r.Sa&&Oh(es,r.ec)||function(n,i){if(n.h.segmentIndex&&n.g.size<n.i&&!n.g.has(i)){var r=new ik(n.l);jk(r,i,n.h),n.g.set(i,r)}}(r.Ia,es),hk(r.Ia,ec)),(o=i,s=r,u=ea,p=ec,K(function(i){switch(i.g){case 1:var r,H,q,Y,Q,J,$,ea,es,ec,ed,eg,em,ev,eb,eA;if(y=ep,A=s.stream,T=s.ea,s.Ta=!0,ta(i,2),2==p.sc())throw new P(1,1,1011);return D(i,(r=o,H=s,q=p,K(function(n){var i,o,s,u;return 1==n.g?(Y=ep,Q=[],J=Math.max(0,q.appendWindowStart-.1),$=q.appendWindowEnd+.01,ea=ld(H.stream.codecs),es=md(H.stream.mimeType),(ec=q.timestampOffset)==H.Rf&&J==H.Pf&&$==H.Of&&ea==H.Qf&&es==H.ah)?n.F(2):((ed=H.Qf&&H.ah&&function(n,i,r){if(i==eh)var o=!1;else{o=ld(nd(n.I[i]));var s=md(n.I[i]),u=dd(r.mimeType,r.codecs),p=n.G.forceTransmux;(!ac(u)||!n.C&&eQ.includes(u)||r.codecs.includes(","))&&(p=!0),r=fd(r.mimeType,r.codecs),p&&(p=Yc(r))&&(u=(p=p()).convertCodecs(i,r),p.destroy()),i=ld(nd(u)),u=md(u),o=o!==i||s!==u}return!!o&&("smooth"!==n.G.codecSwitchingStrategy||!fc()||n.s)}(r.g.Y,H.type,H.stream))&&(eg=null,H.type===Y.ia?eg=r.i.get(Y.U):H.type===Y.U&&(eg=r.i.get(Y.ia)),eg&&(eg.ec=null,Fk(r,eg),sk(eg).catch(function(){}))),em=function(){var n,i,o,s;return K(function(u){if(1==u.g){var p,y,A,T,x,C;return n=new Map,r.j.audio&&n.set(Y.U,r.j.audio),r.j.video&&n.set(Y.ia,r.j.video),ta(u,2),H.Pf=J,H.Of=$,H.Qf=ea,H.ah=es,H.Rf=ec,i=r.m.sequenceMode||"HLS"==r.m.type,D(u,(p=r.g.Y,y=H.type,A=q.mimeType||H.stream.mimeType,T=q.codecs||H.stream.codecs,K(function(r){if(1==r.g){var o,s,u,I,M,N,_,j,B,z,G,H,q,Y,Q,ea,es,ed,eg,em,ev;return y==(x=ep).Da?(i||(p.h.u=ec),(o=p.h).l=J,o.m=$,r.return()):(C=[],D(r,(s=p,u=y,I=A,M=T,N=n,K(function(n){if(1==n.g){if(u==(_=ep).Da||(j=ld(nd(s.I[u])),B=md(s.I[u]),G=!1,H=dd(I,M),q=s.G.forceTransmux,(!ac(H)||!s.C&&eQ.includes(H)||M.includes(","))&&(q=!0),q&&(Q=Yc(Y=fd(I,M)))&&(z=Q(),ea=Cb(_.U,(M||"").split(",")),es=Cb(_.ia,(M||"").split(",")),ea&&es?(G=!0,ed=es,u==_.U&&(ed=ea),H=z.convertCodecs(u,fd(I,ed))):H=z.convertCodecs(u,Y)),eg=ld(nd(H)),em=md(H),j===eg&&B===em))return n.return(!1);if(ev=!0,(s.s||G&&z&&!s.m[u])&&(ev=!1),ev&&"smooth"===s.G.codecSwitchingStrategy&&fc()){var i,r;return D(n,(i=H,r=z,aj(s,u,function(){u!==eh&&(fc()&&(s.m[u]&&(s.m[u].destroy(),delete s.m[u]),r&&(s.m[u]=r),s.g[u].changeType(i+s.G.sourceBufferExtraFeatures),s.I[u]=i),Ti(s,u))})),3)}return z&&z.destroy(),D(n,qj(s,N),3)}return n.return(!0)})),2))}return r.h||(C.push(aj(p,y,function(){return bj(p,y)})),p.s&&C.push(aj(p,x.U,function(){return bj(p,x.U)}))),i||(C.push(aj(p,y,function(){return cj(p,y,ec)})),p.s&&C.push(aj(p,x.U,function(){return cj(p,x.U,ec)}))),C.push(aj(p,y,function(){p.g[y].appendWindowStart=0,p.g[y].appendWindowEnd=$,p.g[y].appendWindowStart=J,Ti(p,y)})),p.s&&C.push(aj(p,x.U,function(){var n=x.U;p.g[n].appendWindowStart=0,p.g[n].appendWindowEnd=$,p.g[n].appendWindowStart=J,Ti(p,n)})),D(r,Promise.all(C),0)})),4)}if(2!=u.g)return ed&&(o=null,H.type===Y.ia?o=r.i.get(Y.U):H.type===Y.U&&(o=r.i.get(Y.ia)),o&&(o.Ub=!1,o.Ta=!1,Fk(r,o))),va(u,0);throw s=wa(u),H.Pf=null,H.Of=null,H.Qf=null,H.Rf=null,s})},D(n,em(),2)):(Oh(q.ka,H.ec)||(H.ec=q.ka,q.j&&q.ka&&(ev=Qk(r,H,q.ka),eb=function(){var n,i,o,s,u;return K(function(p){switch(p.g){case 1:return ta(p,2),D(p,ev,4);case 4:return n=p.h,Jf(r.l),i=null,o=new Map,(new bg).box("moov",gg).box("trak",gg).box("mdia",gg).T("mdhd",function(n){i=fi(n.reader,n.version).timescale}).box("hdlr",function(n){(n=n.reader).skip(8);var r=String.fromCharCode((n=n.Sb(4))[0]);switch(r+=String.fromCharCode(n[1])+String.fromCharCode(n[2])+String.fromCharCode(n[3])){case"soun":o.set(Y.U,i);break;case"vide":o.set(Y.ia,i)}i=null}).parse(n),o.has(H.type)?q.ka.timescale=o.get(H.type):null!=i&&(q.ka.timescale=i),s=H.stream.closedCaptions&&0<H.stream.closedCaptions.size,D(p,r.g.Gg(H.type,n),5);case 5:return D(p,$i(r.g.Y,H.type,n,null,H.stream,s),6);case 6:va(p,0);break;case 2:throw u=wa(p),H.ec=null,u}})},r.g.Wi(q.startTime,q.ka),Q.push(eb()))),r.m.sequenceMode&&(eA=H.Sa?H.Sa.i:null,q.i!=eA||H.Vf)&&(H.Vf=!1,Q.push((i=r.g.Y,o=H.type,s=q.startTime,K(function(n){return 1==n.g?o==(u=ep).Da?n.return():(aj(i,o,function(){return bj(i,o)}),i.s&&aj(i,u.U,function(){return bj(i,u.U)}),D(n,aj(i,o,function(){return cj(i,o,s)}),2)):i.s?D(n,aj(i,u.U,function(){return cj(i,u.U,s)}),0):n.F(0)})))),D(n,Promise.all(Q),0))})),4);case 4:if(Jf(o.l),o.u)return i.return();if(x="video/mp4"==A.mimeType||"audio/mp4"==A.mimeType,C=n.ReadableStream,o.h.lowLatencyMode&&C&&x&&("HLS"!=o.m.type||p.m))return M=new Uint8Array(0),_=N=!1,B=function(n){var i,r,y;return K(function(T){switch(T.g){case 1:var x,C,I;if(N||(_=!0,Jf(o.l),o.u))return T.return();if(ta(T,2),x=M,C=n,(I=new Uint8Array(x.length+C.length)).set(x),I.set(C,x.length),M=I,i=!1,r=0,(new bg).box("mdat",function(n){r=n.size+n.start,i=!0}).parse(M,!1,!0),!i){T.F(4);break}return y=M.subarray(0,r),M=M.subarray(r),D(T,Pk(o,s,u,A,p,y,!0),5);case 5:s.Ia&&s.ea&&hk(s.Ia,p,!0);case 4:va(T,0);break;case 2:j=wa(T),F(T)}})},D(i,Qk(o,s,p,B),9);return D(i,Qk(o,s,p),7);case 7:if(I=i.h,Jf(o.l),o.u)return i.return();return Jf(o.l),s.Ub?(s.Ta=!1,xk(o,s,0),i.return()):D(i,Pk(o,s,u,A,p,I),6);case 9:if(z=i.h,j)throw j;if(_){i.F(10);break}return N=!0,Jf(o.l),o.u?i.return():s.Ub?(s.Ta=!1,xk(o,s,0),i.return()):D(i,Pk(o,s,u,A,p,z),10);case 10:s.Ia&&s.ea&&hk(s.Ia,p,!0);case 6:if(Jf(o.l),o.u)return i.return();s.Sa=p,T.next(),s.Ta=!1,s.dg=!1,JSON.stringify(o.g.Y.Lb()[s.type]),s.Ub||o.g.Zf(p,s.stream),xk(o,s,0),va(i,0);break;case 2:if(G=wa(i),Jf(o.l,G),o.u)return i.return();if(s.Ta=!1,7001==G.code)s.Ta=!1,rk(s),xk(o,s,0),i.F(0);else if(s.type==y.Da&&o.h.ignoreTextStreamFailures)o.i.delete(y.Da),i.F(0);else{if(3017!=G.code)return s.wd=!0,G.severity=2,D(i,Jk(o,s,G),0);(function(n,i,r){if(!Array.from(n.i.values()).some(function(n){return n!=i&&n.dg})){if(0<n.h.maxDisabledTime&&n.g.ce(i.stream,n.h.maxDisabledTime))return;var o=Math.round(100*n.C);if(20<o)n.C-=.2;else if(4<o)n.C-=.04;else{i.wd=!0,n.u=!0,n.g.onError(r);return}i.dg=!0}xk(n,i,4)})(o,s,G),i.F(0)}}})).catch(function(){}),null)}(i,r))&&(xk(i,r,p),r.wd=!1),va(o,7);break;case 6:return y=wa(o),D(o,Jk(i,r,y),8);case 8:return o.return();case 7:if(A=Array.from(i.i.values()),!i.D||!A.every(function(n){return n.endOfStream})){o.F(0);break}return D(o,i.g.Y.endOfStream(),10);case 10:Jf(i.l),0!=(T=i.g.Y.getDuration())&&T<i.m.presentationTimeline.getDuration()&&i.m.presentationTimeline.gb(T),F(o)}}),4)}if(2!=s.g)return va(s,0);o=wa(s),i.g&&i.g.onError(o),F(s)})}).S(o))}function rk(n){null!=n.Eb&&(n.Eb.stop(),n.Eb=null)}function sk(n){return K(function(i){return n.eb?D(i,n.eb.abort(),0):i.F(0)})}function Jk(n,i,r){var o;return K(function(s){if(1==s.g)return D(s,lf(n.I),2);Jf(n.l),o=0===n.h.maxDisabledTime&&1011==r.code?1:n.h.maxDisabledTime,1===r.category&&0<o&&(r.handled=n.g.ce(i.stream,o),r.handled&&(r.severity=1)),n.g.onError(r),r.handled||n.h.failureCallback(r),F(s)})}function Vk(n,i,r){var o,s,u,p;return K(function(y){switch(y.g){case 1:var A=new fb(n).Ya.split("/").pop().split(".");if(o=tZ[1==A.length?"":A.pop().toLowerCase()])return y.return(o);return s=0,u=Af([n],r),ta(y,2),u.method="HEAD",D(y,i.request(s,u).promise,4);case 4:o=y.h.headers["content-type"],va(y,3);break;case 2:if(!(p=wa(y))||1002!=p.code&&1001!=p.code){y.F(3);break}return u.method="GET",D(y,i.request(s,u).promise,6);case 6:o=y.h.headers["content-type"];case 3:return y.return(o?o.toLowerCase().split(";").shift():"")}})}ik.prototype.abort=function(){this.g&&this.g.abort()},(N=pk.prototype).destroy=function(){return this.l.destroy()},N.configure=function(n){this.h=n,this.I=new jf({maxAttempts:Math.max(n.retryParameters.maxAttempts,2),baseDelay:n.retryParameters.baseDelay,backoffFactor:n.retryParameters.backoffFactor,fuzzFactor:n.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var i=t(this.i.keys()),r=i.next();!r.done;r=i.next())if((r=this.i.get(r.value)).Ia){var o=r.Ia,s=n.segmentPrefetchLimit;o.i=s;for(var u=Array.from(o.g.keys());u.length>s;){var p=u.pop();p&&mk(o,p)}0<n.segmentPrefetchLimit||(r.Ia=null)}else 0<n.segmentPrefetchLimit&&(r.Ia=tk(this,r.stream))},N.start=function(){var n=this;return K(function(i){if(1==i.g){var r,o,s,u,p,y,A,T,x;return D(i,(r=n,K(function(n){if(1==n.g){if(o=ep,!r.j)throw new P(2,5,5006);return s=new Map,u=new Set,r.j.audio&&(s.set(o.U,r.j.audio),u.add(r.j.audio)),r.j.video&&(s.set(o.ia,r.j.video),u.add(r.j.video)),r.s&&(s.set(o.Da,r.s),u.add(r.s)),D(n,r.g.Y.init(s,r.m.sequenceMode,r.m.type,r.m.ignoreManifestTimestampsInSegmentsMode),2)}for(Jf(r.l),r.updateDuration(),y=(p=t(s.keys())).next();!y.done;y=p.next())A=y.value,T=s.get(A),r.i.has(A)||(x=wk(r,T),r.i.set(A,x),xk(r,x,0));F(n)})),2)}Jf(n.l),n.D=!0,F(i)})},N.Kd=function(){if(this.g)for(var n=this.g.je(),i=t(this.i.keys()),r=i.next();!r.done;r=i.next()){var o=r.value;r=this.i.get(o);var s=null;r.ea&&(s=r.ea.current()),(!s||s.startTime>n||s.endTime<n)&&(r.ea=null),(s=!(s=this.g.Y).D&&(o==eh?null!=(s=s.h).g&&null!=s.h&&n>=s.g&&n<s.h:Th(s=Wi(s,o),n)))||((null!=Xi(this.g.Y,o)||r.Ta)&&Fk(this,r),r.eb&&(r.eb.abort(),r.eb=null),o===eh&&(o=this.g.Y).J&&o.J.h(),r.Kd=!0)}},N.updateDuration=function(){var n=this.m.presentationTimeline.getDuration();1/0>n?this.g.Y.gb(n):this.g.Y.gb(4294967296)};var tZ={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Yk(n){var i=(n=n.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(i?n="#"+(256|parseInt(i[1],10)).toString(16).slice(1)+(256|parseInt(i[2],10)).toString(16).slice(1)+(256|parseInt(i[3],10)).toString(16).slice(1):n.startsWith("#")&&7<n.length&&(n=n.slice(0,7)),n){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Zk(n,i){var r=[];n=t(n);for(var o=n.next();!o.done;o=n.next())if((o=o.value).isContainer)r.push.apply(r,w(Zk(o.nestedCues,o)));else{var s=o.clone();s.nestedCues=[],s.payload=function Xk(n,i){if(n.lineBreak)return"\n";if(n.nestedCues.length)return n.nestedCues.map(function(i){return Xk(i,n)}).join("");var r=[],o=700<=n.fontWeight,s="italic"==n.fontStyle,u=n.textDecoration.includes("underline");return o&&r.push(["b"]),s&&r.push(["i"]),u&&r.push(["u"]),""==(s=n.color)&&i&&(s=i.color),o="",(s=Yk(s))&&(o+="."+s),""==(s=n.backgroundColor)&&i&&(s=i.backgroundColor),(i=Yk(s))&&(o+=".bg_"+i),o&&r.push(["c",o]),r.reduceRight(function(n,i){var r=t(i);return"<"+(i=r.next().value)+(void 0===(r=r.next().value)?"":r)+">"+n+"</"+i+">"},n.payload)}(o,i),r.push(s)}return r}function $k(n,i){this.g=null;for(var r=t(Array.from(n.textTracks)),o=r.next();!o.done;o=r.next())(o=o.value).mode="disabled",o.label==i&&(this.g=o);this.g||(this.g=n.addTextTrack("subtitles",i)),this.g.mode="hidden"}function al(n,i){var r=n.mode;n.mode="showing"==r?"showing":"hidden";for(var o=t(Array.from(n.cues)),s=o.next();!s.done;s=o.next())(s=s.value)&&i(s)&&n.removeCue(s);n.mode=r}function cl(){}function dl(){}function U(n){return document.createElement(n)}function el(){var n=document.createElement("button");return n.setAttribute("type","button"),n}function fl(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function gl(i,r){var o=this;this.m=!1,this.i=[],this.D=i,this.u=r,this.j=null,this.g=U("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.u.appendChild(this.g),this.G=new Dd(function(){hl(o)}).za(.25),this.h=new Map,this.l=new Kf,this.l.o(document,"fullscreenchange",function(){hl(o,!0)}),this.l.o(this.D,"resize",function(){var n=o.D,i=n.videoWidth;n=n.videoHeight,i&&n?o.j=i/n:o.j=null}),this.s=null,"ResizeObserver"in n&&(this.s=new ResizeObserver(function(){hl(o,!0)}),this.s.observe(this.g)),this.C=new Map}function hl(n,i){if(n.g){var r=n.D.currentTime;if(!n.m||(void 0===i?0:i)){i=t(n.C.values());for(var o=i.next();!o.done;o=i.next())fl(o.value);fl(n.g),n.h.clear(),n.C.clear()}if(n.m){i=new Map,o=t(n.h.keys());for(var s=o.next();!s.done;s=o.next())s=s.value,i.set(s,n.h.get(s));!function jl(n,i,r,o,s){var u=!1,p=[],y=[];i=t(i);for(var A=i.next();!A.done;A=i.next()){A=A.value,s.push(A);var T=n.h.get(A),x=A.startTime<=o&&A.endTime>o,C=T?T.Ch:null;T&&(p.push(T.nf),T.Id&&p.push(T.Id),x||(u=!0,n.h.delete(A),T=null)),x&&(y.push(A),T?function(n,i){for(;null!=i;){if(i==n.g)return!0;i=i.parentElement}return!1}(n,C)||(u=!0):(function(n,i,r){var o=1<r.length,s=o?"span":"div";i.lineBreak&&(s="br"),i.rubyTag&&(s=i.rubyTag),o=!o&&0<i.nestedCues.length;var u=U(s);if("br"!=s&&function(n,i,r,o,s){var u,p,y,A=i.style,T=0==r.nestedCues.length,x=1<o.length;A.whiteSpace="pre-wrap";var C=r.payload.replace(/\s+$/g,function(n){return"\xa0".repeat(n.length)});if(A.webkitTextStrokeColor=r.textStrokeColor,A.webkitTextStrokeWidth=r.textStrokeWidth,A.color=r.color,A.direction=r.direction,A.opacity=r.opacity,A.paddingLeft=nl(r.linePadding,r,n.u),A.paddingRight=nl(r.linePadding,r,n.u),A.textCombineUpright=r.textCombineUpright,A.textShadow=r.textShadow,r.backgroundImage)A.backgroundImage="url('"+r.backgroundImage+"')",A.backgroundRepeat="no-repeat",A.backgroundSize="contain",A.backgroundPosition="center",A.width="100%",A.height="100%";else{if(r.nestedCues.length)var I=i;else I=U("span"),i.appendChild(I);r.border&&(I.style.border=r.border),!s&&((i=ol(o,function(n){return n.backgroundColor}))?I.style.backgroundColor=i:C&&(I.style.backgroundColor="rgba(0, 0, 0, 0.8)"),i=ol(o,function(n){return n.fontFamily}))&&(I.style.fontFamily=i),C&&(I.textContent=C)}x&&!o[o.length-1].isContainer?A.display="inline":(A.display="flex",A.flexDirection="column",A.alignItems="center",A.justifyContent="before"==r.displayAlign?"flex-start":"center"==r.displayAlign?"center":"flex-end"),T||(A.margin="0"),A.fontFamily=r.fontFamily,A.fontWeight=r.fontWeight.toString(),A.fontStyle=r.fontStyle,A.letterSpacing=r.letterSpacing,A.fontSize=nl(r.fontSize,r,n.u),null!=(o=r.line)&&((T=r.lineInterpretation)==eN&&(T=1,x=16,n.j&&1>n.j&&(x=32),o=0>o?100+o/x*100:o/x*100),1==T&&(A.position="absolute",r.writingMode==eR?(A.width="100%",r.lineAlign==eU?A.top=o+"%":"end"==r.lineAlign&&(A.bottom=100-o+"%")):"vertical-lr"==r.writingMode?(A.height="100%",r.lineAlign==eU?A.left=o+"%":"end"==r.lineAlign&&(A.right=100-o+"%")):(A.height="100%",r.lineAlign==eU?A.right=o+"%":"end"==r.lineAlign&&(A.left=100-o+"%")))),A.lineHeight=r.lineHeight,null!=r.position&&(r.writingMode==eR?A.paddingLeft=r.position:A.paddingTop=r.position),p=(u=r).direction,y=u.positionAlign,u=u.textAlign,"line-left"==(n=y!==eS?y:"left"===u||"start"===u&&p===eP||"end"===u&&"rtl"===p?"line-left":"right"===u||"start"===u&&"rtl"===p||"end"===u&&p===eP?"line-right":"center")?A.cssFloat="left":"line-right"==n&&(A.cssFloat="right"),A.textAlign=r.textAlign,A.textDecoration=r.textDecoration.join(" "),A.writingMode=r.writingMode,"writingMode"in document.documentElement.style&&A.writingMode==r.writingMode||(A.webkitWritingMode=r.writingMode),r.size&&(r.writingMode==eR?A.width=r.size+"%":A.height=r.size+"%")}(n,u,i,r,o),r=null,i.region&&i.region.id){r=i.region,s=n.j===4/3?2.5:1.9;var p=r.id+"_"+r.width+"x"+r.height+(r.heightUnits==eG?"%":"px")+"-"+r.viewportAnchorX+"x"+r.viewportAnchorY+(r.viewportAnchorUnits==eG?"%":"px");if(n.C.has(p))r=n.C.get(p);else{var y=U("span"),A=r.heightUnits==eG?"%":"px",T=r.widthUnits==eG?"%":"px",x=r.viewportAnchorUnits==eG?"%":"px";y.id="shaka-text-region---"+p,y.classList.add("shaka-text-region"),y.style.position="absolute",2===r.heightUnits&&2===r.widthUnits?(y.style.height=5.33*r.height+"%",y.style.width=r.width*s+"%"):(y.style.height=r.height+A,y.style.width=r.width+T),2===r.viewportAnchorUnits?(A=r.viewportAnchorY/75*100,T=r.viewportAnchorX/(n.j===4/3?160:210)*100,A-=r.regionAnchorY*r.height*5.33/100,T-=r.regionAnchorX*r.width*s/100,y.style.top=A+"%",y.style.left=T+"%"):(y.style.top=r.viewportAnchorY-r.regionAnchorY*r.height/100+x,y.style.left=r.viewportAnchorX-r.regionAnchorX*r.width/100+x),y.style.display="flex",y.style.flexDirection="column",y.style.alignItems="center",y.style.justifyContent="before"==i.displayAlign?"flex-start":"center"==i.displayAlign?"center":"flex-end",n.C.set(p,y),r=y}}s=u,o&&((s=U("span")).classList.add("shaka-text-wrapper"),s.style.backgroundColor=i.backgroundColor,s.style.lineHeight="normal",u.appendChild(s)),n.h.set(i,{nf:u,Ch:s,Id:r})}(n,A,s),C=(T=n.h.get(A)).Ch,u=!0)),0<A.nestedCues.length&&C&&jl(n,A.nestedCues,C,o,s),s.pop()}if(u){for(s=(o=t(p)).next();!s.done;s=o.next())(s=s.value).parentElement&&s.parentElement.removeChild(s);for(y.sort(function(n,i){return n.startTime!=i.startTime?n.startTime-i.startTime:n.endTime-i.endTime}),A=(y=t(y)).next();!A.done;A=y.next())(o=n.h.get(A.value)).Id?(r.appendChild(o.Id),o.Id.appendChild(o.nf)):r.appendChild(o.nf)}}(n,n.i,n.g,r,[])}}}function nl(n,i,r){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(n))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return n;var s=o.value;switch(o.unit){case"%":return s/100*r.clientHeight/i.cellResolution.rows+"px";case"c":return r.clientHeight*s/i.cellResolution.rows+"px";default:return n}}function ol(n,i){for(var r=n.length-1;0<=r;r--){var o=i(n[r]);if(o||0===o)return o}return null}function ql(n,i){this.h=n,this.g=i,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}function sl(i){return i.g.sessionId||(i.g.sessionId=n.crypto.randomUUID()),{v:1,sf:i.m,sid:i.g.sessionId,cid:i.g.contentId,mtp:i.h.getBandwidthEstimate()/1e3}}function zl(n,i,r){r=void 0===r?{}:r;var o=void 0===o?n.g.useHeaders:o;if(n.g.enabled){Object.assign(r,sl(n)),r.pr=n.h.Nb();var s=r.ot===tQ||r.ot===tJ;if(n.j&&s&&(r.bs=!0,r.su=!0,n.j=!1),null==r.su&&(r.su=n.l),o)Object.keys(n=function(n){var i=Object.keys(n),r={},o=["Object","Request","Session","Status"],s=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};i=t(i);for(var p=i.next();!p.done;p=i.next())s[null!=u[p=p.value]?u[p]:1][p]=n[p];for(n=0;n<s.length;n++)(u=wl(s[n]))&&(r["CMCD-"+o[n]]=u);return r}(r)).length&&Object.assign(i.headers,n);else{var u=wl(r);u&&(i.uris=i.uris.map(function(n){return xl(n,u)}))}}}function wl(n){function b(n){return 100*c(n/100)}function c(n){return Math.round(n)}var i=[],r={br:c,d:c,bl:b,dl:b,mtp:b,nor:function(n){return encodeURIComponent(n)},rtp:b,tb:c},o=Object.keys(n||{}).sort();o=t(o);for(var s=o.next();!s.done;s=o.next()){var u,p=n[s=s.value];if(!Number.isNaN(u=p)&&null!=u&&""!==u&&!1!==u&&("v"!==s||1!==p)&&("pr"!=s||1!==p)){var y=r[s];y&&(p=y(p));var A=void 0;A="string"==(y=typeof p)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(p):"boolean"===y?s:"symbol"===y?s+"="+p.description:s+"="+p,i.push(A)}}return i.join(",")}function xl(n,i){return!i||n.includes("offline:")?n:((n=new fb(n)).g.set("CMCD",i),n.toString())}(N=$k.prototype).remove=function(n,i){return!!this.g&&(al(this.g,function(r){return r.startTime<i&&r.endTime>n}),!0)},N.append=function(n){var i=Zk(n),r=[];n=this.g.cues?Array.from(this.g.cues):[];var o={};i=t(i);for(var s=i.next();!s.done;o={Ec:o.Ec},s=i.next())o.Ec=s.value,n.some(function(n){return function(i){return i.startTime==n.Ec.startTime&&i.endTime==n.Ec.endTime&&i.text==n.Ec.payload}}(o))||(s=function(n){if(n.startTime>=n.endTime)return null;var i=new VTTCue(n.startTime,n.endTime,n.payload);i.lineAlign=n.lineAlign,i.positionAlign=n.positionAlign,n.size&&(i.size=n.size);try{i.align=n.textAlign}catch(n){}return"center"==n.textAlign&&"center"!=i.align&&(i.align="middle"),"vertical-lr"==n.writingMode?i.vertical="lr":"vertical-rl"==n.writingMode&&(i.vertical="rl"),1==n.lineInterpretation&&(i.snapToLines=!1),null!=n.line&&(i.line=n.line),null!=n.position&&(i.position=n.position),i}(o.Ec))&&r.push(s);for(o=(n=t(n=r.slice().sort(function(n,i){return n.startTime!=i.startTime?n.startTime-i.startTime:n.endTime!=i.endTime?n.endTime-i.startTime:("line"in VTTCue.prototype)?r.indexOf(i)-r.indexOf(n):r.indexOf(n)-r.indexOf(i)}))).next();!o.done;o=n.next())this.g.addCue(o.value)},N.destroy=function(){return this.g&&(al(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},N.isTextVisible=function(){return"showing"==this.g.mode},N.setTextVisibility=function(n){this.g.mode=n?"showing":"hidden"},L("shaka.text.SimpleTextDisplayer",$k),$k.prototype.setTextVisibility=$k.prototype.setTextVisibility,$k.prototype.isTextVisible=$k.prototype.isTextVisible,$k.prototype.destroy=$k.prototype.destroy,$k.prototype.append=$k.prototype.append,$k.prototype.remove=$k.prototype.remove,(N=cl.prototype).remove=function(){},N.append=function(){},N.destroy=function(){},N.isTextVisible=function(){return!1},N.setTextVisibility=function(){},L("shaka.text.StubTextDisplayer",cl),cl.prototype.setTextVisibility=cl.prototype.setTextVisibility,cl.prototype.isTextVisible=cl.prototype.isTextVisible,cl.prototype.destroy=cl.prototype.destroy,cl.prototype.append=cl.prototype.append,cl.prototype.remove=cl.prototype.remove,L("shaka.util.Dom",dl),dl.removeAllChildren=fl,(N=gl.prototype).append=function(n){var i=[].concat(w(this.i)),r={};n=t(n);for(var o=n.next();!o.done;r={Rd:r.Rd},o=n.next())r.Rd=o.value,i.some(function(n){return function(i){return Mc(i,n.Rd)}}(r))||this.i.push(r.Rd);hl(this)},N.destroy=function(){return this.g&&(this.u.removeChild(this.g),this.g=null,this.m=!1,this.i=[],this.G&&this.G.stop(),this.h.clear(),this.l&&(this.l.release(),this.l=null),this.s&&(this.s.disconnect(),this.s=null)),Promise.resolve()},N.remove=function(n,i){if(!this.g)return!1;var r=this.i.length;return this.i=this.i.filter(function(r){return r.startTime<n||r.endTime>=i}),hl(this,r>this.i.length),!0},N.isTextVisible=function(){return this.m},N.setTextVisibility=function(n){this.m=n},L("shaka.text.UITextDisplayer",gl),gl.prototype.setTextVisibility=gl.prototype.setTextVisibility,gl.prototype.isTextVisible=gl.prototype.isTextVisible,gl.prototype.remove=gl.prototype.remove,gl.prototype.destroy=gl.prototype.destroy,gl.prototype.append=gl.prototype.append,L("shaka.text.WebVttGenerator",function(){}),ql.prototype.configure=function(n){this.g=n};var tQ="v",tJ="av";function Il(n){this.h=n,this.g=null}function Nl(n){return!n||"false"!==n.toLowerCase()&&(/^[-0-9]/.test(n)?parseInt(n,10):n.replace(/["]+/g,""))}L("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Eh:"s",OTHER:"o"}),(N=Il.prototype).configure=function(n){this.h=n},N.Ug=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(t0)?1e3*this.g.get(t0):null},N.Tg=function(){return this.h.enabled&&this.g&&this.g.has(t$)?1e3*this.g.get(t$):null},N.ri=function(){return this.h.enabled&&this.g&&this.g.has(t1)?this.g.get(t1):null},N.si=function(){return this.h.enabled&&this.g&&this.g.has(t2)?this.g.get(t2):null},N.getBandwidthEstimate=function(n){var i=this.Tg();if(!i)return n;var r=this.h.estimatedThroughputWeightRatio;return 0<r&&1>=r?n*(1-r)+i*r:n},L("shaka.util.CmsdManager",Il),Il.prototype.getBandwidthEstimate=Il.prototype.getBandwidthEstimate,Il.prototype.getRoundTripTime=Il.prototype.si,Il.prototype.getResponseDelay=Il.prototype.ri,Il.prototype.getEstimatedThroughput=Il.prototype.Tg,Il.prototype.getMaxBitrate=Il.prototype.Ug;var t$="etp",t0="mb",t1="rd",t2="rtt";function Ol(){}function Pl(n,i,r,o,s){var u,p=s in o,y=!0;for(u in i){var A=s+"."+u,T=p?o[s]:r[u];p||u in r?void 0===i[u]?void 0===T||p?delete n[u]:n[u]=Ad(T):T.constructor==Object&&i[u]&&i[u].constructor==Object?(n[u]||(n[u]=Ad(T)),A=Pl(n[u],i[u],T,o,A),y=y&&A):typeof i[u]!=typeof T||null==i[u]||"function"!=typeof i[u]&&i[u].constructor!=T.constructor?(Qa("Invalid config, wrong type for "+A),y=!1):("function"==typeof r[u]&&r[u].length!=i[u].length&&Ra("Unexpected number of arguments for "+A),n[u]=i[u]):(Qa("Invalid config, unrecognized key "+A),y=!1)}return y}function Ql(n,i){for(var r={},o=r,s=0,u=0;!(0>(s=n.indexOf(".",s)));)(0==s||"\\"!=n[s-1])&&(o[u=n.substring(u,s).replace(/\\\./g,".")]={},o=o[u],u=s+1),s+=1;return o[n.substring(u).replace(/\\\./g,".")]=i,r}function Sl(){this.g=null,this.h=[]}function Tl(n,i){return K(function(r){if(1==r.g)return n.g?D(r,new Promise(function(i){return n.h.push(i)}),2):r.F(2);n.g=i,F(r)})}function Ul(){}function Vl(n){return n=Wf(n),new fb(n).Kb}function Wl(n,i,r){function d(n){pc(s).setUint32(u,n.byteLength,!0),u+=4,s.set(lc(n),u),u+=n.byteLength}if(!r||!r.byteLength)throw new P(2,6,6015);o="string"==typeof i?Yf(i,!0):i,n=Yf(n=Wf(n),!0);var o,s=new Uint8Array(12+n.byteLength+o.byteLength+r.byteLength),u=0;return d(n),d(o),d(r),s}function Xl(n,i,r){return"skd"!==i?n:(i=r.serverCertificate,r=Wf(n).split("skd://").pop(),Wl(n,r,i))}function Yl(n,i){2===n&&(i.headers["Content-Type"]="application/octet-stream")}function Zl(){}function $l(){var i=1/0;navigator.connection&&navigator.connection.saveData&&(i=360);var r={retryParameters:kf(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(i,r,o){return n.shakaMediaKeysPolyfill&&"skd"==r&&(r=o.serverCertificate,o=Vl(i),i=Wl(i,o,r)),i},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Id(),minHdcpVersion:"",ignoreDuplicateInitData:!Md()},o="reload",s=!1;Md()||Ld()||Jd("Tizen 4")||Nd()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(o="smooth",s=!0),s={retryParameters:kf(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(n){return n},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:s},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ld()||Md()||Nd()||Qd()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(n){return n},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:kf(),failureCallback:function(n){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(Jd("Web0S")||Kd()||Od()||Jd("Hisense")||Jd("VIDAA"))&&(u.stallSkip=0);var p={trackSelectionCallback:function(n){return K(function(i){return i.return(n)})},downloadSizeCallback:function(n){var i;return K(function(r){return 1==r.g?navigator.storage&&navigator.storage.estimate?D(r,navigator.storage.estimate(),3):r.return(!0):(i=r.h,r.return(i.usage+n<.95*i.quota))})},progressCallback:function(n,i){},usePersistentLicense:!0,numberOfParallelDownloads:5},y={drm:r,manifest:s,streaming:u,mediaSource:{codecSwitchingStrategy:o,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:p,abrFactory:function(){return new Ge},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:i,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return p.trackSelectionCallback=function(i){return K(function(r){return r.return(function(i,r,o){var s=o;"AUTO"==s&&(s=n.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=i.filter(function(n){return"variant"==n.type&&(!n.hdr||n.hdr==s)});o=[];var p=Tb(r,u.map(function(n){return n.language}));p&&(o=u.filter(function(n){return Kb(n.language)==p})),0==o.length&&(o=u.filter(function(n){return n.primary})),0==o.length&&(u.map(function(n){return n.language}),o=u);var y=o.filter(function(n){return n.height&&480>=n.height});for(y.length&&(y.sort(function(n,i){return i.height-n.height}),o=y.filter(function(n){return n.height==y[0].height})),r=[],o.length&&(u=Math.floor(o.length/2),o.sort(function(n,i){return n.bandwidth-i.bandwidth}),r.push(o[u])),o=(i=t(i)).next();!o.done;o=i.next())(o=o.value).type!=eh&&"image"!=o.type||r.push(o);return r}(i,y.preferredAudioLanguage,y.preferredVideoHdrLevel))})},y}function bm(n,i,r){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Pl(n,i,r||$l(),o,"")}function cm(){this.g=null,this.h=[]}function dm(n,i){var r=0;n.g&&n.g.state==i&&(r+=n.g.duration),n=t(n.h);for(var o=n.next();!o.done;o=n.next())r+=(o=o.value).state==i?o.duration:0;return r}function fm(){this.i=this.h=null,this.g=[]}function gm(n,i,r){n.i!=i&&(n.i=i,n.g.push({timestamp:Date.now()/1e3,id:i.id,type:"text",fromAdaptation:r,bandwidth:null}))}function hm(){this.C=this.D=this.I=this.G=this.u=this.j=this.H=this.m=this.i=this.M=this.N=this.J=this.K=this.L=this.l=this.s=NaN,this.g=new cm,this.h=new fm}function V(i,r){$a.call(this);var o,s,u=this;this.l=t4,this.oe=this.h=null,this.$=!1,this.Be=new Kf,this.Fb=new Kf,this.s=new Kf,this.va=new Kf,this.G=this.I=this.m=this.J=null,this.He=0,this.W=new Sl,this.ha=this.aa=this.i=this.Ie=this.H=this.j=this.sa=this.L=this.Bh=this.Z=this.V=this.ua=this.M=this.K=this.xb=null,this.Xa=!1,this.fg=this.u=null,this.Ag=1e9,this.tc=[],this.N=NaN,this.g=jm(this),this.Ee={width:1/0,height:1/0},this.C=null,this.Ra=new Ve(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Wa=this.g.preferredTextLanguage,this.nc=this.g.preferredTextRole,this.Xb=this.g.preferForcedSubs,this.Ib=[],r&&r(this),this.V=(o=this,new ql({getBandwidthEstimate:function(){return o.u?o.u.getBandwidthEstimate():NaN},Lb:function(){return o.Lb()},getCurrentTime:function(){return o.h?o.h.currentTime:0},Nb:function(){return o.Nb()},Zb:function(){return o.Zb()},mb:function(){return o.mb()},R:function(){return o.R()}},o.g.cmcd)),this.Z=new Il(this.g.cmsd),this.J=(s=this,new wf(function(n,i,r){s.u&&s.u.segmentDownloaded(n,i,r)},function(n,i,r){if(i=(new Map).set("headers",n).set("request",i).set("requestType",r),s.dispatchEvent(rm("downloadheadersreceived",i)),s.Z&&(i=s.Z).h.enabled){if(r=n["cmsd-static"])try{var o=new Map,u=r.split(",");for(r=0;r<u.length;r++){var p=u[r].split("=");o.set(p[0],Nl(p[1]))}}catch(n){}if(n=n["cmsd-dynamic"]){try{var y=new Map,A=n.split(";");for(n=1;n<A.length;n++){var T=A[n].split("=");y.set(T[0],Nl(T[1]))}var x=y}catch(n){x=null}x&&(i.g=x)}}},function(n,i,r,o){n=(new Map).set("request",n).set("error",i).set("httpResponseCode",r).set("aborted",o),s.dispatchEvent(rm("downloadfailed",n))},function(n,i,r){var o=s.V;if(r=void 0===r?{}:r,o.g.enabled){if("HEAD"===i.method)zl(o,i);else switch(n){case 0:try{if(o.g.enabled){if(r.type){e:{switch(r.type){case 4:var u="d";break e;case 3:case 2:u="h";break e;case 5:u="s";break e}u=void 0}o.m=u}zl(o,i,{ot:"m",su:!o.i})}}catch(n){Sa("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",n)}break;case e7:n=r;try{if(o.g.enabled){var p=n.segment;u=0,p&&(u=p.endTime-p.startTime);var y={d:1e3*u,st:o.h.R()?"l":"v"};y.ot=function(n){if(0===n.type)return"i";if(n=n.stream){var i=n.type;if("video"==i)return n.codecs&&n.codecs.includes(",")?tJ:tQ;if("audio"==i)return"a";if("text"==i)return"application/mp4"===n.mimeType?"tt":"c"}}(n);var A=y.ot===tQ||"a"===y.ot||y.ot===tJ||"tt"===y.ot,T=n.stream;T&&(A&&(y.bl=function(n,i){if(!(i=n.h.Lb()[i]).length)return NaN;var r=n.h.getCurrentTime();return(n=i.find(function(n){return n.start<=r&&n.end>=r}))?1e3*(n.end-r):NaN}(o,T.type)),T.bandwidth&&(y.br=T.bandwidth/1e3)),A&&"tt"!==y.ot&&(y.tb=function(n,i){var r=n.h.mb();if(!r.length)return NaN;n=r[0],r=t(r);for(var o=r.next();!o.done;o=r.next())"variant"===(o=o.value).type&&o.bandwidth>n.bandwidth&&(n=o);switch(i){case tQ:return n.videoBandwidth||NaN;case"a":return n.audioBandwidth||NaN;default:return n.bandwidth}}(o,y.ot)/1e3),zl(o,i,y)}}catch(n){Sa("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",n)}break;case 2:case 5:case 6:zl(o,i,{ot:"k"});break;case 4:zl(o,i,{ot:"o"})}}},function(n,i,r,o){s.H&&s.H.banLocation&&s.H.banLocation(o)})),this.J.mg(this.g.streaming.forceHTTPS),this.D=null,t7&&(this.D=t7(),this.D.configure(this.g.ads)),this.Be.o(n,"online",function(){nm(u),u.eg()}),this.se=new Dd(function(){return function(n){for(var i=Date.now()/1e3,r=!1,o=t(n.i.variants),s=o.next();!s.done;s=o.next())0<(s=s.value).disabledUntilTime&&s.disabledUntilTime<=i&&(s.disabledUntilTime=0,r=!0,function(n){var i="";n.video&&(i+="video:"+n.video.id),n.audio&&(i=i+(i?"&":"")+"audio:"+n.audio.id)}(s));n.i.variants.every(function(n){return 0===n.disabledUntilTime})&&n.se.stop(),r&&un(n,!0,void 0,!1,!1)}(u)}),i&&(Me("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Gc(i,!0))}function pm(n){null!=n.L&&(Ei(n.L),n.L.release(),n.L=null)}function rm(n,i){return new O(n,i)}function tm(){if(n.Promise||Ra("A Promise implementation or polyfill is required"),!(n.Promise&&n.Uint8Array&&Array.prototype.forEach)||Jd("Trident/"))return!1;var i=Rd();return(!i||!(9>i))&&!!(n.MediaKeys&&n.navigator&&n.navigator.requestMediaKeySystemAccess&&n.MediaKeySystemAccess&&n.MediaKeySystemAccess.prototype.getConfiguration)&&(!!Ed()||Fd("application/x-mpegurl"))}function um(n,i){n.dispatchEvent(rm("onstatechange",(new Map).set("state",i)))}function vm(n,i){var r;return K(function(o){return 1==o.g?(r=++n.He,D(o,Tl(n.W,i),2)):r!=n.He?(n.W.release(),o.return(!0)):o.return(!1)})}function ym(n){var i,r,o,s;return K(function(u){if(1==u.g){var p,y,A,T;return um(n,"media-source"),r=(i=n.g.textDisplayFactory)(),n.xg=i,(p=n.h,y=r,A=function(i,r,o){Im(n,i,r,o)},T=n.L,o=new Mi(p,y,A,T)).configure(n.g.mediaSource),s=n.g.manifest.segmentRelativeVttTiming,o.Z=s,D(u,o.L,2)}n.I=o,F(u)})}function Im(n,i,r,o){i=t(i);for(var s=i.next();!s.done;s=i.next())if((s=s.value).data&&s.cueTime&&s.frames){var u=s.cueTime+r,p=o;p&&u>p&&(p=u);for(var y=t(s.frames),A=y.next();!A.done;A=y.next())pn(n,u,p,"org.id3",A.value);n.D&&n.D.onHlsTimedMetadata(s,u)}}function pn(n,i,r,o,s){i=(new Map).set("startTime",i).set("endTime",r).set("metadataType",o).set("payload",s),n.dispatchEvent(rm("metadata",i))}function Ym(n,i){if(i&&"chapters"==i.kind){i.mode="hidden";var r=new Dd(function(){i.mode="hidden"}).Qa().S(.5);n.Ib.push(function(){r.stop()})}}function Om(n,i){return new Sg(i,n.g.drm.updateExpirationTime)}function bn(n,i,r){n.M=new ef,n.M.g=e6,hf(n.M,r,Math.min(.5,r/2)),zm(n),n.s.o(i,"waiting",function(){return rn(n)}),n.s.o(i,"stalled",function(){return rn(n)}),n.s.o(i,"canplaythrough",function(){return rn(n)}),n.s.o(i,"progress",function(){return rn(n)})}function rn(n){switch(n.l){case t8:if(n.h.ended)var i=!0;else{var r=Sh(n.h.buffered);i=null!=r&&r>=n.h.duration-1}break;case t5:e:if(n.h.ended||Ui(n.I))i=!0;else{if(n.i.presentationTimeline.R()){r=n.i.presentationTimeline.ac();var o=Sh(n.h.buffered);if(null!=o&&o>=r){i=!0;break e}}i=!1}break;default:i=!1}o=Uh(n.h.buffered,n.h.currentTime);var s=i,u=(r=n.M).h.get(r.g);i=r.g,o=s||o>=u?e9:e6,r.g=o,i!=o&&zm(n)}function sn(n){if(n.H){var i=Ad(n.g.manifest);n.h&&"AUDIO"===n.h.nodeName&&(i.disableVideo=!0),n.H.configure(i)}if(n.m&&n.m.configure(n.g.drm),n.j){n.j.configure(n.g.streaming);try{tn(n,n.i)}catch(i){xm(n,i)}n.u&&gn(n),(i=n.j.j)&&(!i.allowedByApplication||!i.allowedByKeySystem)&&un(n)}if(n.J&&n.J.mg(n.g.streaming.forceHTTPS),n.I&&(n.I.configure(n.g.mediaSource),n.I.Z=n.g.manifest.segmentRelativeVttTiming,i=n.g.textDisplayFactory,n.xg!=i)){var r=i(),o=n.I,s=o.H;o.H=r,s&&(r.setTextVisibility(s.isTextVisible()),s.destroy()),o.h&&(o.h.j=r),n.xg=i,n.j&&(r=(i=n.j).i.get(eh))&&Ak(i,r.stream,!0,0,!0)}n.u&&(n.u.configure(n.g.abr),n.g.abr.enabled?n.u.enable():n.u.disable(),fn(n)),n.M&&(i=n.g.streaming.rebufferingGoal,n.i&&(i=Math.max(i,n.i.minBufferTime)),hf(n.M,i,Math.min(.5,i/2))),n.i&&Um(n.i.presentationTimeline,n.g.playRangeStart,n.g.playRangeEnd),n.D&&n.D.configure(n.g.ads),n.V&&n.V.configure(n.g.cmcd),n.Z&&n.Z.configure(n.g.cmsd)}function vn(n){return n&&(n=/(\d+)x(\d+)/.exec(n))?{mc:parseInt(n[1],10),rows:parseInt(n[2],10)}:null}function nn(n){return Array.from(n.h.textTracks).filter(function(n){return"metadata"!=n.kind&&"chapters"!=n.kind&&"Shaka Player TextTrack"!=n.label})}function An(n){return Array.from(n.h.textTracks).filter(function(n){return"chapters"==n.kind})}function Bn(n,i){var r;return K(function(o){switch(o.g){case 1:return ta(o,2),D(o,Vk(i,n.J,n.g.streaming.retryParameters),4);case 4:r=o.h,va(o,3);break;case 2:wa(o);case 3:if(r)return o.return(r);throw new P(1,2,2011,i)}})}function Cn(n,i,r,o,s,u,p){var y,A;return K(function(T){if(1==T.g)return"text/vtt"!=s||p.length?D(T,Dn(n,i,n.J,n.g.streaming.retryParameters),3):T.F(2);2!=T.g&&(y=En(n,T.h,s,p),i=tK(new Blob([y],{type:"text/vtt"})),s="text/vtt"),A=document.createElement("track");var x=n.V,C=i;try{if(x.g.enabled){var I=sl(x);I.ot="c",I.su=!0;var M=wl(I),N=xl(C,M)}else N=C}catch(n){Sa("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",n),N=C}return A.src=N,A.label=u,A.kind=o,A.srclang=r,n.h.getAttribute("crossorigin")||n.h.setAttribute("crossorigin","anonymous"),n.h.appendChild(A),T.return(A)})}function Dn(n,i,r,o){var s,u,p;return K(function(y){if(1==y.g){s=e7,(u=Af([i],o)).method="GET";var A=n.V;try{A.g.enabled&&zl(A,u,{ot:"c",su:!0})}catch(n){Sa("CMCD_TEXT_ERROR","Could not generate text CMCD data.",n)}return D(y,r.request(s,u).promise,2)}return p=y.h,y.return(p.data)})}function En(n,i,r,o){var s=eJ[r];if(s)return r=s(),n={periodStart:0,segmentStart:0,segmentEnd:n.h.duration,vttOffset:0},i=lc(i),function(n,i){function c(n){for(var r=n,o=t(i),s=o.next();!s.done;s=o.next())(s=s.value).end&&s.start<n&&(r+=s.end-s.start);return(10>(n=Math.floor(r/3600))?"0":"")+n+":"+(10>(o=Math.floor(r/60%60))?"0":"")+o+":"+(10>(s=Math.floor(r%60))?"0":"")+s+"."+(100>(r=Math.floor(1e3*r%1e3))?10>r?"00":"0":"")+r}var r=Zk(n);n="WEBVTT\n\n",r=t(r);for(var o=r.next();!o.done;o=r.next())n+=c((o=o.value).startTime)+" --> "+c(o.endTime)+function(n){var i=[];switch(n.textAlign){case"left":i.push("align:left");break;case"right":i.push("align:right");break;case ek:i.push("align:middle");break;case"start":i.push("align:start");break;case"end":i.push("align:end")}switch(n.writingMode){case"vertical-lr":i.push("vertical:lr");break;case"vertical-rl":i.push("vertical:rl")}return i.length?" "+i.join(" "):""}(o)+"\n"+o.payload+"\n\n";return n}(i=r.parseMedia(i,n,null),o);throw new P(2,2,2014,r)}function jm(n){var i=$l();return i.streaming.failureCallback=function(i){if(n.R()){var r=null;1001==i.code||1002==i.code?r=1:1003==i.code&&(r=.1),null!=r&&(i.severity=1,n.eg(r))}},i.textDisplayFactory=function(){return n.oe?new gl(n.h,n.oe):HTMLMediaElement.prototype.addTextTrack?new $k(n.h,"Shaka Player TextTrack"):new cl},i}function Km(n,i){return K(function(r){if(1==r.g){var o,s;return D(r,(o=n,s=i,K(function(n){if(1==n.g){var i;return D(n,(i=o.m,K(function(n){var r,o,u,p,y,A,T,x,C;return 1==n.g?D(n,ee(i,s,0<s.offlineSessionIds.length),2):((r=s).textStreams=r.textStreams.filter(function(n){return pd(n=dd(n.mimeType,n.codecs))}),D(n,(o=s,K(function(n){switch(n.g){case 1:u=[],y=(p=t(o.imageStreams)).next();case 2:var i;if(y.done){n.F(4);break}if("application/mp4"==(T=(A=y.value).mimeType)&&"mjpg"==A.codecs&&(T="image/jpg"),e3.has(T)){n.F(5);break}if(!(x=e4.get(T))){e3.set(T,!1),n.F(5);break}return D(n,(i=x,new Promise(function(n){var r=new Image;r.src=i,"decode"in r?r.decode().then(function(){n(!0)}).catch(function(){n(!1)}):r.onload=r.onerror=function(){n(2===r.height)}})),7);case 7:C=n.h,e3.set(T,C);case 5:e3.get(T)&&u.push(A),y=p.next(),n.F(2);break;case 4:o.imageStreams=u,F(n)}})),0))})),2)}if(!s.variants.some(Be))throw new P(2,4,4032);F(n)})),2)}tn(n,i),F(r)})}function tn(n,i){if(n.l!=t3){ce(i.variants,n.g.restrictions,n.Ee)&&n.j&&Rm(n);var r=n.m?n.m.g:null;if(r&&n.m.u)for(var o=t(i.variants),s=o.next();!s.done;s=o.next())s=s.value,Mm(n,r.keySystem,s.video),Mm(n,r.keySystem,s.audio);Gn(n,i)}}function Mm(n,i,r){if(r){r=t(r.drmInfos);for(var o=r.next();!o.done;o=r.next())if((o=o.value).keySystem==i){o=t(o.initData||[]);for(var s=o.next();!s.done;s=o.next())s=s.value,hh(n.m,s.initDataType,s.initData)}}}function zm(n){var i=n.yd();if(n.C&&n.M&&n.G){if(n.V){var r=n.V;i||r.i||(r.i=!0),r.i&&i&&(r.j=!0),r.l=i}Sm(n)}i=(new Map).set("buffering",i),n.dispatchEvent(rm("buffering",i))}function Tm(n){var i=n.h.playbackRate;0!=i&&(n.K&&n.K.set(i),i=rm("ratechange"),n.dispatchEvent(i))}function Sm(n){if(n.C&&n.M){var i=n.C.g,r="playing";n.M.g==e6?r="buffering":n.h.paused?r="paused":n.h.ended&&(r="ended");var o=r;if(null==i.g)i.g={timestamp:Date.now()/1e3,state:o,duration:0},i=!0;else{var s=Date.now()/1e3;i.g.duration=s-i.g.timestamp,i.g.state==o?i=!1:(i.h.push(i.g),i.g={timestamp:s,state:o,duration:0},i=!0)}i&&(r=(new Map).set("newstate",r),n.dispatchEvent(rm("statechanged",r)))}}function hn(n){if(n.R()){var i=n.Ha();if(Number.isFinite(i.end)&&!(n.h.currentTime<i.start)){if(n.g.streaming.liveSync)var r=n.g.streaming.liveSyncMaxLatency,o=n.g.streaming.liveSyncPlaybackRate;else n.i&&n.i.serviceDescription&&(r=n.i.serviceDescription.maxLatency||n.g.streaming.liveSyncMaxLatency,o=n.i.serviceDescription.maxPlaybackRate||n.g.streaming.liveSyncPlaybackRate);if(n.g.streaming.liveSync)var s=n.g.streaming.liveSyncMinLatency,u=n.g.streaming.liveSyncMinPlaybackRate;else n.i&&n.i.serviceDescription&&(s=n.i.serviceDescription.minLatency||n.g.streaming.liveSyncMinLatency,u=n.i.serviceDescription.minPlaybackRate||n.g.streaming.liveSyncMinPlaybackRate);var p=n.h.playbackRate,y=i.end-n.h.currentTime,A=0;if(n.l==t8){var T=n.h.buffered;0<T.length&&(A=Math.max(o,(A=T.end(T.length-1))-i.end))}r&&o&&y-A>r?p!=o&&n.Pd(o):s&&u&&y-A<s?p!=u&&n.Pd(u):p!==n.K.Lc()&&n.od()}}}function jn(n){if(n.h){var i,r=!1,o=n.h.currentTime/n.h.duration;isNaN(o)||(o=Math.round(100*o),isNaN(n.N)?(n.N=o,r=!0):(o=Math.max(n.N,o),n.N!=o&&(n.N=o,r=!0))),r&&(0==n.N?i=rm("started"):25==n.N?i=rm("firstquartile"):50==n.N?i=rm("midpoint"):75==n.N?i=rm("thirdquartile"):100==n.N&&(i=rm("complete")),i&&n.dispatchEvent(i))}}function gn(n){try{Gn(n,n.i)}catch(i){return xm(n,i),!1}var i=Ce(n.i.variants);return i=n.Ra.create(i),n.u.setVariants(Array.from(i.values())),!0}function Zm(n,i){return i=void 0!==i&&i,gn(n)?n.u.chooseVariant(i):null}function un(n,i,r,o,s){i=void 0===i||i,r=void 0===r?0:r,o=void 0!==o&&o,s=void 0===s||s;var u=Zm(n);u&&Vm(n,u,s,i,r,o)}function Vm(n,i,r,o,s,u){u=void 0!==u&&u;var p=n.j.j;if(i==p)o&&Bk(n.j,i,o,s,!0);else{var y=n.C.h;y.h!=i&&(y.h=i,y.g.push({timestamp:Date.now()/1e3,id:i.id,type:"variant",fromAdaptation:r,bandwidth:i.bandwidth})),Bk(n.j,i,o,s,u,r),o=null,p&&(o=te(p)),i=te(i),r?(r=(new Map).set("oldTrack",o).set("newTrack",i),n.L&&Fi(n.L,i,n.If()),Hn(n,r=rm("adaptation",r))):In(n,o,i)}}function xn(n,i){var r=Array.from(n.h.audioTracks).find(function(n){return n.enabled});i.enabled=!0,i.id!==r.id&&(r.enabled=!1),In(n,r=Ae(r),i=Ae(i))}function Rm(n){Hn(n,rm("trackschanged"))}function In(n,i,r){i=(new Map).set("oldTrack",i).set("newTrack",r),n.L&&Fi(n.L,r,n.If()),Hn(n,r=rm("variantchanged",i))}function wn(n){Hn(n,rm("textchanged"))}function en(n){Hn(n,rm("texttrackvisibility"))}function fn(n){n.g.abr.enabled||nm(n);var i=(new Map).set("newStatus",n.g.abr.enabled);Hn(n,rm("abrstatuschanged",i))}function nm(n,i){if(i=void 0===i||i,n.l==t5){n.se.stop();for(var r=t(n.i.variants),o=r.next();!o.done;o=r.next())o.value.disabledUntilTime=0;i&&gn(n)}}function xm(n,i){var r,o;return K(function(s){switch(s.g){case 1:var u,p,y,A,T,x,C;if(n.l==t3)return s.return();if(r=!0,!(n.Xa&&n.i&&n.j)||3016!=i.code&&3014!=i.code&&3015!=i.code&&3018!=i.code){s.F(2);break}return ta(s,3),D(s,(u=n.j,K(function(n){return 1==n.g?(p=Date.now()/1e3,y=u.h.minTimeBetweenRecoveries,!u.h.allowMediaSourceRecoveries||p-u.J<y)?n.return(!1):(u.J=p,A=ep,(T=u.i.get(A.U))&&(T.ec=null,Fk(u,T),sk(T).catch(function(){})),(x=u.i.get(A.ia))&&(x.ec=null,Fk(u,x),sk(x).catch(function(){})),C=new Map,u.j.audio&&C.set(A.U,u.j.audio),u.j.video&&C.set(A.ia,u.j.video),D(n,qj(u.g.Y,C),2)):n.return(!0)})),5);case 5:r=!s.h,va(s,2);break;case 3:wa(s),r=!0;case 2:if(!r)return s.return();2===i.severity&&nm(n,!1),o=rm("error",(new Map).set("detail",i)),n.dispatchEvent(o),o.defaultPrevented&&(i.handled=!0),F(s)}})}function Jm(n,i,r){r=(new Map).set("detail",{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement}),n.dispatchEvent(rm(i,r))}function wm(n){if(!n.h.error)return null;var i=n.h.error.code;if(1==i)return null;var r=n.h.error.msExtendedCode;return r&&(0>r&&(r+=4294967296),r=r.toString(16)),new P(2,3,3016,i,r,n.h.error.message)}function Pm(n,i){if(n.j){var r=rm("keystatuschanged");n.dispatchEvent(r);var o=Object.keys(i);r=1==o.length&&"00"==o[0];var s=!1;if(o.length){o=t(n.i.variants);for(var u=o.next();!u.done;u=o.next()){u=u.value;var p=[];u.audio&&p.push(u.audio),u.video&&p.push(u.video),p=t(p);for(var y=p.next();!y.done;y=p.next()){var A=y.value;if(y=u.allowedByKeySystem,A.keyIds.size){u.allowedByKeySystem=!0,A=t(A.keyIds);for(var T=A.next();!T.done;T=A.next())T=T.value,((T=i[r?"00":T])||n.m.H)&&(u.allowedByKeySystem=u.allowedByKeySystem&&!!T&&!t6.includes(T))}y!=u.allowedByKeySystem&&(s=!0)}}}(!s||(Rm(n),gn(n)))&&(i=n.j.j)&&!i.allowedByKeySystem&&un(n)}}function Qm(n,i,r){n.H&&n.H.onExpirationUpdated&&n.H.onExpirationUpdated(i,r),i=rm("expirationupdated"),n.dispatchEvent(i)}function Um(n,i,r){0<i&&(n.R()||n.sh(i)),r<(i=n.getDuration())&&(n.R()||n.gb(r))}function Gn(n,i){var r=Object.keys(n=n.m?n.m.ge():{});r=r.length&&"00"==r[0];var o=!1,s=!1,u=new Set,p=new Set;i=t(i.variants);for(var y=i.next();!y.done;y=i.next()){y=y.value;var A=[];y.audio&&A.push(y.audio),y.video&&A.push(y.video),A=t(A);for(var T=A.next();!T.done;T=A.next())if((T=T.value).keyIds.size){T=t(T.keyIds);for(var x=T.next();!x.done;x=T.next()){x=x.value;var C=n[r?"00":x];C?t6.includes(C)&&p.add(C):u.add(x)}}y.allowedByApplication?y.allowedByKeySystem&&(o=!0):s=!0}if(!o)throw n={hasAppRestrictions:s,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(p)},new P(2,4,4012,n)}function Hn(n,i){K(function(r){if(1==r.g)return D(r,Promise.resolve(),2);n.l!=t3&&n.dispatchEvent(i),F(r)})}function zn(n){var i=new Set;n=t(n);for(var r=n.next();!r.done;r=n.next())(r=r.value).language?i.add(Kb(r.language)):i.add("und");return i}function yn(n){var i=new Map,r=new Map;n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s="und",u=[];o.language&&(s=Kb(o.language)),(u="variant"==o.type?o.audioRoles:o.roles)&&u.length||(u=[""]),i.has(s)||i.set(s,new Set),u=t(u);for(var p=u.next();!p.done;p=u.next())p=p.value,i.get(s).add(p),o.label&&(r.has(s)||r.set(s,new Map),r.get(s).set(p,o.label))}var y=[];return i.forEach(function(n,i){n=t(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var s=null;r.has(i)&&r.get(i).has(o)&&(s=r.get(i).get(o)),y.push({language:i,role:o,label:s})}}),y}L("shaka.util.ConfigUtils",Ol),Ol.convertToConfigObject=Ql,Ol.mergeConfigObjects=Pl,Sl.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},L("shaka.util.FairPlayUtils",Ul),Ul.commonFairPlayResponse=function(n,i){if(2===n){try{var r=Tf(i.data)}catch(n){return}n=!1,"<ckc>"===(r=r.trim()).substr(0,5)&&"</ckc>"===r.substr(-6)&&(r=r.slice(5,-6),n=!0);try{var o=JSON.parse(r);o.ckc&&(r=o.ckc,n=!0),o.CkcMessage&&(r=o.CkcMessage,n=!0),o.License&&(r=o.License,n=!0)}catch(n){}n&&(i.data=mc(qg(r)))}},Ul.expressplayFairPlayRequest=function(n,i){Yl(n,i)},Ul.conaxFairPlayRequest=function(n,i){Yl(n,i)},Ul.ezdrmFairPlayRequest=function(n,i){Yl(n,i)},Ul.verimatrixFairPlayRequest=function(n,i){2===n&&(n=pg(n=lc(i.body)),i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=Xf("spc="+n))},Ul.expressplayInitDataTransform=function(n,i,r){return Xl(n,i,r)},Ul.conaxInitDataTransform=function(i,r,o){if("skd"!==r)return i;r=o.serverCertificate,o=Wf(i).split("skd://").pop().split("?").shift(),o=n.atob(o);var s=new ArrayBuffer(2*o.length);s=oc(s);for(var u=0,p=o.length;u<p;u++)s[u]=o.charCodeAt(u);return Wl(i,s,r)},Ul.ezdrmInitDataTransform=function(n,i,r){return"skd"!==i?n:(i=r.serverCertificate,r=Wf(n).split(";").pop(),Wl(n,r,i))},Ul.verimatrixInitDataTransform=function(n,i,r){return Xl(n,i,r)},Ul.initDataTransform=Wl,Ul.defaultGetContentId=Vl,Ul.isFairPlaySupported=function(){var n;return K(function(i){return 1==i.g?(n={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ta(i,2),D(i,navigator.requestMediaKeySystemAccess("com.apple.fps",[n]),4)):2!=i.g?i.return(!0):(wa(i),i.return(!1))})},L("shaka.util.PlayerConfiguration",Zl),Zl.mergeConfigObjects=bm,Zl.createDefault=$l,pa(V,$a),(N=V.prototype).destroy=function(){var n,i=this;return K(function(r){switch(r.g){case 1:if(i.l==t3)return r.return();return pm(i),n=i.detach(),i.l=t3,D(r,n,2);case 2:if(i.Be&&(i.Be.release(),i.Be=null),i.Fb&&(i.Fb.release(),i.Fb=null),i.s&&(i.s.release(),i.s=null),i.va&&(i.va.release(),i.va=null),i.fg=null,i.g=null,i.C=null,i.oe=null,i.V=null,i.Z=null,!i.J){r.F(3);break}return D(r,i.J.destroy(),4);case 4:i.J=null;case 3:i.u&&(i.u.release(),i.u=null),$a.prototype.release.call(i),F(r)}})},N.Gc=function(n,i){i=void 0===i||i;var r,o,s=this;return K(function(u){switch(u.g){case 1:if(s.l==t3)throw new P(2,7,7e3);if(!s.h||s.h==n){u.F(2);break}return D(u,s.detach(),2);case 2:return D(u,vm(s,"attach"),4);case 4:if(u.h)return u.return();if(ta(u,5,6),um(s,"attach"),r=function(){var n=wm(s);n&&xm(s,n)},s.Fb.o(n,"error",r),s.h=n,!i||!Ed()||s.I){u.F(6);break}return D(u,ym(s),6);case 6:xa(u),s.W.release(),ya(u,0);break;case 5:return o=wa(u),D(u,s.detach(),10);case 10:throw o}})},N.Eg=function(n){this.Bh=n},N.detach=function(n){n=void 0!==n&&n;var i=this;return K(function(r){if(1==r.g){if(i.l==t3)throw new P(2,7,7e3);return D(r,i.Wc(!1,n),2)}if(3!=r.g)return D(r,vm(i,"detach"),3);if(r.h)return r.return();try{i.h&&(i.Fb.ub(),i.h=null),um(i,"detach"),i.D&&!n&&i.D.release()}finally{i.W.release()}F(r)})},N.Wc=function(n,i){n=void 0===n||n,i=void 0!==i&&i;var r,o,s,u,p,y,A,T,x,C=this;return K(function(I){switch(I.g){case 1:return C.l!=t3&&(C.l=t4),D(I,vm(C,"unload"),2);case 2:if(I.h)return I.return();return ua(I,3),C.Xa=!1,um(C,"unload"),n&&!Ed()&&(n=!1),pm(C),r=C.Ib.map(function(n){return n()}),C.Ib=[],D(I,Promise.all(r),5);case 5:if(C.dispatchEvent(rm("unloading")),C.ua&&(C.ua.release(),C.ua=null),C.h&&(C.s.ub(),C.va.ub()),C.se.stop(),C.xb&&(C.xb.release(),C.xb=null),!C.H){I.F(6);break}return D(I,C.H.stop(),7);case 7:C.H=null,C.Ie=null;case 6:if(!C.u){I.F(8);break}return D(I,C.u.stop(),8);case 8:if(!C.j){I.F(10);break}return D(I,C.j.destroy(),11);case 11:C.j=null;case 10:if(C.K&&(C.K.release(),C.K=null),C.G&&(C.G.release(),C.G=null),!C.I){I.F(12);break}return D(I,C.I.destroy(),13);case 13:C.I=null;case 12:if(C.D&&!i&&C.D.onAssetUnload(),C.Z&&(C.Z.g=null),C.h&&fl(C.h),!C.h||!C.h.src){I.F(14);break}return D(I,new Promise(function(n){return new Dd(n).S(.1)}),15);case 15:C.h.removeAttribute("src"),C.h.load();case 14:if(!C.m){I.F(16);break}return D(I,C.m.destroy(),17);case 17:C.m=null;case 16:if(C.aa=null,C.M=null,C.i){for(s=(o=t(C.i.variants)).next();!s.done;s=o.next())for(y=(p=t([(u=s.value).audio,u.video])).next();!y.done;y=p.next())(A=y.value)&&A.segmentIndex&&A.segmentIndex.release();for(y=(T=t(C.i.textStreams)).next();!y.done;y=T.next())(x=y.value).segmentIndex&&x.segmentIndex.release()}C.i=null,C.C=new hm,C.xg=null,C.tc=[],C.N=NaN,zm(C);case 3:xa(I),C.W.release(),ya(I,4);break;case 4:if(n&&Ed()&&!C.I)return D(I,ym(C),0);I.F(0)}})},N.xj=function(n){this.ha=n},N.load=function(n,i,r){i=void 0===i?null:i;var o,s,u,p,y,A=this;return K(function(T){switch(T.g){case 1:if(A.l==t3)throw new P(2,7,7e3);return D(T,Tl(A.W,"load"),2);case 2:if(A.W.release(),!A.h)throw new P(2,7,7002);if(!A.aa){T.F(3);break}return D(T,A.Wc(!1),3);case 3:if(o=++A.He,s=function(){if(A.He!=o)throw new P(2,7,7e3)},u=function(n,i){return K(function(r){switch(r.g){case 1:return ua(r,2),D(r,Tl(A.W,i),4);case 4:return s(),D(r,n(),5);case 5:s();case 2:xa(r),A.W.release(),ya(r,0)}})},ta(T,5),A.ha=i,A.Xa=!1,A.dispatchEvent(rm("loading")),p=Date.now()/1e3,A.C=new hm,A.aa=n,r){T.F(7);break}return D(T,u(function(){return K(function(n){if(1==n.g){var i,o,s;return D(n,(i=A,K(function(n){return 1==n.g?(o=i.g.manifest.retryParameters,D(n,Vk(i.aa,i.J,o),2)):("application/x-mpegurl"==(s=n.h)&&Pd()&&(s="application/vnd.apple.mpegurl"),n.return(s))})),2)}r=n.h,F(n)})},"guessMimeType_"),7);case 7:if(function(n,i){if(!Ed())return!0;if(i){if(""==(n.h||Gd()).canPlayType(i))return!1;if(!(Ed()&&i in tI))return!0;if("application/x-mpegurl"===i||"application/vnd.apple.mpegurl"===i){if(n.g.streaming.preferNativeHls)return!0;if(Pd())return n.g.streaming.useNativeHlsOnSafari}}return!1}(A,r))return D(T,u(function(){return K(function(n){var i,o,s,u,p,y;return D(n,(i=A,o=r,K(function(n){return 1==n.g?(s=ep,u=Date.now()/1e3,p=!0,i.m=Om(i,{zc:i.J,onError:function(n){xm(i,n)},Fe:function(n){Pm(i,n)},onExpirationUpdated:function(n,r){Qm(i,n,r)},onEvent:function(n){i.dispatchEvent(n),"drmsessionupdate"==n.type&&p&&(p=!1,i.C.j=Date.now()/1e3-u)}}),i.m.configure(i.g.drm),y={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:o?md(o):"",codecs:o?nd(o):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:s.ia,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.m.Z=!0,D(n,Zg(i.m,[y],[]),2)):D(n,i.m.Gc(i.h),0)})),0)})},"initializeSrcEqualsDrmInner_"),16);if(A.I){T.F(11);break}return D(T,u(function(){return K(function(n){return D(n,ym(A),0)})},"initializeMediaSourceEngineInner_"),11);case 11:return D(T,u(function(){return K(function(n){var i,o,s,u,p,y,T,x,C;return D(n,(i=A,o=r,K(function(n){if(1==n.g)return s=i.J,um(i,"manifest-parser"),i.Ie=Hh(i.aa,o||null),i.H=i.Ie(),u=Ad(i.g.manifest),i.h&&"AUDIO"===i.h.nodeName&&(u.disableVideo=!0),i.H.configure(u),i.ua=new ak(function(){return i.Ha()}),i.ua.addEventListener("regionadd",function(n){Jm(i,"timelineregionadded",n=n.region),i.D&&i.D.onDashTimedMetadata(n)}),i.sa=null,i.g.streaming.observeQualityChanges&&(i.sa=new Wj(function(){return i.Lb()}),i.sa.addEventListener("qualitychange",function(n){var r=n.quality;n=n.position,r=(new Map).set("mediaQuality",{bandwidth:r.bandwidth,audioSamplingRate:r.audioSamplingRate,codecs:r.codecs,contentType:r.contentType,frameRate:r.frameRate,height:r.height,mimeType:r.mimeType,channelsCount:r.channelsCount,pixelAspectRatio:r.pixelAspectRatio,width:r.width}).set("position",n),i.dispatchEvent(rm("mediaqualitychanged",r))})),p={networkingEngine:s,filter:function(n){return Km(i,n)},makeTextStreamsForClosedCaptions:function(n){return function(n,i){for(var r=new Set,o=t(i.textStreams),s=o.next();!s.done;s=o.next())"application/cea-608"!=(s=s.value).mimeType&&"application/cea-708"!=s.mimeType||r.add(s.originalId);for(s=(o=t(i.variants)).next();!s.done;s=o.next())if((s=s.value.video)&&s.closedCaptions){for(var u=t(s.closedCaptions.keys()),p=u.next();!p.done;p=u.next())if(p=p.value,!r.has(p)){var y=p.startsWith("CC")?"application/cea-608":"application/cea-708",A=new Sj,T=s.closedCaptions.get(p);y={id:n.Ag++,originalId:p,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:A,mimeType:y,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:T,originalLanguage:T,label:null,type:eh,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:s.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},i.textStreams.push(y),r.add(p)}}}(i,n)},onTimelineRegionAdded:function(n){var r=i.ua;e:{for(var o=t(r.g),s=o.next();!s.done;s=o.next())if((s=s.value).schemeIdUri==n.schemeIdUri&&s.id==n.id&&s.startTime==n.startTime&&s.endTime==n.endTime){o=s;break e}o=null}null==o&&(r.g.add(n),n=new O("regionadd",new Map([["region",n]])),r.dispatchEvent(n))},onEvent:function(n){return i.dispatchEvent(n)},onError:function(n){return xm(i,n)},isLowLatencyMode:function(){return i.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return i.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){i.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){i.j&&i.j.updateDuration()},newDrmInfo:function(n){var r=i.m?i.m.g:null;r&&i.m.u&&Mm(i,r.keySystem,n)},onManifestUpdated:function(){var n=(new Map).set("isLive",i.R());i.dispatchEvent(rm("manifestupdated",n)),i.D&&i.D.onManifestUpdated(i.R())},getBandwidthEstimate:function(){return i.u.getBandwidthEstimate()}},y=Date.now()/1e3,um(i,"manifest"),T=i,D(n,i.H.start(i.aa,p),2);if(T.i=n.h,x=rm("manifestparsed"),i.dispatchEvent(x),0==i.i.variants.length)throw new P(2,4,4036);(function(n){function b(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}n.variants.some(b)&&(n.variants=n.variants.filter(b))})(i.i),C=Date.now()/1e3-y,i.C.H=C,F(n)})),0)})},"parseManifestInner_"),13);case 13:return D(T,u(function(){return K(function(n){var i,r,o,s;return D(n,(i=A,K(function(n){return 1==n.g?(um(i,"drm-engine"),r=Date.now()/1e3,o=!0,i.m=Om(i,{zc:i.J,onError:function(n){xm(i,n)},Fe:function(n){Pm(i,n)},onExpirationUpdated:function(n,r){Qm(i,n,r)},onEvent:function(n){i.dispatchEvent(n),"drmsessionupdate"==n.type&&o&&(o=!1,i.C.j=Date.now()/1e3-r,i.L&&Ei(i.L))}}),i.m.configure(i.g.drm),ce(i.i.variants,i.g.restrictions,i.Ee)&&i.j&&Rm(i),s=Ce(i.i.variants),D(n,Zg(i.m,s,i.i.offlineSessionIds),2)):3!=n.g?D(n,i.m.Gc(i.h),3):D(n,Km(i,i.i),0)})),0)})},"initializeDrmInner_"),14);case 14:return D(T,u(function(){return K(function(n){var i,r,o,s,u,y,T,x,C,I,M,N,_,j,B,z,G,H,q,Y;return D(n,(i=A,r=p,K(function(n){var p,A,Q,J,$,ea,es,ec,ed,eh,ep,eg,em;switch(n.g){case 1:for(um(i,"load"),o=i.h,i.K=new Tj({ke:function(){return o.playbackRate},Lc:function(){return o.defaultPlaybackRate},pg:function(n){o.playbackRate=n},fh:function(n){o.currentTime+=n}}),s=function(){return Sm(i)},u=function(){return Tm(i)},i.s.o(o,"playing",s),i.s.o(o,"pause",s),i.s.o(o,"ended",s),i.s.o(o,"ratechange",u),function(n,i){if(i.lcevc.enabled){var r=n.mb();r&&r[0]&&"video/mp2t"==r[0].videoMimeType&&(Hd()||navigator.userAgent.match(/Edge\//))&&(i.mediaSource.forceTransmux||Ra("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),pm(n),null==n.L&&(n.L=new Di(n.h,n.Bh,i.lcevc),n.I&&(n.I.N=n.L))}else pm(n)}(i,i.g),y=i.g.abrFactory,i.u&&i.fg==y||(i.fg=y,i.u=y(),"function"!=typeof i.u.setMediaElement&&(Me("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.u.setMediaElement=function(){}),"function"!=typeof i.u.setCmsdManager&&(Me("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.u.setCmsdManager=function(){}),"function"!=typeof i.u.trySuggestStreams&&(Me("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.u.trySuggestStreams=function(){}),i.u.configure(i.g.abr)),i.Ra=new Ve(i.g.preferredAudioLanguage,i.g.preferredVariantRole,i.g.preferredAudioChannelCount,i.g.preferredVideoHdrLevel,i.g.preferSpatialAudio,i.g.preferredVideoLayout,i.g.preferredAudioLabel,i.g.preferredVideoLabel,i.g.mediaSource.codecSwitchingStrategy,i.g.manifest.dash.enableAudioGroups),i.Wa=i.g.preferredTextLanguage,i.nc=i.g.preferredTextRole,i.Xb=i.g.preferForcedSubs,Um(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd),i.u.init(function(n,r,o){i.j&&n!=i.j.j&&Vm(i,n,!0,void 0!==r&&r,void 0===o?0:o)}),i.u.setMediaElement(o),i.u.setCmsdManager(i.Z),Zd(i.i,i.g.preferredVideoCodecs,i.g.preferredAudioCodecs,i.g.preferredDecodingAttributes),i.j=(p=i,new pk(p.i,{je:function(){return p.G?p.G.Yd():0},getBandwidthEstimate:function(){return p.u.getBandwidthEstimate()},Y:p.I,zc:p.J,onError:function(n){return xm(p,n)},onEvent:function(n){return p.dispatchEvent(n)},Xi:function(){p.H&&p.H.update&&p.H.update()},Zf:function(n,i){var r=n.startTime,o=n.endTime,s=i.type;p.G&&p.G.gh(),rn(p),r=(new Map).set("start",r).set("end",o).set("contentType",s),p.dispatchEvent(rm("segmentappended",r)),p.u&&i.fastSwitching&&n.Fd&&n.ue&&p.u.trySuggestStreams()},Wi:function(n,i){var r,o,s,u,y,A;(i=i.Uf)&&p.sa&&(r=p.sa,o=i,s=r,u=o.contentType,(y=s.g.get(u))||(y={Gd:[],Mg:null,contentType:u},s.g.set(u,y)),function(n,i){if((n=n.h()[i.contentType])&&0<n.length){var r=n[0].start,o=n[n.length-1].end,s=i.Gd;i.Gd=s.filter(function(n,i){return(!(n.position<=r)||!(i+1<s.length)||!(s[i+1].position<=r))&&!(n.position>=o)})}else i.Gd=[]}(r,A=y),r={Uf:o,position:n},0<=(o=(A=A.Gd).findIndex(function(i){return i.position>=n}))?A.splice(o,A[o].position==n?1:0,r):A.push(r))},Gg:function(n,i){var r=p.m;if(r.h.parseInbandPsshEnabled&&!r.H&&["audio","video"].includes(n)){i=new ug(lc(i));var o=0,s=t(i.data);for(n=s.next();!n.done;n=s.next())o+=n.value.length;if(0==o)r=Promise.resolve();else{for(o=new Uint8Array(o),s=0,n=(i=t(i.data)).next();!n.done;n=i.next())n=n.value,o.set(n,s),s+=n.length;hh(r,"cenc",o),r=r.l}}else r=Promise.resolve();return r},Yi:function(n,i,r){Im(p,n,i,r)},ce:function(n,i){return p.ce(n,i)}})),i.j.configure(i.g.streaming),i.l=t5,o.textTracks&&i.s.o(o.textTracks,"addtrack",function(n){n.track&&"chapters"===(n=n.track).kind&&Ym(i,n)}),i.dispatchEvent(rm("streaming")),T=null,(x=i.j.j)||(T=Zm(i,!0)),C=[],N=(M=t([(I=x||T).video,I.audio])).next();!N.done;N=M.next())(_=N.value)&&!_.segmentIndex&&C.push(_.createSegmentIndex());if(!(0<C.length)){n.F(2);break}return D(n,Promise.all(C),2);case 2:if(i.H&&i.H.onInitialVariantChosen&&i.H.onInitialVariantChosen(I),Um(i.i.presentationTimeline,i.g.playRangeStart,i.g.playRangeEnd),i.G=(A=i,Q=i.ha,new Jj(A.h,A.i,A.g.streaming,Q,function(){A.xb&&Vj(A.xb,!0),A.j&&A.j.Kd(),A.M&&rn(A)},function(n){return A.dispatchEvent(n)})),i.xb=(J=i,$=r,($=new bk(J.ua,J.R()||0<$)).addEventListener("enter",function(n){Jm(J,"timelineregionenter",n.region)}),$.addEventListener("exit",function(n){Jm(J,"timelineregionexit",n.region)}),$.addEventListener("skip",function(n){var i=n.region;n.seeking||(Jm(J,"timelineregionenter",i),Jm(J,"timelineregionexit",i))}),(ea=new Uj(J.h)).g.add($),J.sa&&ea.g.add(J.sa),ea),j=Math.max(i.i.minBufferTime,i.g.streaming.rebufferingGoal),bn(i,o,j),x||(Vm(i,T,!0,!1,0),!i.g.streaming.startAtSegmentBoundary)){n.F(4);break}return z=(B=i.G).ef,D(n,(es=T,ec=i.G.Yd(),K(function(n){return 1==n.g?(ed=es.audio,eh=es.video,ep=function(n,i){var r,o,s;return K(function(u){return 1==u.g?n?D(u,n.createSegmentIndex(),2):u.return(null):(o=(r=n.segmentIndex.rc(i))?r.next().value:null)?(s=o.startTime,u.return(s)):u.return(null)})},D(n,ep(ed,ec),2)):3!=n.g?(eg=n.h,D(n,ep(eh,ec),3)):null!=(em=n.h)&&null!=eg?n.return(Math.max(em,eg)):null!=em?n.return(em):null!=eg?n.return(eg):n.return(ec)})),6);case 6:z.call(B,n.h);case 4:return i.G.df(),i.bc().find(function(n){return n.active})||((G=De(i.i.textStreams,i.Wa,i.nc,i.Xb)[0]||null)&&gm(i.C.h,G,!0),T&&(G?(T.audio&&function(n,i,r){if(0==n.g.autoShowText)return!1;if(1==n.g.autoShowText)return!0;var o=Kb(n.g.preferredTextLanguage);return(r=Kb(r.language),2==n.g.autoShowText)?Jb(r,o):3==n.g.autoShowText?(n=Kb(i.language),Jb(r,o)&&!Jb(n,r)):(Ra("Invalid autoShowText setting!"),!1)}(i,T.audio,G)&&(i.$=!0),i.$&&i.I.H.setTextVisibility(!0),en(i)):i.$=!1),G&&(i.g.streaming.alwaysStreamText||i.xc())&&Ck(i.j,G)),D(n,i.j.start(),7);case 7:i.g.abr.enabled&&(i.u.enable(),fn(i)),Rm(i),gn(i),i.i.variants.some(function(n){return n.primary}),(H=i.R())&&(i.g.streaming.liveSync||i.i.serviceDescription)?(q=function(){return hn(i)},i.s.o(o,"timeupdate",q)):H||(Y=function(){return jn(i)},i.s.o(o,"timeupdate",Y),jn(i)),i.D&&i.D.onManifestUpdated(H),i.Xa=!0,i.s.na(o,"loadedmetadata",function(){i.C.m=Date.now()/1e3-r}),F(n)}})),0)})},"loadInner_"),10);case 16:return D(T,u(function(){return K(function(n){var i,o,s,u,y,T,x,C,I,M,N,_,j;return D(n,(i=A,o=p,s=r,K(function(n){if(1==n.g)return um(i,"src-equals"),u=i.h,i.G=new Ij(u),y=!1,i.Ib.push(function(){y=!0}),null!=i.ha&&i.G.ef(i.ha),i.K=new Tj({ke:function(){return u.playbackRate},Lc:function(){return u.defaultPlaybackRate},pg:function(n){u.playbackRate=n},fh:function(n){u.currentTime+=n}}),T=i.g.streaming.rebufferingGoal,bn(i,u,T),x=function(){return Sm(i)},C=function(){return Tm(i)},i.s.o(u,"playing",x),i.s.o(u,"pause",x),i.s.o(u,"ended",x),i.s.o(u,"ratechange",C),"none"!=u.preload&&i.s.na(u,"loadedmetadata",function(){i.C.m=Date.now()/1e3-o}),u.audioTracks&&(i.s.o(u.audioTracks,"addtrack",function(){return Rm(i)}),i.s.o(u.audioTracks,"removetrack",function(){return Rm(i)}),i.s.o(u.audioTracks,"change",function(){return Rm(i)})),u.textTracks&&(i.s.o(u.textTracks,"addtrack",function(n){if(n.track)switch((n=n.track).kind){case"metadata":(function(n,i){if("metadata"==i.kind){i.mode="hidden",n.s.o(i,"cuechange",function(){if(i.activeCues)for(var r=t(i.activeCues),o=r.next();!o.done;o=r.next())pn(n,(o=o.value).startTime,o.endTime,o.type,o.value),n.D&&n.D.onCueMetadataChange(o.value)});var r=new Dd(function(){var i=Array.from(n.h.textTracks).filter(function(n){return"metadata"==n.kind});i=t(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Qa().S(.5);n.Ib.push(function(){r.stop()})}})(i,n);break;case"chapters":Ym(i,n);break;default:Rm(i)}}),i.s.o(u.textTracks,"removetrack",function(){return Rm(i)}),i.s.o(u.textTracks,"change",function(){return Rm(i)})),u.src=function(n,i,r){try{if(!n.g.enabled)return i;var o=sl(n);e:{switch(r.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var s="a";break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":s=tJ;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":s="m";break e}s=void 0}o.ot=s,o.su=!0;var u=wl(o);return xl(i,u)}catch(n){return Sa("CMCD_SRC_ERROR","Could not generate src CMCD data.",n),i}}(i.V,i.aa,s),(Kd()||Jd("Web0S"))&&u.load(),i.l=t8,i.dispatchEvent(rm("streaming")),I=new mf,zj(u,HTMLMediaElement.HAVE_METADATA,i.s,function(){i.G.df(),I.resolve()}),zj(u,HTMLMediaElement.HAVE_CURRENT_DATA,i.s,function(){var n;return K(function(r){var o,s,p,A;return 1==r.g?(""!=(s=(o=i).g.preferredAudioLanguage)&&o.Le(s,o.g.preferredVariantRole),(n=nn(i)).find(function(n){return"disabled"!=n.mode})?(0<n.length&&(i.$=!0),r.F(2)):D(r,new Promise(function(n){i.s.na(u.textTracks,"change",n),new Dd(n).S(1)}),2)):y?r.return():void(""!=(A=(p=i).g.preferredTextLanguage)&&p.ig(A,p.g.preferredTextRole,p.g.preferForcedSubs),F(r))})}),u.error?I.reject(wm(i)):"none"==u.preload&&(Ra('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),I.resolve()),i.s.na(u,"error",function(){I.reject(wm(i))}),D(n,I,2);(M=i.R())&&i.g.streaming.liveSync?(N=function(){return hn(i)},i.s.o(u,"timeupdate",N)):M||(_=function(){return jn(i)},i.s.o(u,"timeupdate",_),jn(i)),i.D&&(i.D.onManifestUpdated(M),M&&(j=i.Ha().end,i.s.o(u,"progress",function(){var n=i.Ha().end;j!=n&&(i.D.onManifestUpdated(i.R()),j=n)}))),i.Xa=!0,F(n)})),0)})},"srcEqualsInner_"),10);case 10:A.dispatchEvent(rm("loaded")),va(T,0);break;case 5:if(7e3==(y=wa(T)).code){T.F(18);break}return D(T,A.Wc(!1),18);case 18:throw y}})},N.dj=function(){for(var n=this.W;n.g;)n.release()},N.configure=function(n,i){2==arguments.length&&"string"==typeof n&&(n=Ql(n,i)),n.streaming&&"forceTransmuxTS"in n.streaming&&(Me("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),n.mediaSource.mediaSource=n.streaming.forceTransmuxTS,delete n.streaming.forceTransmuxTS),n.streaming&&"forceTransmux"in n.streaming&&(Me("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),n.mediaSource.mediaSource=n.streaming.forceTransmux,delete n.streaming.forceTransmux),n.streaming&&n.streaming.lowLatencyMode&&(void 0==n.streaming.inaccurateManifestTolerance&&(n.streaming.inaccurateManifestTolerance=0),void 0==n.streaming.rebufferingGoal&&(n.streaming.rebufferingGoal=.01),void 0==n.streaming.segmentPrefetchLimit&&(n.streaming.segmentPrefetchLimit=2),void 0==n.streaming.retryParameters&&(n.streaming.retryParameters={}),void 0==n.streaming.retryParameters.baseDelay&&(n.streaming.retryParameters.baseDelay=100),void 0==n.manifest&&(n.manifest={}),void 0==n.manifest.retryParameters&&(n.manifest.retryParameters={}),void 0==n.manifest.retryParameters.baseDelay&&(n.manifest.retryParameters.baseDelay=100),void 0==n.drm&&(n.drm={}),void 0==n.drm.retryParameters&&(n.drm.retryParameters={}),void 0==n.drm.retryParameters.baseDelay&&(n.drm.retryParameters.baseDelay=100));var r=bm(this.g,n,jm(this));return sn(this),r},N.getConfiguration=function(){var n=jm(this);return bm(n,this.g,jm(this)),n},N.Uh=function(){if(this.h){var n=this.h.buffered.length;n=n?this.h.buffered.end(n-1):0;var i=this.getConfiguration().streaming.bufferingGoal;if(n>=(i=Math.min(this.h.currentTime+i,this.Ha().end)))return 1;if(!(n<=this.h.currentTime)&&n<i)return(n-this.h.currentTime)/(i-this.h.currentTime)}return 0},N.hj=function(){for(var n in this.g)delete this.g[n];bm(this.g,jm(this),jm(this)),sn(this)},N.ie=function(){return this.l},N.If=function(){return this.i?this.i.type:null},N.ni=function(){return this.h},N.Zb=function(){return this.J},N.Gf=function(){return this.aa},N.ee=function(){return this.D?this.D:null},N.R=function(){return this.i?this.i.presentationTimeline.R():!!this.h&&!!this.h.src&&1/0==this.h.duration},N.wc=function(){return!!this.i&&this.i.presentationTimeline.wc()},N.Pc=function(){if(this.i){var n=this.i.variants;return!!n.length&&!n[0].video}return!!this.h&&!!this.h.src&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},N.Ha=function(){if(this.i){if(!this.Xa&&"HLS"==this.i.type)return{start:0,end:0};var n=this.i.presentationTimeline;return{start:n.Nc(),end:n.Ob()}}return this.h&&this.h.src&&(n=this.h.seekable).length?{start:n.start(0),end:n.end(n.length-1)}:{start:0,end:0}},N.Fi=function(){this.R()&&(this.h.currentTime=this.Ha().end)},N.keySystem=function(){var n=this.drmInfo();return n?n.keySystem:""},N.drmInfo=function(){return this.m?this.m.g:null},N.td=function(){return this.m?this.m.td():1/0},N.Ff=function(){return this.m?this.m.Ff():[]},N.ge=function(){return this.m?this.m.ge():{}},N.yd=function(){return!!this.M&&this.M.g==e6},N.Nb=function(){return this.h?this.K?this.K.h:1:0},N.Pd=function(n){var i=this;0==n?Ra("A trick play rate of 0 is unsupported!"):(this.va.ub(),this.h.paused&&this.h.play(),this.K.set(n),this.l==t5&&(this.u.playbackRateChanged(n),zk(this.j,1<Math.abs(n))),this.R()&&this.va.o(this.h,"timeupdate",function(){var r=i.h.currentTime,o=i.Ha(),s=i.g.streaming.safeSeekOffset;0<n?r>=o.end&&i.od():r<=o.start+s&&i.od()}))},N.od=function(){var n=this.K.Lc();this.l==t8&&this.K.set(n),this.l==t5&&(this.K.set(n),this.u.playbackRateChanged(n),zk(this.j,!1)),this.va.ub()},N.mb=function(){if(this.i){for(var n=this.j?this.j.j:null,i=[],r=0,o=t(this.i.variants),s=o.next();!s.done;s=o.next())if(Be(s=s.value)){var u=te(s);u.active=s==n,u.active||1==r||null==n||s.video!=n.video||s.audio!=n.audio||(u.active=!0),u.active&&r++,i.push(u)}return i}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(n){return Ae(n)}):[]},N.bc=function(){if(this.i){for(var n=this.j?this.j.s:null,i=[],r=t(this.i.textStreams),o=r.next();!o.done;o=r.next()){var s=ue(o=o.value);s.active=o==n,i.push(s)}return i}return this.h&&this.h.src&&this.h.textTracks?nn(this).map(function(n){return ye(n)}):[]},N.fe=function(){var n=this.tc;return this.i&&(n=this.i.imageStreams),n.map(function(n){return ve(n)})},N.Rh=function(n){var i,r,o,s,u=this;return K(function(p){return 1==p.g?u.l!=t5&&u.l!=t8?p.return(null):(i=u.tc,u.i&&(i=u.i.imageStreams),(r=i.find(function(i){return i.id==n}))?r.segmentIndex?p.F(2):D(p,r.createSegmentIndex(),2):p.return(null)):4!=p.g?(o=[],Pj(r.segmentIndex,function(i){var s=vn(i.tilesLayout||r.tilesLayout);if(s){s=s.rows*s.mc;for(var p=i.h-i.startTime,y=0;y<s;y++)o.push(u.Kf(n,i.startTime+p*y/s))}}),D(p,Promise.all(o),4)):(s=p.h,p.return(s.filter(function(n){return n})))})},N.Kf=function(n,i){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H=this;return K(function(q){return 1==q.g?H.l!=t5&&H.l!=t8?q.return(null):(r=H.tc,H.i&&(r=H.i.imageStreams),(o=r.find(function(i){return i.id==n}))?o.segmentIndex?q.F(2):D(q,o.createSegmentIndex(),2):q.return(null)):null!=(s=o.segmentIndex.find(i))&&(p=vn((u=o.segmentIndex.get(s)).tilesLayout||o.tilesLayout))?(y=o.width||0,A=o.height||0,T=y/p.mc,x=A/p.rows,C=p.mc*p.rows,I=u.h-u.startTime,M=u.C||I/C,N=u.startTime,j=_=0,1<C&&(B=Math.floor((i-u.startTime)/M),N=u.startTime+B*M,_=B%p.mc*T,j=Math.floor(B/p.mc)*x),z=!1,(G=u.u)&&(z=!0,x=G.height,_=G.positionX,j=G.positionY,T=G.width),q.return({segment:u,imageHeight:A,imageWidth:y,height:x,positionX:_,positionY:j,startTime:N,duration:M,uris:u.ba(),width:T,sprite:z})):q.return(null)})},N.jg=function(n){if(this.i&&this.j){var i=this.i.textStreams.find(function(i){return i.id==n.id});i&&i!=this.j.s&&(gm(this.C.h,i,!1),Ck(this.j,i),wn(this),this.Wa=i.language)}else if(this.h&&this.h.src&&this.h.textTracks){i=t(i=nn(this));for(var r=i.next();!r.done;r=i.next())we(r=r.value)==n.id?r.mode=this.$?"showing":"hidden":r.mode="disabled";wn(this)}},N.Me=function(n,i,r){if(i=void 0!==i&&i,r=void 0===r?0:r,this.i&&this.j){this.g.abr.enabled&&Ra("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var o=this.i.variants.find(function(i){return i.id==n.id});o&&Be(o)&&(Vm(this,o,!1,i,r),this.Ra=new Ue(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),gn(this))}else if(this.h&&this.h.audioTracks){for(r=(i=t(i=Array.from(this.h.audioTracks))).next();!r.done;r=i.next())if(we(r=r.value)==n.id){xn(this,r);break}}},N.Th=function(){return yn(this.mb())},N.xi=function(){return yn(this.bc())},N.Sh=function(){return Array.from(zn(this.mb()))},N.wi=function(){return Array.from(zn(this.bc()))},N.Le=function(n,i,r,o){if(r=void 0===r?0:r,o=void 0===o?0:o,this.i&&this.G){this.Ra=new Ve(n,i||"",r,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),n=function(n,i){return n.video||i.video?n.video&&i.video?Math.abs((n.video.height||0)-(i.video.height||0))+Math.abs((n.video.width||0)-(i.video.width||0)):1/0:0},i=this.j.j;var s=this.Ra.create(this.i.variants);r=null,s=t(s.values());for(var u=s.next();!u.done;u=s.next())u=u.value,(!r||n(r,i)>n(u,i))&&(r=u);r?(n=te(r),this.Me(n,!0,o)):un(this)}else this.h&&this.h.audioTracks&&(o=De(this.mb(),n,i||"",!1)[0])&&this.Me(o)},N.ig=function(n,i,r){r=void 0!==r&&r,this.i&&this.G?(this.Wa=n,this.nc=i||"",this.Xb=r,(n=De(this.i.textStreams,this.Wa,this.nc,this.Xb)[0]||null)&&n!=this.j.s&&(gm(this.C.h,n,!1),this.g.streaming.alwaysStreamText||this.xc())&&(Ck(this.j,n),wn(this))):(n=De(this.bc(),n,i||"",r)[0])&&this.jg(n)},N.oj=function(n,i,r){if(i=void 0===i||i,r=void 0===r?0:r,this.i&&this.G){for(var o=null,s=t(this.i.variants),u=s.next();!u.done;u=s.next())if((u=u.value).audio.label==n){o=u;break}null!=o&&(this.Ra=new Ve(o.language,"",0,"",!1,"",n,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),un(this,i,r))}else if(this.h&&this.h.audioTracks){for(r=Array.from(this.h.audioTracks),i=null,o=(r=t(r)).next();!o.done;o=r.next())(o=o.value).label==n&&(i=o);i&&xn(this,i)}},N.xc=function(){var n=this.$;return this.I&&this.l==t5?this.I.H.isTextVisible():this.h&&this.h.src&&this.h.textTracks?nn(this).some(function(n){return"showing"==n.mode}):n},N.Sg=function(){return this.h&&this.h.src&&this.h.textTracks?An(this).map(function(n){return ye(n)}):[]},N.Wh=function(n){if(!this.h||!this.h.src||!this.h.textTracks)return[];var i=Kb(n),r=An(this).filter(function(n){return Kb(n.language)==i});if(!r||!r.length)return[];n=[];var o=new Set;r=t(r);for(var s=r.next();!s.done;s=r.next())if((s=s.value)&&s.cues){s=t(s.cues);for(var u=s.next();!u.done;u=s.next()){var p=u.value;(u=p.id)&&""!=u||(u=p.startTime+"-"+p.endTime+"-"+p.text),p={id:u,title:p.text,startTime:p.startTime,endTime:p.endTime},o.has(u)||(n.push(p),o.add(u))}}return n},N.Oe=function(n){if(n=!!n,this.$!=n){if(this.$=n,this.l==t5){var i,r;this.I.H.setTextVisibility(n),this.g.streaming.alwaysStreamText||(n?this.j.s||0<(n=De(this.i.textStreams,this.Wa,this.nc,this.Xb)).length&&(Ck(this.j,n[0]),wn(this)):((r=(i=this.j).i.get(eh))&&(rk(r),sk(r).catch(function(){}),i.i.delete(eh)),i.s=null))}else if(this.h&&this.h.src&&this.h.textTracks){var o=nn(this);o=t(o);for(var s=o.next();!s.done;s=o.next())"disabled"!=(s=s.value).mode&&(s.mode=n?"showing":"hidden")}en(this)}},N.oi=function(){if(!this.R())return null;if(this.G)var n=this.G.Yd();else{if(null==this.ha)return new Date;n=this.ha}if(this.i)return new Date(1e3*(this.i.presentationTimeline.i+n));if(this.h&&this.h.getStartDate){var i=this.h.getStartDate();return isNaN(i.getTime())?null:new Date(i.getTime()+1e3*n)}return null},N.Vg=function(){if(!this.R())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var n=this.h.getStartDate();return isNaN(n.getTime())?null:n}return null},N.Lb=function(){if(this.l==t5)return this.I.Lb();var n={total:[],audio:[],video:[],text:[]};return this.l==t8&&(n.total=Vh(this.h.buffered)),n},N.getStats=function(){if(this.l!=t5&&this.l!=t8)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Sm(this);var n=this.h,i=n.currentTime/n.duration;if(!isNaN(i)){var r=this.C;i=Math.round(100*i),r.i=isNaN(r.i)?i:Math.max(r.i,i)}if(this.G&&(this.C.M=this.G.Bg(),this.C.N=this.G.Cg()),n.getVideoPlaybackQuality){r=n.getVideoPlaybackQuality(),i=this.C;var o=Number(r.totalVideoFrames);i.L=Number(r.droppedVideoFrames),i.K=o,this.C.J=Number(r.corruptedVideoFrames)}if(r=this.m&&(r=this.m).K?r.K:NaN,this.C.u=r,this.l==t5){if(r=this.j.j,i=this.j.s,r){var s=(o=this.K?this.K.h:1)*r.bandwidth;i&&i.bandwidth&&(s+=o*i.bandwidth),this.C.D=s}r&&r.video&&(i=this.C,o=r.video.height||NaN,i.s=r.video.width||NaN,i.l=o),this.R()&&(r=this.Vg().valueOf()+1e3*n.currentTime,this.C.G=(Date.now()-r)/1e3),this.i&&this.i.presentationTimeline&&(this.C.I=this.i.presentationTimeline.g),r=this.u.getBandwidthEstimate(),this.C.C=r}this.l==t8&&(r=this.C,i=n.videoHeight||NaN,r.s=n.videoWidth||NaN,r.l=i);var u=this.C;n=u.s,r=u.l,i=u.D,o=u.K,s=u.L;var p=u.J,y=u.N,A=u.M,T=u.C,x=u.i,C=u.m,I=u.H,M=u.j,N=dm(u.g,"playing"),_=dm(u.g,"paused"),j=dm(u.g,"buffering"),B=u.u,z=u.G,G=u.I,H=function(n){function b(n){return{timestamp:n.timestamp,state:n.state,duration:n.duration}}for(var i=[],r=t(n.h),o=r.next();!o.done;o=r.next())i.push(b(o.value));return n.g&&i.push(b(n.g)),i}(u.g),q=[];u=t(u.h.g);for(var Y=u.next();!Y.done;Y=u.next())q.push({timestamp:(Y=Y.value).timestamp,id:Y.id,type:Y.type,fromAdaptation:Y.fromAdaptation,bandwidth:Y.bandwidth});return{width:n,height:r,streamBandwidth:i,decodedFrames:o,droppedFrames:s,corruptedFrames:p,stallsDetected:y,gapsJumped:A,estimatedBandwidth:T,completionPercent:x,loadLatency:C,manifestTimeSeconds:I,drmTimeSeconds:M,playTime:N,pauseTime:_,bufferingTime:j,licenseTime:B,liveLatency:z,maxSegmentDuration:G,stateHistory:H,switchHistory:q}},N.Hh=function(n,i,r,o,s,u,p){p=void 0!==p&&p;var y,A,T,x,C,I,M,N=this;return K(function(_){switch(_.g){case 1:if(N.l!=t5&&N.l!=t8)throw new P(1,7,7004);if("subtitles"!=r&&"captions"!=r&&Ra("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){_.F(2);break}return D(_,Bn(N,n),3);case 3:o=_.h;case 2:if(y=[],N.D&&(y=N.D.getCuePoints()),N.l!=t8){_.F(4);break}return p&&(r="forced"),D(_,Cn(N,n,i,r,o,u||"",y),5);case 5:if(A=Kb(i),T=N.bc().find(function(n){return Kb(n.language)==A&&n.label==(u||"")&&n.kind==r}))return Rm(N),_.return(T);throw new P(1,2,2012);case 4:if(x=ep,C=N.h.duration,N.i&&(C=N.i.presentationTimeline.getDuration()),1/0==C)throw new P(1,4,4033);if(!y.length){_.F(6);break}return D(_,Dn(N,n,N.J,N.g.streaming.retryParameters),7);case 7:I=En(N,_.h,o,y),n=tK(new Blob([I],{type:"text/vtt"})),o="text/vtt";case 6:if(!pd(dd((M={id:N.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Rj(0,C,[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:u||null,type:x.Da,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1}).mimeType,M.codecs)))throw new P(2,2,2014,o);return N.i.textStreams.push(M),Rm(N),_.return(ue(M))}})},N.Ih=function(n,i){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z=this;return K(function(G){switch(G.g){case 1:if(z.l!=t5&&z.l!=t8)throw new P(1,7,7004);if(i){G.F(2);break}return D(G,Bn(z,n),3);case 3:i=G.h;case 2:if("text/vtt"!=i)throw new P(1,2,2017,n);if(r=ep,o=z.h.duration,z.i&&(o=z.i.presentationTimeline.getDuration()),1/0==o)throw new P(1,4,4045);return D(G,Dn(z,n,z.J,z.g.streaming.retryParameters),4);case 4:if(s=G.h,!(u=eJ[i]))throw new P(2,2,2014,i);for(p=u(),y={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},A=lc(s),T=p.parseMedia(A,y,n),x=[],C={},M=(I=t(T)).next();!M.done;C={jd:C.jd,jc:C.jc},M=I.next())C.jc=M.value,C.jd=null,N=function(i){return function(){return null==i.jd&&(i.jd=zb([n],[i.jc.payload])),i.jd||[]}}(C),_=new Ph(C.jc.startTime,C.jc.endTime,N,0,null,null,0,0,1/0),C.jc.payload.includes("#xywh")&&4===(j=C.jc.payload.split("#xywh=")[1].split(",")).length&&_.rh({height:parseInt(j[3],10),positionX:parseInt(j[0],10),positionY:parseInt(j[1],10),width:parseInt(j[2],10)}),x.push(_);return B={id:z.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj(x),mimeType:i||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.cf,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1},z.l==t8?z.tc.push(B):z.i.imageStreams.push(B),Rm(z),G.return(ve(B))}})},N.Gh=function(n,i,r){var o,s,u,p=this;return K(function(y){switch(y.g){case 1:if(p.l!=t5&&p.l!=t8)throw new P(1,7,7004);if(r){y.F(2);break}return D(y,Bn(p,n),3);case 3:r=y.h;case 2:return o=[],p.D&&(o=p.D.getCuePoints()),D(y,Cn(p,n,i,"chapters",r,"",o),4);case 4:if(s=y.h,!(u=p.Sg().find(function(n){return n.language==i}))){y.F(5);break}return D(y,new Promise(function(n,i){p.s.na(s,"load",n),p.s.na(s,"error",function(){i(new P(1,2,2015))})}),6);case 6:return Rm(p),y.return(u);case 5:throw new P(1,2,2012)}})},N.ng=function(n,i){this.Ee.width=n,this.Ee.height=i},N.eg=function(n){if(this.l==t5){var i=this.j;if(n=void 0===n?.1:n,i.l.g)i=!1;else if(i.u)i=!1;else{for(var r=t(i.i.values()),o=r.next();!o.done;o=r.next())!(o=o.value).wd||o.Ta||o.Eb||(o.wd=!1,xk(i,o,n));i=!0}}else i=!1;return i},N.ki=function(){return Ra("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},N.li=function(){return this.Ie},N.rg=function(n){this.oe=n},N.ce=function(n,i){if(!this.g.abr.enabled||this.l===t3||!navigator.onLine)return!1;if(this.i.variants.some(function(i){return!!(i=i[n.type])&&i.id!==n.id&&("audio"!=n.type||n.language===i.language)})){for(var r=t(this.i.variants),o=r.next();!o.done;o=r.next()){var s=(o=o.value)[n.type];s&&s.id===n.id&&(o.disabledUntilTime=Date.now()/1e3+i)}return this.se.za(1),un(this,!0,i=this.Lb().video.reduce(function(n,i){return n+i.end-i.start},0),!0,!1),!0}return!1},L("shaka.Player",V),V.prototype.setVideoContainer=V.prototype.rg,V.prototype.getManifestParserFactory=V.prototype.li,V.prototype.getManifest=V.prototype.ki,V.prototype.retryStreaming=V.prototype.eg,V.prototype.setMaxHardwareResolution=V.prototype.ng,V.prototype.addChaptersTrack=V.prototype.Gh,V.prototype.addThumbnailsTrack=V.prototype.Ih,V.prototype.addTextTrackAsync=V.prototype.Hh,V.prototype.getStats=V.prototype.getStats,V.prototype.getBufferedInfo=V.prototype.Lb,V.prototype.getPresentationStartTimeAsDate=V.prototype.Vg,V.prototype.getPlayheadTimeAsDate=V.prototype.oi,V.prototype.setTextTrackVisibility=V.prototype.Oe,V.prototype.getChapters=V.prototype.Wh,V.prototype.getChaptersTracks=V.prototype.Sg,V.prototype.isTextTrackVisible=V.prototype.xc,V.prototype.selectVariantsByLabel=V.prototype.oj,V.prototype.selectTextLanguage=V.prototype.ig,V.prototype.selectAudioLanguage=V.prototype.Le,V.prototype.getTextLanguages=V.prototype.wi,V.prototype.getAudioLanguages=V.prototype.Sh,V.prototype.getTextLanguagesAndRoles=V.prototype.xi,V.prototype.getAudioLanguagesAndRoles=V.prototype.Th,V.prototype.selectVariantTrack=V.prototype.Me,V.prototype.selectTextTrack=V.prototype.jg,V.prototype.getThumbnails=V.prototype.Kf,V.prototype.getAllThumbnails=V.prototype.Rh,V.prototype.getImageTracks=V.prototype.fe,V.prototype.getTextTracks=V.prototype.bc,V.prototype.getVariantTracks=V.prototype.mb,V.prototype.cancelTrickPlay=V.prototype.od,V.prototype.trickPlay=V.prototype.Pd,V.prototype.getPlaybackRate=V.prototype.Nb,V.prototype.isBuffering=V.prototype.yd,V.prototype.getKeyStatuses=V.prototype.ge,V.prototype.getActiveSessionsMetadata=V.prototype.Ff,V.prototype.getExpiration=V.prototype.td,V.prototype.drmInfo=V.prototype.drmInfo,V.prototype.keySystem=V.prototype.keySystem,V.prototype.goToLive=V.prototype.Fi,V.prototype.seekRange=V.prototype.Ha,V.prototype.isAudioOnly=V.prototype.Pc,V.prototype.isInProgress=V.prototype.wc,V.prototype.isLive=V.prototype.R,V.prototype.getAdManager=V.prototype.ee,V.prototype.getAssetUri=V.prototype.Gf,V.prototype.getNetworkingEngine=V.prototype.Zb,V.prototype.getMediaElement=V.prototype.ni,V.prototype.getManifestType=V.prototype.If,V.prototype.getLoadMode=V.prototype.ie,V.prototype.resetConfiguration=V.prototype.hj,V.prototype.getBufferFullness=V.prototype.Uh,V.prototype.getConfiguration=V.prototype.getConfiguration,V.prototype.configure=V.prototype.configure,V.prototype.releaseAllMutexes=V.prototype.dj,V.prototype.load=V.prototype.load,V.prototype.updateStartTime=V.prototype.xj,V.prototype.unload=V.prototype.Wc,V.prototype.detach=V.prototype.detach,V.prototype.attachCanvas=V.prototype.Eg,V.prototype.attach=V.prototype.Gc,V.probeSupport=function(n){var i,r,o,s,u;return n=void 0===n||n,K(function(p){if(1==p.g){var y,A,T,x,C,I;return i={},n?D(p,K(function(n){return 1==n.g?(y="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),T={initDataTypes:["cenc"],videoCapabilities:A=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}]},x=[{videoCapabilities:A,persistentState:"required",sessionTypes:["persistent-license"]},T],C=new Map,I=function(n){var i,r,o;return K(function(s){switch(s.g){case 1:if(ta(s,2),"org.w3.clearkey"===n&&Rd())throw Error("Unsupported keySystem");return D(s,navigator.requestMediaKeySystemAccess(n,x),4);case 4:return o=!!(r=(i=s.h).getConfiguration().sessionTypes)&&r.includes("persistent-license"),Ld()&&(o=!1),C.set(n,{persistentState:o}),D(s,i.createMediaKeys(),5);case 5:va(s,0);break;case 2:wa(s),C.set(n,null),F(s)}})},D(n,Promise.all(y.map(function(n){return I(n)})),2)):n.return(Rf(C))}),3):p.F(2)}2!=p.g&&(i=p.h);var M={};if(Ed())for(var N in tI)M[N]=!0;N=t(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var _=N.next();!_.done;_=N.next())M[_=_.value]=Ed()?!!tI[_]:Fd(_);for(r=M,N='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(w(eQ)),M={},_=(N=t(N)).next();!_.done;_=N.next()){M[_=_.value]=Ed()?!!pd(_)||ac(_)||!!Yc(_):Fd(_);var j=_.split(";")[0];M[j]=M[j]||M[_]}for(u in o={manifest:r,media:M,drm:i},s=t9)o[u]=s[u]();return p.return(o)})},V.isBrowserSupported=tm,V.setAdManagerFactory=function(n){t7=n},V.registerSupportPlugin=function(n,i){t9[n]=i},V.prototype.destroy=V.prototype.destroy;var t3=0,t4=1,t5=2,t8=3;V.LoadMode={DESTROYED:t3,NOT_LOADED:t4,MEDIA_SOURCE:t5,SRC_EQUALS:t8},V.version="v4.7.11",e8=new function(n){this.g=n,this.i=Oe,this.h=Pe}(new Le(Number("4"),Number("7")));var t6=["output-restricted","internal-error"],t9={},t7=null;function Mn(){this.h=[],this.j=this.i=this.g=0}function Nn(n,i,r){var o=this;this.g=n,this.h=i,this.j=r,this.i=!1,this.l=this.h.getVolume(),this.m=new Kf,this.m.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}function On(i,r,o,s,u){var p=this;this.s=i,this.i=r,this.D=!1,this.u=this.G=null,this.H=NaN,this.m=u,this.j=null,this.h=new Kf,google.ima.settings.setLocale(o),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),(i=new google.ima.AdDisplayContainer(this.s,this.i)).initialize(),this.l=new google.ima.AdsLoader(i),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.7.11"),this.g=null,this.C=s||new google.ima.AdsRenderingSettings,this.h.o(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(i){(function(i,r){if(i.m(new O("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.H))),i.G.customPlayheadTracker){var o={currentTime:i.i.currentTime};i.g=r.getAdsManager(o,i.C),i.i.muted?i.g.setVolume(0):i.g.setVolume(i.i.volume),i.h.o(i.i,"timeupdate",function(){i.i.duration&&(o.currentTime=i.i.currentTime)}),i.h.o(i.i,"volumechange",function(){i.j&&(i.j.setVolume(i.i.volume),i.i.muted&&i.j.setMuted(!0))})}else i.g=r.getAdsManager(i.i,i.C);i.m(new O("ima-ad-manager-loaded",(new Map).set("imaAdManager",i.g)));var s=i.g.getCuePoints();if(s.length){r=[],s=t(s);for(var u=s.next();!u.done;u=s.next())r.push({start:u.value,end:null});i.m(new O("ad-cue-points-changed",(new Map).set("cuepoints",r)))}(function(n){function b(i,r){i=(new Map).set("originalEvent",i),n.m(new O(r,i))}n.h.o(n.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(i){Qn(n,i)}),n.h.o(n.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(i){Un(n,i)}),n.h.o(n.g,google.ima.AdEvent.Type.STARTED,function(i){Un(n,i)}),n.h.o(n.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){b(n,"ad-first-quartile")}),n.h.o(n.g,google.ima.AdEvent.Type.MIDPOINT,function(n){b(n,"ad-midpoint")}),n.h.o(n.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){b(n,"ad-third-quartile")}),n.h.o(n.g,google.ima.AdEvent.Type.COMPLETE,function(n){b(n,"ad-complete")}),n.h.o(n.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(i){Rn(n,i)}),n.h.o(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(i){Rn(n,i)}),n.h.o(n.g,google.ima.AdEvent.Type.SKIPPED,function(n){b(n,"ad-skipped")}),n.h.o(n.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){b(n,"ad-volume-changed")}),n.h.o(n.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){b(n,"ad-muted")}),n.h.o(n.g,google.ima.AdEvent.Type.PAUSED,function(i){n.j&&(n.j.i=!0,b(i,"ad-paused"))}),n.h.o(n.g,google.ima.AdEvent.Type.RESUMED,function(i){n.j&&(n.j.i=!1,b(i,"ad-resumed"))}),n.h.o(n.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(i){n.j&&b(i,"ad-skip-state-changed")}),n.h.o(n.g,google.ima.AdEvent.Type.CLICK,function(n){b(n,"ad-clicked")}),n.h.o(n.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){b(n,"ad-progress")}),n.h.o(n.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){b(n,"ad-buffering")}),n.h.o(n.g,google.ima.AdEvent.Type.IMPRESSION,function(n){b(n,"ad-impression")}),n.h.o(n.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){b(n,"ad-duration-changed")}),n.h.o(n.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){b(n,"ad-closed")}),n.h.o(n.g,google.ima.AdEvent.Type.LOADED,function(n){b(n,"ad-loaded")}),n.h.o(n.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){b(n,"all-ads-completed")}),n.h.o(n.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){b(n,"ad-linear-changed")}),n.h.o(n.g,google.ima.AdEvent.Type.AD_METADATA,function(n){b(n,"ad-metadata")}),n.h.o(n.g,google.ima.AdEvent.Type.LOG,function(n){b(n,"ad-recoverable-error")}),n.h.o(n.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){b(n,"ad-break-ready")}),n.h.o(n.g,google.ima.AdEvent.Type.INTERACTION,function(n){b(n,"ad-interaction")})})(i);try{i.g.init(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),i.h.o(i.i,"loadeddata",function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in n?(i.u=new ResizeObserver(function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),i.u.observe(i.i)):i.h.o(document,"fullscreenchange",function(){i.g.resize(i.i.offsetWidth,i.i.offsetHeight,Tn(i)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),i.D?i.g.start():i.h.na(i.i,"play",function(){i.D=!0,i.g.start()})}catch(n){Rn(i,null)}})(p,i)}),this.h.o(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Qn(p,n)}),this.h.o(this.i,"ended",function(){p.l.contentComplete()}),this.h.na(this.i,"play",function(){p.D=!0})}function Qn(n,i){i.getError(),i=(new Map).set("originalEvent",i),n.m(new O("ad-error",i)),Rn(n,null),n.m(new O("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Tn(n){return document.fullscreenEnabled?!!document.fullscreenElement:!!(n=n.i).webkitSupportsFullscreen&&n.webkitDisplayingFullscreen}function Un(n,i){var r=i.getAd();r?(n.j=new Nn(r,n.g,n.i),i=(new Map).set("ad",n.j).set("sdkAdObject",r).set("originalEvent",i),n.m(new O("ad-started",i)),n.j.isLinear()&&(n.s.setAttribute("ad-active","true"),n.i.pause(),n.i.muted?((i=n.j).l=n.i.volume,i.h.setVolume(0)):n.j.setVolume(n.i.volume))):Ra("The IMA SDK fired a "+i.type+" event with no associated ad. Unable to play ad!")}function Rn(n,i){n.m(new O("ad-stopped",(new Map).set("originalEvent",i))),n.j&&n.j.isLinear()&&(n.s.removeAttribute("ad-active"),n.i.ended||n.i.play())}function Vn(n,i,r,o,s){this.h=n,this.g=s,this.i=i,this.j=r,this.l=o}function Wn(n,i,r,o){this.D=n,this.K=i,this.g=r,this.l=null,this.W=NaN,this.i=o,this.J=!1,this.C=null,this.j=[],this.M=[],this.L=this.G=this.h=null,this.H=new Map,this.m=[],this.u=[],this.N="",this.V=!0,this.I="",this.s=new Kf}function bo(n){return[n.adId,n.adParameters,n.adSystem,n.adTitle,n.creativeAdId,n.creativeId,n.creativeSequence,n.height,n.width,n.staticResource].join("")}function eo(n){var i=n.g.currentTime;if(0!=i&&null==n.C){for(var r,o,s=t(n.j),u=s.next();!u.done;u=s.next()){u=u.value;for(var p=t(u.ads),y=p.next();!y.done;y=p.next())if(y=y.value,o){if(y.startTimeInSeconds<i&&y.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=y,r=u;break}}else y.startTimeInSeconds<i&&(o=y,r=u)}r&&o&&!n.M.includes(o.adId)&&(n.C=i,n.g.currentTime=r.startTimeInSeconds)}}function co(n){if(n.g.duration&&(n.h||n.j.length)){var i=n.g.currentTime,r=!1;if(n.h){r=!0;var o=n.G,s=o.startTimeInSeconds+.5*o.durationInSeconds,u=o.startTimeInSeconds+.75*o.durationInSeconds;i>=o.startTimeInSeconds+.25*o.durationInSeconds&&!n.u.includes("firstQuartile")?(n.u.push("firstQuartile"),fo(n,"firstQuartile")):i>=s&&!n.u.includes("midpoint")?(n.u.push("midpoint"),fo(n,"midpoint")):i>=u&&!n.u.includes("thirdQuartile")&&(n.u.push("thirdQuartile"),fo(n,"thirdQuartile")),o=n.h.getRemainingTime(),0<(s=n.h.getDuration())&&(0>=o||o>s)&&Xn(n)}if(!n.h||!n.h.isLinear()){e:for(s=(o=t(n.j)).next();!s.done&&(s=s.value,!(n.h&&n.h.isLinear()));s=o.next())for(u=0;u<s.ads.length;u++){var p=s.ads[u],y=p.startTimeInSeconds+p.durationInSeconds;if(p.startTimeInSeconds<=i&&y>i){if(n.M.includes(p.adId)){if(n.g.ended)continue;n.g.currentTime=y;break e}Xn(n),n.L=s,n.h=new Vn(p,u+1,s.ads.length,!0,n.g),n.G=p,0===u&&fo(n,"breakStart"),go(n);break}}if(!n.h){for(s=(o=t(n.j)).next();!s.done&&(s=s.value,!n.h);s=o.next())for(u=0;u<s.nonLinearAdsList.length;u++)if((p=s.nonLinearAdsList[u]).nonLinearAdList.length){y=s.startTimeInSeconds;var A=n.H.get(bo(p.nonLinearAdList[0]));if(y<=i&&A&&A.length){Xn(n),y=n,A=t(A);for(var T=A.next();!T.done;T=A.next())if((T=T.value).data.source.length){var x=document.createElement("img");x.src=T.data.source[0].url,x.style.top=(T.placeholder.top||0)+"%",x.style.height=100-(T.placeholder.top||0)+"%",x.style.left=(T.placeholder.left||0)+"%",x.style.maxWidth=100-(T.placeholder.left||0)+"%",x.style.objectFit="contain",x.style.position="absolute",y.D.appendChild(x)}n.L=s,n.h=new Vn(p,u+1,s.ads.length,!1,n.g),n.G=p,0===u&&fo(n,"breakStart"),go(n);break}}}r&&!n.h&&(i=n.g.currentTime,n.C&&n.C>i&&(n.g.currentTime=n.C),n.C=null)}}}function Xn(n){if(n.h){for(;n.D.lastChild;)n.D.removeChild(n.D.firstChild);n.J||n.M.push(n.G.adId),fo(n,"complete");for(var i=t(n.m),r=i.next();!r.done;r=i.next())r=r.value,n.s.hc(r.target,r.type,r.listener);n.m=[],n.u=[],(i=n.h.getPositionInSequence())===(r=n.h.getSequenceLength())&&fo(n,"breakEnd"),n.h=null,n.G=null,n.L=null}}function go(n){var i=!1;n.g.paused?i=!0:(fo(n,"impression"),fo(n,"start")),n.m.push({target:n.g,type:"volumechange",listener:function(){n.g.muted&&fo(n,"mute")}}),n.m.push({target:n.g,type:"volumechange",listener:function(){n.g.muted||fo(n,"unmute")}}),n.m.push({target:n.g,type:"play",listener:function(){i?(fo(n,"impression"),fo(n,"start"),i=!1):fo(n,"resume")}}),n.m.push({target:n.g,type:"pause",listener:function(){fo(n,"pause")}});for(var r=t(n.m),o=r.next();!o.done;o=r.next())o=o.value,n.s.o(o.target,o.type,o.listener)}function fo(n,i){var r=n.G.trackingEvents.find(function(n){return n.eventType==i});if(r||(r=n.L.adBreakTrackingEvents.find(function(n){return n.eventType==i})),r){r=t(r.beaconUrls);for(var o=r.next();!o.done;o=r.next())(o=o.value)&&""!=o&&((o=Af([o],kf())).method="POST",n.K.request(7,o))}switch(i){case"impression":n.i(new O("ad-impression"));break;case"start":n.i(new O("ad-started",(new Map).set("ad",n.h)));break;case"mute":n.i(new O("ad-muted"));break;case"unmute":n.i(new O("ad-volume-changed"));break;case"resume":n.i(new O("ad-resumed"));break;case"pause":n.i(new O("ad-paused"));break;case"firstQuartile":n.i(new O("ad-first-quartile"));break;case"midpoint":n.i(new O("ad-midpoint"));break;case"thirdQuartile":n.i(new O("ad-third-quartile"));break;case"complete":n.i(new O("ad-complete")),n.i(new O("ad-stopped"));break;case"breakStart":n.D.setAttribute("ad-active","true");break;case"breakEnd":n.D.removeAttribute("ad-active")}}function ho(n,i){this.g=n,this.i=null,this.h=i}function io(n,i,r,o){var s=this;this.u=n,this.l=i,this.j=null,this.H=NaN,this.i=o,this.I=!1,this.C=this.m=this.s=null,this.D="",this.G=[],this.h=new Kf,(n=new google.ima.dai.api.UiSettings).setLocale(r),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,n),this.i(new O("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(n){var i,r;i=s,r=n,i.i(new O("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-i.H))),r=r.getStreamData().url,i.j.resolve(r),i.j=null,i.I||i.h.o(i.l,"seeked",function(){var n=i.l.currentTime;if(0!=n){i.g.streamTimeForContentTime(n);var r=i.g.previousCuePointForStreamTime(n);r&&!r.played&&(i.s=n,i.l.currentTime=r.start)}})}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){s.D.length?s.j.resolve(s.D):s.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),s.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(n){n=n.getAd(),s.m=new ho(n,s.l),s.C&&(s.m.i=s.C),s.i(new O("ad-started",(new Map).set("ad",s.m))),s.u.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){s.u.removeAttribute("ad-active");var n=s.l.currentTime;s.s&&s.s>n&&(s.l.currentTime=s.s,s.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(n){s.C=n.getStreamData().adProgressData,s.m&&(s.m.i=s.C)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){s.i(new O("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){s.i(new O("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){s.i(new O("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){s.i(new O("ad-complete")),s.i(new O("ad-stopped")),s.u.removeAttribute("ad-active"),s.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){s.i(new O("ad-skipped")),s.i(new O("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(n){var i=n.getStreamData();n=[],i=t(i.cuepoints);for(var r=i.next();!r.done;r=i.next())r=r.value,n.push({start:r.start,end:r.end});s.G=n,s.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",n)))})}function W(){$a.call(this),this.g=this.i=this.h=null,this.j=new Mn,this.m=navigator.language,this.l=null}function ko(n,i){if(i&&i.type)switch(i.type){case"ads-loaded":n.j.h.push(i.loadTime);break;case"ad-started":n.j.g++;break;case"ad-complete":n.j.i++;break;case"ad-skipped":n.j.j++}n.dispatchEvent(i)}function lo(n){return JSON.stringify(n,function(n,i){if("function"!=typeof i){if(i instanceof Event||i instanceof O){var r={};for(o in i)(n=i[o])&&"object"==typeof n?"detail"==o&&(r[o]=n):o in Event||(r[o]=n);return r}if(i instanceof Error){var o=new Set(["name","message","stack"]);for(r in i)o.add(r);for(r=(n=t(Object.getOwnPropertyNames(i))).next();!r.done;r=n.next())o.add(r.value);for(n={},r=(o=t(o)).next();!r.done;r=o.next())n[r=r.value]=i[r];i={__type__:"Error",contents:n}}else if(i instanceof TimeRanges){for(o={__type__:"TimeRanges",length:i.length,start:[],end:[]},r=(i=t(Vh(i))).next();!r.done;r=i.next())n=(r=r.value).end,o.start.push(r.start),o.end.push(n);i=o}else i=i instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(i)}:"number"==typeof i?isNaN(i)?"NaN":isFinite(i)?i:0>i?"-Infinity":"Infinity":i;return i}})}function mo(n){return JSON.parse(n,function(n,i){if("NaN"==i)var r,o=NaN;else if("-Infinity"==i)o=-1/0;else if("Infinity"==i)o=1/0;else if(i&&"object"==typeof i&&"TimeRanges"==i.__type__)o={length:(r=i).length,start:function(n){return r.start[n]},end:function(n){return r.end[n]}};else if(i&&"object"==typeof i&&"Uint8Array"==i.__type__)o=new Uint8Array(i.entries);else if(i&&"object"==typeof i&&"Error"==i.__type__){for(o in i=Error((n=i.contents).message),n)i[o]=n[o];o=i}else o=i;return o})}(N=Nn.prototype).getDuration=function(){return this.g.getDuration()},N.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},N.getRemainingTime=function(){return this.h.getRemainingTime()},N.isPaused=function(){return this.i},N.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},N.getTimeUntilSkippable=function(){var n=this.g.getSkipTimeOffset();return Math.max(n=this.getRemainingTime()-n,0)},N.canSkipNow=function(){return this.h.getAdSkippableState()},N.skip=function(){return this.h.skip()},N.pause=function(){return this.h.pause()},N.play=function(){return this.h.resume()},N.getVolume=function(){return this.h.getVolume()},N.setVolume=function(n){return this.j.volume=n,this.h.setVolume(n)},N.isMuted=function(){return 0==this.h.getVolume()},N.isLinear=function(){return this.g.isLinear()},N.resize=function(n,i){var r=!1,o=this.j;document.fullscreenEnabled?r=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(r=o.webkitDisplayingFullscreen),this.h.resize(n,i,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},N.setMuted=function(n){(this.j.muted=n)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},N.getSequenceLength=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getTotalAds()},N.getPositionInSequence=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getAdPosition()},N.getTitle=function(){return this.g.getTitle()},N.getDescription=function(){return this.g.getDescription()},N.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},N.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},N.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},N.getAdId=function(){return this.g.getAdId()},N.getCreativeAdId=function(){return this.g.getCreativeAdId()},N.getAdvertiserName=function(){return this.g.getAdvertiserName()},N.getMediaUrl=function(){return this.g.getMediaUrl()},N.getTimeOffset=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getTimeOffset()},N.getPodIndex=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getPodIndex()},N.release=function(){this.h=this.g=null},L("shaka.ads.ClientSideAd",Nn),Nn.prototype.release=Nn.prototype.release,Nn.prototype.getPodIndex=Nn.prototype.getPodIndex,Nn.prototype.getTimeOffset=Nn.prototype.getTimeOffset,Nn.prototype.getMediaUrl=Nn.prototype.getMediaUrl,Nn.prototype.getAdvertiserName=Nn.prototype.getAdvertiserName,Nn.prototype.getCreativeAdId=Nn.prototype.getCreativeAdId,Nn.prototype.getAdId=Nn.prototype.getAdId,Nn.prototype.getVastMediaWidth=Nn.prototype.getVastMediaWidth,Nn.prototype.getVastMediaHeight=Nn.prototype.getVastMediaHeight,Nn.prototype.getVastMediaBitrate=Nn.prototype.getVastMediaBitrate,Nn.prototype.getDescription=Nn.prototype.getDescription,Nn.prototype.getTitle=Nn.prototype.getTitle,Nn.prototype.getPositionInSequence=Nn.prototype.getPositionInSequence,Nn.prototype.getSequenceLength=Nn.prototype.getSequenceLength,Nn.prototype.setMuted=Nn.prototype.setMuted,Nn.prototype.resize=Nn.prototype.resize,Nn.prototype.isLinear=Nn.prototype.isLinear,Nn.prototype.isMuted=Nn.prototype.isMuted,Nn.prototype.setVolume=Nn.prototype.setVolume,Nn.prototype.getVolume=Nn.prototype.getVolume,Nn.prototype.play=Nn.prototype.play,Nn.prototype.pause=Nn.prototype.pause,Nn.prototype.skip=Nn.prototype.skip,Nn.prototype.canSkipNow=Nn.prototype.canSkipNow,Nn.prototype.getTimeUntilSkippable=Nn.prototype.getTimeUntilSkippable,Nn.prototype.isSkippable=Nn.prototype.isSkippable,Nn.prototype.isPaused=Nn.prototype.isPaused,Nn.prototype.getRemainingTime=Nn.prototype.getRemainingTime,Nn.prototype.getMinSuggestedDuration=Nn.prototype.getMinSuggestedDuration,Nn.prototype.getDuration=Nn.prototype.getDuration,On.prototype.configure=function(n){this.G=n},On.prototype.stop=function(){this.g&&this.g.stop(),this.s&&fl(this.s)},On.prototype.release=function(){this.stop(),this.u&&this.u.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()},(N=Vn.prototype).getDuration=function(){return this.h.durationInSeconds},N.getMinSuggestedDuration=function(){return this.getDuration()},N.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},N.isPaused=function(){return this.g.paused},N.isSkippable=function(){return!!this.h.skipOffset},N.getTimeUntilSkippable=function(){return this.h.skipOffset?Math.max(this.getRemainingTime()-this.h.skipOffset,0):this.getRemainingTime()},N.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},N.skip=function(){this.g.currentTime+=this.getRemainingTime()},N.pause=function(){return this.g.pause()},N.play=function(){return this.g.play()},N.getVolume=function(){return this.g.volume},N.setVolume=function(n){this.g.volume=n},N.isMuted=function(){return this.g.muted},N.isLinear=function(){return this.l},N.resize=function(){},N.setMuted=function(n){this.g.muted=n},N.getSequenceLength=function(){return this.j?this.j:1},N.getPositionInSequence=function(){return this.i?this.i:1},N.getTitle=function(){return this.h.adTitle},N.getDescription=function(){return""},N.getVastMediaBitrate=function(){return 0},N.getVastMediaHeight=function(){return 0},N.getVastMediaWidth=function(){return 0},N.getAdId=function(){return this.h.adId},N.getCreativeAdId=function(){return this.h.creativeId},N.getAdvertiserName=function(){return""},N.getMediaUrl=function(){return null},N.getTimeOffset=function(){return 0},N.getPodIndex=function(){return 0},N.release=function(){this.j=this.i=this.g=this.h=null},L("shaka.ads.MediaTailorAd",Vn),Vn.prototype.release=Vn.prototype.release,Vn.prototype.getPodIndex=Vn.prototype.getPodIndex,Vn.prototype.getTimeOffset=Vn.prototype.getTimeOffset,Vn.prototype.getMediaUrl=Vn.prototype.getMediaUrl,Vn.prototype.getAdvertiserName=Vn.prototype.getAdvertiserName,Vn.prototype.getCreativeAdId=Vn.prototype.getCreativeAdId,Vn.prototype.getAdId=Vn.prototype.getAdId,Vn.prototype.getVastMediaWidth=Vn.prototype.getVastMediaWidth,Vn.prototype.getVastMediaHeight=Vn.prototype.getVastMediaHeight,Vn.prototype.getVastMediaBitrate=Vn.prototype.getVastMediaBitrate,Vn.prototype.getDescription=Vn.prototype.getDescription,Vn.prototype.getTitle=Vn.prototype.getTitle,Vn.prototype.getPositionInSequence=Vn.prototype.getPositionInSequence,Vn.prototype.getSequenceLength=Vn.prototype.getSequenceLength,Vn.prototype.setMuted=Vn.prototype.setMuted,Vn.prototype.resize=Vn.prototype.resize,Vn.prototype.isLinear=Vn.prototype.isLinear,Vn.prototype.isMuted=Vn.prototype.isMuted,Vn.prototype.setVolume=Vn.prototype.setVolume,Vn.prototype.getVolume=Vn.prototype.getVolume,Vn.prototype.play=Vn.prototype.play,Vn.prototype.pause=Vn.prototype.pause,Vn.prototype.skip=Vn.prototype.skip,Vn.prototype.canSkipNow=Vn.prototype.canSkipNow,Vn.prototype.getTimeUntilSkippable=Vn.prototype.getTimeUntilSkippable,Vn.prototype.isSkippable=Vn.prototype.isSkippable,Vn.prototype.isPaused=Vn.prototype.isPaused,Vn.prototype.getRemainingTime=Vn.prototype.getRemainingTime,Vn.prototype.getMinSuggestedDuration=Vn.prototype.getMinSuggestedDuration,Vn.prototype.getDuration=Vn.prototype.getDuration,Wn.prototype.stop=function(){for(var n=t(this.m),i=n.next();!i.done;i=n.next())i=i.value,this.s.hc(i.target,i.type,i.listener);Xn(this),this.m=[],this.u=[],this.N="",this.V=!0,this.I="",this.C=null,this.j=[],this.M=[],this.H.clear()},Wn.prototype.release=function(){this.stop(),this.s&&this.s.release()},Wn.prototype.onManifestUpdated=function(n){var i,r,o,s,u,p,y,A,T,x,C,I,M,N;this.J=n,""!=this.N&&(i=this,r=this.N,o=this.V,K(function(n){if(1==n.g)return s=Af([r],kf()),u=i.K.request(7,s),ta(n,2),D(n,u.promise,4);if(2!=n.g){var _;if(p=n.h,y=[],0<(A=JSON.parse(Tf(p.data))).avails.length){if(JSON.stringify(i.j)!=JSON.stringify(A.avails)){for(i.j=A.avails,x=(T=t(i.j)).next();!x.done;x=T.next())for(I=(C=t(x.value.nonLinearAdsList)).next();!I.done;I=C.next())for(N=(M=t(I.value.nonLinearAdList)).next();!N.done;N=M.next())(function(n,i){var r,o,s,u;K(function(p){return 1==p.g?i.staticResource?(r=bo(i),n.H.get(r))?p.return():(o=Af([i.staticResource],kf()),s=n.K.request(7,o),ta(p,2),n.H.set(r,[]),D(p,s.promise,4)):p.return():2!=p.g?(u=JSON.parse(Tf(p.h.data)).apps,n.H.set(r,u),va(p,0)):void(wa(p),n.H.delete(r),F(p))})})(i,N.value);y=i.getCuePoints(),i.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",y)))}}else i.j.length&&i.i(new O("ad-cue-points-changed",(new Map).set("cuepoints",y))),Xn(i),i.j=[];return o&&(i.J||0<y.length)&&(co(_=i),_.J||(eo(_),_.s.o(_.g,"seeked",function(){eo(_)}),_.s.o(_.g,"ended",function(){Xn(_)})),_.s.o(_.g,"timeupdate",function(){co(_)})),va(n,0)}wa(n),F(n)}),this.V=!1)},Wn.prototype.getCuePoints=function(){for(var n=[],i=t(this.j),r=i.next();!r.done;r=i.next()){r=t(r.value.ads);for(var o=r.next();!o.done;o=r.next())o=o.value,n.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return n},(N=ho.prototype).getDuration=function(){return this.i?this.i.duration:-1},N.getMinSuggestedDuration=function(){return this.getDuration()},N.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},N.isPaused=function(){return this.h.paused},N.isSkippable=function(){return this.g.isSkippable()},N.getTimeUntilSkippable=function(){var n=this.g.getSkipTimeOffset();return Math.max(n=this.getRemainingTime()-n,0)},N.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},N.skip=function(){this.h.currentTime+=this.getRemainingTime()},N.pause=function(){return this.h.pause()},N.play=function(){return this.h.play()},N.getVolume=function(){return this.h.volume},N.setVolume=function(n){this.h.volume=n},N.isMuted=function(){return this.h.muted},N.isLinear=function(){return!0},N.resize=function(){},N.setMuted=function(n){this.h.muted=n},N.getSequenceLength=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getTotalAds()},N.getPositionInSequence=function(){var n=this.g.getAdPodInfo();return null==n?1:n.getAdPosition()},N.getTitle=function(){return this.g.getTitle()},N.getDescription=function(){return this.g.getDescription()},N.getVastMediaBitrate=function(){return 0},N.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},N.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},N.getAdId=function(){return this.g.getAdId()},N.getCreativeAdId=function(){return this.g.getCreativeAdId()},N.getAdvertiserName=function(){return this.g.getAdvertiserName()},N.getMediaUrl=function(){return null},N.getTimeOffset=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getTimeOffset()},N.getPodIndex=function(){var n=this.g.getAdPodInfo();return null==n?0:n.getPodIndex()},N.release=function(){this.h=this.i=this.g=null},L("shaka.ads.ServerSideAd",ho),ho.prototype.release=ho.prototype.release,ho.prototype.getPodIndex=ho.prototype.getPodIndex,ho.prototype.getTimeOffset=ho.prototype.getTimeOffset,ho.prototype.getMediaUrl=ho.prototype.getMediaUrl,ho.prototype.getAdvertiserName=ho.prototype.getAdvertiserName,ho.prototype.getCreativeAdId=ho.prototype.getCreativeAdId,ho.prototype.getAdId=ho.prototype.getAdId,ho.prototype.getVastMediaWidth=ho.prototype.getVastMediaWidth,ho.prototype.getVastMediaHeight=ho.prototype.getVastMediaHeight,ho.prototype.getVastMediaBitrate=ho.prototype.getVastMediaBitrate,ho.prototype.getDescription=ho.prototype.getDescription,ho.prototype.getTitle=ho.prototype.getTitle,ho.prototype.getPositionInSequence=ho.prototype.getPositionInSequence,ho.prototype.getSequenceLength=ho.prototype.getSequenceLength,ho.prototype.setMuted=ho.prototype.setMuted,ho.prototype.resize=ho.prototype.resize,ho.prototype.isLinear=ho.prototype.isLinear,ho.prototype.isMuted=ho.prototype.isMuted,ho.prototype.setVolume=ho.prototype.setVolume,ho.prototype.getVolume=ho.prototype.getVolume,ho.prototype.play=ho.prototype.play,ho.prototype.pause=ho.prototype.pause,ho.prototype.skip=ho.prototype.skip,ho.prototype.canSkipNow=ho.prototype.canSkipNow,ho.prototype.getTimeUntilSkippable=ho.prototype.getTimeUntilSkippable,ho.prototype.isSkippable=ho.prototype.isSkippable,ho.prototype.isPaused=ho.prototype.isPaused,ho.prototype.getRemainingTime=ho.prototype.getRemainingTime,ho.prototype.getMinSuggestedDuration=ho.prototype.getMinSuggestedDuration,ho.prototype.getDuration=ho.prototype.getDuration,(N=io.prototype).configure=function(){},N.stop=function(){this.D="",this.s=null,this.G=[]},N.release=function(){this.stop(),this.h&&this.h.release()},N.onCueMetadataChange=function(n){if(n.key&&n.data){var i={};i[n.key]=n.data,this.g.onTimedMetadata(i)}},N.getCuePoints=function(){return this.G},pa(W,$a),(N=W.prototype).setLocale=function(n){this.m=n},N.configure=function(n){this.l=n,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},N.initClientSide=function(i,r,o){var s=this;if(!n.google||!google.ima||!google.ima.AdsLoader)throw new P(2,10,1e4);this.h&&this.h.release(),this.h=new On(i,r,this.m,o,function(n){return ko(s,n)}),this.h.configure(this.l)},N.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),$a.prototype.release.call(this)},N.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new O("ad-stopped")),this.j=new Mn},N.requestClientSideAds=function(n){if(!this.h)throw new P(1,10,10001);var i=this.h;i.g&&i.g.destroy(),i.l&&i.l.contentComplete(),i.H=Date.now()/1e3,i.l.requestAds(n)},N.updateClientSideAdsRenderingSettings=function(n){if(!this.h)throw new P(1,10,10001);var i=this.h;i.C=n,i.g&&i.g.updateAdsRenderingSettings(i.C)},N.initMediaTailor=function(n,i,r){var o=this;this.i&&this.i.release(),this.i=new Wn(n,i,r,function(n){return ko(o,n)})},N.requestMediaTailorStream=function(n,i,r){if(!this.i)throw new P(1,10,10005);var o,s,u,p,y,A,T,x,C,I=this.i;return r=void 0===r?"":r,I.l?n=Promise.reject(new P(1,10,10004)):(I.l=new mf,o=n,K(function(n){if(1==n.g)return(s=Af([o],kf())).method="POST",i&&(u=JSON.stringify(i),s.body=Xf(u)),p=I.K.request(7,s),ta(n,2),D(n,p.promise,4);if(2!=n.g){if((y=JSON.parse(Tf(n.h.data))).manifestUrl&&y.trackingUrl)A=new fb(o),T=new fb(y.trackingUrl),I.N=A.resolve(T).toString(),x=Date.now()/1e3-I.W,I.i(new O("ads-loaded",(new Map).set("loadTime",x))),C=new fb(y.manifestUrl),I.l.resolve(A.resolve(C).toString()),I.l=null;else throw Error("Insufficient data from MediaTailor.");return va(n,0)}if(wa(n),!I.I.length)return I.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),I.l=null,n.return();I.l.resolve(I.I),I.l=null,F(n)}),I.I=r||"",I.W=Date.now()/1e3,n=I.l),n},N.initServerSide=function(i,r){var o=this;if(!n.google||!google.ima||!google.ima.dai)throw new P(2,10,10002);this.g&&this.g.release(),this.g=new io(i,r,this.m,function(n){return ko(o,n)}),this.g.configure(this.l)},N.requestServerSideStream=function(n,i){if(i=void 0===i?"":i,!this.g)throw new P(1,10,10003);n.adTagParameters||(n.adTagParameters={});var r=n.adTagParameters;return(r.mpt||r.mpv)&&Ra('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),n.adTagParameters.mpt="shaka-player",n.adTagParameters.mpv="v4.7.11",(r=this.g).j?n=Promise.reject(new P(1,10,10004)):(n instanceof google.ima.dai.api.LiveStreamRequest&&(r.I=!0),r.j=new mf,r.g.requestStream(n),r.D=i||"",r.H=Date.now()/1e3,n=r.j),n},N.replaceServerSideAdTagParameters=function(n){if(!this.g)throw new P(1,10,10003);(n.mpt||n.mpv)&&Ra('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),n.mpt="Shaka Player",n.mpv="v4.7.11",this.g.g.replaceAdTagParameters(n)},N.getServerSideCuePoints=function(){return Me("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},N.getCuePoints=function(){var n=[];return this.g&&(n=n.concat(this.g.getCuePoints())),this.i&&(n=n.concat(this.i.getCuePoints())),n},N.getStats=function(){var n=this.j;return{loadTimes:n.h,started:n.g,playedCompletely:n.i,skipped:n.j}},N.onManifestUpdated=function(n){this.i&&this.i.onManifestUpdated(n)},N.onDashTimedMetadata=function(n){if(this.g&&"urn:google:dai:2018"==n.schemeIdUri){var i=n.schemeIdUri,r=n.eventElement?n.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(i,r,n.startTime)}},N.onHlsTimedMetadata=function(n,i){this.g&&this.g.g.processMetadata("ID3",n.data,i)},N.onCueMetadataChange=function(n){this.g&&this.g.onCueMetadataChange(n)},L("shaka.ads.AdManager",W),W.prototype.onCueMetadataChange=W.prototype.onCueMetadataChange,W.prototype.onHlsTimedMetadata=W.prototype.onHlsTimedMetadata,W.prototype.onDashTimedMetadata=W.prototype.onDashTimedMetadata,W.prototype.onManifestUpdated=W.prototype.onManifestUpdated,W.prototype.getStats=W.prototype.getStats,W.prototype.getCuePoints=W.prototype.getCuePoints,W.prototype.getServerSideCuePoints=W.prototype.getServerSideCuePoints,W.prototype.replaceServerSideAdTagParameters=W.prototype.replaceServerSideAdTagParameters,W.prototype.requestServerSideStream=W.prototype.requestServerSideStream,W.prototype.initServerSide=W.prototype.initServerSide,W.prototype.requestMediaTailorStream=W.prototype.requestMediaTailorStream,W.prototype.initMediaTailor=W.prototype.initMediaTailor,W.prototype.updateClientSideAdsRenderingSettings=W.prototype.updateClientSideAdsRenderingSettings,W.prototype.requestClientSideAds=W.prototype.requestClientSideAds,W.prototype.onAssetUnload=W.prototype.onAssetUnload,W.prototype.release=W.prototype.release,W.prototype.initClientSide=W.prototype.initClientSide,W.prototype.configure=W.prototype.configure,W.prototype.setLocale=W.prototype.setLocale,W.ADS_LOADED="ads-loaded",W.AD_STARTED="ad-started",W.AD_FIRST_QUARTILE="ad-first-quartile",W.AD_MIDPOINT="ad-midpoint",W.AD_THIRD_QUARTILE="ad-third-quartile",W.AD_COMPLETE="ad-complete",W.AD_STOPPED="ad-stopped",W.AD_SKIPPED="ad-skipped",W.AD_VOLUME_CHANGED="ad-volume-changed",W.AD_MUTED="ad-muted",W.AD_PAUSED="ad-paused",W.AD_RESUMED="ad-resumed",W.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",W.CUEPOINTS_CHANGED="ad-cue-points-changed",W.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",W.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",W.AD_CLICKED="ad-clicked",W.AD_PROGRESS="ad-progress",W.AD_BUFFERING="ad-buffering",W.AD_IMPRESSION="ad-impression",W.AD_DURATION_CHANGED="ad-duration-changed",W.AD_CLOSED="ad-closed",W.AD_LOADED="ad-loaded",W.ALL_ADS_COMPLETED="all-ads-completed",W.AD_LINEAR_CHANGED="ad-linear-changed",W.AD_METADATA="ad-metadata",W.AD_RECOVERABLE_ERROR="ad-recoverable-error",W.AD_ERROR="ad-error",W.AD_BREAK_READY="ad-break-ready",W.AD_INTERACTION="ad-interaction",t7=function(){return new W};var ne="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),na="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),no=["loop","playbackRate"],nh=["pause","play"],ng={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},nv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},nA={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},nT=[["getConfiguration","configure"]],nx=[["isTextTrackVisible","setTextTrackVisibility"]],nS="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),nC=["attach","attachCanvas","detach","load","unload"];function zo(n,i,r,o,s,u,p){var y=this;this.I=n,this.M=p,this.j=new Dd(i),this.N=r,this.C=!1,this.u=o,this.H=s,this.K=u,this.h=this.m=!1,this.L="",this.s=null,this.D=function(){return Ao(y)},this.G=function(n,i){switch((n=mo(i)).type){case"event":var r=n.targetName,o=Na(n.event);y.u(r,o);break;case"update":for(o in r=n.update)for(var s in n=y.g[o]||{},r[o])n[s]=r[o][s];y.C&&(y.N(),y.C=!1);break;case"asyncComplete":if(o=n.id,s=n.error,n=y.i[o],delete y.i[o],n){if(s){for(r in o=new P(s.severity,s.category,s.code),s)o[r]=s[r];n.reject(o)}else n.resolve()}}},this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,nP.add(this)}function Lo(n,i,r){nM=r,r.addUpdateListener(n.D),r.addMessageListener("urn:x-cast:com.google.shaka.v2",n.G),Ao(n),Ko(n,{type:"init",initState:i,appData:n.s}),n.l.resolve()}function Mo(n,i){var r=8003;switch(i.code){case"cancel":r=8004;break;case"timeout":r=8005;break;case"receiver_unavailable":r=8006}n.l.reject(new P(2,8,r,i))}function Fo(n,i){var r=n.K();n.l=new mf,n.C=!0,Lo(n,r,i)}function Eo(n){var i=nM;i.removeUpdateListener(n.D),i.removeMessageListener("urn:x-cast:com.google.shaka.v2",n.G)}function Ao(n){var i=!!nM&&"connected"==nM.status;if(n.h&&!i){for(var r in n.H(),n.g)n.g[r]={};Co(n)}n.h=i,n.L=i?nM.receiver.friendlyName:"",n.j.Qa()}function Co(n){for(var i in n.i){var r=n.i[i];delete n.i[i],r.reject(new P(1,7,7e3))}}function Ko(n,i){i=lo(i);var r=nM;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},Va)}catch(o){throw i=new P(2,8,8005,o),r=new O("error",(new Map).set("detail",i)),n.u("player",r),n.Jc(),i}}(N=zo.prototype).destroy=function(){return nP.delete(this),Co(this),nM&&Eo(this),this.j&&(this.j.stop(),this.j=null),this.H=this.u=null,this.h=this.m=!1,this.G=this.D=this.l=this.i=this.g=this.s=null,Promise.resolve()},N.Ba=function(){return this.h},N.Je=function(){return this.L},N.init=function(){if(this.I.length){if(n.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Qa();var i=new chrome.cast.SessionRequest(this.I,[],null,this.M,null);i=new chrome.cast.ApiConfig(i,function(n){for(var i=t(nP),r=i.next();!r.done;r=i.next())Fo(r.value,n)},function(n){for(var i=t(nP),r=i.next();!r.done;r=i.next())r=r.value,nI="available"==n,r.j.Qa()},"origin_scoped"),chrome.cast.initialize(i,function(){},function(){}),nI&&this.j.S(nk),(i=nM)&&i.status!=chrome.cast.SessionStatus.STOPPED?Fo(this,i):nM=null}else n.__onGCastApiAvailable!==Io&&(nL=n.__onGCastApiAvailable||null,n.__onGCastApiAvailable=Io)}},N.kg=function(n){this.s=n,this.h&&Ko(this,{type:"appData",appData:this.s})},N.cast=function(n){var i=this;return K(function(r){if(!i.m)throw new P(1,8,8e3);if(!nI)throw new P(1,8,8001);if(i.h)throw new P(1,8,8002);return i.l=new mf,chrome.cast.requestSession(function(r){return Lo(i,n,r)},function(n){return Mo(i,n)}),D(r,i.l,0)})},N.Jc=function(){if(this.h){if(Co(this),nM){Eo(this);try{nM.stop(function(){},function(){})}catch(n){}nM=null}Ao(this)}},N.get=function(n,i){var r=this;if("video"==n){if(nh.includes(i))return function(){return r.kh.apply(r,[n,i].concat(w(Ga.apply(0,arguments))))}}else if("player"==n){if(nA[i]&&!this.get("player","isLive")())return function(){};if(nS.includes(i))return function(){return r.kh.apply(r,[n,i].concat(w(Ga.apply(0,arguments))))};if(nC.includes(i))return function(){return r.ej.apply(r,[n,i].concat(w(Ga.apply(0,arguments))))};if(ng[i]||nv[i])return function(){return r.g[n][i]}}return this.g[n][i]},N.set=function(n,i,r){this.g[n][i]=r,Ko(this,{type:"set",targetName:n,property:i,value:r})},N.kh=function(n,i){Ko(this,{type:"call",targetName:n,methodName:i,args:Ga.apply(2,arguments)})},N.ej=function(n,i){var r=Ga.apply(2,arguments),o=new mf,s=this.J.toString();this.J++,this.i[s]=o;try{Ko(this,{type:"asyncCall",targetName:n,methodName:i,args:r,id:s})}catch(n){o.reject(n)}return o};var nk=.02,nI=!1,nM=null,nL=null,nP=new Set;function Io(i){if(nL?n.__onGCastApiAvailable=nL:delete n.__onGCastApiAvailable,nL=null,i)for(var r=t(nP),o=r.next();!o.done;o=r.next())o.value.init();"function"==typeof n.__onGCastApiAvailable&&n.__onGCastApiAvailable(i)}function Oo(n,i,r,o){o=void 0!==o&&o,$a.call(this);var s=this;this.i=n,this.h=i,this.m=this.s=this.j=this.u=this.l=null,this.G=r,this.D=o,this.C=new Map,this.g=new zo(r,function(){return Po(s)},function(){return Qo(s)},function(n,i){return Ro(s,n,i)},function(){return So(s)},function(){return To(s)},o),function(n){n.g.init(),n.m=new Kf;for(var i,r,o=t(ne),s=o.next();!s.done;s=o.next())n.m.o(n.i,s.value,function(i){n.g.Ba()||(i=Na(i),n.j.dispatchEvent(i))});for(var u in q)n.m.o(n.h,q[u],function(i){n.g.Ba()||n.s.dispatchEvent(i)});for(var p in n.l={},o={},n.i)o.$c=p,Object.defineProperty(n.l,o.$c,{configurable:!1,enumerable:!0,get:function(i){return function(){return function(n,i){if("addEventListener"==i)return function(i,r,o){return n.j.addEventListener(i,r,o)};if("removeEventListener"==i)return function(i,r,o){return n.j.removeEventListener(i,r,o)};if(n.g.Ba()&&0==Object.keys(n.g.g.video).length){var r=n.i[i];if("function"!=typeof r)return r}return n.g.Ba()?n.g.get("video",i):("function"==typeof(i=n.i[i])&&(i=i.bind(n.i)),i)}(n,i.$c)}}(o),set:function(i){return function(r){var o=i.$c;n.g.Ba()?n.g.set("video",o,r):n.i[o]=r}}(o)}),o={$c:o.$c};n.u={},Wo(n,function(i){Object.defineProperty(n.u,i,{configurable:!1,enumerable:!0,get:function(){return function(n,i){if(n.C.has(i)&&(i=n.C.get(i)),"addEventListener"==i)return function(i,r,o){return n.s.addEventListener(i,r,o)};if("removeEventListener"==i)return function(i,r,o){return n.s.removeEventListener(i,r,o)};if("getMediaElement"==i)return function(){return n.l};if("getSharedConfiguration"==i)return n.g.get("player","getConfiguration");if("getNetworkingEngine"==i)return function(){return n.h.Zb()};if("getDrmEngine"==i)return function(){return n.h.m};if("getAdManager"==i)return function(){return n.h.ee()};if("setVideoContainer"==i)return function(i){return n.h.rg(i)};if(n.g.Ba()){if("getManifest"==i||"drmInfo"==i)return function(){return Ra(i+"() does not work while casting!"),null};if("attach"==i||"detach"==i)return function(){return Ra(i+"() does not work while casting!"),Promise.resolve()}}return n.g.Ba()&&0==Object.keys(n.g.g.video).length&&(ng[i]||nv[i])||!n.g.Ba()?n.h[i].bind(n.h):n.g.get("player",i)}(n,i)}})}),i=n,r=new Map,Wo(i,function(n,o){r.has(o)?(o=r.get(o),n.length<o.length?i.C.set(n,o):i.C.set(o,n)):r.set(o,n)}),n.j=new $a,n.j.we=n.l,n.s=new $a,n.s.we=n.u}(this)}function Wo(n,i){function c(n){return"constructor"!=n&&"function"==typeof o[n]&&!s.has(n)}var r,o=n.h,s=new Set;for(r in o)c(r)&&(s.add(r),i(r,o[r]));for(n=Object.getPrototypeOf(o),r=Object.getPrototypeOf({});n&&n!=r;){for(var u=t(Object.getOwnPropertyNames(n)),p=u.next();!p.done;p=u.next())c(p=p.value)&&(s.add(p),i(p,o[p]));n=Object.getPrototypeOf(n)}}function To(n){var i={video:{},player:{},playerAfterLoad:{},manifest:n.h.Gf(),startTime:null};n.i.pause();for(var r=t(no),o=r.next();!o.done;o=r.next())o=o.value,i.video[o]=n.i[o];for(n.i.ended||(i.startTime=n.i.currentTime),o=(r=t(nT)).next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.h[s[0]](),i.player[o]=s}for(o=(r=t(nx)).next();!o.done;o=r.next())o=(s=o.value)[1],s=n.h[s[0]](),i.playerAfterLoad[o]=s;return i}function Po(n){var i=new O("caststatuschanged");n.dispatchEvent(i)}function Qo(n){var i=new O(n.l.paused?"pause":"play");n.j.dispatchEvent(i)}function So(n){for(var i,r=t(nT),o=r.next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.g.get("player",s[0])(),n.h[o](s)}var u=n.g.get("player","getAssetUri")();s=n.g.get("video","ended"),r=Promise.resolve();var p=n.i.autoplay;o=null,s||(o=n.g.get("video","currentTime")),(s=n.g.get("player","getTextTracks")())&&s.length&&(i=s.find(function(n){return n.active}));var y=n.g.get("player","isTextTrackVisible")();u&&(n.i.autoplay=!1,r=n.h.load(u,o));var A={};for(s=(o=t(no)).next();!s.done;s=o.next())A[s=s.value]=n.g.get("video",s);r.then(function(){if(n.i){for(var r=t(no),o=r.next();!o.done;o=r.next())o=o.value,n.i[o]=A[o];for(o=(r=t(nx)).next();!o.done;o=r.next()){var s=o.value;o=s[1],s=n.g.get("player",s[0])(),n.h[o](s)}n.h.Oe(y),i&&n.h.ig(i.language,i.roles,i.forced),n.i.autoplay=p,u&&n.i.play()}},function(i){i=(new Map).set("detail",i),i=new O("error",i),n.h.dispatchEvent(i)})}function Ro(n,i,r){n.g.Ba()&&("video"==i?n.j.dispatchEvent(r):"player"==i&&n.s.dispatchEvent(r))}function Zo(n,i,r,o){$a.call(this);var s=this;this.g=n,this.h=i,this.j=new Kf,this.J={video:n,player:i},this.G=r||function(){},this.K=o||function(n){return n},this.i=null,this.H=!1,this.s=!0,this.m=0,this.D=!1,this.C=!0,this.u=this.l=null,this.I=new Dd(function(){$o(s)}),function(n){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=function(){return bp(n)},i.onSenderDisconnected=function(){return bp(n)},i.onSystemVolumeChanged=function(){var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&cp(n,{type:"update",update:{video:{volume:i.level,muted:i.muted}}},n.l),cp(n,{type:"event",targetName:"video",event:{type:"volumechange"}},n.l)},n.u=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),n.u.onMessage=function(i){return function(n,i){var r=mo(i.data);switch(r.type){case"PLAY":n.g.play(),jp(n);break;case"PAUSE":n.g.pause(),jp(n);break;case"SEEK":i=r.currentTime;var o=r.resumeState;null!=i&&(n.g.currentTime=Number(i)),o&&"PLAYBACK_START"==o?(n.g.play(),jp(n)):o&&"PLAYBACK_PAUSE"==o&&(n.g.pause(),jp(n));break;case"STOP":n.h.Wc().then(function(){n.h&&jp(n)});break;case"GET_STATUS":mp(n,Number(r.requestId));break;case"VOLUME":i=(o=r.volume).level,o=o.muted;var s=n.g.volume,u=n.g.muted;null!=i&&(n.g.volume=Number(i)),null!=o&&(n.g.muted=o),s==n.g.volume&&u==n.g.muted||jp(n);break;case"LOAD":n.m=0,n.D=!1,n.C=!1,i=r.media,o=r.currentTime,s=n.K(i.contentId),u=r.autoplay||!0,n.G(i.customData),u&&(n.g.autoplay=!0),n.h.load(s,o).then(function(){n.h&&mp(n)}).catch(function(i){var o="LOAD_FAILED";7==i.category&&7e3==i.code&&(o="LOAD_CANCELLED"),cp(n,{requestId:Number(r.requestId),type:o},n.u)});break;default:cp(n,{requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},n.u)}}(n,i)},n.l=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),n.l.onMessage=function(i){return function(n,i){var r,o,s,u,p,y,A,T,x,C,I,M,N=mo(i.data);switch(N.type){case"init":n.m=0,n.D=!1,n.C=!0,r=N.initState,o=N.appData,K(function(i){switch(i.g){case 1:for(s in r.player)u=r.player[s],n.h[s](u);return n.G(o),p=n.g.autoplay,r.manifest?(n.g.autoplay=!1,ta(i,5),D(i,n.h.load(r.manifest,r.startTime),7)):D(i,Promise.resolve(),3);case 7:va(i,3);break;case 5:return y=wa(i),A=(new Map).set("detail",y),T=new O("error",A),n.h&&n.h.dispatchEvent(T),i.return();case 3:if(!n.h)return i.return();for(x in r.video)C=r.video[x],n.g[x]=C;for(I in r.playerAfterLoad)M=r.playerAfterLoad[I],n.h[I](M);n.g.autoplay=p,r.manifest&&(n.g.play(),jp(n)),F(i)}}),$o(n);break;case"appData":n.G(N.appData);break;case"set":var _=N.targetName,j=N.property;if(N=N.value,"video"==_){if(i=cast.receiver.CastReceiverManager.getInstance(),"volume"==j){i.setSystemVolumeLevel(N);break}if("muted"==j){i.setSystemVolumeMuted(N);break}}n.J[_][j]=N;break;case"call":(_=n.J[N.targetName])[N.methodName].apply(_,N.args);break;case"asyncCall":_=N.targetName,j=N.methodName,"player"==_&&"load"==j&&(n.m=0,n.D=!1);var B=N.id,z=i.senderId;N=(i=n.J[_])[j].apply(i,N.args),"player"==_&&"load"==j&&(N=N.then(function(){n.C=!0})),N.then(function(){return np(n,z,B,null)},function(i){return np(n,z,B,i)})}}(n,i)},i.start(),i=t(ne);for(var r=i.next();!r.done;r=i.next())n.j.o(n.g,r.value,function(i){return fp(n,"video",i)});for(var o in q)n.j.o(n.h,q[o],function(i){return fp(n,"player",i)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?n.h.ng(3840,2160):n.h.ng(1920,1080),n.j.o(n.g,"loadeddata",function(){n.D=!0}),n.j.o(n.h,"loading",function(){n.s=!1,gp(n)}),n.j.o(n.g,"playing",function(){n.s=!1,gp(n)}),n.j.o(n.g,"pause",function(){gp(n)}),n.j.o(n.h,"unloading",function(){n.s=!0,gp(n)}),n.j.o(n.g,"ended",function(){new Dd(function(){n.g&&n.g.ended&&(n.s=!0,gp(n))}).S(nN)})}(this)}function bp(n){n.m=0,n.C=!0,n.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,gp(n)}function gp(n){var i;K(function(r){return 1==r.g?D(r,Promise.resolve(),2):n.h?void(i=new O("caststatuschanged"),n.dispatchEvent(i),ip(n)||jp(n),F(r)):r.return()})}function fp(n,i,r){n.h&&($o(n),cp(n,{type:"event",targetName:i,event:r},n.l))}function $o(n){n.I.S(nR);for(var i={video:{},player:{}},r=t(na),o=r.next();!o.done;o=r.next())o=o.value,i.video[o]=n.g[o];if(n.h.R())for(var s in nA)0==n.m%nA[s]&&(i.player[s]=n.h[s]());for(var u in ng)0==n.m%ng[u]&&(i.player[u]=n.h[u]());for(var p in(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(i.video.volume=r.level,i.video.muted=r.muted),cp(n,{type:"update",update:i},n.l),nv)0==n.m%nv[p]&&((i={player:{}}).player[p]=n.h[p](),cp(n,{type:"update",update:i},n.l));n.D&&(n.m+=1),ip(n)}function ip(n){return!!(n.C&&(n.g.duration||n.h.R()))&&(mp(n),n.C=!1,!0)}function mp(n,i){var r={contentId:n.h.Gf(),streamType:n.h.R()?"LIVE":"BUFFERED",contentType:""};n.h.R()||(r.duration=n.g.duration),n.i&&(r.metadata=n.i),jp(n,void 0===i?0:i,r)}function np(n,i,r,o){n.h&&cp(n,{type:"asyncComplete",id:r,error:o},n.l,i)}function cp(n,i,r,o){n.H&&(n=lo(i),o?r.getCastChannel(o).send(n):r.broadcast(n))}function jp(n,i,r){r=void 0===r?null:r;var o={mediaSessionId:0,playbackRate:n.g.playbackRate,playerState:n.s?nU:n.h.yd()?n_:n.g.paused?nF:nO,currentTime:n.g.currentTime,supportedMediaCommands:63,volume:{level:n.g.volume,muted:n.g.muted}};r&&(o.media=r),cp(n,{requestId:void 0===i?0:i,type:"MEDIA_STATUS",status:[o]},n.u)}pa(Oo,$a),(N=Oo.prototype).destroy=function(n){return n&&this.g.Jc(),this.m&&(this.m.release(),this.m=null),n=[],this.h&&(n.push(this.h.destroy()),this.h=null),this.g&&(n.push(this.g.destroy()),this.g=null),this.u=this.l=this.i=null,$a.prototype.release.call(this),Promise.all(n)},N.cc=function(){return this.l},N.Mc=function(){return this.u},N.kf=function(){return this.g.m&&nI},N.Ba=function(){return this.g.Ba()},N.Je=function(){return this.g.Je()},N.cast=function(){var n,i=this;return K(function(r){return 1==r.g?(n=To(i),D(r,i.g.cast(n),2)):i.h?D(r,i.h.Wc(),0):r.return()})},N.kg=function(n){this.g.kg(n)},N.vh=function(){!function(n){if(n.h){var i=n.K();chrome.cast.requestSession(function(r){return Lo(n,i,r)},function(i){return Mo(n,i)})}}(this.g)},N.Jc=function(){this.g.Jc()},N.Jg=function(n,i){i=void 0!==i&&i;var r=this;return K(function(o){if(1==o.g)return n==r.G&&i==r.D?o.return():(r.G=n,r.D=i,r.g.Jc(),D(o,r.g.destroy(),2));r.g=null,r.g=new zo(n,function(){return Po(r)},function(){return Qo(r)},function(n,i){return Ro(r,n,i)},function(){return So(r)},function(){return To(r)},i),r.g.init(),F(o)})},L("shaka.cast.CastProxy",Oo),Oo.prototype.changeReceiverId=Oo.prototype.Jg,Oo.prototype.forceDisconnect=Oo.prototype.Jc,Oo.prototype.suggestDisconnect=Oo.prototype.vh,Oo.prototype.setAppData=Oo.prototype.kg,Oo.prototype.cast=Oo.prototype.cast,Oo.prototype.receiverName=Oo.prototype.Je,Oo.prototype.isCasting=Oo.prototype.Ba,Oo.prototype.canCast=Oo.prototype.kf,Oo.prototype.getPlayer=Oo.prototype.Mc,Oo.prototype.getVideo=Oo.prototype.cc,Oo.prototype.destroy=Oo.prototype.destroy,pa(Zo,$a),(N=Zo.prototype).isConnected=function(){return this.H},N.Ji=function(){return this.s},N.rj=function(n){this.i=n},N.Nh=function(){this.i=null},N.sj=function(n){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=n},N.qj=function(n){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:n}]},N.pj=function(n){this.i||(this.i={}),this.i.artist=n,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},N.destroy=function(){var n,i=this;return K(function(r){if(1==r.g)return i.j&&(i.j.release(),i.j=null),n=[],i.h&&(n.push(i.h.destroy()),i.h=null),i.I&&(i.I.stop(),i.I=null),i.g=null,i.J=null,i.G=null,i.H=!1,i.s=!0,i.l=null,i.u=null,$a.prototype.release.call(i),D(r,Promise.all(n),2);cast.receiver.CastReceiverManager.getInstance().stop(),F(r)})},L("shaka.cast.CastReceiver",Zo),Zo.prototype.destroy=Zo.prototype.destroy,Zo.prototype.setContentArtist=Zo.prototype.pj,Zo.prototype.setContentImage=Zo.prototype.qj,Zo.prototype.setContentTitle=Zo.prototype.sj,Zo.prototype.clearContentMetadata=Zo.prototype.Nh,Zo.prototype.setContentMetadata=Zo.prototype.rj,Zo.prototype.isIdle=Zo.prototype.Ji,Zo.prototype.isConnected=Zo.prototype.isConnected;var nR=.5,nN=5,nU="IDLE",nO="PLAYING",n_="BUFFERING",nF="PAUSED";function sp(n,i,r,o,s){if(o>=s)return null;for(var u=-1,p=-1,y=0;y<r.length;y++)if(r[y].some(function(n){return null!=n&&""!=n.g.trim()})){u=y;break}for(y=r.length-1;0<=y;y--)if(r[y].some(function(n){return null!=n&&""!=n.g.trim()})){p=y;break}if(-1===u||-1===p)return null;for(var A=y=!1,T="white",x="black",C=tp(o,s,y,A,T,x);u<=p;u++){for(var I=r[u],M=-1,N=-1,_=0;_<I.length;_++)if(null!=I[_]&&""!==I[_].g.trim()){M=_;break}for(_=I.length-1;0<=_;_--)if(null!=I[_]&&""!==I[_].g.trim()){N=_;break}if(-1===M||-1===N)I=up(o,s),n.nestedCues.push(I);else{for(;M<=N;M++)if(_=I[M]){var j=_.l,B=_.i,z=_.j,G=_.h;(j!=y||B!=A||z!=T||G!=x)&&(C.payload&&n.nestedCues.push(C),C=tp(o,s,j,B,z,G),y=j,A=B,T=z,x=G),C.payload+=_.g}else C.payload+=" ";C.payload&&n.nestedCues.push(C),u!==p&&(C=up(o,s),n.nestedCues.push(C)),C=tp(o,s,y,A,T,x)}}return n.nestedCues.length?{cue:n,stream:i}:null}function tp(n,i,r,o,s,u){return n=new yc(n,i,""),r&&n.textDecoration.push("underline"),o&&(n.fontStyle="italic"),n.color=s,n.backgroundColor=u,n}function up(n,i){return(n=new yc(n,i,"")).lineBreak=!0,n}function vp(n,i,r,o,s){this.g=n,this.l=i,this.i=r,this.h=o,this.j=s}function wp(n,i){this.i=[],this.g=1,this.h=0,this.C=n,this.u=i,this.j=this.m=!1,this.l="white",this.s="black",xp(this)}function yp(n,i,r){var o="CC"+((n.C<<1|n.u)+1),s=new yc(i,r,"");s.lineInterpretation=1;var u=nZ.get(n.g);return u&&(s.line=u),sp(s,o,n.i,i,r)}function xp(n){Ap(n,0,15),n.g=1}function Bp(n,i,r){if(!(32>r||127<r)){var o="";switch(i){case nV:o=nq.has(r)?nq.get(r):String.fromCharCode(r);break;case nK:o=nW.get(r);break;case nG:n.i[n.g].pop(),o=nX.get(r);break;case nH:n.i[n.g].pop(),o=nY.get(r)}o&&n.i[n.g].push(new vp(o,n.m,n.j,n.s,n.l))}}function Kp(n,i,r,o){if(!(0>r||0>i)){if(i>=r)for(--o;0<=o;o--)n.i[i+o]=n.i[r+o].map(function(n){return n});else for(var s=0;s<o;s++)n.i[i+s]=n.i[r+s].map(function(n){return n})}}function Ap(n,i,r){for(var o=0;o<=r;o++)n.i[i+o]=[]}var nV=0,nK=1,nG=2,nH=3,nq=new Map([[39,""],[42,"\xe1"],[92,"\xe9"],[92,"\xe9"],[94,"\xed"],[95,"\xf3"],[96,"\xfa"],[123,"\xe7"],[124,"\xf7"],[125,"\xd1"],[126,"\xf1"],[127,""]]),nW=new Map([[48,"\xae"],[49,"\xb0"],[50,"\xbd"],[51,"\xbf"],[52,""],[53,"\xa2"],[54,"\xa3"],[55,""],[56,"\xe0"],[57,""],[58,"\xe8"],[59,"\xe2"],[60,"\xea"],[61,"\xee"],[62,"\xf4"],[63,"\xfb"]]),nX=new Map([[32,"\xc1"],[33,"\xc9"],[34,"\xd3"],[35,"\xda"],[36,"\xdc"],[37,"\xfc"],[38,""],[39,"\xa1"],[40,"*"],[41,"'"],[42,""],[43,"\xa9"],[44,""],[45,"\xb7"],[46,""],[47,""],[48,"\xc0"],[49,"\xc2"],[50,"\xc7"],[51,"\xc8"],[52,"\xca"],[53,"\xcb"],[54,"\xeb"],[55,"\xce"],[56,"\xcf"],[57,"\xef"],[58,"\xd4"],[59,"\xd9"],[60,"\xf9"],[61,"\xdb"],[62,"\xab"],[63,"\xbb"]]),nY=new Map([[32,"\xc3"],[33,"\xe3"],[34,"\xcd"],[35,"\xcc"],[36,"\xec"],[37,"\xd2"],[38,"\xf2"],[39,"\xd5"],[40,"\xf5"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\xc4"],[49,"\xe4"],[50,"\xd6"],[51,"\xf6"],[52,"\xdf"],[53,"\xa5"],[54,"\xa4"],[55,""],[56,"\xc5"],[57,"\xe5"],[58,"\xd8"],[59,"\xf8"],[60,""],[61,""],[62,""],[63,""]]),nZ=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Lp(n,i){this.h=nQ,this.s=new wp(n,i),this.i=new wp(n,i),this.g=this.j=new wp(n,i),this.l=0,this.m=null}function Np(n,i,r){n.g=n.i;var o=n.g,s=null;return n.h!==n$&&n.h!==n0&&(s=yp(o,n.l,r),(r=n.i).g=0<r.h?r.h:0,Ap(r,0,15),(r=n.j).g=0<r.h?r.h:0,Ap(r,0,15),o.g=15),n.h=n$,o.h=i,s}function Qp(n){n.h=nJ,n.g=n.j,n.g.h=0}function Sp(n){Sa("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),n.g=n.s,n.h=n0}var nQ=0,nJ=1,n$=3,n0=4,n1="black green blue cyan red yellow magenta black".split(" "),n2="white green blue cyan red yellow magenta white_italics".split(" ");function Vp(n,i){this.K=i,this.N=n,this.L=this.l=!1,this.m=this.s=this.I=this.M=this.J=0,this.H=n5,this.i=[],this.g=this.h=this.j=0,this.G=this.C=!1,this.D="white",this.u="black",Xp(this)}function Xp(n){n.i=[];for(var i=0;16>i;i++)n.i.push(Yp())}function Yp(){for(var n=[],i=0;42>i;i++)n.push(null);return n}function Zp(n,i){$p(n)&&(n.i[n.h][n.g]=new vp(i,n.G,n.C,n.u,n.D),n.g++)}function $p(n){var i=n.g<n.m&&0<=n.g;return n.h<n.s&&0<=n.h&&i}function aq(n,i,r){var o=new yc(n.j,i,"");o.textAlign=n.H===n3?"left":n.H===n4?"right":ek;var s=o.region;switch(n.K&&(s.id+="svc"+n.K),s.id+="win"+n.N,s.height=n.s,s.width=n.m,s.heightUnits=2,s.widthUnits=2,s.viewportAnchorX=n.J,s.viewportAnchorY=n.M,s.viewportAnchorUnits=n.L?eG:2,n.I){case n8:s.regionAnchorX=0,s.regionAnchorY=0;break;case n6:s.regionAnchorX=50,s.regionAnchorY=0;break;case n9:s.regionAnchorX=100,s.regionAnchorY=0;break;case n7:s.regionAnchorX=0,s.regionAnchorY=50;break;case ii:s.regionAnchorX=50,s.regionAnchorY=50;break;case iu:s.regionAnchorX=100,s.regionAnchorY=50;break;case il:s.regionAnchorX=0,s.regionAnchorY=100;break;case id:s.regionAnchorX=50,s.regionAnchorY=100;break;case im:s.regionAnchorX=100,s.regionAnchorY=100}return(r=sp(o,"svc"+r,n.i,n.j,i))&&(n.j=i),r}Vp.prototype.isVisible=function(){return this.l};var n3=0,n4=1,n5=2,n8=0,n6=1,n9=2,n7=3,ii=4,iu=5,il=6,id=7,im=8;function mq(){this.i=[],this.h=null,this.g=0}function oq(n){this.g=0,this.h=n}function pq(n){if(!n.xa())throw new P(2,2,3e3);return n.h[n.g++]}function qq(n){this.i=n,this.h=[null,null,null,null,null,null,null,null],this.g=null}function sq(n,i){for(var r=[],o=0;8>o;o++)1==(1&i)&&n.h[o]&&r.push(o),i>>=1;return r}function tq(n,i,r){var o=null;i=t(sq(n,i));for(var s=i.next();!s.done;s=i.next()){s=s.value;var u=n.h[s];u.isVisible()&&(o=aq(u,r,n.i)),n.h[s]=null}return o}function uq(n){n.g=null,n.h=[null,null,null,null,null,null,null,null]}function vq(n,i,r){var o={0:0,1:0,2:1,3:1};return iy[(n=o[n])<<2|(i=o[i])<<1|(r=o[r])]}oq.prototype.xa=function(){return this.g<this.h.length},oq.prototype.Ga=function(){return this.g},oq.prototype.skip=function(n){if(this.g+n>this.h.length)throw new P(2,2,3e3);this.g+=n};var iv=new Map([[32," "],[33,"\xa0"],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),iy="black blue green cyan red magenta yellow white".split(" ");function yq(){this.h=[],this.g=[],this.i=new mq,this.l=0,this.m=new Map([["CC1",new Lp(0,0)],["CC2",new Lp(0,1)],["CC3",new Lp(1,0)],["CC4",new Lp(1,1)]]),this.u=this.s=0,this.j=new Map,this.D=!0,this.C=new Set,zq(this)}function zq(n){n.s=0,n.u=0;for(var i=t(n.m.values()),r=i.next();!r.done;r=i.next())(r=r.value).h=nQ,r.g=r.j,r.m=null,xp(r.i),xp(r.j),xp(r.s);n.D=!0}function Cq(n){for(var i=0;n;)i^=1&n,n>>=1;return 1===i}function Dq(n){for(var i=[],r=n,o=n=0;o<r.length;)2==n&&3==r[o]?(n=0,(r=[].concat(w(r))).splice(o,1),r=new Uint8Array(r)):0==r[o]?n++:n=0,o++;for(o=0,n=r;o<n.length;){for(r=0;255==n[o];)r+=255,o++;r+=n[o++];for(var s=0;255==n[o];)s+=255,o++;s+=n[o++],4==r&&i.push(n.subarray(o,o+s)),o+=s}return i}function Eq(){this.j=new Map,this.i=this.h=0,this.g=ib}yq.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var n=this.i;n.i=[],n.h=[],n.g=0,zq(this),n=t(this.j.values());for(var i=n.next();!i.done;i=n.next())uq(i.value)},yq.prototype.extract=function(n,i){if(this.D){for(var r=t(this.m.values()),o=r.next();!o.done;o=r.next())o.value.l=i;this.D=!1}if(!(8>(n=new Zf(n,0)).getLength())&&181===n.ra()&&49===n.Ua()&&1195456820===n.O()&&3===n.ra()&&0!=(64&(r=n.ra())))for(r&=31,n.skip(1),o=0;o<r;o++){var s=n.ra(),u=(4&s)>>2,p=n.ra(),y=n.ra();u&&(0==(s&=3)||1===s?this.h.push({pts:i,type:s,jb:p,Jb:y,order:this.h.length}):(this.g.push({pts:i,type:s,value:p,order:this.g.length}),this.g.push({pts:i,type:2,value:y,order:this.g.length})))}},yq.prototype.decode=function(){function a(n,i){return n.pts-i.pts||n.order-i.order}var n,i,r=[];this.h.sort(a),this.g.sort(a);for(var o=t(this.h),s=o.next();!s.done;s=o.next())(s=function(n,i){var r=i.type;if(16==(112&i.jb)){var o=i.jb>>3&1;0===r?n.s=o:n.u=o}if(o="CC"+((r<<1|(r?n.u:n.s))+1),r=n.m.get(o),255===i.jb&&255===i.Jb||!i.jb&&!i.Jb||!Cq(i.jb)||!Cq(i.Jb))return 45<=++n.l&&zq(n),null;if(n.l=0,i.jb&=127,i.Jb&=127,!i.jb&&!i.Jb)return null;if(n.C.add(o),n=null,16==(112&i.jb))e:{if(o=i.jb,n=i.Jb,r.m===(o<<8|n))r.m=null;else if(r.m=o<<8|n,16==(240&o)&&64==(192&n)){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&o)<<1|n>>5&1];var s=(30&n)>>1;o="white";var u=!1;7>s?o=n2[s]:7===s&&(u=!0),n=1==(1&n),r.h!==n0&&(s=r.g,r.h===n$&&i!==s.g&&(r=1+i-s.h,Kp(s,r,1+s.g-s.h,s.h),Ap(s,0,r-1),Ap(s,i+1,15-i)),s.g=i,s.m=n,s.j=u,s.l=o,s.s="black")}else if(17==(247&o)&&32==(240&n))r.g.m=!1,r.g.j=!1,r.g.l="white",Bp(r.g,nV,32),o=!1,"white_italics"===(i=n2[(14&n)>>1])&&(i="white",o=!0),r.g.m=1==(1&n),r.g.j=o,r.g.l=i;else if(16==(247&o)&&32==(240&n)||23==(247&o)&&45==(255&n))i="black",0==(7&o)&&(i=n1[(14&n)>>1]),r.g.s=i;else if(17==(247&o)&&48==(240&n))Bp(r.g,nK,n);else if(18==(246&o)&&32==(224&n))Bp(r.g,1&o?nH:nG,n);else if(20==(246&o)&&32==(240&n)){switch(n=i.pts,o=null,i.Jb){case 32:Qp(r);break;case 33:(r=r.g).i[r.g].pop();break;case 37:o=Np(r,2,n);break;case 38:o=Np(r,3,n);break;case 39:o=Np(r,4,n);break;case 40:Bp(r.g,nV,32);break;case 41:r.h=2,r.g=r.i,r.g.h=0,r.l=n;break;case 42:xp(r.s),Sp(r);break;case 43:Sp(r);break;case 44:i=r.i,o=null,r.h!==n0&&(o=yp(i,r.l,n)),Ap(i,0,15);break;case 45:i=r.g,r.h!==n$?o=null:(o=yp(i,r.l,n),u=i.g-i.h+1,Kp(i,u-1,u,i.h),Ap(i,0,u-1),Ap(i,i.g,15-i.g),r.l=n);break;case 46:Ap(r.j,0,15);break;case 47:i=null,r.h!==n0&&(i=yp(r.i,r.l,n)),o=r.j,r.j=r.i,r.i=o,Qp(r),r.l=n,o=i}n=o;break e}n=null}else o=i.Jb,Bp(r.g,nV,i.jb),Bp(r.g,nV,o);return n}(this,s.value))&&r.push(s);for(s=(o=t(this.g)).next();!s.done;s=o.next())n=this.i,3===(i=s.value).type?(n.g=2*(63&i.value)-1,n.h=[]):n.h&&(0<n.g&&(n.h.push(i),n.g--),0===n.g&&(n.i.push(new oq(n.h)),n.h=null,n.g=0));for(s=(o=t(this.i.i)).next();!s.done;s=o.next())s=function(n,i){var r=[];try{for(;i.xa();){var o=pq(i).value,s=(224&o)>>5,u=31&o;if(7===s&&0!=u&&(s=63&pq(i).value),0!=s){n.C.add("svc"+s),n.j.has(s)||n.j.set(s,new qq(s));for(var p=n.j.get(s),y=i.Ga();i.Ga()-y<u;){s=i;var A=pq(s),T=A.value,x=A.pts;if(16===T){var C=pq(s);T=T<<16|C.value}if(0<=T&&31>=T){var I=x;if(p.g){var M=p.g;switch(s=null,T){case 8:!$p(M)||0>=M.g&&0>=M.h||(0>=M.g?(M.g=M.m-1,M.h--):M.g--,M.i[M.h][M.g]=null);break;case 13:if(M.isVisible()&&(s=aq(M,I,p.i)),M.h+1>=M.s){I=M;for(var N=0,_=1;16>_;_++,N++)I.i[N]=I.i[_];for(_=0;1>_;_++,N++)I.i[N]=Yp()}else M.h++;M.g=0;break;case 14:M.isVisible()&&(s=aq(M,I,p.i)),M.i[M.h]=Yp(),M.g=0;break;case 12:M.isVisible()&&(s=aq(M,I,p.i)),Xp(M),(I=M).h=0,I.g=0}var j=s}else j=null}else if(128<=T&&159>=T)j=function(n,i,r,o){if(128<=r&&135>=r)o=7&r,n.h[o]&&(n.g=n.h[o]);else{if(136===r){r=pq(i).value,i=null,r=t(sq(n,r));for(var s=r.next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()&&(i=aq(s,o,n.i)),Xp(s);return i}if(137===r)for(r=(i=t(sq(n,i=pq(i).value))).next();!r.done;r=i.next())(r=n.h[r.value]).isVisible()||(r.j=o),r.l=!0;else{if(138===r){for(r=pq(i).value,i=null,s=(r=t(sq(n,r))).next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()&&(i=aq(s,o,n.i)),s.l=!1;return i}if(139===r){for(r=pq(i).value,i=null,s=(r=t(sq(n,r))).next();!s.done;s=r.next())(s=n.h[s.value]).isVisible()?i=aq(s,o,n.i):s.j=o,s.l=!s.l;return i}if(140===r)return tq(n,i=pq(i).value,o);if(143===r)return o=tq(n,255,o),uq(n),o;if(144===r)i.skip(1),o=pq(i).value,n.g&&(n.g.C=0<(128&o),n.g.G=0<(64&o));else if(145===r)o=pq(i).value,r=pq(i).value,i.skip(1),n.g&&(i=vq((48&r)>>4,(12&r)>>2,3&r),n.g.D=vq((48&o)>>4,(12&o)>>2,3&o),n.g.u=i);else if(146===r)o=pq(i).value,i=pq(i).value,n.g&&((n=n.g).h=15&o,n.g=63&i);else if(151===r)i.skip(1),i.skip(1),o=pq(i).value,i.skip(1),n.g&&(n.g.H=3&o);else if(152<=r&&159>=r){if(r=(15&r)-8,!(s=null!==n.h[r])){var u=new Vp(r,n.i);u.j=o,n.h[r]=u}o=pq(i).value,u=pq(i).value;var p=pq(i).value,y=pq(i).value,A=pq(i).value;i=pq(i).value,s&&0==(7&i)||((i=n.h[r]).h=0,i.g=0,i.G=!1,i.C=!1,i.D="white",i.u="black"),(i=n.h[r]).l=0<(32&o),i.M=127&u,i.J=p,i.I=(240&y)>>4,i.L=0<(128&u),i.s=(15&y)+1,i.m=(63&A)+1,n.g=n.h[r]}}}return null}(p,s,T,x);else{if(4096<=T&&4127>=T)I=255&T,8<=I&&15>=I?s.skip(1):16<=I&&23>=I?s.skip(2):24<=I&&31>=I&&s.skip(3);else if(4224<=T&&4255>=T)I=255&T,128<=I&&135>=I?s.skip(4):136<=I&&143>=I&&s.skip(5);else if(32<=T&&127>=T)s=T,p.g&&(127===s?Zp(p.g,""):Zp(p.g,String.fromCharCode(s)));else if(160<=T&&255>=T)p.g&&Zp(p.g,String.fromCharCode(T));else if(4128<=T&&4223>=T){if(s=255&T,p.g){if(iv.has(s)){var B=iv.get(s);Zp(p.g,B)}else Zp(p.g,"_")}}else 4256<=T&&4351>=T&&p.g&&(160!=(255&T)?Zp(p.g,"_"):Zp(p.g,"[CC]"));j=null}(s=j)&&r.push(s)}}}}catch(n){if(n instanceof P&&3e3===n.code)Sa("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw n}return r}(this,s.value),r.push.apply(r,w(s));return this.i.i=[],this.h=[],this.g=[],r},yq.prototype.getStreams=function(){return Array.from(this.C)},L("shaka.cea.CeaDecoder",yq),eT=function(){return new yq},Eq.prototype.init=function(n){function b(n){(n=n.name)in iS&&(i.g=iS[n])}var i=this,r=[],o=[];if((new bg).box("moov",gg).box("mvex",gg).T("trex",function(n){var r=n.reader;r.skip(4),r.skip(4),n=r.O(),r=r.O(),i.h=n,i.i=r}).box("trak",gg).T("tkhd",function(n){n=hi(n.reader,n.version),r.push(n.trackId)}).box("mdia",gg).T("mdhd",function(n){n=fi(n.reader,n.version),o.push(n.timescale)}).box("minf",gg).box("stbl",gg).T("stsd",ig).box("avc1",b).box("avc3",b).box("hev1",b).box("hvc1",b).box("dvh1",b).box("dvhe",b).box("encv",jg).box("sinf",gg).box("frma",function(n){(n=li(n.reader).wa)in iS&&(i.g=iS[n])}).parse(n,!0),!r.length||!o.length||r.length!=o.length)throw new P(2,2,2010);this.g==ib&&Ra("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(n,r){i.j.set(n,o[r])})},Eq.prototype.parse=function(n){var i=this;if(this.g==ib)return[];var r=[],o=this.h,s=this.i,u=0,p=[],y=null,A=9e4;return(new bg).box("moof",function(n){u=n.start,p=[],gg(n)}).box("traf",gg).T("trun",function(n){n=gi(n.reader,n.version,n.flags),p.push(n)}).T("tfhd",function(n){o=(n=di(n.reader,n.flags)).Og||i.h,s=n.Qh||i.i,n=n.trackId,i.j.has(n)&&(A=i.j.get(n))}).T("tfdt",function(n){y=ei(n.reader,n.version).baseMediaDecodeTime}).box("mdat",function(n){if(null===y)throw Ra("Unable to find base media decode time for CEA captions!"),new P(2,2,2010);(function(n,i,r,o,s,u,p,y,A){var T=0,x=u,C=y.map(function(n){return n.lh});for((C=[].concat.apply([],w(C))).length&&(x=C[0].sampleSize||u),i.skip(p+y[0].Ph);i.xa();){p=i.O();var I=i.ra(),M=null;switch(M=!1,y=1,n.g){case iw:M=6==(M=31&I);break;case iT:y=2,i.skip(1),M=39==(M=I>>1&63)||40==M;break;default:return}if(M)for(I=0,T<C.length&&(I=C[T].Ke||0),I=(r+I)/o,M=(y=t(Dq(i.Sb(p-y)))).next();!M.done;M=y.next())A.push({packet:M.value,pts:I});else try{i.skip(p-y)}catch(n){break}0==(x-=p+4)&&(r=T<C.length?r+(C[T].gg||s):r+s,x=++T<C.length&&C[T].sampleSize||u)}})(i,n.reader,y,A,o,s,u-n.start-8,p,r)}).parse(n,!1),r},L("shaka.cea.Mp4CeaParser",Eq);var ib=0,iw=1,iT=2,iS={avc1:1,avc3:1,hev1:2,hvc1:2,dvh1:2,dvhe:2};function Kq(){}function Lq(i,r,o){var s=function(n){var i=[];n=t(n);for(var r=n.next();!r.done;r=n.next())(r=function(n){var i=n.getAttribute("schemeIdUri"),r=Bg(n,"urn:mpeg:cenc:2013","default_KID"),o=zg(n,"urn:mpeg:cenc:2013","pssh").map(Dg);if(!i)return null;if(i=i.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new P(2,4,4009);var s=[];try{s=o.map(function(n){return{initDataType:"cenc",initData:qg(n),keyId:null}})}catch(n){throw new P(2,4,4007)}return{node:n,Jd:i,keyId:r,init:0<s.length?s:null}}(r.value))&&i.push(r);return i}(i),u=null;i=[];var p=[],y=null,A=new Set(s.map(function(n){return n.keyId}));if(A.delete(null),1<A.size)throw new P(2,4,4010);if(!r){if(1<(p=s.filter(function(n){return"urn:mpeg:dash:sea:2012"==n.Jd})).length)throw new P(2,4,4050);p.length&&(y=function(i){if(!n.crypto||!n.crypto.subtle)throw Ra("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new P(2,4,4042);var r=yg(i.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!r||"urn:mpeg:dash:sea:aes128-cbc:2013"!=r.getAttribute("schemeIdUri")||!(r=yg(i.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"))||(i=r.getAttribute("IV"),r=r.getAttribute("keyUriTemplate"),!i||!r))throw new P(2,4,4051);if(16!=(i=rg(i.substr(2))).byteLength)throw new P(2,4,4048);return{Qi:r,iv:i}}(p[0])),(p=s.filter(function(n){return"urn:mpeg:dash:mp4protection:2011"==n.Jd?(u=n.init||u,!1):"urn:mpeg:dash:sea:2012"!=n.Jd})).length&&0==(i=function(n,i,r,o){var s=[];i=t(i);for(var u=i.next();!u.done;u=i.next()){var p,y=r[(u=u.value).Jd];if(y){if(p=yg(u.node,"urn:microsoft:playready","pro")){p=qg(p.textContent);var A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:vg(p,A,new Set,0),initDataType:"cenc",keyId:u.keyId}]}else p=null;if(A=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===u.Jd){if(0==(A=o).size)A=null;else{var T=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);A=[{initData:vg(new Uint8Array([]),T,A,1),initDataType:"cenc",keyId:u.keyId}]}}p=Ab(y,u.init||n||p||A),(y=iI.get(y))&&(p.licenseServerUri=y(u)),s.push(p)}}return s}(u,p,o,A)).length&&(i=[Ab("",u)])}if(s.length&&!y&&(r||!p.length))for(i=[],o=(r=t(Object.values(o))).next();!o.done;o=r.next())"org.w3.clearkey"!=(o=o.value)&&i.push(Ab(o,u));if(A=Array.from(A)[0]||null)for(o=(r=t(i)).next();!o.done;o=r.next())for(s=(o=t(o.value.initData)).next();!s.done;s=o.next())s.value.keyId=A;return{Ng:A,xk:u,drmInfos:i,gf:y,Rg:!0}}function Sq(n){var i=yg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=yg(n.node,"urn:microsoft:playready","pro"))&&(n=(function(n){var i=0,r=pc(n),o=r.getUint32(i,!0);if(o!=n.byteLength)return[];e:{for(n=i+6,i=[];n<r.byteLength-1;){o=r.getUint16(n,!0),n+=2;var s=r.getUint16(n,!0);if(n+=2,0!=(1&s)||s+n>r.byteLength){r=[];break e}var u=lc(r,n,s);i.push({type:o,value:u}),n+=s}r=i}return r})(n=qg(n.textContent)).filter(function(n){return n.type===iC})[0])&&(n=Pg(n=Uf(n.value,!0),"WRMHEADER"))?function(n){n=t(n.getElementsByTagName("DATA"));for(var i=n.next();!i.done;i=n.next()){i=t(i.value.childNodes);for(var r=i.next();!r.done;r=i.next())if((r=r.value)instanceof Element&&"LA_URL"==r.tagName)return r.textContent}return""}(n):""}eA["video/mp4"]=function(){return new Eq},Kq.prototype.init=function(){},Kq.prototype.parse=function(n){var i=[];if(!Ci(n=lc(n)))return i;var r=(n=(new wi).parse(n)).sd(),o=n.le();switch(n=[],r.video){case"avc":n.push(6);break;case"hvc":n.push(39),n.push(40)}if(!n.length)return i;for(o=(r=t(o)).next();!o.done;o=r.next())if(o=o.value,n.includes(o.type)&&null!=o.time)for(var s=t(Dq(o.data)),u=s.next();!u.done;u=s.next())i.push({packet:u.value,pts:o.time});return i},L("shaka.cea.TsCeaParser",Kq),eA["video/mp2t"]=function(){return new Kq};var iC=1,iI=(new Map).set("com.widevine.alpha",function(n){var i=yg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=yg(n.node,"urn:microsoft","laurl"))&&n.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",Sq).set("com.microsoft.playready.recommendation",Sq).set("com.microsoft.playready.software",Sq).set("com.microsoft.playready.hardware",Sq).set("org.w3.clearkey",function(n){var i=yg(n.node,"https://dashif.org/CPS","Laurl");return i&&i.textContent?i.textContent:(n=yg(n.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===n.getAttribute("Lic_type")&&n.textContent?n.textContent:""});function Wq(i,r,o,s,u,p){var y={RepresentationID:r,Number:o,SubNumber:s,Bandwidth:u,Time:p};return i.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(i,r,o,s){if("$$"==i)return"$";var u=y[r];if(null==u)return i;switch("RepresentationID"==r&&o&&(o=void 0),"Time"==r&&"bigint"!=typeof u&&(.2<=Math.abs(u-Math.round(u))&&Ra("Calculated $Time$ values must be close to integers"),u=Math.round(u)),s){case void 0:case"d":case"i":case"u":default:i=u.toString();break;case"o":i=u.toString(8);break;case"x":i=u.toString(16);break;case"X":i=u.toString(16).toUpperCase()}return Array(Math.max(0,(o=n.parseInt(o,10)||1)-i.length)+1).join("0")+i})}function Xq(n,i){var r=Yq(n,i,"timescale"),o=1;r&&(o=Kg(r)||1);var s=Yq(n,i,"duration");r=Kg(s||""),"image"==n.P.contentType&&(r=Mg(s||"")),r&&(r/=o);var u=Yq(n,i,"startNumber");s=Number(Yq(n,i,"presentationTimeOffset"))||0;var p=Lg(u||"");(null==u||null==p)&&(p=1);var y=Zq(n,i,"SegmentTimeline");if(i=null,y){i=o,n=n.ma.duration||1/0,u=p,y=xg(y,"S");for(var A=[],T=-s,x=0;x<y.length;++x){var C=y[x],I=y[x+1],M=Fg(C,"t",Lg),N=Fg(C,"d",Lg),_=Fg(C,"r",Jg);if(C=Fg(C,"k",Jg)||0,null!=M&&(M-=s),!N)break;if(M=null!=M?M:T,0>(_=_||0)){if(I){if(null==(I=Fg(I,"t",Lg))||M>=I)break;_=Math.ceil((I-M)/N)-1}else{if(1/0==n||M/i>=n)break;_=Math.ceil((n*i-M)/N)-1}}for(0<A.length&&M!=T&&(A[A.length-1].end=M/i),I=0;I<=_;++I)T=M+N,A.push({start:M/i,end:T/i,zg:M,Bb:C,nj:A.length+u}),M=T}i=A}return{timescale:o,Pa:r,Nd:p,Tb:s/o||0,yg:s,timeline:i}}function $q(n,i){return[i(n.P),i(n.Ea),i(n.Ka)].filter(zd)}function Yq(n,i,r){i=$q(n,i),n=null,i=t(i);for(var o=i.next();!o.done&&!(n=o.value.getAttribute(r));o=i.next());return n}function Zq(n,i,r){i=$q(n,i),n=null,i=t(i);for(var o=i.next();!o.done&&!(n=wg(o.value,r));o=i.next());return n}function er(n){this.h=pc(n),this.g=new Zf(this.h,0)}function fr(n){var i=gr(n);if(7<i.length)throw new P(2,3,3002);var r=0;i=t(i);for(var o=i.next();!o.done;o=i.next())r=256*r+o.value;i=gr(n);e:{o=t(iD);for(var s=o.next();!s.done;s=o.next())if(jc(i,new Uint8Array(s.value))){o=!0;break e}o=!1}if(o)i=n.h.byteLength-n.g.Ga();else{if(8==i.length&&224&i[1])throw new P(2,3,3001);for(s=o=0;s<i.length;s++){var u=i[s];o=0==s?u&(1<<8-i.length)-1:256*o+u}i=o}return i=n.g.Ga()+i<=n.h.byteLength?i:n.h.byteLength-n.g.Ga(),o=pc(n.h,n.g.Ga(),i),n.g.skip(i),new ir(r,o)}function gr(n){var i=n.g.Ga(),r=n.g.ra();if(0==r)throw new P(2,3,3002);return r=8-Math.floor(Math.log2(r)),n.g.skip(r-1),lc(n.h,i,r)}er.prototype.xa=function(){return this.g.xa()};var iD=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function ir(n,i){this.id=n,this.g=i}function jr(n){if(8<n.g.byteLength)throw new P(2,3,3002);if(8==n.g.byteLength&&224&n.g.getUint8(0))throw new P(2,3,3001);for(var i=0,r=0;r<n.g.byteLength;r++)i=256*i+n.g.getUint8(r);return i}function mr(n,i,r){if(!(i=Zq(n,i,"Initialization")))return null;var o=n.P.zb(),s=i.getAttribute("sourceURL");s&&(o=zb(o,[s])),s=0;var u=null;return(i=Fg(i,"range",Ig))&&(s=i.start,u=i.end),new Nh(function(){return o},s,u,nr(n),null,null,r)}function sr(n,i,r,o,s,u,p){var y,A,T,x,C,I,M,N,_,j,B,z,G,H,q;return K(function(Y){if(1==Y.g)return y=n.presentationTimeline,A=!n.Yb||!n.ma.Mf,T=n.ma.start,x=n.ma.duration,C=n.P.mimeType.split("/")[1],M=null,N=[(I=i)(o,s,u,!1),"webm"==C?I(r.ba(),r.hb,r.Na,!0):null],I=null,D(Y,Promise.all(N),2);if(j=(_=Y.h)[0],B=_[1]||null,z=null,G=T-p,H=T,q=x?T+x:1/0,"mp4"==C)var Q=function(n,i,r,o,s,u,p){var y,A=(new bg).T("sidx",function(n){y=function(n,i,r,o,s,u,p){var y=[];p.reader.skip(4);var A=p.reader.O();if(0==A)throw new P(2,3,3005);if(0==p.version)var T=p.reader.O(),x=p.reader.O();else T=p.reader.Uc(),x=p.reader.Uc();p.reader.skip(2);var C=p.reader.Ua();for(n=n+p.size+x,x=0;x<C;x++){var I=p.reader.O(),M=(2147483648&I)>>>31;I&=2147483647;var N=p.reader.O();if(p.reader.skip(4),1==M)throw new P(2,3,3006);y.push(new Ph(T/A+r,(T+N)/A+r,function(){return u},n,n+I-1,i,r,o,s)),T+=N,n+=I}return p.parser.stop(),y}(i,o,s,u,p,r,n)});if(n&&A.parse(n),y)return y;throw new P(2,3,3004)}(j,s,o,r,G,H,q);else{if(440786851!=fr(Q=new er(B)).id)throw new P(2,3,3008);var J=fr(Q);if(408125543!=J.id)throw new P(2,3,3009);Q=J.g.byteOffset,J=new er(J.g);for(var $=null;J.xa();){var ea=fr(J);if(357149030==ea.id){$=ea;break}}if(!$)throw new P(2,3,3010);for(J=null,$=new er($.g),ea=1e6;$.xa();){var es=fr($);if(2807729==es.id)ea=jr(es);else if(17545==es.id){if(4==es.g.byteLength)J=es.g.getFloat32(0);else if(8==es.g.byteLength)J=es.g.getFloat64(0);else throw new P(2,3,3003)}}if(null==J)throw new P(2,3,3011);if(J*=$=ea/1e9,475249515!=(ea=fr(new er(j))).id)throw new P(2,3,3007);Q=function(n,i,r,o,s,u,p,y,A){function l(){return s}var T=[];n=new er(n.g);for(var x=null,C=null;n.xa();){var I=fr(n);if(187==I.id){var M=function(n){var i=new er(n.g);if(179!=(n=fr(i)).id)throw new P(2,3,3013);if(n=jr(n),183!=(i=fr(i)).id)throw new P(2,3,3012);i=new er(i.g);for(var r=0;i.xa();){var o=fr(i);if(241==o.id){r=jr(o);break}}return{wj:n,cj:r}}(I);M&&(I=r*M.wj,M=i+M.cj,null!=x&&T.push(new Ph(x+p,I+p,l,C,M-1,u,p,y,A)),x=I,C=M)}}return null!=x&&T.push(new Ph(x+p,o+p,l,C,null,u,p,y,A)),T}(ea,Q,$,J,o,r,G,H,q)}return z=Q,y.Dd(z),M=new Oj(z),A&&M.Ic(H,q,!0),Y.return(M)})}function pr(n){return n.Ld}function rr(n){var i=Zq(n,pr,"RepresentationIndex");return n=Ig((n=Yq(n,pr,"indexRange"))||""),i&&(n=Fg(i,"range",Ig,n)),n}function tr(n,i){var r=n.P.mimeType.split("/")[1];if(n.P.contentType!=eh&&"mp4"!=r&&"webm"!=r)throw new P(2,4,4006);if("webm"==r&&!i)throw new P(2,4,4005)}function nr(n){var i=n.P;return{bandwidth:n.bandwidth,audioSamplingRate:i.audioSamplingRate,codecs:i.codecs,contentType:i.contentType,frameRate:i.frameRate||null,height:i.height||null,mimeType:i.mimeType,channelsCount:i.De,pixelAspectRatio:i.pixelAspectRatio||null,width:i.width||null}}function vr(n){return n.fc}function Gr(n){return n.Md}function Fr(n,i,r,o,s,u,p,y,A,T){Oj.call(this,[]),this.h=n,this.H=i,this.D=r,this.G=o,this.i=s,this.l=u,this.u=p,this.C=A,this.I=T,y&&Hr(this)}function Er(n,i,r,o,s,u){if(n.u=u,n.h){r=n.h.timeline,n.h.Sc=i.Sc;var p=r[r.length-1];0<(i=i.timeline.filter(function(n){return n.start>=p.end})).length&&n.h.timeline.push.apply(n.h.timeline,w(i)),n.l!==o&&(n.l=o)}else n.h=i,n.i=r,n.l=o;s&&Hr(n)}function Hr(n){if(!n.s){for(var i=n.h.timeline;i.length;)if(i[i.length-1].start>=n.l)i.pop();else break;n.yb(n.i)}}function Ir(n,i,r,o,s,u,p){return n=Wq(n,i,r,u,o||null,s),zb(p(),[n]).map(function(n){return n.toString()})}function Jr(n){this.s=null,this.C=n,this.I=new uf,this.j=[],this.h=null,this.m=[],this.D=null,this.H=[],this.G=300,this.l=new Map,this.i=new Map,this.g=null,this.u="UNKNOWN"}function Kr(n,i){var r,o,s,u,p;return K(function(y){var A,T,x,C;return 1==y.g?(r=Af(zb(n.j,[function(n,i){if(!n.m.length)return i;i=new fb(i);var r=n.D||n.m[0],o=Math.round(n.C.getBandwidthEstimate()),s=i.g;return"DASH"==n.u?(s.add("_DASH_pathway",r),s.add("_DASH_throughput",String(o))):"HLS"==n.u&&(s.add("_HLS_pathway",r),s.add("_HLS_throughput",String(o))),wb(s),s.rd&&kb(i,s),i.toString()}(n,i)]),n.s.retryParameters),o=n.C.networkingEngine.request(8,r),vf(n.I,o),ta(y,2),D(y,o.promise,4)):2!=y.g?(1==(u=JSON.parse(Tf((s=y.h).data))).VERSION&&(A=n,T=u,x=s.uri,null!=A.g&&(A.g.stop(),A.g=null),C=T["RELOAD-URI"]||x,A.g=new Dd(function(){Kr(A,C)}),(x=T.TTL)&&(A.G=x),A.g.S(A.G),A.m=T["PATHWAY-PRIORITY"]||[],A.H=T["PATHWAY-CLONES"]||[]),va(y,0)):(p=wa(y))&&7001==p.code?y.return():void(null!=n.g&&(n.g.stop(),n.g=null),n.g=new Dd(function(){Kr(n,i)}),n.g.S(n.G),F(y))})}function Nr(n,i,r,o){var s=n.l.get(i);s||(s=new Map),s.set(r,o),n.l.set(i,s)}function Or(n,i,r){r=void 0!==r&&r,i=n.l.get(i)||new Map;for(var o=[],s={},u=t(n.m),p=u.next();!p.done;s={lc:s.lc},p=u.next())if(s.lc=p.value,p=i.get(s.lc))o.push({cg:s.lc,location:p});else if(p=n.H.find(function(n){return function(i){return i.Nj==n.lc}}(s))){var y=i.get(p["BASE-ID"]);y&&(p["URI-REPLACEMENT"].Dh?(hb(y=new fb(y),p["URI-REPLACEMENT"].Dh),o.push({cg:s.lc,location:y.toString()})):o.push({cg:s.lc,location:y}))}for(s=Date.now(),p=(u=t(n.i.keys())).next();!p.done;p=u.next())p=p.value,s>(y=n.i.get(p))&&n.i.delete(p);if((o=o.filter(function(i){for(var r=t(n.i.keys()),o=r.next();!o.done;o=r.next())if(o.value.includes(new fb(i.location).Kb))return!1;return!0})).length&&(n.D=o[0].cg),!(o=o.map(function(n){return n.location})).length&&n.h)for(p=(s=t(n.h.split(","))).next();!p.done;p=s.next())(u=i.get(p.value))&&(n.D=n.h,o.push(u));if(!o.length)for(s=(i=t(i.values())).next();!s.done;s=i.next())o.push(s.value);return r?o:zb(n.j,o)}function Pr(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.m=!1,this.s=new Set}function Qr(n,i){var r=[],o=[],s=[],u=[];n=t(n);for(var p=n.next();!p.done;p=n.next()){var y=p.value;p=new Map(y.audioStreams.map(function(n){return[Rr(n),n]}));var A=new Map(y.videoStreams.map(function(n){return[Sr(n),n]})),T=new Map(y.textStreams.map(function(n){return[Tr(n),n]}));if(y=new Map(y.imageStreams.map(function(n){return[Ur(n),n]})),i){var x=Vr(eh);T.set(Tr(x),x),x=Vr("image"),y.set(Ur(x),x)}r.push(p),o.push(A),s.push(T),u.push(y)}return{Fg:r,Ah:o,wh:s,Yg:u}}function as(n){var i,r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea,es,ec;return K(function(ed){switch(ed.g){case 1:if(i=ep,1==n.length)return ed.return(n[0]);for(r=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.U}).map(function(n){return[Rr(n),n]}))}),o=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.ia}).map(function(n){return[Sr(n),n]}))}),s=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.Da}).map(function(n){return[Tr(n),n]}))}),u=n.map(function(n){return new Map(n.filter(function(n){return n.type===i.cf}).map(function(n){return[Ur(n),n]}))}),y=(p=t(s)).next();!y.done;y=p.next())A=y.value,T=bs(i.Da),A.set(Tr(T),T);for(C=(x=t(u)).next();!C.done;C=x.next())I=C.value,M=bs(i.cf),I.set(Ur(M),M);return D(ed,Wr(N=new Pr,[],r,0,cs,ds),2);case 2:return _=ed.h,D(ed,Wr(N,[],o,0,cs,ds),3);case 3:return j=ed.h,D(ed,Wr(N,[],s,0,cs,ds),4);case 4:return B=ed.h,D(ed,Wr(N,[],u,0,cs,ds),5);case 5:if(z=ed.h,G=0,j.length&&_.length)for(Q=(Y=t(_)).next();!Q.done;Q=Y.next())for(J=Q.value,ea=($=t(j)).next();!ea.done;ea=$.next())es=ea.value,ec=G++,es.variantIds.push(ec),J.variantIds.push(ec);else for(q=(H=t(j.concat(_))).next();!q.done;q=H.next())q.value.variantIds=[G++];return ed.return(j.concat(_).concat(B).concat(z))}})}function Wr(n,i,r,o,s,u){var p,y,A,T,x,C,I,M,N,_,j,B,z,G;return K(function(H){switch(H.g){case 1:for(y=0,p=[];y<o;y++)p.push(new Set);for(A=o;A<r.length;A++)p.push(new Set(r[A].values()));x=(T=t(i)).next();case 2:var q,Y,Q,J,$,ea;if(x.done){H.F(4);break}return D(H,(q=n,Y=x.value,Q=r,J=o,$=u,ea=p,K(function(n){return 1==n.g?(is(q,Q,Y),Y.matchedStreams?Y.segmentIndex?D(n,js(Y,J),2):n.F(2):n.return(!1)):(ks(Y,J,$,ea),n.return(!0))})),5);case 5:if(!H.h)throw new P(2,4,4037);x=T.next(),H.F(2);break;case 4:for(I=(C=t(p)).next();!I.done;I=C.next())for(N=(M=t(I.value)).next();!N.done;N=M.next())(_=function(n,i,r,o,s,u){if(gs(i))return null;var p=o(i);return(is(n,r,p),p.createSegmentIndex&&(p.createSegmentIndex=function(){return K(function(n){return p.segmentIndex?n.F(0):(p.segmentIndex=new Sj,D(n,js(p,0),0))})}),p.matchedStreams&&p.matchedStreams.length)?(ks(p,0,s,u),p):null}(n,N.value,r,s,u,p))&&i.push(_);for(I=(j=t(p)).next();!I.done;I=j.next())for(B=I.value,z={},N=(G=t(B)).next();!N.done;z={Wd:z.Wd},N=G.next())if(z.Wd=N.value,!gs(z.Wd)&&i.some(function(i){return function(r){return hs(n,i.Wd,r)}}(z)))throw new P(2,4,4037);return H.return(i)}})}function js(n,i){var r,o,s,u,p,y,A;return K(function(T){if(1==T.g){for(r=[],u=(s=t(o=n.matchedStreams)).next();!u.done;u=s.next())p=u.value,r.push(p.createSegmentIndex()),p.trickModeVideo&&!p.trickModeVideo.segmentIndex&&r.push(p.trickModeVideo.createSegmentIndex());return D(T,Promise.all(r),2)}if(n.segmentIndex instanceof Sj)for(y={},A=i;A<o.length;y={Gb:y.Gb},A++)y.Gb=o[A],y.Gb.segmentIndex&&(Pj(y.Gb.segmentIndex,function(n){return function(i){i.codecs=n.Gb.codecs,i.mimeType=n.Gb.mimeType,i.ka&&(i.ka.codecs=n.Gb.codecs,i.ka.mimeType=n.Gb.mimeType)}}(y)),n.segmentIndex.h.push(y.Gb.segmentIndex));F(T)})}function ks(n,i,r,o){for(var s=n.matchedStreams;i<s.length;i++){var u=s[i];r(n,u);var p=!0;if("audio"==n.type&&0==Rb(n.language,u.language)&&(p=!1),p){o[i].delete(u),p=new Set(n.codecs.split(",")),u=t(u.codecs.split(","));for(var y=u.next();!y.done;y=u.next())(y=y.value)&&p.add(y);y=Array.from(p),p=new Set,u=[],y=t(y);for(var A=y.next();!A.done;A=y.next()){var T=ld(A=A.value);p.has(T)||(u.push(A),p.add(T))}n.codecs=u.join(",")}}}function Zr(n){var i=Object.assign({},n);return i.originalId=null,i.createSegmentIndex=function(){return Promise.resolve()},i.closeSegmentIndex=function(){if(i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null),i.matchedStreams)for(var n=t(i.matchedStreams),r=n.next();!r.done;r=n.next())(r=r.value).segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},i.roles=i.roles.slice(),i.segmentIndex=null,i.emsgSchemeIdUris=[],i.keyIds=new Set,i.closedCaptions=null,i.trickModeVideo=null,i}function cs(n){return(n=Object.assign({},n)).roles=n.roles.slice(),n.keyIds=new Set,n.segments=[],n.variantIds=[],n.closedCaptions=null,n}function $r(n,i){function c(n,i){n||(n=[]),i=t(i);for(var r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);return n}n.roles=c(n.roles,i.roles),i.emsgSchemeIdUris&&(n.emsgSchemeIdUris=c(n.emsgSchemeIdUris,i.emsgSchemeIdUris));for(var r=t(i.keyIds),o=r.next();!o.done;o=r.next())n.keyIds.add(o.value);if(null==n.originalId?n.originalId=i.originalId:n.originalId+=","+(i.originalId||""),r=Eh(n.drmInfos,i.drmInfos),i.drmInfos.length&&n.drmInfos.length&&!r.length)throw new P(2,4,4038);if(n.drmInfos=r,n.encrypted=n.encrypted||i.encrypted,i.closedCaptions)for(n.closedCaptions||(n.closedCaptions=new Map),o=(r=t(i.closedCaptions)).next();!o.done;o=r.next()){var s=t(o.value);o=s.next().value,s=s.next().value,n.closedCaptions.set(o,s)}i.trickModeVideo?(n.trickModeVideo||(n.trickModeVideo=Zr(i.trickModeVideo),n.trickModeVideo.createSegmentIndex=function(){return n.trickModeVideo.segmentIndex=n.segmentIndex.clone(),Promise.resolve()}),$r(n.trickModeVideo,i.trickModeVideo)):n.trickModeVideo&&$r(n.trickModeVideo,i)}function ds(n,i){var r=n.roles;r||(r=[]);for(var o=t(i.roles),s=o.next();!s.done;s=o.next())s=s.value,r.includes(s)||r.push(s);for(n.roles=r,o=(r=t(i.keyIds)).next();!o.done;o=r.next())n.keyIds.add(o.value);if(n.encrypted=n.encrypted&&i.encrypted,n.segments.push.apply(n.segments,w(i.segments)),i.closedCaptions)for(n.closedCaptions||(n.closedCaptions=new Map),r=(i=t(i.closedCaptions)).next();!r.done;r=i.next())r=(o=t(r.value)).next().value,o=o.next().value,n.closedCaptions.set(r,o)}function is(n,i,r){var o=[];i=t(i);for(var s=i.next();!s.done;s=i.next()){if(!(s=function(n,i,r){var o=null,s=(0,({audio:Rr,video:Sr,text:Tr,image:Ur})[r.type])(r);if(i.has(s))o=i.get(s);else{s=({audio:function(i,r){return hs(n,i,r)},video:function(i,r){return hs(n,i,r)},text:ms,image:ns})[r.type];var u={audio:os,video:ps,text:qs,image:rs}[r.type];i=t(i.values());for(var p=i.next();!p.done;p=i.next())s(r,p=p.value)&&r.fastSwitching==p.fastSwitching&&(!o||u(r,o,p))&&(o=p)}return o}(n,s.value,r)))return;o.push(s)}r.matchedStreams=o}function ss(n,i){function c(n){if(!iR.has(n)){var i=hd(n);iR.set(n,i)}return iR.get(n)}return n.mimeType==i.mimeType&&c(n.codecs)==c(i.codecs)}function hs(n,i,r){return!!((ss(i,r)||n.m)&&(!i.drmInfos||Dh(i.drmInfos,r.drmInfos)))}function ms(n,i){return!i.language||n.forced===i.forced&&0!=Rb(n.language,i.language)&&i.kind==n.kind}function ns(){return!0}function os(n,i,r){var o=ss(n,i),s=ss(n,r);if(o&&!s)return!1;if(!o&&s||(o=Rb(n.language,i.language),(s=Rb(n.language,r.language))>o))return!0;if(s<o)return!1;if(i.label!==r.label){if(n.label===i.label)return!1;if(n.label===r.label)return!0}return n.roles.length?(o=i.roles.filter(function(i){return n.roles.includes(i)}),(s=r.roles.filter(function(i){return n.roles.includes(i)})).length>o.length||!(s.length<o.length)&&r.roles.length<i.roles.length):!r.roles.length&&!!i.roles.length||(!r.roles.length||!!i.roles.length)&&(!i.primary&&!!r.primary||(!i.primary||!!r.primary)&&((o=us(n.channelsCount,i.channelsCount,r.channelsCount))==iM||o!=iP&&((o=us(n.audioSamplingRate,i.audioSamplingRate,r.audioSamplingRate))==iM||o!=iP&&!!n.bandwidth&&xs(n.bandwidth,i.bandwidth,r.bandwidth)==iM)))}function ps(n,i,r){var o=ss(n,i),s=ss(n,r);if(o&&!s)return!1;if(!o&&s||(o=us(n.width*n.height,i.width*i.height,r.width*r.height))==iM)return!0;if(o==iP)return!1;if(n.frameRate){if((o=us(n.frameRate,i.frameRate,r.frameRate))==iM)return!0;if(o==iP)return!1}return!!n.bandwidth&&xs(n.bandwidth,i.bandwidth,r.bandwidth)==iM}function qs(n,i,r){var o=Rb(n.language,i.language),s=Rb(n.language,r.language);if(s>o)return!0;if(s<o)return!1;if(!i.primary&&r.primary)return!0;if(i.primary&&!r.primary)return!1;if(i.label!==r.label){if(n.label===i.label)return!1;if(n.label===r.label)return!0}if(n.roles.length){if(o=i.roles.filter(function(i){return n.roles.includes(i)}),(s=r.roles.filter(function(i){return n.roles.includes(i)})).length>o.length)return!0;if(s.length<o.length)return!1}else{if(!r.roles.length&&i.roles.length)return!0;if(r.roles.length&&!i.roles.length)return!1}return r.mimeType==n.mimeType&&r.codecs==n.codecs&&(i.mimeType!=n.mimeType||i.codecs!=n.codecs)}function rs(n,i,r){return us(n.width*n.height,i.width*i.height,r.width*r.height)==iM}function bs(n){return{id:0,originalId:"",groupId:null,primary:!1,type:n,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Vr(n){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:n,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1}}function us(n,i,r){if(i==n&&n!=r)return iP;if(r==n&&n!=i)return iM;if(i>n){if(r<=n||r-n<i-n)return iM;if(r-n>i-n)return iP}else{if(r>n)return iP;if(n-r<n-i)return iM;if(n-r>n-i)return iP}return iL}function xs(n,i,r){return i=Math.abs(n-i),(n=Math.abs(n-r))<i?iM:i<n?iP:iL}function gs(n){switch(n.type){case eh:return!n.language;case"image":return!n.tilesLayout;default:return!1}}function Sr(n){return JSON.stringify([n.fastSwitching,n.width,n.frameRate,n.codecs,n.mimeType,n.label,n.roles,n.closedCaptions?Array.from(n.closedCaptions.entries()):null,n.bandwidth])}function Rr(n){return JSON.stringify([n.fastSwitching,n.channelsCount,n.language,n.bandwidth,n.label,n.codecs,n.mimeType,n.roles,n.audioSamplingRate,n.primary])}function Tr(n){return JSON.stringify([n.language,n.label,n.codecs,n.mimeType,n.bandwidth,n.roles])}function Ur(n){return JSON.stringify([n.width,n.codecs,n.mimeType])}pa(Fr,Oj),(N=Fr.prototype).$b=function(){return this.h?this.h.timeline.length:0},N.release=function(){Oj.prototype.release.call(this),this.h=null},N.yb=function(n){if(this.h){for(var i=0,r=this.h.timeline,o=0;o<r.length;o+=1)if(r[o].end+this.i<=n)i+=1;else break;0<i&&(this.h.timeline=r.slice(i),this.g.length>=i&&(this.g=this.g.slice(i)),this.j+=i,0===this.$b()&&this.release())}},N.find=function(n){if(this.h&&this.h.timeline&&this.h.timeline.length&&n<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var i=this.h.timeline;if(n<this.i||n>=this.l)return null;for(var r=i.length-1,o=0;o<i.length;o++){var s=i[o],u=s.start+this.i;if(s=o<r?i[o+1].start+this.i:1/0===this.l?s.end+this.i:this.l,n>=u&&n<s)return o+this.j}return null},N.get=function(n){var i=this;if(0>(n-=this.j)||n>=this.$b()||!this.h)return null;var r=this.g[n];if(!r){var o=this.h.Sc,s=this.h.timeline[n],u=s.nj,p=this.h.yg+s.zg;r=this.i-this.h.Tb;var y=this.i+s.end,A=y;n===this.$b()-1&&1/0!==this.l&&(A=this.l);for(var T=[],x=(s.end-s.start)/s.Bb,C={},I=0;I<s.Bb;C={ld:C.ld,$e:C.$e},I++){var M=s.start+x*I,N=M+x;C.$e=I+1,C.ld=null,M=new Ph(this.i+M,this.i+N,function(n){return function(){return i.h?(null==n.ld&&(n.ld=Ir(i.h.Sc,i.H,u,i.D,p,n.$e,i.G)),n.ld):[]}}(C),0,null,this.u,r,this.i,this.l,[],"",null,null,tL,this.C),0==this.I?0<I&&M.xe():0!=I%this.I&&M.xe(),T.push(M)}(r=new Ph(this.i+s.start,A,function(){return 0<s.Bb?[]:Ir(o,i.H,u,i.D,p,null,i.G)},0,null,this.u,r,this.i,this.l,T,"",null,null,tL,this.C,0<s.Bb)).h=y,this.g[n]=r}return r},Jr.prototype.configure=function(n){this.s=n},Jr.prototype.destroy=function(){return this.C=this.s=null,this.j=[],this.h=null,this.m=[],this.H=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.I.destroy()},Jr.prototype.setManifestType=function(n){this.u=n},(N=Pr.prototype).release=function(){for(var n=t(this.h.concat(this.g,this.l,this.i)),i=n.next();!i.done;i=n.next())(i=i.value).segmentIndex&&i.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},N.Ci=function(){return this.j},N.Jf=function(){return this.l.slice()},N.ei=function(){return this.i},N.Kg=function(n,i){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea,es,ec,ed,eh=this;return K(function(eg){if(1==eg.g){if(r=ep,!i&&1==n.length)return s=(o=Qr(n,!1)).Fg,u=o.Ah,p=o.wh,y=o.Yg,eh.h=Array.from(s[0].values()),eh.g=Array.from(u[0].values()),eh.l=Array.from(p[0].values()),eh.i=Array.from(y[0].values()),eg.F(2);for(T=0,A=-1;T<n.length;T++)x=n[T],eh.s.has(x.id)||(eh.s.add(x.id),-1==A&&(A=T));return -1==A?eg.return():(I=(C=Qr(n,!0)).Fg,M=C.Ah,N=C.wh,_=C.Yg,D(eg,Promise.all([Wr(eh,eh.h,I,A,Zr,$r),Wr(eh,eh.g,M,A,Zr,$r),Wr(eh,eh.l,N,A,Zr,$r),Wr(eh,eh.i,_,A,Zr,$r)]),2))}if(j=0,B=[],eh.g.length&&eh.h.length)for(Q=(Y=t(eh.h)).next();!Q.done;Q=Y.next())for(J=Q.value,ea=($=t(eh.g)).next();!ea.done;ea=$.next())es=ea.value,ec=Eh(J.drmInfos,es.drmInfos),J.drmInfos.length&&es.drmInfos.length&&!ec.length||(ed=j++,B.push({id:ed,language:J.language,disabledUntilTime:0,primary:J.primary,audio:J,video:es,bandwidth:(J.bandwidth||0)+(es.bandwidth||0),drmInfos:ec,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(G=(z=t(eh.g.length?eh.g:eh.h)).next();!G.done;G=z.next())H=G.value,q=j++,B.push({id:q,language:H.language,disabledUntilTime:0,primary:H.primary,audio:H.type==r.U?H:null,video:H.type==r.ia?H:null,bandwidth:H.bandwidth||0,drmInfos:H.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});eh.j=B,F(eg)})},L("shaka.util.PeriodCombiner",Pr),Pr.prototype.combinePeriods=Pr.prototype.Kg,Pr.prototype.getImageStreams=Pr.prototype.ei,Pr.prototype.getTextStreams=Pr.prototype.Jf,Pr.prototype.getVariants=Pr.prototype.Ci;var iM=1,iL=0,iP=-1,iR=new Map;function zs(){var n=this;this.i=this.h=null,this.s=[],this.j=null,this.K=1,this.m={},this.M={},this.l=new Pr,this.H=0,this.J=new Yb(5),this.I=new Dd(function(){var i,r,o;i=n,K(function(n){switch(n.g){case 1:return r=0,ta(n,2),D(n,Bs(i),4);case 4:r=n.h,va(n,3);break;case 2:if(o=wa(n),i.i){if(i.h.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(o),n.return();o.severity=1,i.i.onError(o)}case 3:if(!i.i)return n.return();i.i.onManifestUpdated(),Cs(i,r),F(n)}})}),this.G=new uf,this.C=null,this.L=[],this.D=1/0,this.u=!1,this.g=null}function Bs(n){var i,r,o,s,u,p;return K(function(y){if(1==y.g)return i=n.s,1<n.s.length&&n.g&&(r=Or(n.g,"Location",!0)).length&&(i=r),o=Af(i,n.h.retryParameters),s=Date.now(),D(y,Ds(n,o,0,{type:4}),2);if(3!=y.g){var A,T,x,C,I,M,N;return(u=y.h,n.i)?(u.uri&&u.uri!=u.originalUri&&!n.s.includes(u.uri)&&n.s.unshift(u.uri),D(y,(A=n,T=u.data,x=u.uri,K(function(n){if(1==n.g){if(!(C=Rg(T,"MPD")))throw new P(2,4,4001,x);return A.h.dash.disableXlinkProcessing?n.return(Fs(A,C,x)):(I=A.h.dash.xlinkFailGracefully,M=function br(n,i,r,o,s,u){if(u=void 0===u?0:u,Bg(n,"http://www.w3.org/1999/xlink","href")){var p=function(n,i,r,o,s,u){for(var p=Bg(n,"http://www.w3.org/1999/xlink","href"),y=Bg(n,"http://www.w3.org/1999/xlink","actuate")||"onRequest",A=t(Array.from(n.attributes)),T=A.next();!T.done;T=A.next())"http://www.w3.org/1999/xlink"==(T=T.value).namespaceURI&&n.removeAttributeNS(T.namespaceURI,T.localName);if(5<=u)return of(new P(2,4,4028));if("onLoad"!=y)return of(new P(2,4,4027));var x=zb([o],[p]);return s.request(0,Af(x,i)).Fa(function(o){if(!(o=Rg(o.data,n.tagName)))return of(new P(2,4,4001,p));for(;n.childNodes.length;)n.removeChild(n.childNodes[0]);for(;o.childNodes.length;){var y=o.childNodes[0];o.removeChild(y),n.appendChild(y)}for(y=(o=t(Array.from(o.attributes))).next();!y.done;y=o.next())n.setAttributeNode(y.value.cloneNode(!1));return br(n,i,r,x[0],s,u+1)})}(n,i,r,o,s,u);return r&&(p=p.Fa(void 0,function(){return br(n,i,r,o,s,u)})),p}p=[];for(var y=t(Array.from(n.childNodes)),A=y.next();!A.done;A=y.next())(A=A.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Bg(A,"http://www.w3.org/1999/xlink","href")?n.removeChild(A):"SegmentTimeline"!=A.tagName&&p.push(br(A,i,r,o,s,u)));return sf(p).Fa(function(){return n})}(C,A.h.retryParameters,I,x,A.i.networkingEngine),vf(A.G,M),D(n,M.promise,2))}return N=n.h,n.return(Fs(A,N,x))})),3)):y.return(0)}return p=(Date.now()-s)/1e3,n.J.sample(1,p),y.return(p)})}function Fs(i,r,o){var s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea,es,ec,ed,ep,eg,em,ev,eb,eA,eT,eS,ek,eI,eM,eL,eP,eR,eN,eU,eO,e_,ej,eF,eV,eK,eG,eH,eq,eW,eX;return K(function(eY){switch(eY.g){case 1:for((s=i.h.dash.manifestPreprocessor)&&s(r),i.g&&i.g.l.clear(),u=[o],p=[],y=new Map,T=(A=t(xg(r,"Location"))).next();!T.done;T=A.next())C=(x=T.value).getAttribute("serviceLocation"),(I=Dg(x))&&(M=zb(u,[I])[0],C&&(i.g?Nr(i.g,"Location",C,M):y.set(C,M)),p.push(M));if(i.g?0<(N=Or(i.g,"Location",!0)).length&&(u=i.s=N):p.length&&(u=i.s=p),_=Promise.resolve(),(j=wg(r,"ContentSteering"))&&i.i)for(B=j.getAttribute("defaultServiceLocation"),i.g?(i.g.j=u,i.g.h=B):(i.g=new Jr(i.i),i.g.configure(i.h),i.g.setManifestType("DASH"),i.g.j=u,i.g.h=B,(z=Dg(j))&&(Fg(j,"queryBeforeStart",Ng,!1)?_=Kr(i.g,z):Kr(i.g,z))),H=(G=t(y.keys())).next();!H.done;H=G.next())q=H.value,Y=y.get(q),Nr(i.g,"Location",q,Y);if(Q=xg(r,"BaseURL"),$=!1,i.g)for(es=(ea=t(Q)).next();!es.done;es=ea.next())ed=(ec=es.value).getAttribute("serviceLocation"),ep=Dg(ec),ed&&ep&&(Nr(i.g,"BaseURL",ed,ep),$=!0);if($&&i.g||(eg=Q.map(Dg),J=zb(u,eg)),em=function(){return i.g&&$?Or(i.g,"BaseURL"):J||[]},ev=0,Q&&Q.length&&(ev=Fg(Q[0],"availabilityTimeOffset",Mg)||0),eb=i.h.dash.ignoreMinBufferTime,eA=0,eb||(eA=Fg(r,"minBufferTime",Hg)||0),i.H=Fg(r,"minimumUpdatePeriod",Hg,-1),eT=Fg(r,"availabilityStartTime",Gg),eS=Fg(r,"timeShiftBufferDepth",Hg),ek=i.h.dash.ignoreSuggestedPresentationDelay,eI=null,ek||(eI=Fg(r,"suggestedPresentationDelay",Hg)),eM=i.h.dash.ignoreMaxSegmentDuration,eL=null,eM||(eL=Fg(r,"maxSegmentDuration",Hg)),eP=r.getAttribute("type")||"static",i.j)for(eR=i.j.presentationTimeline,eU=(eN=t(Object.values(i.m))).next();!eU.done;eU=eN.next())(eO=eU.value).segmentIndex&&eO.segmentIndex.yb(eR.Ab());else e_=i.h.defaultPresentationDelay||1.5*eA,ej=null!=eI?eI:e_,eR=new sj(eT,ej,i.h.dash.autoCorrectDrift);return eR.Vc("static"==eP),eR.R()&&!isNaN(i.h.availabilityWindowOverride)&&(eS=i.h.availabilityWindowOverride),null==eS&&(eS=1/0),eR.Ne(eS),eF=r.getAttribute("profiles")||"",eG=(eK=function(i,r,o,s){var u=Fg(s,"mediaPresentationDuration",Hg),p=[],y=0;s=xg(s,"Period");for(var A=0;A<s.length;A++){var T=s[A],x=s[A+1],C=Fg(T,"start",Hg,y),I=T.id,M=Fg(T,"duration",Hg),N=null;if(x){var _=Fg(x,"start",Hg);null!=_&&(N=_-C)}else null!=u&&(N=u-C);if(null==N&&(N=M),!(null!==i.C&&null!==I&&null!==C&&C<i.C)||i.L.includes(I)||A+1==s.length){if(null!==C&&(null===i.C||C>i.C)&&(i.C=C),y=function(i,r,o,s){r.Ka=Ks(i,s.node,null,o),r.ma=s,r.Ka.Hc=r.Hc,r.Ka.id||(r.Ka.id="__shaka_period_"+s.start);var u=xg(s.node,"EventStream");o=r.presentationTimeline.Ab(),u=t(u);for(var p=u.next();!p.done;p=u.next())(function(n,i,r,o,s){var u=o.getAttribute("schemeIdUri")||"",p=o.getAttribute("value")||"",y=Fg(o,"timescale",Lg)||1;o=t(xg(o,"Event"));for(var A=o.next();!A.done;A=o.next()){var T=Fg(A=A.value,"presentationTime",Lg)||0,x=Fg(A,"duration",Lg)||0;x=(T=T/y+i)+x/y,null!=r&&(T=Math.min(T,i+r),x=Math.min(x,i+r)),x<s||(A={schemeIdUri:u,value:p,startTime:T,endTime:x,id:A.getAttribute("id")||"",eventElement:A},n.i.onTimelineRegionAdded(A))}})(i,s.start,s.duration,p.value,o);if(o=xg(s.node,"AdaptationSet").map(function(o){return function(i,r,o){function d(n){switch(n){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}r.Ea=Ks(i,o,r.Ka,null);var s=!1,u=xg(o,"Role"),p=u.map(function(n){return n.getAttribute("value")}).filter(zd),y=void 0,A=r.Ea.contentType==eh;A&&(y="subtitle"),u=t(u);for(var T=u.next();!T.done;T=u.next()){var x=(T=T.value).getAttribute("schemeIdUri");if(null==x||"urn:mpeg:dash:role:2011"==x)switch(T=T.getAttribute("value")){case"main":s=!0;break;case"caption":case"subtitle":y=T}}x=xg(o,"EssentialProperty"),u=null;var C=!1;T=!1,x=t(x);for(var I=x.next();!I.done;I=x.next()){var M=(I=I.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==M?u=I.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==M?N=d(parseInt(I.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=M&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=M&&("urn:mpeg:dash:ssr:2023"==M?C=!0:T=!0)}for(I=(x=t(x=xg(o,"SupplementalProperty"))).next();!I.done;I=x.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(I=I.value).getAttribute("schemeIdUri")&&(N=d(parseInt(I.getAttribute("value"),10)));x=xg(o,"Accessibility");var N,_,j=new Map;for(I=(x=t(x)).next();!I.done;I=x.next())if(I=(M=I.value).getAttribute("schemeIdUri"),M=M.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==I){if(I=1,null!=M){M=M.split(";");for(var B=t(M),z=B.next();!z.done;z=B.next()){var G=z.value,H=z=void 0;G.includes("=")?(z=(G=G.split("="))[0].startsWith("CC")?G[0]:"CC"+G[0],H=G[1]||"und"):(z="CC"+I,2==M.length?I+=2:I++,H=G),j.set(z,Kb(H))}}else j.set("CC1","und")}else if("urn:scte:dash:cc:cea-708:2015"==I){if(I=1,null!=M)for(z=(M=t(M.split(";"))).next();!z.done;z=M.next())z=z.value,G=B=void 0,z.includes("=")?(B="svc"+(z=z.split("="))[0],G=z[1].split(",")[0].split(":").pop()):(B="svc"+I,I++,G=z),j.set(B,Kb(G));else j.set("svc1","und")}else"urn:mpeg:dash:role:2011"==I?null!=M&&(p.push(M),"captions"==M&&(y="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==I&&("1"==M?_="visually impaired":"2"==M&&(_="hard of hearing"));if(T)return null;var q=Lq(T=xg(o,"ContentProtection"),i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI),Y=Kb(r.Ea.language||"und"),Q=o.getAttribute("label");if((T=xg(o,"Label"))&&T.length&&(T=T[0]).textContent&&(Q=T.textContent),0==(o=(T=xg(o,"Representation")).map(function(o){return(o=function(i,r,o,s,u,p,y,A,T,x,C){if(r.P=Ks(i,x,r.Ea,null),i.D=Math.min(i.D,r.P.Hc),!function(n){var i=n.Ld?1:0;return 0==(i+=(n.fc?1:0)+(n.Md?1:0))?n.contentType==eh||"application"==n.contentType:(1!=i&&(n.Ld&&(n.fc=null),n.Md=null),!0)}(r.P))return null;var I,M,N=r.ma.start;r.bandwidth=Fg(x,"bandwidth",Kg)||0;var _=r.P.contentType,j=_==eh||"application"==_;_="image"==_;try{var B=void 0;if(o.gf){var z=r.P.zb,G=zb(z(),[o.gf.Qi]),H=Af(G,i.h.retryParameters);B={method:"AES-128",iv:o.gf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var r,o,s;return K(function(u){if(1==u.g)return D(u,Ds(i,H,6),2);if(3!=u.g){if(!(r=u.h).data||16!=r.data.byteLength)throw new P(2,4,4049);return o={name:"AES-CBC"},s=B,D(u,n.crypto.subtle.importKey("raw",r.data,o,!0,["decrypt"]),3)}s.cryptoKey=u.h,B.fetchKey=void 0,F(u)})}}}if(z=function(n,r,o,s){return function(n,i,r,o,s){var u,p,y,A;return K(function(T){return 1==T.g?(u=e7,p=s?0:1,y=ok(i,r,o,n.h.retryParameters),D(T,Ds(n,y,u,{type:p}),2)):(A=T.h,T.return(A.data))})}(i,n,r,o,s)},r.P.Ld)var q,Y,Q,J,$,ea,es,ec,ed=(q=z,Y=B,Q=Number(Yq(r,pr,"presentationTimeOffset"))||0,J=Yq(r,pr,"timescale"),$=1,J&&($=Kg(J)||1),ea=Q/$||0,es=mr(r,pr,Y),function(n,i){if(tr(n,i),!rr(n))throw new P(2,4,4002)}(r,es),ec=Bd(r),{Kc:function(){var n=Zq(ec,pr,"RepresentationIndex"),i=ec.P.zb();return n&&(n=n.getAttribute("sourceURL"))&&(i=zb(i,[n])),n=rr(ec),sr(ec,q,es,i,n.start,n.end,ea)}});else if(r.P.fc)ed=function(n,i,r){var o=mr(n,vr,r),s=function(n){var i=function(n){return[n.P.fc,n.Ea.fc,n.Ka.fc].filter(zd).map(function(n){return xg(n,"SegmentURL")}).reduce(function(n,i){return 0<n.length?n:i}).map(function(i){return i.getAttribute("indexRange")&&!n.Zg&&(n.Zg=!0),{Vi:i.getAttribute("media"),start:(i=Fg(i,"mediaRange",Ig,{start:0,end:null})).start,end:i.end}})}(n),r=(n=Xq(n,vr)).Nd;0==r&&(r=1);var o=0;return n.Pa?o=n.Pa*(r-1):n.timeline&&0<n.timeline.length&&(o=n.timeline[0].start),{Pa:n.Pa,startTime:o,Nd:r,Tb:n.Tb,timeline:n.timeline,Rc:i}}(n);if(!s.Pa&&!s.timeline&&1<s.Rc.length||!s.Pa&&!n.ma.duration&&!s.timeline&&1==s.Rc.length||s.timeline&&0==s.timeline.length)throw new P(2,4,4002);var u=null,p=null;n.Ka.id&&n.P.id&&(p=i[n.Ka.id+","+n.P.id])&&(u=p.segmentIndex);var y=function(n,i,r,o,s,u){var p=o.Rc.length;o.timeline&&o.timeline.length!=o.Rc.length&&(p=Math.min(o.timeline.length,o.Rc.length));for(var y=n-o.Tb,A=i?n+i:1/0,T=[],x=o.startTime,C={},I=0;I<p;C={kd:C.kd,fd:C.fd},I++){C.fd=o.Rc[I];var M=void 0;M=null!=o.Pa?x+o.Pa:o.timeline?o.timeline[I].end:x+i,C.kd=null,T.push(new Ph(n+x,n+M,function(n){return function(){return null==n.kd&&(n.kd=zb(r(),[n.fd.Vi])),n.kd}}(C),C.fd.start,C.fd.end,s,y,n,A,[],"",null,null,tL,u)),x=M}return T}(n.ma.start,n.ma.duration,n.P.zb,s,o,r);return i=!u,u?u.Cd(y,n.presentationTimeline.Ab()):u=new Oj(y),n.presentationTimeline.Dd(y),n.Yb&&n.ma.Mf||u.Ic(n.ma.start,n.ma.duration?n.ma.start+n.ma.duration:1/0,i),p&&(p.segmentIndex=u),{Kc:function(){return u&&0!=u.$b()||u.ze(y),Promise.resolve(u)}}}(r,i.m,B);else if(r.P.Md)ed=function(i,r,o,s,u,p,y){var A=function(n,i){var r=Yq(n,Gr,"initialization");if(!r)return null;var o=n.P.id,s=n.bandwidth||null,u=n.P.zb;return new Nh(function(){var n=Wq(r,o,null,null,s,null);return zb(u(),[n])},0,null,nr(n),null,null,i)}(i,y),T=function(n){var i=Xq(n,Gr),r=Yq(n,Gr,"media");return n=Yq(n,Gr,"index"),{Pa:i.Pa,timescale:i.timescale,Nd:i.Nd,Tb:i.Tb,yg:i.yg,timeline:i.timeline,Sc:r,xd:n}}(i);(function(n){var i=n.xd?1:0;if(0==(i+=(n.timeline?1:0)+(n.Pa?1:0))||(1!=i&&(n.xd&&(n.timeline=null),n.Pa=null),!n.xd&&!n.Sc))throw new P(2,4,4002)})(T);var x=Bd(i);if(T.xd)return tr(i,A),{Kc:function(){var n=Wq(T.xd,x.P.id,null,null,x.bandwidth||null,null);return n=zb(x.P.zb(),[n]),sr(x,r,A,n,0,null,T.Tb)}};if(T.Pa)return s||"image"===i.Ea.contentType||(i.presentationTimeline.Wf(T.Pa),i.presentationTimeline.Ce(i.ma.start)),{Kc:function(){return function(i,r,o,s,u,p){function g(i){var o=(i-I)*C,u=o+r.Tb,y=o+A,T=Math.min(o=y+C,k());return(y=new Ph(y,T,function(){var r=u*M;return"BigInt"in n&&r>Number.MAX_SAFE_INTEGER&&(r=BigInt(u)*BigInt(M)),r=Wq(N,j,i,null,_,r),zb(B(),[r])},0,null,s,z,A,k(),[],"",null,null,tL,p)).h=o,y}function h(){var n=[Math.max(y.Ab(),A),Math.min(y.ac(),k())].map(function(n){return n-A});return[Math.ceil(n[0]/C),Math.ceil(n[1]/C)-1].map(function(n){return n+I})}function k(){var n=null!=T&&u[T]||x;return n?A+n:1/0}var y=i.presentationTimeline,A=i.ma.start,T=i.Ka.id,x=i.ma.duration,C=r.Pa,I=r.Nd,M=r.timescale,N=r.Sc,_=i.bandwidth||null,j=i.P.id,B=i.P.zb,z=A-r.Tb,G=h();i=i.Yb?Math.max(G[0],G[1]-o+1):G[0],G=G[1],o=[];for(var H=i;H<=G;++H){var q=g(H);o.push(q)}var Y=new Oj(o);if(o=y.ac()<k(),H=y.R(),o||H){var Q=Math.max(i,G+1);Y.Qe(C,function(){var n=y.Ab();Y.yb(n);var i=t(h());i.next(),i=i.next().value;for(var r=[];Q<=i;){var o=g(Q);r.push(o),Q++}return n>k()&&!r.length?null:r})}return Promise.resolve(Y)}(x,T,u,A,p,y)}};var C=null;s=s=null,i.Ka.id&&i.P.id&&(s=o[s=i.Ka.id+","+i.P.id])&&(C=s.segmentIndex);var I=i.ma.start,M=i.ma.duration?I+i.ma.duration:1/0,N=!(i.Yb&&i.ma.Mf);return C?(Er(o=C,T,I,M,N,A),o.yb(i.presentationTimeline.Ab())):C=new Fr(T,i.P.id,i.bandwidth,i.P.zb,I,M,A,N,y,i.P.hg),T.timeline&&"image"!==i.Ea.contentType&&i.presentationTimeline.hh(T.timeline,I),s&&i.Yb&&(s.segmentIndex=C),{Kc:function(){return C instanceof Fr&&0==C.$b()&&Er(C,T,I,M,N,A),Promise.resolve(C)}}}(r,z,i.m,!!i.j,i.h.dash.initialSegmentLimit,i.M,B);else{var ep=r.ma.duration||0,eg=r.P.zb;ed={Kc:function(){return Promise.resolve(Rj(N,ep,eg()))}}}}catch(n){if((j||_)&&4002==n.code)return null;throw n}z=function(n,i,r,o){var s=Lq(n,r,o);if(i.Rg)n=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,r=0==s.drmInfos.length,(0==i.drmInfos.length||n&&!r)&&(i.drmInfos=s.drmInfos),i.Rg=!1;else if(0<s.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(n){return s.drmInfos.some(function(i){return i.keySystem==n.keySystem})}),0==i.drmInfos.length))throw new P(2,4,4008);return s.Ng||i.Ng}(z=xg(x,"ContentProtection"),o,i.h.dash.ignoreDrmInfo,i.h.dash.keySystemsByURI),z=new Set(z?[z]:[]),G=!1,xg(x,"SupplementalProperty").some(function(n){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==n.getAttribute("schemeIdUri")&&"JOC"==n.getAttribute("value")})&&(G=!0);var em=!1;if(j&&(em=A.includes("forced_subtitle")||A.includes("forced-subtitle")),_&&((x=xg(x,"EssentialProperty").find(function(n){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(n.getAttribute("schemeIdUri"))}))&&(I=x.getAttribute("value")),!I))return null;x=r.P.codecs,r.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(x.includes("hvc1.2.4.L153.B0")||x.includes("hev1.2.4.L153.B0"))&&(M="PQ");var ev=(x=r.P.id?r.Ka.id+","+r.P.id:"")&&i.m[x]?i.m[x]:{id:i.K++,originalId:r.P.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ev.segmentIndex&&(ev.segmentIndex.release(),ev.segmentIndex=null)},segmentIndex:null,mimeType:r.P.mimeType,codecs:r.P.codecs,frameRate:r.P.frameRate,pixelAspectRatio:r.P.pixelAspectRatio,bandwidth:r.bandwidth,width:r.P.width,height:r.P.height,kind:s,encrypted:0<o.drmInfos.length,drmInfos:o.drmInfos,keyIds:z,language:u,originalLanguage:r.Ea.language,label:p,type:r.Ea.contentType,primary:y,trickModeVideo:null,emsgSchemeIdUris:r.P.emsgSchemeIdUris,roles:A,forced:em,channelsCount:r.P.De,audioSamplingRate:r.P.audioSamplingRate,spatialAudio:G,closedCaptions:T,hdr:M,videoLayout:void 0,tilesLayout:I,accessibilityPurpose:C,external:!1,fastSwitching:!1};return ev.createSegmentIndex=function(){var n;return K(function(i){if(1==i.g)return ev.segmentIndex?i.F(0):(n=ev,D(i,ed.Kc(),3));n.segmentIndex=i.h,F(i)})},x&&r.Yb&&!i.m[x]&&(i.m[x]=ev),ev}(i,r,q,y,Y,Q,s,p,j,o,_))&&(o.hdr=o.hdr||N,o.fastSwitching=C),o}).filter(function(n){return!!n})).length){if(u="image"==r.Ea.contentType,i.h.dash.ignoreEmptyAdaptationSet||A||u)return null;throw new P(2,4,4003)}if(!r.Ea.contentType||"application"==r.Ea.contentType)for(r.Ea.contentType=Ps(o[0].mimeType,o[0].codecs),I=(A=t(o)).next();!I.done;I=A.next())I.value.type=r.Ea.contentType;for(A=r.Ea.id||"__fake__"+i.K++,I=(x=t(o)).next();!I.done;I=x.next()){for(I=I.value,B=(M=t(q.drmInfos)).next();!B.done;B=M.next())(B=B.value).keyIds=B.keyIds&&I.keyIds?new Set([].concat(w(B.keyIds),w(I.keyIds))):B.keyIds||I.keyIds;i.h.dash.enableAudioGroups&&(I.groupId=A)}return T=T.map(function(n){return n.getAttribute("id")}).filter(zd),{id:A,contentType:r.Ea.contentType,language:Y,yk:s,streams:o,drmInfos:q.drmInfos,wg:u,gj:T}}(i,r,o)}).filter(zd),r.Yb){for(s=[],p=(u=t(o)).next();!p.done;p=u.next()){p=t(p.value.gj);for(var y=p.next();!y.done;y=p.next())s.push(y.value)}if(s.length!=new Set(s).size)throw new P(2,4,4018)}for(s=o.filter(function(n){return!n.wg}),u=(o=t(o=o.filter(function(n){return n.wg}))).next();!u.done;u=o.next()){p=(u=u.value).wg.split(" "),y=t(s);for(var A=y.next();!A.done;A=y.next()){var T=A.value;if(p.includes(T.id)){A={},T=t(T.streams);for(var x=T.next();!x.done;A={Xd:A.Xd},x=T.next())A.Xd=x.value,A.Xd.trickModeVideo=u.streams.find(function(n){return function(i){return hd(n.Xd.codecs)==hd(i.codecs)}}(A))}}}if(o=Ns(i.h.disableAudio,s,"audio"),u=Ns(i.h.disableVideo,s,"video"),p=Ns(i.h.disableText,s,eh),s=Ns(i.h.disableThumbnails,s,"image"),0===u.length&&0===o.length)throw new P(2,4,4004);return{id:r.Ka.id,audioStreams:o,videoStreams:u,textStreams:p,imageStreams:s}}(i,r,o,{start:C,duration:N,node:T,Mf:null==N||!x}),p.push(y),r.Ka.id&&N&&(i.M[r.Ka.id]=N),null==N){y=null;break}y=C+N}}return i.L=p.map(function(n){return n.id}),null!=u?{periods:p,duration:u,Pg:!1}:{periods:p,duration:y,Pg:!0}}(i,eV={Yb:"static"!=eP,presentationTimeline:eR,Ka:null,ma:null,Ea:null,P:null,bandwidth:0,Zg:!1,Hc:ev,profiles:eF.split(",")},em,r)).duration,eH=eK.periods,"static"!=eP&&eK.Pg||eR.gb(eG||1/0),i.D&&!i.u&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.u=i.i.isLowLatencyMode()),i.u?eR.mh(i.D):i.D&&Ra("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),eR.Wf(eL||1),D(eY,i.l.Kg(eH,eV.Yb),2);case 2:return D(eY,_,3);case 3:var eZ,eQ,eJ,e$,e0,e1,e2,e3,e4,e5,e8;if(i.u&&(eA=0),i.j){i.j.variants=i.l.j,0<(eq=i.l.Jf()).length&&(i.j.textStreams=eq),i.j.imageStreams=i.l.i,i.i.filter(i.j),eY.F(4);break}if(i.j={presentationTimeline:eR,variants:i.l.j,textStreams:i.l.Jf(),imageStreams:i.l.i,offlineSessionIds:[],minBufferTime:eA||0,sequenceMode:i.h.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:function(n){if(!(n=wg(n,"ServiceDescription")))return null;var i=wg(n,"Latency"),r=wg(n,"PlaybackRate");return i&&i.getAttribute("max")||r?{maxLatency:n=i&&i.getAttribute("max")?parseInt(i.getAttribute("max"),10)/1e3:null,maxPlaybackRate:r?parseFloat(r.getAttribute("max")):null,minLatency:i=i&&i.getAttribute("min")?parseInt(i.getAttribute("min"),10)/1e3:null,minPlaybackRate:r=r?parseFloat(r.getAttribute("min")):null}:null}(r)},!eR.yh()){eY.F(5);break}return eW=xg(r,"UTCTiming"),D(eY,(eZ=i,eQ=em,eJ=eW,K(function(n){switch(n.g){case 1:e$=eJ.map(function(n){return{scheme:n.getAttribute("schemeIdUri"),value:n.getAttribute("value")}}),e0=eZ.h.dash.clockSyncUri,!e$.length&&e0&&e$.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e0}),e2=(e1=t(e$)).next();case 2:if(e2.done){n.F(4);break}switch(e3=e2.value,ta(n,5),e4=e3.scheme,e5=e3.value,e4){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return n.F(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return n.F(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return e8=Date.parse(e5),n.return(isNaN(e8)?0:e8-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ra("NTP UTCTiming scheme is not supported");break;default:Ra("Unrecognized scheme in UTCTiming element",e4)}n.F(9);break;case 7:return D(n,Us(eZ,eQ,e5,"HEAD"),10);case 10:case 11:return n.return(n.h);case 8:return D(n,Us(eZ,eQ,e5,"GET"),11);case 9:va(n,3);break;case 5:wa(n);case 3:e2=e1.next(),n.F(2);break;case 4:return Ra("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),n.return(0)}})),6);case 6:if(eX=eY.h,!i.i)return eY.return();eR.nh(eX);case 5:eR.ve();case 4:i.i.makeTextStreamsForClosedCaptions(i.j),F(eY)}})}function Ns(n,i,r){return n||!i.length?[]:i.reduce(function(n,i){return i.contentType!=r||n.push.apply(n,w(i.streams)),n},[])}function Cs(n,i){0>n.H||n.I.S(Math.max(n.H-i,Zb(n.J)))}function Ks(n,i,r,o){r=r||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,De:null,audioSamplingRate:null,Hc:0,hg:0},o=o||r.zb;var s,u=i.getAttribute("id"),p=xg(i,"BaseURL"),y=!1;if(n.g)for(var A=t(p),T=A.next();!T.done;T=A.next()){var x=T.value;T=x.getAttribute("serviceLocation"),x=Dg(x),T&&x&&(Nr(n.g,u,T,x),y=!0)}y&&n.g||(s=p.map(Dg)),A=i.getAttribute("contentType")||r.contentType,T=i.getAttribute("mimeType")||r.mimeType,x=i.getAttribute("codecs")||r.codecs;var C=Fg(i,"frameRate",Og)||r.frameRate,I=i.getAttribute("sar")||r.pixelAspectRatio,M=function(n,i){i=i.slice(),n=t(n);for(var r=n.next();!r.done;r=n.next())r=r.value.getAttribute("schemeIdUri"),i.includes(r)||i.push(r);return i}(xg(i,"InbandEventStream"),r.emsgSchemeIdUris),N=xg(i,"AudioChannelConfiguration");N=function(n){n=t(n);for(var i=n.next();!i.done;i=n.next()){var r=i.value;if((i=r.getAttribute("schemeIdUri"))&&(r=r.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(i=parseInt(r,10)))continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(i=parseInt(r,16)))continue;for(n=0;i;)1&i&&++n,i>>=1;return n;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(i=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(r=parseInt(r,10))&&0<r&&r<i.length)return i[r]}}return null}(N)||r.De;var _=Fg(i,"audioSamplingRate",Lg)||r.audioSamplingRate;A||(A=Ps(T,x));var j=wg(i,"SegmentBase"),B=wg(i,"SegmentTemplate"),z=j&&Fg(j,"availabilityTimeOffset",Mg)||0,G=B&&Fg(B,"availabilityTimeOffset",Mg)||0,H=p&&p.length&&Fg(p[0],"availabilityTimeOffset",Mg)||0;return z=r.Hc+H+z+G,G=null,(H=wg(i,"SegmentSequenceProperties"))&&(H=wg(H,"SAP"))&&(G=Fg(H,"cadence",Jg)),{zb:function(){return zb(o(),p.length?n.g&&y?Or(n.g,u):s||[]:[])},Ld:j||r.Ld,fc:wg(i,"SegmentList")||r.fc,Md:B||r.Md,width:Fg(i,"width",Lg)||r.width,height:Fg(i,"height",Lg)||r.height,contentType:A,mimeType:T,codecs:x,frameRate:C,pixelAspectRatio:I,emsgSchemeIdUris:M,id:u,language:i.getAttribute("lang"),De:N,audioSamplingRate:_,Hc:z,hg:G||r.hg}}function Us(n,i,r,o){var s,u,p,y,A;return K(function(T){if(1==T.g)return(s=Af(zb(i(),[r]),n.h.retryParameters)).method=o,u=n.i.networkingEngine.request(4,s),vf(n.G,u),D(T,u.promise,2);if(p=T.h,"HEAD"==o){if(!p.headers||!p.headers.date)return T.return(0);y=p.headers.date}else y=Tf(p.data);return isNaN(A=Date.parse(y))?T.return(0):T.return(A-Date.now())})}function Ps(n,i){return pd(i=dd(n,i))?eh:n.split("/")[0]}function Ds(n,i,r,o){return i=n.i.networkingEngine.request(r,i,o),vf(n.G,i),i.promise}function Vs(){}(N=zs.prototype).configure=function(n){this.h=n,this.g&&this.g.configure(this.h),this.l&&(this.l.m=this.h.dash.multiTypeVariantsAllowed&&fc())},N.start=function(n,i){var r,o=this;return K(function(s){if(1==s.g)return o.u=i.isLowLatencyMode(),o.s=[n],o.i=i,D(s,Bs(o),2);if(r=s.h,o.i&&Cs(o,r),!o.i)throw new P(2,7,7001);return s.return(o.j)})},N.stop=function(){for(var n=t(Object.values(this.m)),i=n.next();!i.done;i=n.next())(i=i.value).segmentIndex&&i.segmentIndex.release();return this.l&&this.l.release(),this.h=this.i=null,this.s=[],this.j=null,this.m={},this.l=null,null!=this.I&&(this.I.stop(),this.I=null),this.g&&this.g.destroy(),this.G.destroy()},N.update=function(){var n,i=this;return K(function(r){return 1==r.g?(ta(r,2),D(r,Bs(i),4)):2!=r.g?va(r,0):(n=wa(r),i.i&&n)?void(i.i.onError(n),F(r)):r.return()})},N.onExpirationUpdated=function(){},N.onInitialVariantChosen=function(n){if(this.j&&this.j.presentationTimeline.R()){var i=n.video||n.audio;if(i&&i.segmentIndex){n=this.j.presentationTimeline.ac();var r=i.segmentIndex.find(n);null!=r&&(i=i.segmentIndex.get(r))&&(this.H=i.endTime-n,Cs(this,0))}}},N.banLocation=function(n){this.g&&this.g.i.set(n,Date.now()+6e4)},L("shaka.dash.DashParser",zs),tI["application/dash+xml"]=function(){return new zs},tI["video/vnd.mpeg.dash.mpd"]=function(){return new zs},L("shaka.dependencies",Vs),Vs.has=function(n){return iO.has(n)},Vs.add=function(n,i){if(!iU[n])throw Error(n+" is not supported");n==iN?Me("mux.js","mux.js is no longer used in Shaka Player."):iO.set(n,function(){return i})};var iN="muxjs",iU={zk:iN,ISOBoxer:"ISOBoxer"};Vs.Allowed=iU;var iO=new Map([["ISOBoxer",function(){return n.ISOBoxer}]]);function Zs(n,i,r){this.type=n,this.g=i,this.segments=r||null}function $s(n,i,r,o){this.id=n,this.name=i,this.g=r,this.value=void 0===o?null:o}function at(n){var i=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return n.toString(i)}function X(n,i,r){return(n=n.getAttribute(i))?n.value:r||null}function bt(n,i){if(!(n=n.getAttribute(i)))throw new P(2,4,4023,i);return n.value}function ct(n,i,r){r=void 0===r?[]:r,this.g=i,this.h=n,this.Bb=r}function dt(n,i){this.name=n,this.value=i}function et(n,i){return n.filter(function(n){return n.name==i})}function ft(n,i){return n.filter(function(n){return bt(n,"TYPE")==i})}function gt(n,i){n=t(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value).name===i)return r;return null}function ht(n,i,r){return r=void 0===r?0:r,(n=gt(n,i))?Number(n.value):r}function it(n,i,r){return i?jt(n,[i],r):[]}function jt(n,i,r){if(!i.length)return[];i=zb(n,i),n=[],i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=n,u=s.push,p=o.value;if((o=r)&&o.size){var y=(p=String(p).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(y){y=t(y);for(var A=y.next();!A.done;A=y.next()){var T=(A=A.value).slice(2,A.length-1),x=o.get(T);if(x)p=p.replace(A,x);else throw new P(2,4,4039,T)}}o=p}else o=p;u.call(s,o)}return n}function kt(n){this.h=n||"",this.g=0}function lt(n){mt(n,/[ \t]+/gm)}function mt(n,i){return(i.lastIndex=n.g,i=null==(i=i.exec(n.h))?null:{position:i.index,length:i[0].length,results:i},n.g==n.h.length||null==i||i.position!=n.g)?null:(n.g+=i.length,i.results)}function nt(n){return n.g==n.h.length?null:(n=mt(n,/[^ \t\n]*/gm))?n[0]:null}function ot(){this.g=0}function pt(n,i){var r=(i=(i=Tf(i)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new P(2,4,4015);i=0;for(var o=!0,s=t(r),u=s.next();!u.done;u=s.next())if(u=u.value,/^#(?!EXT)/m.test(u)||o)o=!1;else if(u=qt(n,u),--n.g,i_.includes(u.name)){i=1;break}else"EXT-X-STREAM-INF"==u.name&&(o=!0);for(u=0,s=[],o=!0;u<r.length;u++){var p=r[u],y=r[u+1];if(/^#(?!EXT)/m.test(p)||o)o=!1;else{if(p=qt(n,p),ij.includes(p.name)){if(1!=i)throw new P(2,4,4017);p=r.splice(u,r.length-u),r=[],o=[],u=[],y=null,p=t(p);for(var A=p.next();!A.done;A=p.next())A=A.value,/^(#EXT)/.test(A)?(A=qt(n,A),i_.includes(A.name)?s.push(A):"EXT-X-MAP"==A.name?y=A:"EXT-X-PART"==A.name?u.push(A):"EXT-X-PRELOAD-HINT"==A.name?"PART"==X(A,"TYPE")?u.push(A):"MAP"==X(A,"TYPE")&&(A.name="EXT-X-MAP",y=A):o.push(A)):/^#(?!EXT)/m.test(A)||(A=A.trim(),y&&o.push(y),r.push(new ct(A,o,u)),o=[],u=[]);return u.length&&(y&&o.push(y),r.push(new ct("",o,u))),new Zs(i,s,r)}s.push(p),"EXT-X-STREAM-INF"==p.name&&(p.g.push(new dt("URI",y)),o=!0)}}return new Zs(i,s)}function qt(n,i){n=n.g++;var r=i.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new P(2,4,4016,i);i=r[1];var o=r[2];if(r=[],o){(u=mt(o=new kt(o),/^([^,=]+)(?:,|$)/g))&&(s=u[1]);for(var s,u,p=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=mt(o,p);)r.push(new dt(u[1],u[2]||u[3])),lt(o)}return new $s(n,i,r,s)}$s.prototype.toString=function(n){var i="#"+this.name,r=this.g?this.g.filter(function(i){return!n||!n.has(i.name)}).map(function(n){return n.name+"="+(isNaN(Number(n.value))?'"'+n.value+'"':n.value)}):[];return this.value&&r.unshift(this.value),0<r.length&&(i+=":"+r.join(",")),i},$s.prototype.getAttribute=function(n){var i=this.g.filter(function(i){return i.name==n});return i.length?i[0]:null};var i_="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),ij="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function tt(){}function ut(n){try{var i=vt(n);return qf({uri:n,originalUri:n,data:i.data,headers:{"content-type":i.contentType}})}catch(n){return of(n)}}function vt(i){var r=i.split(":");if(2>r.length||"data"!=r[0]||2>(r=r.slice(1).join(":").split(",")).length)throw new P(2,1,1004,i);var o=r[0];i=n.decodeURIComponent(r.slice(1).join(",")),o=(r=o.split(";"))[0];var s=!1;return 1<r.length&&"base64"==r[r.length-1]&&(s=!0,r.pop()),{data:s?qg(i):Xf(i),contentType:o}}function wt(n){var i=md(n);return{type:i.split("/")[0],mimeType:i,codecs:n=nd(n),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function zt(){var n=this;this.g=this.i=null,this.C=1,this.s=new Map,this.J=new Map,this.L=new Map,this.L.set("video",new Map),this.L.set("audio",new Map),this.L.set(eh,new Map),this.L.set("image",new Map),this.va=new Set,this.h=new Map,this.l=null,this.Z="",this.sa=new ot,this.K=-1,this.V=1/0,this.$=this.Xa=!1,this.u=new Dd(function(){var i,r,o,s,u,p;i=n,K(function(n){switch(n.g){case 1:if(!i.i)return n.return();return ta(n,2),r=Date.now(),D(n,i.update(),4);case 4:o=Date.now(),Et(i)&&(s=(o-r)/1e3,i.Ra.sample(1,s),u=Math.max(0,i.m-Zb(i.Ra)),i.u.S(u)),va(n,3);break;case 2:if(p=wa(n),!i.i)return n.return();if(i.g.raiseFatalErrorOnManifestUpdateRequestFailure)return i.i.onError(p),n.return();p.severity=1,i.i.onError(p),i.u.S(.1);case 3:if(!i.i)return n.return();i.i.onManifestUpdated(),F(n)}})}),this.aa=iK,this.G=null,this.ua=0,this.m=1/0,this.ha=this.Aa=this.M=0,this.N=new uf,this.H=new Map,this.I=new Map,this.W=new Map,this.Wa=this.D=!1,this.Ra=new Yb(5),this.j=null}function Kt(n,i){return Et(n)?n.L.get(i.type):i.ye}function Rt(n,i,r){i.yc+=r,i.Qb+=r,n=Kt(n,i);for(var o=t(n),s=o.next();!s.done;s=o.next()){var u=t(s.value);s=u.next().value,u=u.next().value,n.set(s,u+r)}i.ba()}function Tt(n,i,r){var o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z;return K(function(G){switch(G.g){case 1:if(o=wt(n.g.hls.mediaPlaylistFullMimeType),!i.segments.length)return G.return(o);if(s=Math.trunc((i.segments.length-1)/2),u=i.segments[s],y=(p=it(r(),i.segments[0].h))[0],T=iB[A=new fb(y).Ya.split(".").pop()])return G.return(wt(T));if(x=e7,C=null,I=gu(n,i,u.g,r),n.W.clear(),!I){G.F(2);break}return M=ok(I.ba(),I.Pb(),I.Mb(),n.g.retryParameters),D(G,hu(n,M,x,{type:0}),3);case 3:C=G.h.data;case 2:return N=Af(p,n.g.retryParameters),D(G,hu(n,N,x,{type:1}),4);case 4:if((j=(_=G.h).headers["content-type"])&&(j=j.split(";")[0].toLowerCase()),"ts"==A||"video/mp2t"==j){var H=_.data,q=lc(H),Y=(q=(new wi).parse(q)).sd();q=q.Lf();var Q=[],J=!1,$=!1;switch(Y.audio){case"aac":Q.push("mp4a.40.2"),J=!0;break;case"mp3":Q.push("mp4a.40.34"),J=!0;break;case"ac3":Q.push("ac-3"),J=!0;break;case"ec3":Q.push("ec-3"),J=!0}switch(Y.video){case"avc":q.wa?Q.push(q.wa):Q.push("avc1.42E01E"),$=!0;break;case"hvc":q.wa?Q.push(q.wa):Q.push("hvc1.1.6.L93.90"),$=!0}if(Q.length){if(Y=J&&!$,J=new Map,$){($=new rc("video/mp2t")).i(H),H=t($.j());for(var ea=H.next();!ea.done;ea=H.next())ea=ea.value,J.set(ea,ea);$.h()}q={type:Y?"audio":"video",mimeType:"video/mp2t",codecs:Q.join(", "),language:null,height:q.height,width:q.width,channelCount:null,sampleRate:null,closedCaptions:J}}else q=null;if(B=q)return G.return(B)}else if(("mp4"==A||"cmfv"==A||"m4s"==A||"video/mp4"==j||"audio/mp4"==j||"video/iso.segment"==j)&&(z=function(n,i){function c(n){return d(n.name)}function d(n){switch(n=n.toLowerCase()){case"avc1":case"avc3":r.push(n+".42E01E"),s=!0;break;case"hev1":case"hvc1":r.push(n+".1.6.L93.90"),s=!0;break;case"dvh1":case"dvhe":r.push(n+".05.04"),s=!0;break;case"vp09":r.push(n+".00.10.08"),s=!0;break;case"av01":r.push(n+".0.01M.08"),s=!0;break;case"mp4a":r.push("mp4a.40.2"),o=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":r.push(n),o=!0}}var r=[],o=!1,s=!1,u=null,p=null,y=null,A=null,T=null;if((new bg).box("moov",gg).box("trak",gg).T("tkhd",function(n){p=String((n=hi(n.reader,n.version)).height),y=String(n.width)}).box("mdia",gg).T("mdhd",function(n){u=fi(n.reader,n.version).language}).box("minf",gg).box("stbl",gg).T("stsd",ig).box("mp4a",function(n){var i=n.reader;i.skip(6),i.skip(2),i.skip(8);var r=i.Ua();i.skip(2),i.skip(2),i.skip(2),i=i.Ua()+i.Ua()/65536,A=r,T=i,n.reader.xa()?gg(n):c(n)}).box("esds",function(n){n=function(n){for(var i,r,o="mp4a";n.xa();){i=n.ra();for(var s=n.ra();128&s;)s=n.ra();if(3==i)n.Ua(),128&(s=n.ra())&&n.Ua(),64&s&&n.skip(n.ra()),32&s&&n.Ua();else if(4==i)r=n.ra(),n.skip(12);else if(5==i)break}return r&&(o+="."+this.g(r),5==i&&n.xa()&&(31==(r=(248&(i=n.ra()))>>3)&&n.xa()&&(r=32+((7&i)<<3)+((224&n.ra())>>5)),o+="."+r)),{wa:o}}(n.reader),r.push(n.wa),o=!0}).box("ac-3",c).box("ec-3",c).box("opus",c).box("Opus",c).box("fLaC",c).box("avc1",function(n){n=ki(n.reader,n.name),r.push(n.wa),s=!0}).box("avc3",function(n){n=ki(n.reader,n.name),r.push(n.wa),s=!0}).box("hev1",c).box("hvc1",c).box("dvh1",c).box("dvhe",c).box("vp09",c).box("av01",c).box("enca",jg).box("encv",jg).box("sinf",gg).box("frma",function(n){d(n=li(n.reader).wa)}).parse(n||i,!0),!r.length)return null;var x=o&&!s,C=new Map;if(s){var I=new rc("video/mp4");for(n&&I.init(n),I.i(i),i=(n=t(I.j())).next();!i.done;i=n.next())i=i.value,C.set(i,i);I.h()}return{type:x?"audio":"video",mimeType:x?"audio/mp4":"video/mp4",codecs:(function(n){var i=new Set,r=[];n=t(n);for(var o=n.next();!o.done;o=n.next()){var s=ld(o=o.value);i.has(s)||(r.push(o),i.add(s))}return r})(r).join(", "),language:u,height:p,width:y,channelCount:A,sampleRate:T,closedCaptions:C}}(C,_.data)))return G.return(z);return G.return(o)}})}function Jt(n){if(Et(n)){if(n.aa==iH){var i=function(n){var i=1/0,r=1/0;n=t(n.h.values());for(var o=n.next();!o.done;o=n.next())(o=o.value).stream.segmentIndex&&"text"!=o.stream.type&&(i=Math.min(i,o.Qb),r=Math.min(r,o.yc));return i-r}(n);n.g.hls.useSafariBehaviorForLive&&(i=n.l.s),isNaN(n.g.availabilityWindowOverride)||(i=n.g.availabilityWindowOverride),n.l.Ne(i)}if(!n.l.m){i=t(i=Array.from(n.h.values()).filter(function(n){return n.stream.segmentIndex}));for(var r=i.next();!r.done;r=i.next())("audio"==(r=r.value).type||"video"==r.type)&&(r=r.stream.segmentIndex.get(0))&&r.oa&&n.l.og(r.oa)}}else n.l.gb(ku(n));n.l.ve()}function Lt(n,i,r){r=new fb(r).g;var o=new Map;i=t(i);for(var s=i.next();!s.done;s=i.next()){var u=s.value,p=X(u,"NAME"),y=X(u,"VALUE");s=X(u,"QUERYPARAM"),u=X(u,"IMPORT"),p&&y&&(o.has(p)||o.set(p,y)),s&&(p=r.get(s)[0])&&!o.has(p)&&o.set(s,p),u&&(s=n.s.get(u))&&o.set(u,s)}return o}function lu(n,i){var r=X(i,"CODECS")||"";n.$=0<r.length,n.$||n.g.hls.disableCodecGuessing||(i=[],n.g.disableVideo||i.push(n.g.hls.defaultVideoCodec),n.g.disableAudio||i.push(n.g.hls.defaultAudioCodec),r=i.join(",")),n=new Set,i=[],r=t(r.split(/\s*,\s*/));for(var o=r.next();!o.done;o=r.next()){var s=ld(o=o.value);n.has(s)||(i.push(o),n.add(s))}return i}function vu(n){return(n=X(n,"CHANNELS"))?parseInt(n.split("/")[0],10):null}function xu(n){return(n=X(n,"SAMPLE-RATE"))?parseInt(n,10):null}function wu(n){return!!(n=X(n,"CHANNELS"))&&n.includes("/JOC")}function mu(n,i,r){for(var o=[],s=[],u=new Map,p=t(i),y=p.next();!y.done;y=p.next()){var A=y.value;y=bt(A,"URI"),A=bt(A,"GROUP-ID"),o.push(y),s.push(A),u.set(A,y)}if(p=s.sort().join(","),y=i[0],i="","subtitles"==(A=bt(y,"TYPE").toLowerCase())&&(A=eh),A==eh)i=X(y,"CODECS")||"";else{s=t(s);for(var T=s.next();!T.done;T=s.next())if(T=T.value,n.I.has(T)){i=n.I.get(T);break}}if(s=o.sort().join(","),n.h.has(s))return n.h.get(s);if(T=n.C++,n.j){u=t(u);for(var x=u.next();!x.done;x=u.next()){var C=t(x.value);x=C.next().value,C=C.next().value,(x=r.get(x))&&Nr(n.j,T,x,C)}}r=X(y,"LANGUAGE"),u=X(y,"NAME"),x="YES"==X(y,"DEFAULT"),C="audio"==A?vu(y):null;var I="audio"==A&&wu(y),M=X(y,"CHARACTERISTICS"),N="YES"==X(y,"FORCED");return y="audio"==A?xu(y):null,(o=qu(n,T,o,i,A,r,x,u,C,null,M,N,y,I)).stream&&(o.stream.groupId=p),n.J.has(p)?n.J.get(p).push(o):n.J.set(p,[o]),n.h.set(s,o),o}function qu(n,i,r,o,s,u,p,y,A,T,x,C,I,M){function v(){return n.j&&1<r.length?Or(n.j,i):_.concat(jt([n.Z],r,n.s))}var N=Au(n,o,s,u,p,y,A,T,x,C,I,M),_=[],j={stream:N,type:s,jh:_,ba:v,yc:0,Qb:0,ye:new Map,ae:!1,$d:!1,vd:!1,pf:-1,rb:-1,sb:-1,Sf:!1},B=null,z=new AbortController;return N.createSegmentIndex=function(){return B||(z=new AbortController,B=new Promise(function(i){var r,B,G,H,q,Y,Q,J,$,ea,es,ec,ed,eh,eg,em,ev;i((r=z.signal,K(function(i){switch(i.g){case 1:return B=j.ba(),D(i,Ct(n,j.ba(),!0),2);case 2:if(G=i.h,r.aborted)return i.return();if((H=G.uri)==G.originalUri||B.includes(H)||_.push(H),q=pt(n.sa,G.data),Y=void 0,n.$||!n.g.hls.disableCodecGuessing){i.F(3);break}return D(i,Tt(n,q,v),4);case 4:Y=(Q=i.h).mimeType,o=Q.codecs;case 3:return J=Et(n),D(i,bu(n,0,q,v,H,o,s,u,p,y,A,T,x,C,I,M,Y),5);case 5:if($=i.h,r.aborted)return i.return();if(ea=$.stream,Et(n)&&!J&&du(n,q),j.yc=$.yc,j.Qb=$.Qb,j.ae=$.ae,j.$d=$.$d,j.vd=$.vd,j.ye=$.ye,j.rb=$.rb,j.sb=$.sb,j.Sf=!0,N.segmentIndex=ea.segmentIndex,N.encrypted=ea.encrypted,N.drmInfos=ea.drmInfos,N.keyIds=ea.keyIds,N.mimeType=ea.mimeType,N.bandwidth=N.bandwidth||ea.bandwidth,N.codecs=N.codecs||ea.codecs,N.drmInfos.length&&n.i.newDrmInfo(N),s==(es=ep).ia||s==es.U)for(ed=(ec=t(n.h.values())).next();!ed.done;ed=ec.next())(eh=ed.value).Sf||eh.type!=s||(eh.stream.mimeType=ea.mimeType);s==es.Da&&(eg=ea.segmentIndex.get(0))&&eg.ka&&(N.mimeType="application/mp4"),function(n){if(!n.G)return!1;var i=[],r=[];n=t(n.G.variants);for(var o=n.next();!o.done;o=n.next())(o=o.value).video&&i.push(o.video),o.audio&&r.push(o.audio);return(!(0<i.length)||!!i.some(function(n){return n.segmentIndex}))&&(!(0<r.length)||!!r.some(function(n){return n.segmentIndex}))}(n)&&(n.Xa?eu(n,[j]):(n.Xa=!0,em=Array.from(n.h.values()).filter(function(n){return n.stream.segmentIndex}),eu(n,em),Jt(n),0<(ev=n.m)&&n.u.S(ev))),F(i)}})))}))},N.closeSegmentIndex=function(){B&&!N.segmentIndex&&z.abort(),N.segmentIndex&&(N.segmentIndex.release(),N.segmentIndex=null),B=null},j}function ku(n){var i=1/0;n=t(n.h.values());for(var r=n.next();!r.done;r=n.next())(r=r.value).stream.segmentIndex&&"text"!=r.stream.type&&(i=Math.min(i,r.Qb));return i}function Gt(n,i){var r=[];i=t(i);for(var o=i.next();!o.done;o=i.next())(o=o.value).segmentIndex&&Pj(o.segmentIndex,function(n){r.push(n)});n.l.Dd(r)}function eu(n,i){if(!Et(n))for(var r=ku(n),o=t(i),s=o.next();!s.done;s=o.next())s.value.stream.segmentIndex.Ic(0,r);Gt(n,i.map(function(n){return n.stream})),n.g.hls.ignoreManifestProgramDateTime?function(n,i){for(var r=-1==n.K,o=t(i),s=o.next();!s.done;s=o.next()){var u=(s=s.value).stream.segmentIndex,p=Kt(n,s);if(u=u.g[0]||null){p=t(p);for(var y=p.next();!y.done;y=p.next()){var A=(y=t(y.value)).next().value;if(y.next().value==u.startTime){r&&(n.K=Math.max(n.K,A)),s.pf=A;break}}}}if(!(0>n.K))for(s=(i=t(i)).next();!s.done;s=i.next())(o=(r=s.value).stream.segmentIndex)&&(o.g.splice(0,n.K-r.pf),(o=o.g[0]||null)&&(o=-o.startTime,r.stream.segmentIndex.offset(o),Rt(n,r,o)))}(n,i):function(n,i){if(1/0==n.V){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value.stream.segmentIndex.g[0]||null;null!=o&&null!=o.oa&&(n.V=Math.min(n.V,o.oa))}}if(1/0!=(i=n.V))for(r=(o=t(n.h.values())).next();!r.done;r=o.next()){var s=(r=r.value).stream.segmentIndex;if(null!=s){var u=s.g[0]||null;if(null==u.oa)Qa("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.ba(),"Expect AV sync issues!");else for(Rt(n,r,u.oa-i-u.startTime),s=(r=t(s)).next();!s.done;s=r.next())s.value.sg(i)}}}(n,i)}function bu(n,i,r,o,s,u,p,y,A,T,x,C,I,M,N,_,j){var B,z,G,H,q,Y,Q,J,$,ea,es,ec,ed,eh,ep,eg,em,ev,eb,eA;return K(function(i){if(1==i.g){if(1!=r.type)throw new P(2,4,4017);B=Lt(n,et(r.g,"EXT-X-DEFINE"),s);var eT,eS,ek,eI,eM,eL,eP,eR,eN,eU,eO,e_,ej,eF,eV,eK=gt(r.g,"EXT-X-PLAYLIST-TYPE"),eG=gt(r.g,"EXT-X-ENDLIST");return eG=eK&&"VOD"==eK.value||eG,eK=eK&&"EVENT"==eK.value&&!eG,eK=!eG&&!eK,eG?It(n,iK):eK?It(n,iH):It(n,iG),Et(n)&&Pt(n,r),j?i.F(2):D(i,(eT=n,eS=p,ek=u,eI=r,eM=B,eL=o,K(function(n){switch(n.g){case 1:if(eP=e7,eR=Math.trunc((eI.segments.length-1)/2),eN=it(eL(),eI.segments[eR].h,eM),eU=new fb(eN[0]).Ya.split(".").pop(),(eO=iF[eS][eU])||(eO=iB[eU])||(eO=nu(eS,ek)))return n.return(eO);return ej=1,eF=Af(eN,eT.g.retryParameters),ta(n,2),eF.method="HEAD",D(n,hu(eT,eF,eP,{type:ej}),4);case 4:e_=n.h.headers["content-type"],va(n,3);break;case 2:if(!(eV=wa(n))||1002!=eV.code&&1001!=eV.code){n.F(3);break}return eF.method="GET",D(n,hu(eT,eF,eP,{type:ej}),6);case 6:e_=n.h.headers["content-type"];case 3:return e_?n.return(e_.split(";")[0]):n.return(ou(eS))}})),3)}if(2!=i.g&&(j=i.h),G=(z=Mt(r,j)).drmInfos,H=z.keyIds,q=z.encrypted,Y=z.Jh,q&&!G.length&&!Y)throw new P(2,4,4026);return(Q=Au(n,u,p,y,A,T,x,C,I,M,N,_)).encrypted=q,Q.drmInfos=G,Q.keyIds=H,Q.mimeType=j,J=Et(n)?n.L.get(p):new Map,ea=($=Nt(n,r,Q,J,B,o)).segments,(es=$.bandwidth)&&(Q.bandwidth=es),Et(n)&&Pt(n,r),ec=ea[0].startTime,ed=ea[ea.length-1].endTime,eh=new Oj(ea),Q.segmentIndex=eh,eg=!!(ep=gt(r.g,"EXT-X-SERVER-CONTROL"))&&null!=ep.getAttribute("CAN-SKIP-UNTIL"),em=!!ep&&null!=ep.getAttribute("CAN-BLOCK-RELOAD"),eb=(ev=Ot(ht(r.g,"EXT-X-MEDIA-SEQUENCE",0),ea)).rb,eA=ev.sb,i.return({stream:Q,type:p,jh:[],ba:o,yc:ec,Qb:ed,ae:eg,$d:em,vd:!1,pf:-1,rb:eb,sb:eA,ye:J,Sf:!1})})}function Ot(n,i){n=n+i.length-1;var r=-1;if(!i.length)return{rb:++n,sb:r};var o=(i=i[i.length-1]).g;return i.g.length?(r=o.length-1,o[o.length-1].l||(n++,r=0)):(n++,i.m&&(r=0)),{rb:n,sb:r}}function Au(n,i,r,o,s,u,p,y,A,T,x,C){var I=nu(r,i)||ou(r),M=[];if(A){A=t(A.split(","));for(var N=A.next();!N.done;N=A.next())M.push(N.value)}return A=void 0,N=null,r==eh?A=M.includes("public.accessibility.transcribes-spoken-dialog")&&M.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":M.includes("public.accessibility.describes-video")&&(N="visually impaired"),M.length||"subtitle"!==A||M.push("subtitle"),{id:n.C++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:I,codecs:i,kind:r==eh?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Kb(o||"und"),originalLanguage:o,label:u,type:r,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:M,forced:T,channelsCount:p,audioSamplingRate:x,spatialAudio:C,closedCaptions:y,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:N,external:!1,fastSwitching:!1}}function Mt(n,i){var r=[];if(n.segments){n=t(n.segments);for(var o=n.next();!o.done;o=n.next())o=et(o.value.g,"EXT-X-KEY"),r.push.apply(r,w(o))}o=n=!1;var s=[],u=new Set;r=t(r);for(var p=r.next();!p.done;p=r.next()){var y=bt(p=p.value,"METHOD");if("NONE"!=y){if(n=!0,"AES-128"==y)o=!0;else if(p=(y=iV[y=X(p,"KEYFORMAT")||"identity"])?y(p,i):null){if(p.keyIds){y=t(p.keyIds);for(var A=y.next();!A.done;A=y.next())u.add(A.value)}s.push(p)}}}return{drmInfos:s,keyIds:u,encrypted:n,Jh:o}}function Du(i,r,o,s,u){if(!n.crypto||!n.crypto.subtle)throw Ra("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new P(2,4,4042);var p=0,y=X(r,"IV","");if(y){var A=rg(y.substr(2));if(16!=A.byteLength)throw new P(2,4,4048)}else p=ht(o.g,"EXT-X-MEDIA-SEQUENCE",0);var T={method:"AES-128",iv:A,firstMediaSequenceNumber:p,fetchKey:function(){var o,p,y,A;return K(function(x){if(1==x.g)return o=Af(it(s(),bt(r,"URI"),u),i.g.retryParameters),D(x,hu(i,o,6),2);if(3!=x.g){if(!(p=x.h).data||16!=p.data.byteLength)throw new P(2,4,4049);return y={name:"AES-CBC"},A=T,D(x,n.crypto.subtle.importKey("raw",p.data,y,!0,["decrypt"]),3)}A.cryptoKey=x.h,T.fetchKey=void 0,F(x)})}};return T}function Pt(n,i){var r=1/0,o=i.segments;if(o.length)for(var s=o.length-1;0<=s;){var u=gt(o[s].g,"EXTINF");if(u){r=Number(u.value.split(",")[0]);break}s--}if(!(o=gt(i.g,"EXT-X-TARGETDURATION")))throw new P(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(s=gt(i.g,"EXT-X-PART-INF"))&&(n.M=Number(bt(s,"PART-TARGET"))),i=gt(i.g,"EXT-X-SERVER-CONTROL"),n.D&&n.M?(n.m=n.Wa?5*n.M<=r?Math.min(n.M,n.m):Math.min(r,n.m):Math.min(n.M,n.m),n.ha=i?Number(bt(i,"PART-HOLD-BACK")):0):(n.m=Math.min(r,n.m),r=i?i.getAttribute("HOLD-BACK"):null,n.Aa=r?Number(r.value):0),n.ua=Math.max(o,n.ua)}function du(n,i){if(n.g.defaultPresentationDelay)i=n.g.defaultPresentationDelay;else if(n.ha)i=n.ha;else if(n.Aa)i=n.Aa;else{i=i.segments.length;var r=n.g.hls.liveSegmentsDelay;r>i-2&&(r=Math.max(1,i-2)),i=n.ua*r}n.l.og(0),n.l.oh(i),n.l.Vc(!1)}function gu(n,i,r,o,s){var u=gt(r,"EXT-X-MAP");if(!u)return null;var p=bt(u,"URI"),y=it(o(),p,s);if(p=[y.toString(),X(u,"BYTERANGE","")].join("-"),!n.W.has(p)){var A,T,x,C,I,M,N=void 0,_=null;r=t(r);for(var j=r.next();!j.done;j=r.next())"EXT-X-KEY"==(j=j.value).name?"AES-128"==bt(j,"METHOD")&&j.id<u.id&&(N=Du(n,j,i,o,s)):"EXT-X-BYTERANGE"==j.name&&j.id<u.id&&(_=j);A=y,T=u,x=_,C=N,I=0,M=null,(T=X(T,"BYTERANGE"))||!x||(T=x.value),T&&(M=Number((I=T.split("@"))[0]),M=(I=Number(I[1]))+M-1,C&&(x=M+1-I)%16&&(M+=16-x%16)),i=new Nh(function(){return A},I,M,null,null,null,C),n.W.set(p,i)}return n.W.get(p)}function Gu(n,i){var r=0,o=null;return i&&(i=Number((r=i.split("@"))[0]),o=(r=r[1]?Number(r[1]):n.Na+1)+i-1),[r,o]}function Nt(i,r,o,s,u,p){var y=r.segments,A=void 0,T=ht(r.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),x=ht(r.g,"EXT-X-MEDIA-SEQUENCE",0),C=gt(r.g,"EXT-X-SKIP"),I=C?Number(X(C,"SKIPPED-SEGMENTS")):0,M=x+I,N=0;Et(i)&&s.has(M)&&(N=s.get(M)),0===N&&i.aa==iH&&0<s.size&&!s.has(M)&&(N=i.l.Ab());var _=[],j=null;C=[];for(var B=0;B<y.length;B++){var z=y[B],G=0==B?N:j.endTime;M=x+I+B,gt(z.g,"EXT-X-DISCONTINUITY")&&T++;for(var H=t(z.g),q=H.next();!q.done;q=H.next())"EXT-X-KEY"==(q=q.value).name&&(A="AES-128"==bt(q,"METHOD")?Du(i,q,r,p,u):void 0);s.set(M,G),H=gu(i,r,z.g,p,u),!i.D&&i.i.isAutoLowLatencyMode()&&(i.i.enableLowLatencyMode(),i.D=i.i.isLowLatencyMode()),(G=function(i,r,o,s,u,p,y,A,T){var x=s.g,C=gt(x,"EXTINF"),I=0,M=0,N=null;s.Bb.length&&!i.D&&Ra("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var _=null;if(!i.g.hls.ignoreManifestProgramDateTime){var j=gt(x,"EXT-X-PROGRAM-DATE-TIME");j&&j.value&&(_=Gg(j.value))}var B=tL;if(gt(x,"EXT-X-GAP")&&(B=2),!C){if(0==s.Bb.length)throw new P(2,4,4024,"EXTINF");if(!i.D)return null}var z=[];j=!1;var G=null,H=!1,q=!1;if(i.D&&s.Bb.length){I=("video/mp4"==y.mimeType||"audio/mp4"==y.mimeType)&&n.ReadableStream&&i.g.hls.allowLowLatencyByteRangeOptimization;for(var Y=_,Q={},J=0;J<s.Bb.length;Q={hd:Q.hd,Ud:Q.Ud},J++){var $=s.Bb[J],ea=0==J?o:z[z.length-1],es=0==J?u:ea.endTime,ec=Number(X($,"DURATION"))||i.M;if(ec){var ed=es+ec,eh=0,ep=null;if("EXT-X-PRELOAD-HINT"==$.name?(eh=(eh=X($,"BYTERANGE-START"))?Number(eh):0,(ea=X($,"BYTERANGE-LENGTH"))?ep=eh+Number(ea)-1:eh&&(ep=Number.MAX_SAFE_INTEGER)):(eh=(ep=t(Gu(ea,eh=X($,"BYTERANGE")))).next().value,ep=ep.next().value),Q.Ud=X($,"URI"),Q.Ud){ea=tL,"YES"==X($,"GAP")&&(ea=2,H=!0),Q.hd=null;var eg=function(n){return function(){return null==n.hd&&(n.hd=it(A(),n.Ud,p)),n.hd}}(Q);I&&0<=eh&&null!=ep&&(G=eg,j=!0),es=new Ph(es,ed,eg,eh,ep,r,0,0,1/0,[],"",null,Y,ea,T),"EXT-X-PRELOAD-HINT"==$.name&&(es.Tf(),q=!0),"YES"!=X($,"INDEPENDENT")&&0<J&&es.xe(),z.push(es),Y&&(Y+=ec)}}}}if(C){if(0==(C=Number(C.value.split(",")[0])))return null;I=u+C}else{if(!z.length)return null;I=z[z.length-1].endTime}j&&(H||0!=z[0].hb?(j=!1,G=null):z=[]),(C=gt(x,"EXT-X-BYTERANGE"))?(M=(N=t(Gu(o,C.value))).next().value,N=N.next().value):z.length&&(M=z[0].hb,N=z[z.length-1].Na),o="",C=null,"image"==y.type&&(o="1x1",y=gt(x,"EXT-X-TILES"))&&(o=bt(y,"LAYOUT"),(y=X(y,"DURATION"))&&(C=Number(y)));var em=null;return r=new Ph(u,I,function(){return G?G():(null==em&&(em=it(A(),s.h,p)),em||[])},M,N,r,0,0,1/0,z,o,C,_,B,T,0<z.length&&!!s.h),j&&(i.Wa=!0,r.bh(),q&&r.Tf()),r}(i,H,j,z,G,u,o,p,A))&&((j=ht(z.g,"EXT-X-BITRATE"))?C.push({bitrate:j,duration:G.endTime-G.startTime}):C.length&&(j=C.pop(),j.duration+=G.endTime-G.startTime,C.push(j)),j=G,G.i=T,i.g.hls.ignoreManifestProgramDateTime&&null!=i.K&&M<i.K||_.push(G))}if(r=void 0,C.length&&(r=C.reduce(function(n,i){return n+i.duration},0),r=Math.round(C.reduce(function(n,i){return n+i.bitrate*i.duration},0)/r*1e3)),C=_.some(function(n){return null!=n.oa})){for(o={},s=0;s<_.length;o={Zc:o.Zc,Yc:o.Yc,Qd:o.Qd,Vb:o.Vb,Xc:o.Xc},s++)if(o.Vb=_[s],null==o.Vb.oa)for(o.Yc=0,o.Zc=s,u=function(n){return function(){var i=_[n.Zc];if(i){if(null!=i.oa)return i.oa+n.Yc;n.Yc-=i.endTime-i.startTime,n.Zc+=1}return null}}(o),o.Xc=0,o.Qd=s,p=function(n){return function(){var i=_[n.Qd];if(i){if(i!=n.Vb&&(n.Xc+=i.endTime-i.startTime),null!=i.oa)return i.oa+n.Xc;--n.Qd}return null}}(o);null==o.Vb.oa;)o.Vb.oa=p(),null==o.Vb.oa&&(o.Vb.oa=u())}if(C)for(s=(o=t(_)).next();!s.done;s=o.next())for(s=(u=s.value).oa,p=(u=t(u.g)).next();!p.done;p=u.next())(p=p.value).oa=s,s+=p.endTime-p.startTime;if(i=i.V,C&&1/0!=i)for(s=(C=t(_)).next();!s.done;s=C.next())s.value.sg(i);return{segments:_,bandwidth:r}}function nu(n,i){if(n==eh){if("vtt"==i||"wvtt"==i)return"text/vtt";if(i&&""!==i)return"application/mp4"}return"image"!=n||i&&"jpeg"!=i?"audio"==n&&"mp4a.40.34"==i?"audio/mpeg":"mjpg"==i?"application/mp4":null:"image/jpeg"}function ou(n){return n==eh?"text/vtt":iF[n].mp4}function cu(n,i,r,o,s,u){n&&(n.width=Number(i)||void 0,n.height=Number(r)||void 0,n.frameRate=Number(o)||void 0,n.hdr=s||void 0,n.videoLayout=u||void 0)}function Ct(n,i,r){return hu(n,Af(i,n.g.retryParameters),0,{type:r?2:3})}function Et(n){return n.aa!=iK}function It(n,i){n.aa=i,n.l&&n.l.Vc(!Et(n)),Et(n)||n.u.stop()}function hu(n,i,r,o){if(!n.N)throw new P(2,7,7001);return i=n.i.networkingEngine.request(r,i,o),vf(n.N,i),i.promise}L("shaka.net.DataUriPlugin",tt),tt.parse=ut,xf("data",ut),(N=zt.prototype).configure=function(n){this.g=n,this.j&&this.j.configure(this.g)},N.start=function(n,i){var r,o=this;return K(function(s){var u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea,es,ec,ed,ep,eg,em,ev,eb,eA,eT,eS;return 1==s.g?(o.i=i,o.D=i.isLowLatencyMode(),D(s,Ct(o,[n]),2)):3!=s.g?(r=s.h,o.Z=r.uri,D(s,(u=o,p=r.data,y=n,K(function(n){var i,r,o,s,ek,eI,eM,eL,eP,eR,eN,eU,eO;switch(n.g){case 1:if(T=et((A=pt(u.sa,p)).g,"EXT-X-DEFINE"),x=[],C=[],I=[],1==A.type)return D(n,Tt(u,A,H=function(){return[y]}),6);return function(n,i){var r=new fb(n.Z).g;i=t(i);for(var o=i.next();!o.done;o=i.next()){var s=o.value;o=X(s,"NAME");var u=X(s,"VALUE");s=X(s,"QUERYPARAM"),o&&u&&(n.s.has(o)||n.s.set(o,u)),s&&(o=r.get(s)[0])&&!n.s.has(o)&&n.s.set(s,o)}}(u,T),M=et(A.g,"EXT-X-MEDIA"),N=et(A.g,"EXT-X-STREAM-INF"),_=et(A.g,"EXT-X-IMAGE-STREAM-INF"),j=et(A.g,"EXT-X-I-FRAME-STREAM-INF"),B=et(A.g,"EXT-X-SESSION-KEY"),z=et(A.g,"EXT-X-SESSION-DATA"),G=et(A.g,"EXT-X-CONTENT-STEERING"),function(n,i){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=X(o,"DATA-ID");r=X(o,"URI");var u=X(o,"LANGUAGE");o=X(o,"VALUE"),s=(new Map).set("id",s),r&&s.set("uri",it([n.Z],r,n.s)[0]),u&&s.set("language",u),o&&s.set("value",o),r=new O("sessiondata",s),n.i&&n.i.onEvent(r)}}(u,z),D(n,(i=u,r=G,K(function(n){if(!i.i||!i.g)return n.return();for(ek=(s=t(r)).next();!ek.done;ek=s.next())if(eM=X(eI=ek.value,"PATHWAY-ID"),eL=X(eI,"SERVER-URI"),eM&&eL){i.j=new Jr(i.i),i.j.configure(i.g),i.j.j=[i.Z],i.j.setManifestType("HLS"),i.j.h=eM,o=Kr(i.j,eL);break}return D(n,o,0)})),4);case 4:return function(n,i){i=t(i);for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=X(o,"AUDIO");r=X(o,"VIDEO");var u=X(o,"SUBTITLES");if(o=lu(n,o),u){var p=Cb(eh,o);n.I.set(u,p),vc(o,p)}s&&((u=Cb("audio",o))||(u=n.g.hls.defaultAudioCodec),n.I.set(s,u)),r&&((s=Cb("video",o))||(s=n.g.hls.defaultVideoCodec),n.I.set(r,s))}}(u,N),function(n,i){i=t(i=ft(i,"CLOSED-CAPTIONS"));for(var r=i.next();!r.done;r=i.next()){var o=r.value,s=X(o,"LANGUAGE");r=Kb(s||"und"),s||(s=X(o,"NAME"))&&(r=s),s=bt(o,"GROUP-ID"),o=bt(o,"INSTREAM-ID").replace("SERVICE","svc"),n.H.get(s)||n.H.set(s,new Map),n.H.get(s).set(o,r)}}(u,M),x=function(n,i,r,o){var s=[],u=new Set;if(0<r.length){r=t(r);for(var p=r.next();!p.done;p=r.next()){var y=bt(p=p.value,"METHOD");if("NONE"!=y&&"AES-128"!=y&&(p=(y=iV[y=X(p,"KEYFORMAT")||"identity"])?y(p,""):null)){if(p.keyIds){y=t(p.keyIds);for(var A=y.next();!A.done;A=y.next())u.add(A.value)}s.push(p)}}}for(r={},p=(i=t(i)).next();!p.done;p=i.next())r[y=at(p=p.value)]?r[y].push(p):r[y]=[p];for(var T in i=[],r){var x=(A=r[T])[0];p=X(x,"FRAME-RATE"),y=Number(X(x,"AVERAGE-BANDWIDTH"))||Number(bt(x,"BANDWIDTH"));var C=X(x,"RESOLUTION"),I=t(C?C.split("x"):[null,null]);C=I.next().value,I=I.next().value;var M=X(x,"VIDEO-RANGE");(x=X(x,"REQ-VIDEO-LAYOUT"))&&x.includes(",")&&(x=x.split(",").filter(function(n){return"CH-STEREO"==n||"CH-MONO"==n})[0]),x=x||"CH-MONO",A=function(n,i,r,o){for(var s={audio:[],video:[]},u=new Map,p=[],y=!1,A=!1,T=t(i),x=T.next();!x.done;x=T.next()){var C=x.value;x=X(C,"AUDIO");var I=X(C,"VIDEO"),M=x||I;M&&(p.includes(M)||p.push(M),(C=X(C,"PATHWAY-ID"))&&u.set(M,C),x?y=!0:I&&(A=!0))}p.length&&r.length&&function(n,i,r){i=i.filter(function(n){var i=X(n,"URI")||"";return"SUBTITLES"!=X(n,"TYPE")&&""!=i});var o={};i=t(i);for(var s=i.next();!s.done;s=i.next()){var u=at(s=s.value);o[u]?o[u].push(s):o[u]=[s]}for(var p in o)mu(n,o[p],r)}(n,T=r.filter(function(n){return p.includes(bt(n,"GROUP-ID"))}),u),T=(u=p.sort().join(","))&&n.J.has(u)?n.J.get(u):[],y?s.audio.push.apply(s.audio,w(T)):A&&s.video.push.apply(s.video,w(T)),x=!1;var N=i.map(function(n){return bt(n,"URI")});if(A=s.audio.find(function(n){return n&&n.ba().find(function(n){return N.includes(n)})}),I=Cb("video",y=lu(n,i[0])),(M=Cb("audio",y))&&!I?(A="audio",x=0<s.audio.length):!s.audio.length&&!s.video.length&&M&&I?(A="video",y=[[I,M].join()]):s.audio.length&&A?(A="audio",x=!0):A=s.video.length&&!s.audio.length?"audio":"video",!x){var _=C=M=I=x=null;!T.length&&(r=r.find(function(n){var i=X(n,"URI")||"",r=X(n,"TYPE");return n=bt(n,"GROUP-ID"),"SUBTITLES"!=r&&""==i&&p.includes(n)}))&&(x=X(r,"LANGUAGE"),I=X(r,"NAME"),M=vu(r),wu(r),C=X(r,"CHARACTERISTICS"),_=xu(r)),n=function(n,i,r,o,s,u,p,y,A){for(var T=n.C++,x=[],C=t(i),I=C.next();!I.done;I=C.next()){var M=I.value;I=bt(M,"URI"),M=X(M,"PATHWAY-ID"),n.j&&M&&Nr(n.j,T,M,I),x.push(I)}if(C=x.sort().join(","),n.h.has(C))return n.h.get(C);e:{if(i=X(i[0],"CLOSED-CAPTIONS"),"video"==o){if(i&&"NONE"!=i){i=n.H.get(i);break e}if(!i&&n.H.size)for(i=t(n.H.keys()).next();!i.done;){i=n.H.get(i.value);break e}}i=null}return o=qu(n,T,x,r=Bb(o,r),o,s,!1,u,p,i,y,!1,A,!1),n.h.set(C,o),o}(n,i,y,A,x,I,M,C,_),u&&(n.stream.groupId=u),T.length||(n.stream.bandwidth=o),s[n.stream.type]=[n]}return s}(n,A,o,y),i.push.apply(i,w(function(n,i,r,o,s,u,p,y,A,T,x){for(var C=t(r),I=C.next();!I.done;I=C.next())cu(I.value.stream,s,u,p,y,A);for(s=n.g.disableAudio,(!i.length||s)&&(i=[null]),s=n.g.disableVideo,(!r.length||s)&&(r=[null]),s=[],u=(i=t(i)).next();!u.done;u=i.next())for(u=u.value,y=(p=t(r)).next();!y.done;y=p.next()){var M=y.value;(y=u?u.stream:null)&&(y.drmInfos=T,y.keyIds=x),(A=M?M.stream:null)&&(A.drmInfos=T,A.keyIds=x),C=u?u.stream.drmInfos:null,I=M?M.stream.drmInfos:null,M=(M=M?M.ba().sort().join(","):"")+" - "+(u?u.ba().sort().join(","):""),y&&A&&!Dh(C,I)||n.va.has(M)||(y={id:n.C++,language:y?y.language:"und",disabledUntilTime:0,primary:!!y&&y.primary||!!A&&A.primary,audio:y,video:A,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s.push(y),n.va.add(M))}return s}(n,A.audio,A.video,y,C,I,p,M,x,s,u)))}return i.filter(function(n){return null!=n})}(u,N,B,M),C=function(n,i){var r=ft(i,"SUBTITLES");i=r.map(function(i){if(n.g.disableText)return null;try{return mu(n,[i],new Map).stream}catch(i){if(n.g.hls.ignoreTextStreamFailures)return null;throw i}}),r=t(r);for(var o=r.next();!o.done;o=r.next()){var s=bt(o.value,"GROUP-ID");if((o=n.I.get(s))&&(s=n.J.get(s))){s=t(s);for(var u=s.next();!u.done;u=s.next())(u=u.value).stream.codecs=o,u.stream.mimeType=nu(eh,o)||ou(eh)}}return i.filter(function(n){return n})}(u,M),D(n,(eP=u,eR=_,eN=j,K(function(n){return 1==n.g?(eU=eR.map(function(n){var i,r;return K(function(o){if(1==o.g){var s,u,p,y,A,T,x,C,I,M,N;return eP.g.disableThumbnails?o.return(null):(ta(o,2),D(o,(s=eP,u=n,K(function(n){return 1==n.g?(p=bt(u,"URI"),y=X(u,"CODECS","jpeg")||"",s.h.has(p))?n.return(s.h.get(p)):(A=X(u,"LANGUAGE"),T=X(u,"NAME"),x=X(u,"CHARACTERISTICS"),C=qu(s,s.C++,[p],y,"image",A,!1,T,null,null,x,!1,null,!1),(I=X(u,"RESOLUTION"))?D(n,C.stream.createSegmentIndex(),3):n.F(2)):(2!=n.g&&(M=C.stream.segmentIndex.get(0).tilesLayout)&&(C.stream.width=Number(I.split("x")[0])*Number(M.split("x")[0]),C.stream.height=Number(I.split("x")[1])*Number(M.split("x")[1])),(N=X(u,"BANDWIDTH"))&&(C.stream.bandwidth=Number(N)),s.h.set(p,C),n.return(C))})),4))}if(2!=o.g)return i=o.h,o.return(i.stream);if(r=wa(o),eP.g.hls.ignoreImageStreamFailures)return o.return(null);throw r})}).concat(eN.map(function(n){if(eP.g.disableThumbnails)return null;try{var i=bt(n,"URI"),r=X(n,"CODECS")||"";if(eP.h.has(i))var o=eP.h.get(i);else{var s=X(n,"LANGUAGE"),u=X(n,"NAME"),p=X(n,"CHARACTERISTICS"),y=qu(eP,eP.C++,[i],r,"image",s,!1,u,null,null,p,!1,null,!1),A=X(n,"RESOLUTION"),T=t(A?A.split("x"):[null,null]),x=T.next().value,C=T.next().value;y.stream.width=Number(x)||void 0,y.stream.height=Number(C)||void 0;var I=X(n,"BANDWIDTH");I&&(y.stream.bandwidth=Number(I)),eP.h.set(i,y),o=y}return n=o,"mjpg"!==n.stream.codecs?null:n.stream}catch(n){if(eP.g.hls.ignoreImageStreamFailures)return null;throw n}})),D(n,Promise.all(eU),2)):(eO=n.h,n.return(eO.filter(function(n){return n})))})),5);case 5:I=n.h,n.F(3);break;case 6:return Y=(q=n.h).type,Q=q.mimeType,J=q.codecs,$=q.language,ea=q.height,es=q.width,ec=q.channelCount,ed=q.sampleRate,ep=q.closedCaptions,D(n,bu(u,u.C++,A,H,y,J,Y,$,!0,"Media Playlist",ec,ep,null,!1,ed,!1,Q),7);case 7:eg=n.h,u.h.set(y,eg),"video"==Y&&cu(eg.stream,es,ea,null,null,null),x.push({id:0,language:Kb($||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==Y?eg.stream:null,video:"video"==Y?eg.stream:null,bandwidth:eg.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!u.i)throw new P(2,7,7001);if(u.l=new sj(null,0),u.l.Vc(!0),1==A.type&&(Et(u)&&(du(u,A),em=u.m,u.u.S(em)),ev=Array.from(u.h.values()),eu(u,ev),Jt(u)),u.G={presentationTimeline:u.l,variants:x,textStreams:C,imageStreams:I,offlineSessionIds:[],minBufferTime:0,sequenceMode:u.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:u.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},u.$||!u.g.hls.disableCodecGuessing){n.F(8);break}for(eb=[],eT=(eA=t(u.G.variants)).next();!eT.done;eT=eA.next())(eS=eT.value).audio&&""===eS.audio.codecs&&eb.push(eS.audio.createSegmentIndex()),eS.video&&""===eS.video.codecs&&eb.push(eS.video.createSegmentIndex());return D(n,Promise.all(eb),8);case 8:u.i.makeTextStreamsForClosedCaptions(u.G),F(n)}})),3)):s.return(o.G)})},N.stop=function(){this.u&&(this.u.stop(),this.u=null);var n=[];return this.N&&(n.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.va.clear(),this.G=null,this.h.clear(),this.J.clear(),this.I.clear(),this.s.clear(),this.W.clear(),this.j&&this.j.destroy(),Promise.all(n)},N.update=function(){var n,i,r,o,s,u,p,y,A=this;return K(function(T){if(1==T.g){if(!Et(A))return T.return();for(n=[],i=Array.from(A.h.values()),A.m=1/0,s=(o=t(r=i.filter(function(n){return n.stream.segmentIndex}))).next();!s.done;s=o.next())u=s.value,n.push(function(n,i){var r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$,ea,es,ec;return K(function(ed){var eh;if(1==ed.g){for(r=[],s=(o=t(i.ba())).next();!s.done;s=o.next())u=s.value,y=(p=new fb(u)).g,i.$d&&(0<=i.rb&&y.add("_HLS_msn",String(i.rb)),0<=i.sb&&y.add("_HLS_part",String(i.sb))),i.ae&&y.add("_HLS_skip","YES"),wb(y),y.rd&&kb(p,y),r.push(p.toString());return D(ed,Ct(n,r,!0),2)}if(A=ed.h,!i.stream.segmentIndex)return ed.return();if(1!=(T=pt(n.sa,A.data)).type)throw new P(2,4,4017);(x=A.uri)==A.originalUri||i.ba().includes(x)||i.jh.push(x),C=Lt(n,et(T.g,"EXT-X-DEFINE"),x),I=i.stream,M=Kt(n,i),_=(N=Mt(T,I.mimeType)).keyIds,j=N.drmInfos,(eh=I.keyIds).size===_.size&&[].concat(w(eh)).every(function(n){return _.has(n)})||(I.keyIds=_,I.drmInfos=j,n.i.newDrmInfo(I)),z=(B=Nt(n,T,I,M,C,i.ba)).segments,(G=B.bandwidth)&&(I.bandwidth=G),I.segmentIndex.Cd(z,n.l.Ab()),z.length&&(H=ht(T.g,"EXT-X-MEDIA-SEQUENCE",0),Y=(q=gt(T.g,"EXT-X-SKIP"))?Number(X(q,"SKIPPED-SEGMENTS")):0,J=(Q=Ot(H,z)).rb,$=Q.sb,i.rb=J+Y,i.sb=$,ea=M.get(H),I.segmentIndex.yb(ea)),es=z[0],i.yc=es.startTime,ec=z[z.length-1],i.Qb=ec.endTime,gt(T.g,"EXT-X-ENDLIST")&&(i.vd=!0),Pt(n,T),F(ed)})}(A,u));return D(T,Promise.all(n),2)}Gt(A,r.map(function(n){return n.stream})),p=r.some(function(n){return 0==n.vd}),r.length&&!p&&(It(A,iq.Fh),y=r.map(function(n){return n.Qb}),A.l.gb(Math.min.apply(Math,w(y))),A.i.updateDuration()),p&&Jt(A),F(T)})},N.onExpirationUpdated=function(){},N.onInitialVariantChosen=function(){},N.banLocation=function(n){this.j&&this.j.i.set(n,Date.now()+6e4)},L("shaka.hls.HlsParser",zt);var iB={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},iF={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},iV={"com.apple.streamingkeydelivery":function(i,r){if("video/mp2t"==r)throw new P(2,4,4040);if(n.shakaMediaKeysPolyfill)throw new P(2,4,4041);return Ab("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(n){var i=bt(n,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?(i=Ab("com.widevine.alpha",[{initDataType:"cenc",initData:i=lc((i=vt(i=bt(n,"URI"))).data)}]),(n=X(n,"KEYID"))&&(i.keyIds=new Set([n.toLowerCase().substr(2)])),i):null},"com.microsoft.playready":function(n){var i=bt(n,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i)?Ab("com.microsoft.playready",[{initDataType:"cenc",initData:n=vg(n=lc((n=vt(n=bt(n,"URI"))).data),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(i,r){if("video/mp2t"==r)throw new P(2,4,4040);if(n.shakaMediaKeysPolyfill)throw new P(2,4,4041);return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(i=bt(i,"METHOD"))?Ab("org.w3.clearkey",null):null}},iK="VOD",iG="EVENT",iH="LIVE",iq={Fh:iK};function Ju(n){if(n=Ku(n))e:{n=t(n.getElementsByTagName("DATA"));for(var i=n.next();!i.done;i=n.next())if(i=wg(i.value,"LA_URL")){n=i.textContent;break e}n=""}else n="";return n}function Ku(n){return(n=(function(n){var i=0,r=pc(n),o=r.getUint32(i,!0);if(o!=n.byteLength)return[];e:{for(n=i+6,i=[];n<r.byteLength-1;){o=r.getUint16(n,!0),n+=2;var s=r.getUint16(n,!0);if(n+=2,0!=(1&s)||s+n>r.byteLength){r=[];break e}var u=lc(r,n,s);i.push({type:o,value:u}),n+=s}r=i}return r})(n=qg(n.textContent)).filter(function(n){return n.type===iW})[0])&&(n=Pg(n=Uf(n.value,!0),"WRMHEADER"))?n:null}tI["application/x-mpegurl"]=function(){return new zt},tI["application/vnd.apple.mpegurl"]=function(){return new zt};var iW=1,iX=(new Map).set("com.microsoft.playready",Ju).set("com.microsoft.playready.recommendation",Ju).set("com.microsoft.playready.software",Ju).set("com.microsoft.playready.hardware",Ju);function Nu(n){if(!iY){iY=!0;var i=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]);i6=Qu("ftyp",i,new Uint8Array([0,0,0,1]),i,r),i=Qu("dref",i9),i7=Qu("dinf",i)}this.g=n}function Tu(n){for(var i=[],r=t(n.g),o=r.next();!o.done;o=r.next()){var s=i,u=s.push,p=o.value;o=Qu;var y=p.id+1,A=p.stream.width||0,T=p.stream.height||0;"audio"==p.type&&(T=A=0);var x=p.duration*p.timescale,C=Math.floor(x/(iZ+1));switch(x=Math.floor(x%(iZ+1)),y=Qu("tkhd",y=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(y,4)),[0,0,0,0],w(Vu(C,4)),w(Vu(x,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],w(Vu(A,2)),[0,0],w(Vu(T,2)),[0,0]))),A=Qu,T=Math.floor((C=p.duration*p.timescale)/(iZ+1)),C=Math.floor(C%(iZ+1)),x=(x=p.stream.language).charCodeAt(0)-96<<10|x.charCodeAt(1)-96<<5|x.charCodeAt(2)-96,T=Qu("mdhd",T=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(p.timescale,4)),w(Vu(T,4)),w(Vu(C,4)),w(Vu(x,2)),[0,0]))),C=p,x=new Uint8Array([]),C.type){case"video":x=iJ;break;case"audio":x=i$}C=Qu("hdlr",x);e:{switch(p.type){case"video":p=Qu("minf",Qu("vmhd",i4),i7,Zu(p));break e;case"audio":p=Qu("minf",Qu("smhd",i5),i7,Zu(p));break e}p=new Uint8Array([])}o=o("trak",y,p=A("mdia",T,C,p)),u.call(s,o)}for(i=tg.apply(lg,w(i)),u=n.g[0],r=Qu,s=Math.floor((o=u.duration*u.timescale)/(iZ+1)),o=Math.floor(o%(iZ+1)),s=Qu("mvhd",s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(w(Vu(u.timescale,4)),w(Vu(s,4)),w(Vu(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),o=[],A=(n=t(n.g)).next();!A.done;A=n.next())y=(p=o).push,A=Qu("trex",A=new Uint8Array([0,0,0,0].concat(w(Vu(A.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))),y.call(p,A);if(n=Qu("mvex",n=tg.apply(lg,w(o))),o=[],u.encrypted){for(p=(u=t(u.stream.drmInfos)).next();!p.done;p=u.next())if((p=p.value).initData)for(y=(p=t(p.initData)).next();!y.done;y=p.next())o.push(y.value.initData);u=tg.apply(lg,w(o))}else u=new Uint8Array([]);return n=r("moov",s,i,n,u),(i=new Uint8Array(i6.byteLength+n.byteLength)).set(i6),i.set(n,i6.byteLength),i}function Zu(n){var i=new Uint8Array([]);switch(n.type){case"video":if(n.codecs.includes("avc1")){i=n.stream.width||0;var r=n.stream.height||0;if(0<n.Ca.byteLength)var o=Qu("avcC",n.Ca);else{o=Qu;for(var s=7,u=[],p=[],y=0,A=0,T=0,x=0;x<n.ib.length;x++){var C=av(n.ib[x]);switch(31&C[0]){case 7:u.push(C),s+=C.length+2;break;case 8:p.push(C),s+=C.length+2}}for(0<u.length&&(y=u[0][1],T=u[0][2],A=u[0][3]),s=new Uint8Array(s),x=0,s[x++]=1,s[x++]=y,s[x++]=T,s[x++]=A,s[x++]=255,s[x++]=224|u.length,y=0;y<u.length;y++)s[x++]=(65280&u[y].length)>>8,s[x++]=255&u[y].length,s.set(u[y],x),x+=u[y].length;for(u=0,s[x++]=p.length;u<p.length;u++)s[x++]=(65280&p[u].length)>>8,s[x++]=255&p[u].length,s.set(p[u],x),x+=p[u].length;o=o("avcC",s)}i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Vu(i,2)),w(Vu(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",p=bv(n),u=new Uint8Array([]),n.encrypted&&(u=cv(n),r="encv"),i=Qu(r,i,o,p,u)}else n.codecs.includes("hvc1")&&(r=n.stream.width||0,o=n.stream.height||0,i=new Uint8Array([]),0<n.Ca.byteLength&&(i=Qu("hvcC",n.Ca)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(w(Vu(r,2)),w(Vu(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="hvc1",p=bv(n),u=new Uint8Array([]),n.encrypted&&(u=cv(n),o="encv"),i=Qu(o,r,i,p,u));break;case"audio":n.codecs.includes("mp3")?n=Qu(".mp3",dv(n)):(n.codecs.includes("ac-3")?(i=Qu("dac3",n.qa),r="ac-3"):n.codecs.includes("ec-3")?(i=Qu("dec3",n.qa),r="ec-3"):(0<n.qa.byteLength?i=Qu("esds",n.qa):(i=Qu,r=n.id+1,o=n.stream.channelsCount||2,u=n.stream.audioSamplingRate||44100,y=Bb("audio",n.codecs.split(",")),p=(A={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[u],("mp4a.40.5"===y||"mp4a.40.29"===y)&&(p=A[2*u]),u=parseInt(y.split(".").pop(),10),i=i("esds",r=new Uint8Array([0,0,0,0,3,25].concat(w(Vu(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,u<<3|p>>>1,p<<7|o<<3,6,1,2])))),r="mp4a"),o=new Uint8Array([]),n.encrypted&&(o=cv(n),r="enca"),n=Qu(r,dv(n),i,o)),i=n}return n=Qu("stsd",i8,i),Qu("stbl",n,Qu("stts",i0),Qu("stsc",i1),Qu("stsz",i3),Qu("stco",i2))}function bv(n){if(!n.Ja&&!n.La)return new Uint8Array([]);var i=n.La;return Qu("pasp",n=new Uint8Array([].concat(w(Vu(n.Ja,4)),w(Vu(i,4)))))}function dv(n){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.stream.channelsCount||2,0,16,0,0,0,0].concat(w(Vu(n.stream.audioSamplingRate||44100,2)),[0,0]))}function cv(n){for(var i=n.codecs.substring(0,n.codecs.indexOf(".")),r=0,o=0;o<i.length;o+=1)r|=i.charCodeAt(o)<<8*(i.length-o-1);i=Qu("frma",i=new Uint8Array([].concat(w(Vu(r,4))))),r=Qu("schm",r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0])),o=Qu;var s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n=t(n.stream.drmInfos);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=t(u.keyIds);for(var p=u.next();!p.done;p=u.next())s=av(p.value)}return s=Qu("tenc",n=new Uint8Array([0,0,0,0,0,0,1,8]),s),Qu("sinf",i,r,o("schi",s))}function jv(n){var i=[];n=t(n.g);for(var r=n.next();!r.done;r=n.next()){r=r.value;var o,s,u=i.push,p=u.apply,y=Qu,A=new Uint8Array([0,0,0,0].concat(w(Vu(r.data?r.data.Cb:0,4))));A=Qu("mfhd",A);var T=r.data?r.data.fb:[],x=new Uint8Array(4+T.length);for(s=0;s<T.length;s++){var C=T[s].flags;x[s+4]=C.$a<<4|C.bb<<2|C.ab}var I=(T=Qu("sdtp",x)).length+92;x=Qu,s=Qu("tfhd",s=new Uint8Array([0,0,0,58].concat(w(Vu(r.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])));var M=Math.floor((C=r.data?r.data.baseMediaDecodeTime:0)%(iZ+1));C=Qu("tfdt",C=new Uint8Array([1,0,0,0].concat(w(Vu(Math.floor(C/(iZ+1)),4)),w(Vu(M,4)))));var N=I,_=12+16*(M=(I=r.data?r.data.fb:[]).length),j=new Uint8Array(_);for(N+=8+_,j.set(["video"===r.type?1:0,0,15,1].concat(w(Vu(M,4)),w(Vu(N,4))),0),N=0;N<M;N++){var B=I[N];_=Vu(B.duration,4);var z=Vu(B.size,4),G=B.flags;B=Vu(B.kb,4),j.set([].concat(w(_),w(z),[G.ob<<2|G.$a,G.bb<<6|G.ab<<4|G.pb,61440&G.Za,15&G.Za],w(B)),12+16*N)}y=y("moof",A,T=x("traf",s,C,I=Qu("trun",j),T)),p.call(u,i,[y,(o=((o=r).data?o.data.fb:[]).map(function(n){return n.data}),Qu("mdat",o=tg.apply(lg,w(o))))])}return tg.apply(lg,w(i))}function Vu(n,i){var r=[];for(--i;0<=i;i--)r.push(n>>8*i&255);return r}function av(n){for(var i=new Uint8Array(n.length/2),r=0;r<n.length/2;r+=1)i[r]=parseInt(String(n[2*r]+n[2*r+1]),16);return i}function Qu(n){var i=Ga.apply(1,arguments),r=iQ[n];r||(r=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)],iQ[n]=r);for(var o=8,s=i.length-1;0<=s;s--)o+=i[s].byteLength;for((s=new Uint8Array(o))[0]=o>>24&255,s[1]=o>>16&255,s[2]=o>>8&255,s[3]=255&o,s.set(r,4),r=0,o=8;r<i.length;r++)s.set(i[r],o),o+=i[r].byteLength;return s}var iY=!1,iZ=4294967295,iQ={},iJ=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i$=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),i0=new Uint8Array([0,0,0,0,0,0,0,0]),i1=new Uint8Array([0,0,0,0,0,0,0,0]),i2=new Uint8Array([0,0,0,0,0,0,0,0]),i3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),i4=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),i5=new Uint8Array([0,0,0,0,0,0,0,0]),i8=new Uint8Array([0,0,0,0,0,0,0,1]),i6=new Uint8Array([]),i9=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i7=new Uint8Array([]);function mv(){var n=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.D=new Yb(5),this.s=new Dd(function(){var i,r;i=n,K(function(n){switch(n.g){case 1:return ta(n,2),D(n,ov(i),4);case 4:va(n,3);break;case 2:r=wa(n),i.h&&(r.severity=1,i.h.onError(r));case 3:if(!i.h)return n.return();F(n)}})}),this.C=new uf,this.m=new Map}function ov(n){var i,r,o,s,u,p;return K(function(y){if(1==y.g)return i=Af(n.l,n.g.retryParameters),r=n.h.networkingEngine,o=Date.now(),s=r.request(0,i,{type:5}),vf(n.C,s),D(y,s.promise,2);if(u=y.h,!n.h)return y.return();u.uri&&!n.l.includes(u.uri)&&n.l.unshift(u.uri);var A,T=u.uri,x=Rg(u.data,"SmoothStreamingMedia");if(!x)throw new P(2,4,4046,T);if((T=n.g.mss.manifestPreprocessor)&&T(x),n.i||(n.i=new sj(null,0)),T=Fg(x,"IsLive",Ng,!1))throw new P(2,4,4047);n.i.Vc(!T);var C=Fg(x,"TimeScale",Lg,1e7),I=Fg(x,"DVRWindowLength",Lg);T&&(0===I||isNaN(I))&&(I=1/0);var M=Fg(x,"CanSeek",Ng,!1);for(0===I&&M&&(I=1/0),M=null,I&&0<I&&(M=I/C),T&&!isNaN(n.g.availabilityWindowOverride)&&(M=n.g.availabilityWindowOverride),null==M&&(M=1/0),n.i.Ne(M),I=Fg(x,"Duration",Lg,1/0),T||n.i.gb(I/C),T={variants:[],textStreams:[],timescale:C,duration:I/C},M=xg(x,"Protection"),C=n.g.mss.keySystemsBySystemId,I=[],A=(M=t(M)).next();!A.done;A=M.next())I=I.concat(xg(A.value,"ProtectionHeader"));if(I.length){for(A=0,M=[];A<I.length;A++){var N=I[A],_=N.getAttribute("SystemID").toLowerCase(),j=C[_];if(j){var B=Ku(N);if(B)e:{B=t(B.getElementsByTagName("DATA"));for(var z=B.next();!z.done;z=B.next())if(z=wg(z.value,"KID")){B=qg(z.textContent),B=sg(B=new Uint8Array([B[3],B[2],B[1],B[0],B[5],B[4],B[7],B[6]].concat(w(B.slice(8)))));break e}B=null}else B=null;_=Ab(j,_=[{initData:vg(z=qg(N.textContent),_=rg(_.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:B}]),B&&_.keyIds.add(B),(j=iX.get(j))&&(_.licenseServerUri=j(N)),M.push(_)}}C=M}else C=[];for(A=C,M=[],C=[],I=[],N=(x=t(x=xg(x,"StreamIndex"))).next();!N.done;N=x.next()){j=xg(N=N.value,"QualityLevel"),_=T.timescale,B=T.duration,z=xg(N,"c");for(var G=[],H=0,q=0;q<z.length;++q){var Y=z[q],Q=z[q+1],J=Fg(Y,"t",Lg),$=Fg(Y,"d",Lg);if(Y=Fg(Y,"r",Jg),!$)break;if(J=null!=J?J:H,0>(Y=Y||0)){if(Q){if(null==(Q=Fg(Q,"t",Lg))||J>=Q)break;Y=Math.ceil((Q-J)/$)-1}else{if(1/0==B||J/_>=B)break;Y=Math.ceil((B*_-J)/$)-1}}for(Q=0;Q<=Y;++Q)H=J+$,G.push({start:J/_,end:H/_,zg:J}),J=H}for(_=G,B=(j=t(j)).next();!B.done;B=j.next())(B=function(n,i,r,o,s,u){var p=i.getAttribute("Type");if("audio"!==p&&"video"!==p&&"text"!==p)return Ra("Ignoring unrecognized type:",p),null;var y=i.getAttribute("Language"),A=n.u++,T=Fg(r,"Bitrate",Kg),x=Fg(r,"MaxWidth",Kg),C=Fg(r,"MaxHeight",Kg),I=Fg(r,"Channels",Kg),M=Fg(r,"SamplingRate",Kg),N=u.duration;o.length&&(N=o[o.length-1].end-o[0].start);var _=n.i.getDuration();n.i.gb(Math.min(N,_));var j={id:A,originalId:i.getAttribute("Name")||String(A),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:T||0,width:x||void 0,height:C||void 0,kind:"",encrypted:0<s.length,drmInfos:s,keyIds:new Set,language:Kb(y||"und"),originalLanguage:y,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:I,audioSamplingRate:M,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:N,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1};if((s=i.getAttribute("Subtype"))&&((s=rt[s])&&j.roles.push(s),"main"===s&&(j.primary=!0)),(null===(s=r.getAttribute("FourCC"))||""===s)&&(s=i.getAttribute("FourCC")),!s){if("audio"===p)s="AAC";else if("video"===p)return Ra('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!re.includes(s.toUpperCase()))return Ra("Codec not supported:",s),null;switch(r=function(n,i,r,o){if(n=n.getAttribute("CodecPrivateData"))return n;if("audio"!==i)return null;i=o.channelsCount||2;var s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return(o=s[n=o.audioSamplingRate||44100],"AACH"===r)?(r=new Uint8Array(4),n=s[2*n],r[0]=40|o>>1,r[1]=o<<7|i<<3|n>>1,r[2]=n<<7|8,r[3]=0,(i=new Uint16Array(2))[0]=(r[0]<<8)+r[1],i[1]=(r[2]<<8)+r[3],i[0].toString(16)+i[1].toString(16)):((r=new Uint8Array(2))[0]=16|o>>1,r[1]=o<<7|i<<3,(i=new Uint16Array(1))[0]=(r[0]<<8)+r[1],i[0].toString(16))}(r,p,s,j),j.mssPrivateData.codecPrivateData=r,p){case"audio":if(!r)return Ra("Quality unsupported without CodecPrivateData",p),null;j.type="audio",j.mimeType="mss/audio/mp4",j.codecs=function(n,i){var r=0;return"AACH"===n&&(r=5),i?0===r&&(r=(248&parseInt(i.substr(0,2),16))>>3):(r=2,"AACH"===n&&(r=5)),"mp4a.40."+r}(s,r);break;case"video":if(!r)return Ra("Quality unsupported without CodecPrivateData",p),null;j.type="video",j.mimeType="mss/video/mp4",j.codecs=function(n){var i=/00000001[0-9]7/.exec(n);return i.length&&n?"avc1."+n.substr(n.indexOf(i[0])+10,6):""}(r);break;case"text":j.type=eh,j.mimeType="application/mp4",("TTML"===s||"DFXP"===s)&&(j.codecs="stpp")}return j.createSegmentIndex=function(){if(j.segmentIndex)return Promise.resolve();if(n.m.has(j.id))var r=n.m.get(j.id);else r=[],"video"==j.type&&(r=j.mssPrivateData.codecPrivateData.split("00000001").slice(1)),r={id:j.id,type:j.type,codecs:j.codecs,encrypted:j.encrypted,timescale:j.mssPrivateData.timescale,duration:j.mssPrivateData.duration,ib:r,qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:null,stream:j},r=Tu(new Nu([r])),n.m.set(j.id,r);return r=function(n,i,r,o,s){var u=o.getAttribute("Url").replace("{bitrate}",String(r.bandwidth));o=[];var p={};s=t(s);for(var y=s.next();!y.done;p={gd:p.gd},y=s.next())p.gd=y.value,o.push(new Ph(p.gd.start,p.gd.end,function(i){return function(){return zb(n.l,[u.replace("{start time}",String(i.gd.zg))])}}(p),0,null,i,0,0,r.mssPrivateData.duration));return o}(n,new Nh(function(){return[]},0,null,null,void 0,r),j,i,o),j.segmentIndex=new Oj(r),Promise.resolve()},j.closeSegmentIndex=function(){j.segmentIndex&&(j.segmentIndex.release(),j.segmentIndex=null)},j}(n,N,B.value,_,A,T))&&("audio"!=B.type||n.g.disableAudio?"video"!=B.type||n.g.disableVideo?B.type!=eh||n.g.disableText||I.push(B):C.push(B):M.push(B))}for(x=[],A=(M=t(0<M.length?M:[null])).next();!A.done;A=M.next())for(A=A.value,B=(N=t(0<C.length?C:[null])).next();!B.done;B=N.next())_=(j=x).push,B=B.value,z=0,A&&A.bandwidth&&0<A.bandwidth&&(z+=A.bandwidth),B&&B.bandwidth&&0<B.bandwidth&&(z+=B.bandwidth),B={id:n.u++,language:A?A.language:"und",disabledUntilTime:0,primary:!!A&&A.primary||!!B&&B.primary,audio:A,video:B,bandwidth:z,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},_.call(j,B);T.variants=x,T.textStreams=I,n.j?(n.j.variants=T.variants,n.j.textStreams=T.textStreams,n.h.filter(n.j)):(n.j={presentationTimeline:n.i,variants:T.variants,textStreams:T.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:n.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},n.i.ve()),Promise.resolve(),p=(Date.now()-o)/1e3,n.D.sample(1,p),F(y)})}(N=mv.prototype).configure=function(n){this.g=n},N.start=function(n,i){var r=this;return K(function(o){if(1==o.g)return r.l=[n],r.h=i,D(o,ov(r),2);if(!r.h)throw new P(2,7,7001);return o.return(r.j)})},N.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.s&&(this.s.stop(),this.s=null),this.m.clear(),this.C.destroy()},N.update=function(){var n,i=this;return K(function(r){return 1==r.g?(ta(r,2),D(r,ov(i),4)):2!=r.g?va(r,0):(n=wa(r),i.h&&n)?void(i.h.onError(n),F(r)):r.return()})},N.onExpirationUpdated=function(){},N.onInitialVariantChosen=function(){},N.banLocation=function(){},L("shaka.mss.MssParser",mv);var re="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),rt={CAPT:"main",SUBT:"alternate",DESC:"main"};function wv(n,i,r,o,s,u){if(200<=r&&299>=r&&202!=r)return{uri:s||o,originalUri:o,data:i,status:r,headers:n,fromCache:!!n["x-shaka-from-cache"]};s=null;try{s=Wf(i)}catch(n){}throw new P(401==r||403==r?2:1,1,1001,o,r,s,n,u)}function xv(){}function yv(n,i,r,o,s){var u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$=new rd;Qf(i.headers).forEach(function(n,i){$.append(i,n)});var ea=new ru,es={Hg:!1,xh:!1};if(u=n,p=r,y={body:i.body||void 0,headers:$,method:i.method,signal:ea.signal,credentials:i.allowCrossSiteCredentials?"include":void 0},A=es,T=o,x=s,C=i.streamDataCallback,n=K(function(n){switch(n.g){case 1:return I=ro,M=rl,B=j=0,z=Date.now(),ta(n,2),D(n,I(u,y),4);case 4:if(x(Ev((N=n.h).headers)),"HEAD"==y.method){n.F(5);break}return G=N.clone().body.getReader(),q=(H=N.headers.get("Content-Length"))?parseInt(H,10):0,Y=function(n){!function E(){var i,r;return K(function(o){switch(o.g){case 1:return ta(o,2),D(o,G.read(),4);case 4:i=o.h,va(o,3);break;case 2:return wa(o),o.return();case 3:if(i.done||(j+=i.value.byteLength,!C)){o.F(5);break}return D(o,C(i.value),5);case 5:(100<(r=Date.now())-z||i.done)&&(T(r-z,j-B,q-j),B=j,z=r),i.done?n.close():(n.enqueue(i.value),E()),F(o)}})}()},new M({start:Y}),D(n,N.arrayBuffer(),6);case 6:_=n.h;case 5:va(n,3);break;case 2:if(Q=wa(n),A.Hg)throw new P(1,1,7001,u,p);if(A.xh)throw new P(1,1,1003,u,p);throw new P(1,1,1002,u,Q,p);case 3:return J=Ev(N.headers),n.return(wv(J,_,N.status,u,N.url,p))}}),n=new nf(n,function(){return es.Hg=!0,ea.abort(),Promise.resolve()}),i=i.retryParameters.timeout){var ec=new Dd(function(){es.xh=!0,ea.abort()});ec.S(i/1e3),n.finally(function(){ec.stop()})}return n}function Ev(n){var i={};return n.forEach(function(n,r){i[r.trim()]=n}),i}function Fv(){if(!n.ReadableStream)return!1;try{new ReadableStream({})}catch(n){return!1}return!!n.Response&&!!new Response("").body&&!(!n.fetch||!n.AbortController)}tI["application/vnd.ms-sstr+xml"]=function(){return new mv},L("shaka.net.HttpFetchPlugin",xv),xv.isSupported=Fv,xv.parse=yv;var ro=n.fetch,ru=n.AbortController,rl=n.ReadableStream,rd=n.Headers;function Gv(){}function Hv(n,i,r,o,s){var u=new rp,p=Date.now(),y=0,A=new Promise(function(A,T){u.open(i.method,n,!0),u.responseType="arraybuffer",u.timeout=i.retryParameters.timeout,u.withCredentials=i.allowCrossSiteCredentials,u.onabort=function(){T(new P(1,1,7001,n,r))};var x=!1;for(var C in u.onreadystatechange=function(){2!=u.readyState||x||(s(Jv(u)),x=!0)},u.onload=function(){var i=Jv(u),o=u.response;try{var s=wv(i,o,u.status,n,u.responseURL,r);A(s)}catch(n){T(n)}},u.onerror=function(i){T(new P(1,1,1002,n,i,r))},u.ontimeout=function(){T(new P(1,1,1003,n,r))},u.onprogress=function(n){var i=Date.now();(100<i-p||n.lengthComputable&&n.loaded==n.total)&&(o(i-p,n.loaded-y,n.total-n.loaded),y=n.loaded,p=i)},i.headers)u.setRequestHeader(C.toLowerCase(),i.headers[C]);u.send(i.body)});return new nf(A,function(){return u.abort(),Promise.resolve()})}function Jv(n){var i=n.getAllResponseHeaders().trim().split("\r\n");n={},i=t(i);for(var r=i.next();!r.done;r=i.next())n[(r=r.value.split(": "))[0].toLowerCase()]=r.slice(1).join(": ");return n}Fv()&&(xf("http",yv,2,!0),xf("https",yv,2,!0),xf("blob",yv,2,!0)),L("shaka.net.HttpXHRPlugin",Gv),Gv.parse=Hv;var rp=n.XMLHttpRequest;function Kv(n,i,r,o){this.g=n,this.i=i,this.groupId=r,this.h=o}function Lv(n){return n.ba().map(function(n){return"{"+encodeURI(n)+"}"}).join("")+":"+n.hb+":"+n.Na}function Nv(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Ov(n,i){n.i+=i;var r=n.l;return n.l++,n.g.set(r,i),r}function Pv(n){var i=this;this.s=n,this.j=new Map,this.i=new If(function(){return Qv(i).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Nv}function Qv(n){var i=n.h.map(function(n){return n()});return n.h=[],Promise.all(i)}function Vv(n,i){var r=this;this.i=n,this.h=n.objectStore(i),this.g=new mf,n.onabort=function(n){n.preventDefault(),r.g.reject()},n.onerror=function(n){n.preventDefault(),r.g.reject()},n.oncomplete=function(){r.g.resolve()}}function Wv(n,i){return new Promise(function(r,o){var s=n.h.openCursor();s.onerror=o,s.onsuccess=function(){var n;return K(function(o){if(1==o.g)return null==s.result?(r(),o.return()):D(o,i((n=s.result).key,n.value,n),2);n.continue(),F(o)})}})}function Xv(n){this.h=n,this.g=[]}function Yv(n,i){return Zv(n,i,"readwrite")}function Zv(n,i,r){r=n.h.transaction([i],r);var o=new Vv(r,i);return n.g.push(o),o.promise().then(function(){vc(n.g,o)},function(){vc(n.g,o)}),o}function $v(n,i,r){this.h=new Xv(n),this.i=i,this.g=r}function aw(n){return Promise.reject(new P(2,9,9011,"Cannot add new value to "+n))}function bw(n,i,r,o){i=(n=Yv(n.h,i)).store();var s={};r=t(r);for(var u=r.next();!u.done;s={Td:s.Td},u=r.next())s.Td=u.value,i.delete(s.Td).onsuccess=function(n){return function(){return o(n.Td)}}(s);return n.promise()}function cw(n,i,r){var o,s,u,p,y,A,T;return K(function(x){if(1==x.g){for(s=(o=Zv(n.h,i,"readonly")).store(),u={},p=[],y={},T=(A=t(r)).next();!T.done;y={ed:y.ed,bd:y.bd},T=A.next())y.bd=T.value,y.ed=s.get(y.bd),y.ed.onsuccess=function(n){return function(){void 0==n.ed.result&&p.push(n.bd),u[n.bd]=n.ed.result}}(y);return D(x,o.promise(),2)}if(p.length)throw new P(2,9,9012,"Could not find values for "+p);return x.return(r.map(function(n){return u[n]}))})}function ew(n){this.g=new Xv(n)}function fw(){this.g=new Map}function hw(n){var i=null;if(n.g.forEach(function(n,r){n.getCells().forEach(function(n,o){n.hasFixedKeySpace()||i||(i={path:{qb:r,Ma:o},Ma:n})})}),i)return i;throw new P(2,9,9013,"Could not find a cell that supports add-operations")}function jw(n,i,r){if(!(n=n.g.get(i)))throw new P(2,9,9013,"Could not find mechanism with name "+i);if(!(i=n.getCells().get(r)))throw new P(2,9,9013,"Could not find cell with name "+r);return i}function nw(n,i){rv.set(n,i)}xf("http",Hv,1,!0),xf("https",Hv,1,!0),xf("blob",Hv,1,!0),Nv.prototype.close=function(n,i){if(this.g.has(n)){var r=this.g.get(n);this.g.delete(n),this.j+=r,this.h+=i}},Pv.prototype.destroy=function(){return this.i.destroy()},Vv.prototype.abort=function(){var n=this;return K(function(i){if(1==i.g){try{n.i.abort()}catch(n){}return ta(i,2),D(i,n.g,4)}if(2!=i.g)return va(i,0);wa(i),F(i)})},Vv.prototype.store=function(){return this.h},Vv.prototype.promise=function(){return this.g},Xv.prototype.destroy=function(){return Promise.all(this.g.map(function(n){return n.abort()}))},(N=$v.prototype).destroy=function(){return this.h.destroy()},N.hasFixedKeySpace=function(){return!0},N.addSegments=function(){return aw(this.i)},N.removeSegments=function(n,i){return bw(this,this.i,n,i)},N.getSegments=function(n){var i,r=this;return K(function(o){return 1==o.g?D(o,cw(r,r.i,n),2):(i=o.h,o.return(i.map(function(n){return r.Lg(n)})))})},N.addManifests=function(){return aw(this.g)},N.updateManifest=function(){return Promise.reject(new P(2,9,9016,"Cannot modify values in "+this.g))},N.updateManifestExpiration=function(n,i){var r=Yv(this.h,this.g),o=r.store();return o.get(n).onsuccess=function(r){(r=r.target.result)&&(r.expiration=i,o.put(r,n))},r.promise()},N.removeManifests=function(n,i){return bw(this,this.g,n,i)},N.getManifests=function(n){var i,r=this;return K(function(o){return 1==o.g?D(o,cw(r,r.g,n),2):(i=o.h,o.return(Promise.all(i.map(function(n){return r.qd(n)}))))})},N.getAllManifests=function(){var n,i,r=this;return K(function(o){return 1==o.g?(n=Zv(r.h,r.g,"readonly"),i=new Map,D(o,Wv(n,function(n,o){var s;return K(function(u){if(1==u.g)return D(u,r.qd(o),2);s=u.h,i.set(n,s),F(u)})}),2)):3!=o.g?D(o,n.promise(),3):o.return(i)})},N.Lg=function(n){return n},N.qd=function(n){return Promise.resolve(n)},N.add=function(n,i){var r,o,s,u,p,y,A,T=this;return K(function(x){if(1==x.g){for(o=(r=Yv(T.h,n)).store(),s=[],u={},y=(p=t(i)).next();!y.done;u={Vd:u.Vd},y=p.next())A=y.value,u.Vd=o.add(A),u.Vd.onsuccess=function(n){return function(){s.push(n.Vd.result)}}(u);return D(x,r.promise(),2)}return x.return(s)})},ew.prototype.destroy=function(){return this.g.destroy()},ew.prototype.getAll=function(){var n,i,r=this;return K(function(o){return 1==o.g?(n=Zv(r.g,"session-ids","readonly"),i=[],D(o,Wv(n,function(n,r){i.push(r)}),2)):3!=o.g?D(o,n.promise(),3):o.return(i)})},ew.prototype.add=function(n){var i=Yv(this.g,"session-ids"),r=i.store();n=t(n);for(var o=n.next();!o.done;o=n.next())r.add(o.value);return i.promise()},ew.prototype.remove=function(n){var i,r=this;return K(function(o){return 1==o.g?D(o,Wv(i=Yv(r.g,"session-ids"),function(i,r,o){n.includes(r.sessionId)&&o.delete()}),2):D(o,i.promise(),0)})},fw.prototype.destroy=function(){for(var n=[],i=t(this.g.values()),r=i.next();!r.done;r=i.next())n.push(r.value.destroy());return this.g.clear(),Promise.all(n)},fw.prototype.init=function(){var n=this;rv.forEach(function(i,r){(i=i())&&n.g.set(r,i)});for(var i=[],r=t(this.g.values()),o=r.next();!o.done;o=r.next())i.push(o.value.init());return Promise.all(i)},L("shaka.offline.StorageMuxer",fw),fw.unregister=function(n){rv.delete(n)},fw.register=nw,fw.prototype.destroy=fw.prototype.destroy;var rv=new Map;function ow(){$v.apply(this,arguments)}function sw(n){var i;if((i=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(n))||(i=/^offline:segment\/([0-9]+)$/.exec(n)))return Number(i[1]);throw new P(2,9,9004,"Could not parse uri "+n)}function tw(){$v.apply(this,arguments)}function vw(){$v.apply(this,arguments)}function ww(){this.m=this.j=this.i=this.h=this.g=this.l=null}function yw(n,i,r,o){this.g=n,this.i=i,this.h=r,this.l=o,this.j=["offline:",n,"/",i,"/",r,"/",o].join("")}function zw(n){if(null==(n=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(n)))return null;var i=n[1];if("manifest"!=i&&"segment"!=i)return null;var r=n[2];if(!r)return null;var o=n[3];return o&&null!=i?new yw(i,r,o,Number(n[4])):null}function Aw(n,i){this.h=n,this.g=i}function Bw(n,i){var r=new sj(null,0);r.gb(i.duration);var o=i.streams.filter(function(n){return"audio"==n.type}),s=i.streams.filter(function(n){return"video"==n.type});o=function(n,i,r,o){for(var s=new Set,u=t(i),p=u.next();!p.done;p=u.next()){var y=t(p.value.variantIds);for(p=y.next();!p.done;p=y.next())s.add(p.value)}for(p=(u=t(r)).next();!p.done;p=u.next())for(p=(y=t(p.value.variantIds)).next();!p.done;p=y.next())s.add(p.value);for(u=new Map,p=(s=t(s)).next();!p.done;p=s.next())p=p.value,u.set(p,{id:p,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(s=(i=t(i)).next();!s.done;s=i.next())for(p=Dw(n,s=s.value,o),s=(y=t(s.variantIds)).next();!s.done;s=y.next())(s=u.get(s.value)).language=p.language,s.primary=s.primary||p.primary,s.audio=p;for(i=(r=t(r)).next();!i.done;i=r.next())for(i=Dw(n,s=i.value,o),s=(p=t(s.variantIds)).next();!s.done;s=p.next())(s=u.get(s.value)).primary=s.primary||i.primary,s.video=i;return u}(n,o,s,r),s=i.streams.filter(function(n){return n.type==eh}).map(function(i){return Dw(n,i,r)});var u=i.streams.filter(function(n){return"image"==n.type}).map(function(i){return Dw(n,i,r)}),p=i.drmInfo?[i.drmInfo]:[];if(i.drmInfo)for(var y=t(o.values()),A=y.next();!A.done;A=y.next())(A=A.value).audio&&A.audio.encrypted&&(A.audio.drmInfos=p),A.video&&A.video.encrypted&&(A.video.drmInfos=p);return{presentationTimeline:r,minBufferTime:2,offlineSessionIds:i.sessionIds,variants:Array.from(o.values()),textStreams:s,imageStreams:u,sequenceMode:i.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:i.type||"UNKNOWN",serviceDescription:null}}function Dw(n,i,r){var o=i.segments.map(function(i){var r,o,s,u,p,y;return r=n,o=i,s=new yw("segment",r.h,r.g,o.dataKey),new Ph(o.startTime,o.endTime,function(){return[s.toString()]},0,null,null!=o.initSegmentKey?(u=r,p=o.initSegmentKey,y=new yw("segment",u.h,u.g,p),new Nh(function(){return[y.toString()]},0,null)):null,o.timestampOffset,o.appendWindowStart,o.appendWindowEnd,[],o.tilesLayout||"")});return r.Dd(o),{id:i.id,originalId:i.originalId,groupId:i.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Oj(o),mimeType:i.mimeType,codecs:i.codecs,width:i.width||void 0,height:i.height||void 0,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,videoLayout:i.videoLayout,kind:i.kind,encrypted:i.encrypted,drmInfos:[],keyIds:i.keyIds,language:i.language,originalLanguage:i.originalLanguage||null,label:i.label,type:i.type,primary:i.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,accessibilityPurpose:null,external:i.external,fastSwitching:i.fastSwitching}}function Gw(){this.g=null}function Hw(){}function Iw(n){var i,r,o,s=zw(n);return n=s&&"manifest"==s.g?qf(n={uri:n,originalUri:n,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):s&&"segment"==s.g?(s.key(),r=s,o=new fw,qf(void 0).Fa(function(){return o.init()}).Fa(function(){return jw(o,r.qb(),r.Ma())}).Fa(function(n){return n.getSegments([r.key()])}).Fa(function(n){return{uri:r,data:n[0].data,headers:{}}}).finally(function(){return o.destroy()})):of(new P(2,1,9004,n))}function Kw(n,i,r){var o,s,u,p;return K(function(y){switch(y.g){case 1:o=[];for(var A,T,x,C,I,M=[],N=t(r),_=N.next();!_.done;_=N.next()){_=_.value;for(var j=!1,B=t(M),z=B.next();!z.done;z=B.next())if(function(n,i){function c(n,i){return n.robustness==i.robustness&&n.contentType==i.contentType}return n.keySystem==i.keySystem&&n.licenseUri==i.licenseUri&&wc(n.audioCapabilities,i.audioCapabilities,c)&&wc(n.videoCapabilities,i.videoCapabilities,c)}((z=z.value).info,_)){z.sessionIds.push(_.sessionId),j=!0;break}j||M.push({info:_,sessionIds:[_.sessionId]})}u=(s=t(M)).next();case 2:if(u.done){y.F(4);break}return D(y,(A=n,T=i,x=u.value,K(function(n){switch(n.g){case 1:var i,r,o,s,u,p,y;return C=new Sg({zc:T,onError:function(){},Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ta(n,2),C.configure(A),D(n,(i=C,r=x.info.keySystem,o=x.info.licenseUri,s=x.info.serverCertificate,u=x.info.audioCapabilities,p=x.info.videoCapabilities,y=new Map,(u={audioCapabilities:u,videoCapabilities:p,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:r}).drmInfos=[{keySystem:r,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:s,serverCertificateUri:"",initData:null,keyIds:null}],y.set(r,u),ah(i,y,[])),4);case 4:va(n,3);break;case 2:return wa(n),D(n,C.destroy(),5);case 5:return n.return([]);case 3:return I=[],D(n,Promise.all(x.sessionIds.map(function(n){return K(function(i){if(1==i.g){var r,o,s,u;return ta(i,2),D(i,(r=C,K(function(i){return 1==i.g?D(i,mh(r,n,{initData:null,initDataType:null}),2):3!=i.g?(o=i.h)?(s=[],(u=r.i.get(o))&&(u.Db=new mf,s.push(u.Db)),s.push(o.remove()),D(i,Promise.all(s),3)):i.return():void(r.i.delete(o),F(i))})),4)}if(2!=i.g)return I.push(n),va(i,0);wa(i),F(i)})})),6);case 6:return D(n,C.destroy(),7);case 7:return n.return(I)}})),5);case 5:p=y.h,o=o.concat(p),u=s.next(),y.F(2);break;case 4:return y.return(o)}})}function Pw(n,i){var r=Bw(new Aw(n.qb(),n.Ma()),i),o=i.appMetadata||{};return r=Ow(r),{offlineUri:n.toString(),originalManifestUri:i.originalManifestUri,duration:i.duration,size:i.size,expiration:i.expiration,tracks:r,appMetadata:o,isIncomplete:i.isIncomplete||!1}}function Ow(n){var i=[],r=Ce(n.variants);r=t(r);for(var o=r.next();!o.done;o=r.next())i.push(te(o.value));for(r=(n=t(n.textStreams)).next();!r.done;r=n.next())i.push(ue(r.value));return i}function Qw(){this.g={}}function Tw(n,i){return null==(n=n.g[i])&&(n=0),n}function Uw(n){var i=this;if(n&&n.constructor!=V)throw new P(2,9,9008);this.g=this.h=null,n?(this.h=n.g,this.g=n.Zb()):(this.h=$l(),this.g=new wf),this.i=[],this.j=[];var r=!n;this.l=new If(function(){var n,o,s,u,p;return K(function(y){switch(y.g){case 1:return D(y,Promise.all(i.j.map(function(n){return Qv(n)})),2);case 2:for(n=function(){},o=[],u=(s=t(i.i)).next();!u.done;u=s.next())p=u.value,o.push(p.then(n,n));return D(y,Promise.all(o),3);case 3:if(!r){y.F(4);break}return D(y,i.g.destroy(),4);case 4:i.h=null,i.g=null,F(y)}})})}function Vw(){if(Ed())e:{for(var n=t(rv.values()),i=n.next();!i.done;i=n.next())if(i=(i=i.value)()){i.destroy(),n=!0;break e}n=!1}else n=!1;return n}function fx(n){var i,r,o;return K(function(s){switch(s.g){case 1:return D(s,(i=new fw).init(),2);case 2:return D(s,hw(i),3);case 3:return r=s.h,o=new yw("manifest",r.path.qb,r.path.Ma,n),D(s,i.destroy(),4);case 4:return D(s,(new Uw).remove(o.toString()),0)}})}function ix(n,i,r,o,s,u){var p,y,A,T,x,C,I,M,N,_;return K(function(j){switch(j.g){case 1:for(p=!1,ta(j,2),y=!0,T=(A=t(r.streams)).next();!T.done;T=A.next())for(C=(x=t(T.value.segments)).next();!C.done;C=x.next())null!=(M=(I=C.value).pendingSegmentRefId?o[I.pendingSegmentRefId]:null)&&(I.dataKey=M,I.pendingSegmentRefId=void 0),null!=(M=I.pendingInitSegmentRefId?o[I.pendingInitSegmentRefId]:null)&&(I.initSegmentKey=M,I.pendingInitSegmentRefId=void 0),I.pendingSegmentRefId&&(y=!1),I.pendingInitSegmentRefId&&(y=!1);return r.size+=s,y&&(r.isIncomplete=!1),D(j,n.updateManifest(i,r),4);case 4:p=!0,u(),va(j,0);break;case 2:return N=wa(j),D(j,fx(i),5);case 5:if(p){j.F(6);break}return _=Object.values(o),D(j,n.removeSegments(_,function(){}),6);case 6:throw N}})}function gx(n){return n.variants.some(function(n){var i=n.audio&&n.audio.encrypted;return n.video&&n.video.encrypted||i})}function hx(n){return n.variants.some(function(n){return(n.video?n.video.drmInfos:[]).concat(n.audio?n.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function ex(n,i,r,o){if(i.expiration=r.td(),r=rh(r),i.sessionIds=o.offline.usePersistentLicense?r:[],gx(n)&&o.offline.usePersistentLicense&&!r.length)throw new P(2,9,9007)}function qx(n,i){for(var r=[],o=t(n.streams),s=o.next();!s.done;s=o.next())s=s.value,i&&"video"==s.type?r.push({contentType:dd(s.mimeType,s.codecs),robustness:n.drmInfo.videoRobustness}):i||"audio"!=s.type||r.push({contentType:dd(s.mimeType,s.codecs),robustness:n.drmInfo.audioRobustness});return r}function $w(n){if(n.l.g)throw new P(2,9,7001)}function Yw(){if(!Vw())throw new P(2,9,9e3)}function mx(n,i){return K(function(r){return 1==r.g?(n.i.push(i),ua(r,2),D(r,i,4)):2!=r.g?r.return(r.h):(xa(r),vc(n.i,i),ya(r,0))})}function vx(n){for(var i=new Set,r=t(n.textStreams),o=r.next();!o.done;o=r.next())i.add(o.value);for(o=(r=t(n.imageStreams)).next();!o.done;o=r.next())i.add(o.value);for(r=(n=t(n.variants)).next();!r.done;r=n.next())(r=r.value).audio&&i.add(r.audio),r.video&&i.add(r.video);return i}pa(ow,$v),ow.prototype.updateManifestExpiration=function(n,i){var r,o,s,u=this;return K(function(p){return o=(r=Yv(u.h,u.g)).store(),s=new mf,o.get(n).onsuccess=function(r){(r=r.target.result)?(r.expiration=i,o.put(r),s.resolve()):s.reject(new P(2,9,9012,"Could not find values for "+n))},D(p,Promise.all([r.promise(),s]),0)})},ow.prototype.qd=function(n){var i,r,o,s,u;return K(function(p){if(1==p.g){for(r=0,i=[];r<n.periods.length;++r)o=(r==n.periods.length-1?n.duration:n.periods[r+1].startTime)-n.periods[r].startTime,s=function(n,i){(function(n){var i=n.streams.filter(function(n){return"audio"==n.contentType});if(n=n.streams.filter(function(n){return"video"==n.contentType}),!i.every(function(n){return n.variantIds})||!n.every(function(n){return n.variantIds})){for(var r=t(i),o=r.next();!o.done;o=r.next())o.value.variantIds=[];for(o=(r=t(n)).next();!o.done;o=r.next())o.value.variantIds=[];if(r=0,n.length&&!i.length){var s=r++,u=t(n);for(o=u.next();!o.done;o=u.next())o.value.variantIds.push(s)}if(!n.length&&i.length)for(s=r++,o=(u=t(i)).next();!o.done;o=u.next())o.value.variantIds.push(s);if(n.length&&i.length)for(o=(i=t(i)).next();!o.done;o=i.next())for(o=o.value,u=(s=t(n)).next();!u.done;u=s.next()){u=u.value;var p=r++;o.variantIds.push(p),u.variantIds.push(p)}}})(n);for(var r=t(n.streams),o=r.next();!o.done;o=r.next());return n.streams.map(function(r){return function(n,i,r){var o=n.initSegmentUri?sw(n.initSegmentUri):null,s=i+n.presentationTimeOffset,u=i+r;return{id:n.id,originalId:null,groupId:null,primary:n.primary,type:n.contentType,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:n.kind,language:n.language,originalLanguage:n.language||null,label:n.label,width:n.width,height:n.height,initSegmentKey:o,encrypted:n.encrypted,keyIds:new Set([n.keyId]),segments:n.segments.map(function(n){var r=sw(n.uri);return{startTime:i+n.startTime,endTime:i+n.endTime,dataKey:r,initSegmentKey:o,appendWindowStart:i,appendWindowEnd:u,timestampOffset:s,tilesLayout:""}}),variantIds:n.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(r,n.startTime,i)})}(n.periods[r],o),i.push(s);return D(p,as(i),2)}return u=p.h,p.return({creationTime:0,originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:null==n.expiration?1/0:n.expiration,streams:u,sessionIds:n.sessionIds,drmInfo:n.drmInfo,appMetadata:n.appMetadata,sequenceMode:!1})})},ow.prototype.Lg=function(n){return{data:n.data}},pa(tw,$v),tw.prototype.qd=function(n){var i,r,o,s,u;return K(function(p){if(1==p.g){for(r=0,i=[];r<n.periods.length;++r){o=(r==n.periods.length-1?n.duration:n.periods[r+1].startTime)-n.periods[r].startTime;for(var y=n.periods[r],A=[],T=t(y.streams),x=T.next();!x.done;x=T.next())0!=(x=x.value).variantIds.length&&A.push(function(n,i,r){return{id:n.id,originalId:n.originalId,groupId:null,primary:n.primary,type:n.contentType,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:n.kind,language:n.language,originalLanguage:n.language||null,label:n.label,width:n.width,height:n.height,encrypted:n.encrypted,keyIds:new Set([n.keyId]),segments:n.segments.map(function(o){return{startTime:i+o.startTime,endTime:i+o.endTime,initSegmentKey:n.initSegmentKey,appendWindowStart:i,appendWindowEnd:r,timestampOffset:i-n.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:""}}),variantIds:n.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}(x,y.startTime,y.startTime+o));s=A,i.push(s)}return D(p,as(i),2)}return u=p.h,p.return({appMetadata:n.appMetadata,creationTime:0,drmInfo:n.drmInfo,duration:n.duration,expiration:null==n.expiration?1/0:n.expiration,originalManifestUri:n.originalManifestUri,sessionIds:n.sessionIds,size:n.size,streams:u,sequenceMode:!1})})},pa(vw,$v),(N=vw.prototype).hasFixedKeySpace=function(){return!1},N.addSegments=function(n){return this.add(this.i,n)},N.addManifests=function(n){return this.add(this.g,n)},N.updateManifest=function(n,i){var r,o;return r=this,(o=(r=Yv(r.h,r.g)).store()).get(n).onsuccess=function(){o.put(i,n)},r.promise()},N.qd=function(n){return null==n.expiration&&(n.expiration=1/0),Promise.resolve(n)},(N=ww.prototype).init=function(){var i=this,r=new mf,o=!1,s=new Dd(function(){o=!0,r.reject(new P(2,9,9017))});s.S(5);var u=n.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!o){var n=u.result;i.l=n;var p=n.objectStoreNames;p=p.contains("manifest")&&p.contains("segment")?new ow(n,"segment","manifest"):null,i.g=p,p=(p=n.objectStoreNames).contains("manifest-v2")&&p.contains("segment-v2")?new tw(n,"segment-v2","manifest-v2"):null,i.h=p,p=(p=n.objectStoreNames).contains("manifest-v3")&&p.contains("segment-v3")?new tw(n,"segment-v3","manifest-v3"):null,i.i=p,p=(p=n.objectStoreNames).contains("manifest-v5")&&p.contains("segment-v5")?new vw(n,"segment-v5","manifest-v5"):null,i.j=p,n=n.objectStoreNames.contains("session-ids")?new ew(n):null,i.m=n,s.stop(),r.resolve()}},u.onupgradeneeded=function(){for(var n=u.result,i=t(["segment-v5","manifest-v5","session-ids"]),r=i.next();!r.done;r=i.next())r=r.value,n.objectStoreNames.contains(r)||n.createObjectStore(r,{autoIncrement:!0})},u.onerror=function(n){o||(r.reject(new P(2,9,9001,u.error)),s.stop(),n.preventDefault())},r},N.destroy=function(){var n=this;return K(function(i){switch(i.g){case 1:if(!n.g){i.F(2);break}return D(i,n.g.destroy(),2);case 2:if(!n.h){i.F(4);break}return D(i,n.h.destroy(),4);case 4:if(!n.i){i.F(6);break}return D(i,n.i.destroy(),6);case 6:if(!n.j){i.F(8);break}return D(i,n.j.destroy(),8);case 8:if(!n.m){i.F(10);break}return D(i,n.m.destroy(),10);case 10:n.l&&n.l.close(),F(i)}})},N.getCells=function(){var n=new Map;return this.g&&n.set("v1",this.g),this.h&&n.set("v2",this.h),this.i&&n.set("v3",this.i),this.j&&n.set("v5",this.j),n},N.getEmeSessionCell=function(){return this.m},N.erase=function(){var i=this;return K(function(r){switch(r.g){case 1:if(!i.g){r.F(2);break}return D(r,i.g.destroy(),2);case 2:if(!i.h){r.F(4);break}return D(r,i.h.destroy(),4);case 4:if(!i.i){r.F(6);break}return D(r,i.i.destroy(),6);case 6:if(!i.j){r.F(8);break}return D(r,i.j.destroy(),8);case 8:var o,s;return i.l&&i.l.close(),D(r,(o=new mf,(s=n.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){},s.onsuccess=function(){o.resolve()},s.onerror=function(n){o.reject(new P(2,9,9001,s.error)),n.preventDefault()},o),10);case 10:return i.l=null,i.g=null,i.h=null,i.i=null,i.j=null,D(r,i.init(),0)}})},nw("idb",function(){return Od()||Id()||!n.indexedDB?null:new ww}),yw.prototype.qb=function(){return this.i},yw.prototype.Ma=function(){return this.h},yw.prototype.key=function(){return this.l},yw.prototype.toString=function(){return this.j},(N=Gw.prototype).configure=function(){},N.start=function(n,i){var r,o,s,u,p,y=this;return K(function(A){switch(A.g){case 1:if(r=zw(n),y.g=r,null==r||"manifest"!=r.g)throw new P(2,1,9004,n);return o=new fw,ua(A,2),D(A,o.init(),4);case 4:return D(A,jw(o,r.qb(),r.Ma()),5);case 5:return s=A.h,D(A,s.getManifests([r.key()]),6);case 6:return u=A.h[0],p=Bw(new Aw(r.qb(),r.Ma()),u),i.makeTextStreamsForClosedCaptions(p),A.return(p);case 2:return xa(A),D(A,o.destroy(),7);case 7:ya(A,0)}})},N.stop=function(){return Promise.resolve()},N.update=function(){},N.onExpirationUpdated=function(n,i){var r,o,s,u,p,y,A=this;return K(function(T){switch(T.g){case 1:return r=A.g,o=new fw,ta(T,2,3),D(T,o.init(),5);case 5:return D(T,jw(o,r.qb(),r.Ma()),6);case 6:return s=T.h,D(T,s.getManifests([r.key()]),7);case 7:if(p=(u=T.h[0]).sessionIds.includes(n),y=void 0==u.expiration||u.expiration>i,!p||!y){T.F(3);break}return D(T,s.updateManifestExpiration(r.key(),i),3);case 3:return xa(T),D(T,o.destroy(),10);case 10:ya(T,0);break;case 2:wa(T),T.F(3)}})},N.onInitialVariantChosen=function(){},N.banLocation=function(){},tI["application/x-offline-manifest"]=function(){return new Gw},L("shaka.offline.OfflineScheme",Hw),Hw.plugin=Iw,xf("offline",Iw),(N=Uw.prototype).destroy=function(){return this.l.destroy()},N.configure=function(n,i){return 2==arguments.length&&"string"==typeof n&&(n=Ql(n,i)),bm(this.h,n)},N.getConfiguration=function(){var n=$l();return bm(n,this.h,$l()),n},N.Zb=function(){return this.g},N.store=function(n,i,r){var o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G,H,q,Y,Q,J,$=this,ea=this.getConfiguration(),es=new Pv(this.g);return this.j.push(es),o=this,s=n,u=i||{},p=function(){var i;return K(function(o){return 1==o.g?r?o.F(2):D(o,Vk(n,$.g,ea.manifest.retryParameters),3):(2!=o.g&&(r=o.h),i=Hh(n,r||null),o.return(i()))})},y=ea,A=es,i=K(function(n){var i,r,Y,Q,J,$,ea,es,ec,ed,eh,ep,eg,em,ev,eb,eA,eT,eS,ek,eI,eM,eL,eP,eR,eN,eU,eO,e_,ej,eF,eV,eK,eG,eH,eq,eW,eX,eY,eZ,eQ,eJ,e$,e0,e1,e2,e3,e4,e5,e8,e6,e9,to,ts,tu,tl,tc,th;switch(n.g){case 1:return Yw(),x=T=null,C=new fw,N=M=I=null,ta(n,2,3),D(n,p(),5);case 5:return T=n.h,D(n,(i=o,r=s,Y=T,Q=y,K(function(n){if(1==n.g)return J=null,$={networkingEngine:i.g,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(n){J=n},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return Q.abr.defaultBandwidthEstimate}},Y.configure(Q.manifest),$w(i),D(n,Y.start(r,$),2);if(3!=n.g)return ea=n.h,$w(i),D(n,Promise.all(ab(vx(ea),function(n){return n.createSegmentIndex()})),3);if($w(i),J)throw J;return n.return(ea)})),6);case 6:if(_=n.h,$w(o),!(!_.presentationTimeline.R()&&!_.presentationTimeline.wc()))throw new P(2,9,9005,s);return D(n,(es=o,ec=_,ed=function(n){N=N||n},eh=y,K(function(n){var i,r,o;return 1==n.g?((ep=new Sg({zc:es.g,onError:ed,Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(eh.drm),D(n,(i=ep,r=ec.variants,o=eh.offline.usePersistentLicense,i.ha=!0,i.C=new Map,i.M=o,Yg(i,r)),2)):3!=n.g?D(n,jh(ep),3):n.return(ep)})),7);case 7:if(x=n.h,$w(o),N)throw N;return D(n,(eg=_,em=x,ev=y,K(function(n){switch(n.g){case 1:var i;return eb={width:1/0,height:1/0},i=ev.restrictions,eg.variants=eg.variants.filter(function(n){return be(n,i,eb)}),D(n,ee(em,eg,ev.offline.usePersistentLicense),2);case 2:for(eA=[],eT=ev.preferredDecodingAttributes,Zd(eg,ev.preferredVideoCodecs,ev.preferredAudioCodecs,eT),ek=(eS=t(eg.variants)).next();!ek.done;ek=eS.next())eI=ek.value,eA.push(te(eI));for(eL=(eM=t(eg.textStreams)).next();!eL.done;eL=eM.next())eP=eL.value,eA.push(ue(eP));for(eN=(eR=t(eg.imageStreams)).next();!eN.done;eN=eR.next())eU=eN.value,eA.push(ve(eU));return D(n,ev.offline.trackSelectionCallback(eA),3);case 3:for(eO=n.h,e_=eg.presentationTimeline.getDuration(),ej=0,eV=(eF=t(eO)).next();!eV.done;eV=eF.next())eK=eV.value.bandwidth*e_/8,ej+=eK;return ta(n,4),D(n,ev.offline.downloadSizeCallback(ej),6);case 6:if(!n.h)throw new P(2,9,9014);va(n,5);break;case 4:if((eG=wa(n))instanceof P)throw eG;throw new P(2,9,9015);case 5:for(eH=new Set,eq=new Set,eW=new Set,eV=(eX=t(eO)).next();!eV.done;eV=eX.next())"variant"==(eY=eV.value).type&&eH.add(eY.id),"text"==eY.type&&eq.add(eY.id),"image"==eY.type&&eW.add(eY.id);eg.variants=eg.variants.filter(function(n){return eH.has(n.id)}),eg.textStreams=eg.textStreams.filter(function(n){return eq.has(n.id)}),eg.imageStreams=eg.imageStreams.filter(function(n){return eW.has(n.id)}),function(n){n.variants.map(function(n){return n.video});var i=new Set(n.variants.map(function(n){return n.audio}));n=n.textStreams;for(var r=t(i),o=r.next();!o.done;o=r.next()){o=t(i);for(var s=o.next();!s.done;s=o.next());}for(r=(i=t(n)).next();!r.done;r=i.next())for(o=(r=t(n)).next();!o.done;o=r.next());}(eg),F(n)}})),8);case 8:return D(n,C.init(),9);case 9:return $w(o),D(n,hw(C),10);case 10:return I=n.h,$w(o),B=(j=function(n,i,r,o,s,u){var p,y,A,T,x={offlineUri:null,originalManifestUri:r,duration:(p=i).presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:p=Ow(p),appMetadata:o,isIncomplete:!1},C=s.offline.progressCallback;(y=u).m=function(n,i){x.size=i,C(x,n)},y.l=function(i,r){I&&s.offline.usePersistentLicense&&M==r&&hh(n,"cenc",i)};var I=gx(i)&&!hx(i),M=null;I&&(M=rb.get(n.g.keySystem));for(var N=new Qw,_=t(i.textStreams),j=_.next();!j.done;j=_.next())N.g[j.value.id]=52;for(j=(_=t(i.imageStreams)).next();!j.done;j=_.next())A=N,T=j.value,A.g[T.id]=T.bandwidth||2048;for(_=(j=t(i.variants)).next();!_.done;_=j.next())!function(n,i){var r=i.audio,o=i.video;if(r&&!o&&(n.g[r.id]=r.bandwidth||i.bandwidth),!r&&o&&(n.g[o.id]=o.bandwidth||i.bandwidth),r&&o){var s=r.bandwidth||393216,u=o.bandwidth||i.bandwidth-s;0>=u&&(u=i.bandwidth),n.g[r.id]=s,n.g[o.id]=u}}(N,_.value);return u=(N=function(n,i,r,o){var s=new Map,u=vx(r),p=new Map;u=t(u);for(var y=u.next();!y.done;y=u.next()){var A=function(n,i,r,o,s,u){var p={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},y=s.offline.numberOfParallelDownloads,A=0;return function(n,i,r){if(null!=(i=n.segmentIndex.find(i)))for(var o=n.segmentIndex.get(i);o;)r(o),o=n.segmentIndex.get(++i)}(o,r.presentationTimeline.Ab(),function(r){var s=Lv(r),T=void 0;if(!u.has(s)){var x=r.endTime-r.startTime;x=Tw(i,o.id)*x,x=Ov(n.g,x),u.set(s,new Kv(r,x,A,!1))}r.ka&&(T=Lv(r.ka),u.has(T)||(x=.5*Tw(i,o.id),x=Ov(n.g,x),u.set(T,new Kv(r.ka,x,A,!0)))),p.segments.push({pendingInitSegmentRefId:T,initSegmentKey:T?0:null,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,tilesLayout:r.tilesLayout,pendingSegmentRefId:s,dataKey:0}),A=(A+1)%y}),p}(n,i,r,y=y.value,o,s);p.set(y.id,A)}for(i=(n=t(r.variants)).next();!i.done;i=n.next())(i=i.value).audio&&p.get(i.audio.id).variantIds.push(i.id),i.video&&p.get(i.video.id).variantIds.push(i.id);return{streams:Array.from(p.values()),vg:Array.from(s.values())}}(u,N,i,s)).streams,N=N.vg,j=n.g,_=s.offline.usePersistentLicense,j&&_&&(j.initData=[]),{Si:{creationTime:Date.now(),originalManifestUri:r,duration:i.presentationTimeline.getDuration(),size:0,expiration:n.td(),streams:u,sessionIds:_?rh(n):[],drmInfo:j,appMetadata:o,isIncomplete:!0,sequenceMode:i.sequenceMode,type:i.type},vg:N}}(x,_,s,u,y,A)).Si,z=j.vg,D(n,I.Ma.addManifests([B]),11);case 11:if(G=n.h,$w(o),M=G[0],$w(o),N)throw N;return D(n,(eZ=o,eQ=z,eJ=M,e$=B,e0=A,e1=y,e2=I.Ma,e3=_,e4=x,K(function(n){switch(n.g){case 1:if(e5={},e8=0,e6=function(n,i){var r,o,s,u,p,y,A;return K(function(T){if(1==T.g){var x;for(r={},s=(o=t(n)).next();!s.done;r={kc:r.kc},s=o.next())r.kc=s.value,u=ok((x=r.kc).g.ba(),x.g.hb,x.g.Na,e1.streaming.retryParameters),p=r.kc.i,y=r.kc.h,A=function(n){return function(i){var r;return K(function(o){if(1==o.g)return D(o,e2.addSegments([{data:i}]),2);r=o.h,$w(eZ),e5[Lv(n.kc.g)]=r[0],e8+=i.byteLength,F(o)})}}(r),function(n,i,r,o,s,u){Jf(n.i);var p=(n.j.get(i)||Promise.resolve()).then(function(){var i,p,y,A,T,x,C;return K(function(I){if(1==I.g)return D(I,function(n,i){var r,o,s,u;return K(function(p){return 1==p.g?(r=e7,o=n.s.request(r,i),s=function(){return o.abort()},n.h.push(s),D(p,o.promise,2)):(u=p.h,vc(n.h,s),p.return(u.data))})}(n,r),2);if(i=I.h,n.i.g)throw new P(2,9,7001);if(s)for(A in p=lc(i),(y=new ug(p)).data)T=Number(A),x=y.data[T],C=y.g[T],n.l(x,C);n.g.close(o,i.byteLength);var M=n.g;return n.m(0==M.i?0:M.j/M.i,n.g.h),I.return(u(i))})});n.j.set(i,p)}(e0,r.kc.groupId,u,p,y,A);return D(T,K(function(n){return 1==n.g?D(n,Promise.all(e0.j.values()),2):n.return(e0.g.h)}),2)}return i?($w(eZ),ex(e3,e$,e4,e1),D(T,e2.updateManifest(eJ,e$),0)):T.F(0)})},e9=!1,ta(n,2),!gx(e3)||!e9||hx(e3)){n.F(4);break}return D(n,e6(eQ.filter(function(n){return n.h}),!0),5);case 5:return $w(eZ),eQ=eQ.filter(function(n){return!n.h}),to=e5,ts=e8,e5={},e8=0,D(n,ix(e2,eJ,e$,to,ts,function(){return $w(eZ)}),6);case 6:$w(eZ);case 4:if(e9){n.F(7);break}return D(n,e6(eQ,!1),8);case 8:return $w(eZ),tu=e5,tl=e8,e5={},e8=0,D(n,ix(e2,eJ,e$,tu,tl,function(){return $w(eZ)}),9);case 9:$w(eZ);case 7:va(n,0);break;case 2:return tc=wa(n),th=Object.values(e5),D(n,e2.removeSegments(th,function(){}),10);case 10:throw tc}})),12);case 12:return $w(o),ex(_,B,x,y),D(n,I.Ma.updateManifest(M,B),13);case 13:return $w(o),H=new yw("manifest",I.path.qb,I.path.Ma,M),n.return(Pw(H,B));case 3:return xa(n),D(n,C.destroy(),14);case 14:if(!T){n.F(15);break}return D(n,T.stop(),15);case 15:if(!x){n.F(17);break}return D(n,x.destroy(),17);case 17:ya(n,0);break;case 2:if(q=wa(n),null==M){n.F(19);break}return D(n,fx(M),19);case 19:throw N||q}}),(i=new nf(i,function(){return Qv(es)})).finally(function(){vc($.j,es)}),Y=this,J=(Q=i).promise,Y.i.push(J),Q.finally(function(){vc(Y.i,J)})},N.remove=function(n){var i,r,o,s,u,p,y;return mx(this,(i=this,r=n,K(function(n){switch(n.g){case 1:if(Yw(),null==(o=zw(r))||"manifest"!=o.g)throw new P(2,9,9004,r);return s=o,u=new fw,ua(n,2),D(n,u.init(),4);case 4:return D(n,jw(u,s.qb(),s.Ma()),5);case 5:return p=n.h,D(n,p.getManifests([s.key()]),6);case 6:var A,T,x;return y=n.h[0],D(n,Promise.all([(A=i,T=y,x=u,K(function(n){var i,r,o,s,u,p,y;return D(n,(i=A.g,r=A.h.drm,o=x,s=T,K(function(n){return 1==n.g?s.drmInfo?(u=function(n){var i=Array.from(n.g.keys());if(!i.length)throw new P(2,9,9e3,"No supported storage mechanisms found");return n.g.get(i[0]).getEmeSessionCell()}(o),D(n,Kw(r,i,p=s.sessionIds.map(function(n){return{sessionId:n,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:qx(s,!1),videoCapabilities:qx(s,!0)}})),2)):n.return():3!=n.g?(y=n.h,D(n,u.remove(y),3)):D(n,u.add(p.filter(function(n){return!y.includes(n.sessionId)})),0)})),0)})),function(n,i,r){function d(){}var o=function(n){var i=new Set;n=t(n.streams);for(var r=n.next();!r.done;r=n.next()){r=t(r.value.segments);for(var o=r.next();!o.done;o=r.next())null!=(o=o.value).initSegmentKey&&i.add(o.initSegmentKey),i.add(o.dataKey)}return Array.from(i)}(r);return Pw(i,r),Promise.all([n.removeSegments(o,d),n.removeManifests([i.key()],d)])}(p,s,y)]),2);case 2:return xa(n),D(n,u.destroy(),8);case 8:ya(n,0)}})))},N.fj=function(){var n,i,r,o,s,u,p,y,A,T,x;return mx(this,(n=this,K(function(C){switch(C.g){case 1:return Yw(),i=n.g,r=n.h.drm,o=new fw,s=!1,ua(C,2),D(C,o.init(),4);case 4:u=[],function(n,i){n.g.forEach(function(n){i(n.getEmeSessionCell())})}(o,function(n){return u.push(n)}),y=(p=t(u)).next();case 5:if(y.done){C.F(2);break}return D(C,(A=y.value).getAll(),8);case 8:return T=C.h,D(C,Kw(r,i,T),9);case 9:return x=C.h,D(C,A.remove(x),10);case 10:x.length!=T.length&&(s=!0),y=p.next(),C.F(5);break;case 2:return xa(C),D(C,o.destroy(),11);case 11:ya(C,3);break;case 3:return C.return(!s)}})))},N.list=function(){var n,i,r;return mx(this,K(function(o){switch(o.g){case 1:return Yw(),n=[],i=new fw,ua(o,2),D(o,i.init(),4);case 4:return r=Promise.resolve(),function(n,i){n.g.forEach(function(n,r){n.getCells().forEach(function(n,o){i({qb:r,Ma:o},n)})})}(i,function(i,o){r=r.then(function(){return K(function(r){if(1==r.g)return D(r,o.getAllManifests(),2);r.h.forEach(function(r,o){r=Pw(new yw("manifest",i.qb,i.Ma,o),r),n.push(r)}),F(r)})})}),D(o,r,2);case 2:return xa(o),D(o,i.destroy(),6);case 6:ya(o,3);break;case 3:return o.return(n)}}))},L("shaka.offline.Storage",Uw),Uw.deleteAll=function(){var n;return K(function(i){var r,o,s;return 1==i.g?(n=new fw,ua(i,2),D(i,(r=n,K(function(n){return 1==n.g?((s=0<(o=Array.from(r.g.values())).length)||rv.forEach(function(n){(n=n())&&o.push(n)}),D(n,Promise.all(o.map(function(n){return n.erase()})),2)):s?n.F(0):D(n,Promise.all(o.map(function(n){return n.destroy()})),0)})),2)):5!=i.g?(xa(i),D(i,n.destroy(),5)):ya(i,0)})},Uw.prototype.list=Uw.prototype.list,Uw.prototype.removeEmeSessions=Uw.prototype.fj,Uw.prototype.remove=Uw.prototype.remove,Uw.prototype.store=Uw.prototype.store,Uw.prototype.getNetworkingEngine=Uw.prototype.Zb,Uw.prototype.getConfiguration=Uw.prototype.getConfiguration,Uw.prototype.configure=Uw.prototype.configure,Uw.prototype.destroy=Uw.prototype.destroy,Uw.support=Vw;var rb=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function yx(){}function zx(){for(var n=t(rw),i=n.next();!i.done;i=n.next()){i=i.value;try{i.callback()}catch(n){Ra("Error installing polyfill!",n)}}}function Bx(n,i){for(n={priority:i||0,callback:n},i=0;i<rw.length;i++)if(rw[i].priority<n.priority){rw.splice(i,0,n);return}rw.push(n)}t9.offline=Vw,L("shaka.polyfill",yx),yx.register=Bx,yx.installAll=zx;var rw=[];function Cx(){this.g=new Dx}function Ex(){n.AbortController||(n.AbortController=Cx,n.AbortSignal=Dx)}function Dx(){$a.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Fx(){}function Gx(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var n=t(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),i=n.next();!i.done;i=n.next())!function(n){var i="aria-"+n.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,n,{get:function(){return this.getAttribute(i)},set:function(n){null==n||void 0==n?this.removeAttribute(i):this.setAttribute(i,n)}})}(i.value)}function Ix(){}function Jx(){Kx()}function Lx(){}function Mx(){if(n.Document){var i=Element.prototype;i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||i.webkitRequestFullscreen,(i=Document.prototype).exitFullscreen=i.exitFullscreen||i.mozCancelFullScreen||i.msExitFullscreen||i.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Nx),document.addEventListener("webkitfullscreenerror",Nx),document.addEventListener("mozfullscreenchange",Nx),document.addEventListener("mozfullscreenerror",Nx),document.addEventListener("MSFullscreenChange",Nx),document.addEventListener("MSFullscreenError",Nx)}}function Nx(n){var i=n.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),r=document.createEvent("Event");r.initEvent(i,n.bubbles,n.cancelable),n.target.dispatchEvent(r)}function Ox(){}function Px(){var n=!0;(Pd()||Jd("PlayStation 5")||Qd()||Jd("Web0S")||Kd()||Od()||Jd("PC=EOS")||Jd("Hisense")||Jd("VIDAA"))&&(n=!1),n&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),rA=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Rx)}function Rx(i){var r,o,s,u,p,y,A,T,x,C,I,M,N;return K(function(_){switch(_.g){case 1:if(r={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:i},!i)return _.return(r);if(o=i.video,s=i.audio,"media-source"==i.type){if(!Ed())return _.return(r);if(o){if(Od()){if(n.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var j=o.contentType;o.width&&o.height&&(j+="; width="+o.width+"; height="+o.height),o.framerate&&(j+="; framerate="+o.framerate),"pq"===o.transferFunction&&(j+="; eotf=smpte2084"),u=cast.__platform__.canDisplayType(j)}else u=ac(o.contentType)}else Kd()?(p=o.contentType,o.width&&o.height&&(p+="; width="+o.width+"; height="+o.height),o.framerate&&(p+="; framerate="+o.framerate),o.bitrate&&(p+="; bitrate="+o.bitrate),u=ac(p)):u=ac(o.contentType);if(!u)return _.return(r)}if(s&&!(Od()&&s.spatialRendering?ac(s.contentType+"; spatialRendering=true"):ac(s.contentType)))return _.return(r)}else if("file"!=i.type)return _.return(r);else if(o&&!Fd(o.contentType)||s&&!Fd(s.contentType))return _.return(r);if(!i.keySystemConfiguration)return r.supported=!0,_.return(Promise.resolve(r));if(y=i.keySystemConfiguration,A=[],T=[],y.audio&&(x={robustness:y.audio.robustness||"",contentType:i.audio.contentType},Kd()&&i.audio.contentType.includes('codecs="ac-3"')&&(x={robustness:x.robustness,contentType:'audio/mp4; codecs="ec-3"'}),A.push(x)),y.video&&(C={robustness:y.video.robustness||"",contentType:i.video.contentType},T.push(C)),I={initDataTypes:[y.initDataType],distinctiveIdentifier:y.distinctiveIdentifier,persistentState:y.persistentState,sessionTypes:y.sessionTypes},A.length&&(I.audioCapabilities=A),T.length&&(I.videoCapabilities=T),M=(i.video?i.video.contentType:"")+"#"+(i.audio?i.audio.contentType:"")+"#"+i.keySystemConfiguration.keySystem,ta(_,3),M in rT){N=rT[M],_.F(5);break}return D(_,navigator.requestMediaKeySystemAccess(y.keySystem,[I]),6);case 6:N=_.h,rT[M]=N;case 5:va(_,4);break;case 3:wa(_);case 4:N&&(r.supported=!0,r.keySystemAccess=N);case 2:return _.return(r)}})}Cx.prototype.abort=function(n){var i=this.g;i.h||(i.h=!0,i.g=n,void 0===i.g&&(i.g=new DOMException("signal is aborted without reason","AbortError")),n=new O("abort"),i.onabort&&i.onabort(n),i.dispatchEvent(n))},M.Object.defineProperties(Cx.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),yx.AbortController=Cx,Cx.install=Ex,pa(Dx,$a),M.Object.defineProperties(Dx.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Bx(Ex),yx.Aria=Fx,Fx.install=Gx,Bx(Gx),yx.EncryptionScheme=Ix,Ix.install=Jx,Bx(Jx,-2),yx.Fullscreen=Lx,Lx.install=Mx,Bx(Mx),yx.MediaCapabilities=Ox,Ox.install=Px;var rA=null;Ox.originalMcap=rA;var rT={};function Tx(){}function Ux(){var i,r,o,s=Rd();n.MediaSource&&(Od()?Vx():s?10>=s?n.MediaSource=null:12>=s?(Wx(),i=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(n,r){return i.call(this,n,r-.001)}):15>=s&&Wx():Hd()?Vx():(Md()||Ld()||Jd("Tizen 4"))&&(r=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(n){return"opus"!=ld(n)&&r(n)})),n.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(o=MediaSource.isTypeSupported,Jd("Web0S")||(MediaSource.isTypeSupported=function(n){var i=n.split(/ *; */),r=i.findIndex(function(n){return n.startsWith("codecs=")});if(0>r)return o(n);var s=i[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=s.findIndex(function(n){return n.startsWith("vp09")});return 0<=u&&(s[u]="vp9",i[r]='codecs="'+s.join(",")+'"',n=i.join("; ")),o(n)}))}function Wx(){var n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var i=n.apply(this,Ga.apply(0,arguments));return i.abort=function(){},i}}function Vx(){var n=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(i){return"mp2t"!=i.split(";")[0].split("/")[1]&&n(i)}}function $x(){}function ay(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):void 0!=n.orientation&&function(){function a(){switch(n.orientation){case -90:i.type="landscape-secondary",i.angle=270;break;case 0:i.type="portrait-primary",i.angle=0;break;case 90:i.type="landscape-primary",i.angle=90;break;case 180:i.type="portrait-secondary",i.angle=180}}var i=new dy;screen.orientation=i,a(),n.addEventListener("orientationchange",function(){a();var n=new O("change");i.dispatchEvent(n)})}())}function dy(){$a.call(this),this.type="",this.angle=0}function ey(){}function ly(n,i){try{var r=new my(n,i);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function ny(n){var i=this.mediaKeys;return i&&i!=n&&oy(i,null),delete this.mediaKeys,(this.mediaKeys=n)?oy(n,this):Promise.resolve()}function py(n){if(pc(n=lc(n.initData)).getUint32(0,!0)+4!=n.byteLength)throw RangeError("Malformed FairPlay init data");n=Xf(n=Uf(n.subarray(4),!0));var i=new Event("encrypted");i.initDataType="skd",i.initData=mc(n),this.dispatchEvent(i)}function my(n,i){if(this.keySystem=n,n.startsWith("com.apple.fps"))for(i=(n=t(i)).next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var o=!1,s=!1;if(r.audioCapabilities)for(var u=t(r.audioCapabilities),p=u.next();!p.done;p=u.next())(p=p.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,p.contentType.split(";")[0])&&(i.audioCapabilities.push(p),s=!0));if(r.videoCapabilities)for(p=(r=t(r.videoCapabilities)).next();!p.done;p=r.next())(u=p.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(i.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=s?i:null}if(i){this.g=i;return}}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function qy(n){this.h=new WebKitMediaKeys(n),this.g=new Kf}function oy(n,i){if(n.g.ub(),!i)return Promise.resolve();n.g.o(i,"webkitneedkey",py);try{return zj(i,HTMLMediaElement.HAVE_METADATA,n.g,function(){i.webkitSetMediaKeys(n.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function ry(n){$a.call(this),this.i=null,this.l=n,this.g=this.h=null,this.j=new Kf,this.sessionId="",this.expiration=NaN,this.closed=new mf,this.keyStatuses=new sy}function ty(n,i){var r=n.keyStatuses;r.size=void 0==i?0:1,r.g=i,i=new O("keystatuseschange"),n.dispatchEvent(i)}function sy(){this.size=0,this.g=void 0}function uy(){}function vy(){!n.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=wy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=xy,n.MediaKeys=yy,n.MediaKeySystemAccess=zy,n.shakaMediaKeysPolyfill=!0)}function wy(){return Promise.reject(Error("The key system specified is not supported."))}function xy(n){return null==n?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function yy(){throw TypeError("Illegal constructor.")}function zy(){throw this.keySystem="",TypeError("Illegal constructor.")}function Ay(){}function By(){if(!(!n.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)rx="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Dy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ey,n.MediaKeys=Fy,n.MediaKeySystemAccess=Gy,n.shakaMediaKeysPolyfill=!0}}function Hy(n){var i=rx;return i?i+n.charAt(0).toUpperCase()+n.slice(1):n}function Dy(n,i){try{var r=new Gy(n,i);return Promise.resolve(r)}catch(n){return Promise.reject(n)}}function Ey(n){var i=this.mediaKeys;return i&&i!=n&&Iy(i,null),delete this.mediaKeys,(this.mediaKeys=n)&&Iy(n,this),Promise.resolve()}function Gy(n,i){this.g=this.keySystem=n;var r=!1;"org.w3.clearkey"==n&&(this.g="webkit-org.w3.clearkey",r=!1);var o=!1,s=document.getElementsByTagName("video");s=s.length?s[0]:document.createElement("video"),i=t(i);for(var u=i.next();!u.done;u=i.next()){var p={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(u=u.value).initDataTypes,sessionTypes:["temporary"],label:u.label},y=!1;if(u.audioCapabilities)for(var A=t(u.audioCapabilities),T=A.next();!T.done;T=A.next())(T=T.value).contentType&&(y=!0,s.canPlayType(T.contentType.split(";")[0],this.g)&&(p.audioCapabilities.push(T),o=!0));if(u.videoCapabilities)for(T=(A=t(u.videoCapabilities)).next();!T.done;T=A.next())(T=T.value).contentType&&(y=!0,s.canPlayType(T.contentType,this.g)&&(p.videoCapabilities.push(T),o=!0));if(y||(o=s.canPlayType("video/mp4",this.g)||s.canPlayType("video/webm",this.g)),"required"==u.persistentState&&(r?(p.persistentState="required",p.sessionTypes=["persistent-license"]):o=!1),o){this.h=p;return}}throw r="Unsupported keySystem",("org.w3.clearkey"==n||"com.widevine.alpha"==n)&&(r="None of the requested configurations were supported."),(n=Error(r)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Fy(n){this.l=n,this.h=null,this.g=new Kf,this.i=[],this.j=new Map}function Iy(n,i){n.h=i,n.g.ub();var r=rx;i&&(n.g.o(i,r+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=mc(i.initData),n.h.dispatchEvent(r)}),n.g.o(i,r+"keymessage",function(i){var r=Jy(n,i.sessionId);r&&(i=(new Map).set("messageType",void 0==r.keyStatuses.sc()?"licenserequest":"licenserenewal").set("message",i.message),i=new O("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),n.g.o(i,r+"keyadded",function(i){(i=Jy(n,i.sessionId))&&(Ky(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),n.g.o(i,r+"keyerror",function(i){var r=Jy(n,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(45==i.systemCode&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ky(r,"output-restricted"):1==o?Ky(r,"expired"):Ky(r,"internal-error"))}}))}function Jy(n,i){var r=n.j.get(i);return r||((r=n.i.shift())?(r.sessionId=i,n.j.set(i,r),r):null)}function Ly(n,i,r){$a.call(this),this.j=n,this.m=!1,this.g=this.h=null,this.i=i,this.l=r,this.sessionId="",this.expiration=NaN,this.closed=new mf,this.keyStatuses=new My}function Ny(n,i,r){if(n.m)return Promise.reject(Error("The session is already initialized."));n.m=!0;try{if("persistent-license"==n.l){if(r)var o=lc(Xf("LOAD_SESSION|"+r));else{var s=Xf("PERSISTENT|");o=tg(s,i)}}else o=lc(i)}catch(n){return Promise.reject(n)}n.h=new mf;var u=Hy("generateKeyRequest");try{n.j[u](n.i,o)}catch(i){if("InvalidStateError"!=i.name)return n.h=null,Promise.reject(i);new Dd(function(){try{n.j[u](n.i,o)}catch(i){n.h.reject(i),n.h=null}}).S(.01)}return n.h}function Ky(n,i){var r=n.keyStatuses;r.size=void 0==i?0:1,r.g=i,i=new O("keystatuseschange"),n.dispatchEvent(i)}function My(){this.size=0,this.g=void 0}Ox.memoizedMediaKeySystemAccessRequests_=rT,Bx(Px,-1),yx.MediaSource=Tx,Tx.install=Ux,Bx(Ux),yx.Orientation=$x,$x.install=ay,pa(dy,$a),dy.prototype.lock=function(n){function b(n){return screen.lockOrientation?screen.lockOrientation(n):screen.mozLockOrientation?screen.mozLockOrientation(n):!!screen.msLockOrientation&&screen.msLockOrientation(n)}var i=!1;switch(n){case"natural":i=b("default");break;case"any":i=!0,this.unlock();break;default:i=b(n)}return i?Promise.resolve():((n=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(n))},dy.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Bx(ay),yx.PatchedMediaKeysApple=ey,ey.uninstall=function(){s&&(s=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",u),HTMLMediaElement.prototype.setMediaKeys=p,n.MediaKeys=y,n.MediaKeySystemAccess=A,navigator.requestMediaKeySystemAccess=T,u=T=p=A=y=null,n.shakaMediaKeysPolyfill=!1)},ey.install=function(i){n.HTMLVideoElement&&n.WebKitMediaKeys&&((void 0===i?0:i)&&(s=!0,u=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),p=HTMLMediaElement.prototype.setMediaKeys,y=n.MediaKeys,A=n.MediaKeySystemAccess,T=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ny,n.MediaKeys=qy,n.MediaKeySystemAccess=my,navigator.requestMediaKeySystemAccess=ly,n.shakaMediaKeysPolyfill=!0)},my.prototype.createMediaKeys=function(){return Promise.resolve(new qy(this.keySystem))},my.prototype.getConfiguration=function(){return this.g},qy.prototype.createSession=function(n){if("temporary"!=(n=n||"temporary"))throw TypeError("Session type "+n+" is unsupported on this platform.");return new ry(this.h,n)},qy.prototype.setServerCertificate=function(){return Promise.resolve(!1)},qy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},pa(ry,$a),(N=ry.prototype).generateRequest=function(n,i){var r=this;this.h=new mf;try{var o=this.l.createSession("video/mp4",lc(i));this.i=o,this.sessionId=o.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(n){r.h&&(r.h.resolve(),r.h=null),n=(new Map).set("messageType",void 0==r.keyStatuses.sc()?"license-request":"license-renewal").set("message",mc(n.message)),n=new O("message",n),r.dispatchEvent(n)}),this.j.o(o,"webkitkeyadded",function(){r.g&&(ty(r,"usable"),r.g.resolve(),r.g=null)}),this.j.o(o,"webkitkeyerror",function(){var n=Error("EME PatchedMediaKeysApple key error");if(n.errorCode=r.i.error,null!=r.h)r.h.reject(n),r.h=null;else if(null!=r.g)r.g.reject(n),r.g=null;else switch(r.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ty(r,"output-not-allowed");break;default:ty(r,"internal-error")}}),ty(this,"status-pending")}catch(n){this.h.reject(n)}return this.h},N.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},N.update=function(n){this.g=new mf;try{this.i.update(lc(n))}catch(n){this.g.reject(n)}return this.g},N.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ub()}catch(n){this.closed.reject(n)}return this.closed},N.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(N=sy.prototype).sc=function(){return this.g},N.forEach=function(n){this.g&&n(this.g,tS.value())},N.get=function(n){if(this.has(n))return this.g},N.has=function(n){var i=tS.value();return!!(this.g&&jc(n,i))},N.entries=function(){},N.keys=function(){},N.values=function(){},yx.PatchedMediaKeysNop=uy,uy.install=vy,yy.prototype.createSession=function(){},yy.prototype.setServerCertificate=function(){},yy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},zy.prototype.getConfiguration=function(){},zy.prototype.createMediaKeys=function(){},Bx(vy,-10),yx.PatchedMediaKeysWebkit=Ay,Ay.install=By,Gy.prototype.createMediaKeys=function(){return Promise.resolve(new Fy(this.g))},Gy.prototype.getConfiguration=function(){return this.h},Fy.prototype.createSession=function(n){if("temporary"!=(n=n||"temporary")&&"persistent-license"!=n)throw TypeError("Session type "+n+" is unsupported on this platform.");var i=this.h||document.createElement("video");return i.src||(i.src="about:blank"),n=new Ly(i,this.l,n),this.i.push(n),n},Fy.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Fy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},pa(Ly,$a),(N=Ly.prototype).generateRequest=function(n,i){return Ny(this,i,null)},N.load=function(n){return"persistent-license"==this.l?Ny(this,null,n):Promise.reject(Error("Not a persistent session."))},N.update=function(n){var i=new mf;return function Oy(n,i,r){if(n.g)n.g.then(function(){return Oy(n,i,r)}).catch(function(){return Oy(n,i,r)});else{if(n.g=i,"webkit-org.w3.clearkey"==n.i){var o=Tf(r),s=JSON.parse(o);"oct"!=s.keys[0].kty&&(n.g.reject(Error("Response is not a valid JSON Web Key Set.")),n.g=null),o=qg(s.keys[0].k),s=qg(s.keys[0].kid)}else o=lc(r),s=null;var u=Hy("addKey");try{n.j[u](n.i,o,s,n.sessionId)}catch(i){n.g.reject(i),n.g=null}}}(this,i,n),i},N.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var n=Hy("cancelKeyRequest");try{this.j[n](this.i,this.sessionId)}catch(n){}}return this.closed.resolve(),this.closed},N.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(N=My.prototype).sc=function(){return this.g},N.forEach=function(n){this.g&&n(this.g,tS.value())},N.get=function(n){if(this.has(n))return this.g},N.has=function(n){var i=tS.value();return!!(this.g&&jc(n,i))},N.entries=function(){},N.keys=function(){},N.values=function(){};var rx="";function Py(){}function Qy(){if(n.HTMLVideoElement){var i=HTMLVideoElement.prototype;i.requestPictureInPicture&&document.exitPictureInPicture||!i.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,i.requestPictureInPicture=Ry,Object.defineProperty(i,"disablePictureInPicture",{get:Sy,set:Ty,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Uy,document.addEventListener("webkitpresentationmodechanged",Vy,!0))}}function Vy(n){if("picture-in-picture"==(n=n.target).webkitPresentationMode){document.pictureInPictureElement=n;var i=new Event("enterpictureinpicture");n.dispatchEvent(i)}else document.pictureInPictureElement==n&&(document.pictureInPictureElement=null),i=new Event("leavepictureinpicture"),n.dispatchEvent(i)}function Ry(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Uy(){var n=document.pictureInPictureElement;return n?(n.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Sy(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Ty(n){n?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Wy(){}function Xy(){n.crypto&&("randomUUID"in n.crypto||(n.crypto.randomUUID=Yy))}function Yy(){var n=URL.createObjectURL(new Blob),i=n.toString();return URL.revokeObjectURL(n),i.substr(i.lastIndexOf("/")+1)}function Zy(){}function $y(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=az)}function az(){return new Promise(function(n,i){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(i,r){n({usage:i,quota:r})},i)})}function bz(){}function cz(){var n=Symbol.prototype;"description"in n||Object.defineProperty(n,"description",{get:dz})}function dz(){var n=/\((.*)\)/.exec(this.toString());return n?n[1]:void 0}function ez(){}function fz(){if(n.HTMLMediaElement){var i=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var n=i.apply(this);return n&&n.catch(function(){}),n}}}function gz(){}function hz(){if(n.HTMLVideoElement){var i=HTMLVideoElement.prototype;!i.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in i||Nd())&&(i.getVideoPlaybackQuality=iz)}}function iz(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function jz(){}function kz(){if(!n.VTTCue&&n.TextTrackCue){var i=null,r=TextTrackCue.length;if(3==r)i=lz;else if(6==r)i=mz;else{try{var o=!!lz(1,2,"")}catch(n){o=!1}o&&(i=lz)}i&&(n.VTTCue=function(n,r,o){return i(n,r,o)})}}function lz(i,r,o){return new n.TextTrackCue(i,r,o)}function mz(i,r,o){return new n.TextTrackCue(i+"-"+r+"-"+o,i,r,o)}function nz(){}Bx(By),yx.PiPWebkit=Py,Py.install=Qy,Bx(Qy),yx.RandomUUID=Wy,Wy.install=Xy,Bx(Xy),yx.StorageEstimate=Zy,Zy.install=$y,Bx($y),yx.Symbol=bz,bz.install=cz,Bx(cz),yx.VideoPlayPromise=ez,ez.install=fz,Bx(fz),yx.VideoPlaybackQuality=gz,gz.install=hz,Bx(hz),yx.VTTCue=jz,jz.install=kz,Bx(kz),nz.prototype.parseInit=function(){},nz.prototype.setSequenceMode=function(){},nz.prototype.setManifestType=function(){},nz.prototype.parseMedia=function(n,i){var r=null,o=[];n=t(n=Tf(n).split(/\r?\n/));for(var s=n.next();!s.done;s=n.next())if((s=s.value)&&!/^\s+$/.test(s)&&(s=rS.exec(s))){var u=rC.exec(s[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),s=new yc(u,i.segmentEnd?i.segmentEnd:u+2,s[2]),r&&(r.endTime=u,o.push(r)),r=s}return r&&o.push(r),o},L("shaka.text.LrcTextParser",nz),nz.prototype.parseMedia=nz.prototype.parseMedia,nz.prototype.setManifestType=nz.prototype.setManifestType,nz.prototype.setSequenceMode=nz.prototype.setSequenceMode,nz.prototype.parseInit=nz.prototype.parseInit;var rS=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,rC=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function qz(){}function Iz(n,i){i=t(i.split(" "));for(var r=i.next();!r.done;r=i.next())switch(r.value){case"underline":n.textDecoration.includes("underline")||n.textDecoration.push("underline");break;case"noUnderline":n.textDecoration.includes("underline")&&vc(n.textDecoration,"underline");break;case"lineThrough":n.textDecoration.includes("lineThrough")||n.textDecoration.push("lineThrough");break;case"noLineThrough":n.textDecoration.includes("lineThrough")&&vc(n.textDecoration,"lineThrough");break;case"overline":n.textDecoration.includes("overline")||n.textDecoration.push("overline");break;case"noOverline":n.textDecoration.includes("overline")&&vc(n.textDecoration,"overline")}}function Dz(n,i,r,o,s){return s=void 0===s||s,(n=Jz(n,r,o))?n:s?wz(i,r,o):null}function wz(n,i,r){return n?Cg(n,rK,r)||Kz(n,i,r):null}function Jz(n,i,r){return Cg(n,rK,r)||Kz(n,i,r)}function Kz(n,i,r){n=zz(n,"style",i,"");for(var o=null,s=0;s<n.length;s++){var u=Bg(n[s],"urn:ebu:tt:style",r);u||(u=Cg(n[s],rK,r)),u||(u=Jz(n[s],i,r)),u&&(o=u)}return o}function zz(n,i,r,o,s){var u=[];if(!n||1>r.length)return u;var p=n;for(n=null;p&&!(n=s?Bg(p,s,i):p.getAttribute(i))&&(p=p.parentNode)instanceof Element;);if(i=n){for(s=(i=t(i.split(" "))).next();!s.done;s=i.next())for(s=s.value,p=(n=t(r)).next();!p.done;p=n.next())if(o+(p=p.value).getAttribute("xml:id")==s){u.push(p);break}}return u}function Az(n,i){var r=Lz(n.getAttribute("begin"),i),o=Lz(n.getAttribute("end"),i);return n=Lz(n.getAttribute("dur"),i),null==o&&null!=n&&(o=r+n),{start:r,end:o}}function Lz(n,i){var r=null;if(rR.test(n)){r=Number((n=rR.exec(n))[1]);var o=Number(n[2]),s=Number(n[3]),u=Number(n[4]);u+=(Number(n[5])||0)/i.h,s+=u/i.frameRate,r=s+60*o+3600*r}else if(rN.test(n))r=Oz(rN,n);else if(rU.test(n))r=Oz(rU,n);else if(rO.test(n))r=Number((n=rO.exec(n))[1])/i.frameRate;else if(r_.test(n))r=Number((n=r_.exec(n))[1])/i.g;else if(rj.test(n))r=Oz(rj,n);else if(n)throw new P(2,2,2001,"Could not parse cue time range in TTML");return r}function Oz(n,i){return null==(n=n.exec(i))||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function tz(n,i,r,o){this.frameRate=Number(n)||30,this.h=Number(i)||1,this.g=Number(o),0==this.g&&(this.g=n?this.frameRate*this.h:1),r&&(n=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(n[1])/Number(n[2]))}eJ["application/x-subtitle-lrc"]=function(){return new nz},qz.prototype.parseInit=function(){},qz.prototype.setSequenceMode=function(){},qz.prototype.setManifestType=function(){},qz.prototype.parseMedia=function(n,i,r){var o=Tf(n);if(n=[],""==o)return n;var s=Pg(o,"tt");if(!s)throw new P(2,2,2005,"Failed to parse TTML.");if(!(o=s.getElementsByTagName("body")[0]))return[];var u=Cg(s,rV,"frameRate"),p=Cg(s,rV,"subFrameRate"),y=Cg(s,rV,"frameRateMultiplier"),A=Cg(s,rV,"tickRate"),T=Cg(s,rV,"cellResolution"),x=s.getAttribute("xml:space")||"default",C=Cg(s,rK,"extent");if("default"!=x&&"preserve"!=x)throw new P(2,2,2005,"Invalid xml:space value: "+x);x="default"==x,u=new tz(u,p,y,A),T=T&&(T=/^(\d+) (\d+)$/.exec(T))?{mc:parseInt(T[1],10),rows:parseInt(T[2],10)}:null,p=(p=s.getElementsByTagName("metadata")[0])?Array.from(p.childNodes).filter(function(n){return n instanceof Element}):[],y=Array.from(s.getElementsByTagName("style")),s=Array.from(s.getElementsByTagName("region")),A=[];for(var I=t(s),M=I.next();!M.done;M=I.next()){var N=M.value;M=new zc;var _=N.getAttribute("xml:id");if(_){M.id=_;var j=null;C&&(j=rI.exec(C)||rP.exec(C)),_=j?Number(j[1]):null,j=j?Number(j[2]):null;var B,z=wz(N,y,"extent");if(z){var G=(B=rI.exec(z))||rP.exec(z);null!=G&&(M.width=Number(G[1]),M.height=Number(G[2]),B||(null!=_&&(M.width=100*M.width/_),null!=j&&(M.height=100*M.height/j)),M.widthUnits=B||null!=_?eG:0,M.heightUnits=B||null!=j?eG:0)}(N=wz(N,y,"origin"))&&null!=(G=(B=rI.exec(N))||rP.exec(N))&&(M.viewportAnchorX=Number(G[1]),M.viewportAnchorY=Number(G[2]),B?z||(M.width=100-M.viewportAnchorX,M.widthUnits=eG,M.height=100-M.viewportAnchorY,M.heightUnits=eG):(null!=j&&(M.viewportAnchorY=100*M.viewportAnchorY/j),null!=_&&(M.viewportAnchorX=100*M.viewportAnchorX/_)),M.viewportAnchorUnits=B||null!=_?eG:0)}else M=null;M&&A.push(M)}if(xg(o,"p").length)throw new P(2,2,2001,"<p> can only be inside <div> in TTML");for(I=(C=t(xg(o,"div"))).next();!I.done;I=C.next())if(xg(I.value,"span").length)throw new P(2,2,2001,"<span> can only be inside <p> in TTML");return(i=function xz(n,i,r,o,s,u,p,y,A,T,x,C){var I,M,N,_,j=n.parentNode;if(n.nodeType==Node.COMMENT_NODE)return null;if(n.nodeType==Node.TEXT_NODE){if(!x)return null;var B=document.createElement("span");B.textContent=n.textContent}else B=n;for(var z=null,G=t(rz),H=G.next();!H.done&&!(z=zz(B,"backgroundImage",o,"#",H.value)[0]);H=G.next());G=null;var q=Cg(B,rz,"backgroundImage");if(C&&q&&!q.startsWith("#")&&(H=new fb(C),q=new fb(q),(H=H.resolve(q).toString())&&(G=H)),("p"==n.nodeName||z||G)&&(x=!0),n=x,H="default"==(B.getAttribute("xml:space")||(y?"default":"preserve")),q=Array.from(B.childNodes).every(function(n){return n.nodeType==Node.TEXT_NODE}),y=[],!q)for(var Y=t(B.childNodes),Q=Y.next();!Q.done;Q=Y.next())(Q=xz(Q.value,i,r,o,s,u,p,H,A,B,x,C))&&y.push(Q);if(o=null!=T,C=/\S/.test(B.textContent),!((Q=B.hasAttribute("begin")||B.hasAttribute("end")||B.hasAttribute("dur"))||C||"br"==B.tagName||0!=y.length||o&&!H))return null;for(C=(Y=Az(B,r)).start,Y=Y.end;j&&j.nodeType==Node.ELEMENT_NODE&&"tt"!=j.tagName;)C=(I=j,M=r,N=C,_=Y,I=Az(I,M),null==N?N=I.start:null!=I.start&&(N+=I.start),null==_?_=I.end:null!=I.start&&(_+=I.start),Y={start:N,end:_}).start,Y=Y.end,j=j.parentNode;if(null==C&&(C=0),C+=i.periodStart,Y=null==Y?1/0:Y+i.periodStart,C=Math.max(C,i.segmentStart),Y=Math.min(Y,i.segmentEnd),!Q&&0<y.length)for(C=1/0,Y=0,r=(i=t(y)).next();!r.done;r=i.next())C=Math.min(C,(r=r.value).startTime),Y=Math.max(Y,r.endTime);if("br"==B.tagName)return(s=new yc(C,Y,"")).lineBreak=!0,s;if(i="",q&&(i=B.textContent,H&&(i=(i=i.trim()).replace(/\s+/g," "))),(i=new yc(C,Y,i)).nestedCues=y,x||(i.isContainer=!0),A&&(i.cellResolution=A),A=zz(B,"region",u,"")[0],B.hasAttribute("region")&&A&&A.getAttribute("xml:id")){var J=A.getAttribute("xml:id");i.region=p.filter(function(n){return n.id==J})[0]}return p=A,T&&o&&!B.getAttribute("region")&&!B.getAttribute("style")&&(p=zz(T,"region",u,"")[0]),function(n,i,r,o,s,u,p,y){if("rtl"==Dz(i,r,u,"direction",p=p||y)&&(n.direction="rtl"),"tb"==(y=Dz(i,r,u,"writingMode",p))||"tblr"==y?n.writingMode="vertical-lr":"tbrl"==y?n.writingMode="vertical-rl":"rltb"==y||"rl"==y?n.direction="rtl":y&&(n.direction=eP),(y=Dz(i,r,u,"textAlign",!0))?(n.positionAlign=rF[y],n.lineAlign=rB[y],n.textAlign=eI[y.toUpperCase()]):n.textAlign=ek,(y=Dz(i,r,u,"displayAlign",!0))&&(n.displayAlign=eL[y.toUpperCase()]),(y=Dz(i,r,u,"color",p))&&(n.color=y),(y=Dz(i,r,u,"backgroundColor",p))&&(n.backgroundColor=y),(y=Dz(i,r,u,"border",p))&&(n.border=y),y=Dz(i,r,u,"fontFamily",p))switch(y){case"monospaceSerif":n.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":n.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":n.fontFamily="sans-serif";break;case"monospaceSansSerif":n.fontFamily="Consolas,monospace";break;case"proportionalSerif":n.fontFamily="serif";break;default:n.fontFamily=y}switch((y=Dz(i,r,u,"fontWeight",p))&&"bold"==y&&(n.fontWeight=700),y=Dz(i,r,u,"wrapOption",p),n.wrapLine=!y||"noWrap"!=y,(y=Dz(i,r,u,"lineHeight",p))&&y.match(rL)&&(n.lineHeight=y),(y=Dz(i,r,u,"fontSize",p))&&(y.match(rL)||y.match(rM))&&(n.fontSize=y),(y=Dz(i,r,u,"fontStyle",p))&&(n.fontStyle=eK[y.toUpperCase()]),o?(s=o.getAttribute("imageType")||o.getAttribute("imagetype"),y=o.getAttribute("encoding"),o=o.textContent.trim(),"PNG"==s&&"Base64"==y&&o&&(n.backgroundImage="data:image/png;base64,"+o)):s&&(n.backgroundImage=s),(o=Dz(i,r,u,"textOutline",p))&&((o=o.split(" "))[0].match(rL)?n.textStrokeColor=n.color:(n.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(rL)?n.textStrokeWidth=o[0]:n.textStrokeColor=""),(o=Dz(i,r,u,"letterSpacing",p))&&o.match(rL)&&(n.letterSpacing=o),(o=Dz(i,r,u,"linePadding",p))&&o.match(rL)&&(n.linePadding=o),(o=Dz(i,r,u,"opacity",p))&&(n.opacity=parseFloat(o)),(o=wz(r,u,"textDecoration"))&&Iz(n,o),(o=Jz(i,u,"textDecoration"))&&Iz(n,o),(o=Dz(i,r,u,"textCombine",p))&&(n.textCombineUpright=o),Dz(i,r,u,"ruby",p)){case"container":n.rubyTag="ruby";break;case"text":n.rubyTag="rt"}}(i,B,p,z,G,s,n,0==y.length),i}(o,i,u,p,y,s,A,x,T,null,!1,r))&&(i.backgroundColor||(i.backgroundColor="transparent"),n.push(i)),n},L("shaka.text.TtmlTextParser",qz),qz.prototype.parseMedia=qz.prototype.parseMedia,qz.prototype.setManifestType=qz.prototype.setManifestType,qz.prototype.setSequenceMode=qz.prototype.setSequenceMode,qz.prototype.parseInit=qz.prototype.parseInit;var rI=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,rM=/^(\d{1,2}(?:\.\d+)?|100)%$/,rL=/^(\d+px|\d+em|\d*\.?\d+c)$/,rP=/^(\d+)px (\d+)px$/,rR=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,rN=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,rU=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,rO=/^(\d*(?:\.\d*)?)f$/,r_=/^(\d*(?:\.\d*)?)t$/,rj=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),rB={left:eU,center:"center",right:"end",start:eU,end:"end"},rF={left:"line-left",center:"center",right:"line-right"},rV=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],rK=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],rz=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Tz(){this.g=new qz}function Uz(){this.h=!1,this.g="UNKNOWN"}function Wz(n){for(var i=t(Object.entries(e_)),r=i.next();!r.done;r=i.next()){var o=t(r.value);r=o.next().value,o=o.next().value;var s=new yc(0,0,"");s.color=o,n.set("."+r,s)}for(r=(i=t(Object.entries(ej))).next();!r.done;r=i.next())r=(o=t(r.value)).next().value,o=o.next().value,(s=new yc(0,0,"")).backgroundColor=o,n.set("."+r,s)}function Yz(n,i,r){if(n.includes("<")){0===r.size&&Wz(r);e:{for(var o=[],s=-1,u="",p=0;p<n.length;p++)if("/"===n[p]&&0<p&&"<"===n[p-1]){var y=n.indexOf(">",p);if(y<=p)break e;if((y=n.substring(p+1,y))&&"c"===y){var A=o.pop();A?A===y?(u+="/"+y+">",p+=y.length+1):A.startsWith("c.")?(p+=y.length+1,u+="/"+A+">"):u+=n[p]:u+=n[p]}else u+=n[p]}else"<"===n[p]?"c"!=n[s=p+1]&&(s=-1):">"===n[p]&&0<s&&(o.push(n.substr(s,p-s)),s=-1),u+=n[p];n=u}for(s=0,o=n,n=[],u=-1;s<o.length;s++)"<"===o[s]?u=s+1:">"===o[s]&&0<u&&((u=o.substr(u,s-u)).match(rG)&&n.push(u),u=-1);for(s=(n=t(n)).next();!s.done;s=n.next())s=s.value,o=o.replace("<"+s+">",'<div time="'+s+'">')+"</div>";n=o;e:{for(y=0,s=n,u=[],p=-1,n="",o=!1;y<s.length;y++)if("/"===s[y]){if(-1===(A=s.indexOf(">",y))){n=s;break e}if((A=s.substring(y+1,A))&&"v"==A){o=!0;var T=null;if(u.length&&(T=u[u.length-1]),T){if(T===A)n+="/"+A+">";else{if(!T.startsWith("v")){n+=s[y];continue}n+="/"+T+">"}y+=A.length+1}else n+=s[y]}else n+=s[y]}else"<"===s[y]?"v"!=s[p=y+1]&&(p=-1):">"===s[y]&&0<p&&(u.push(s.substr(p,y-p)),p=-1),n+=s[y];for(u=(s=t(u)).next();!u.done;u=s.next())p=(u=u.value).replace(" ",".voice-"),n=(n=n.replace("<"+u+">","<"+p+">")).replace("</"+u+">","</"+p+">"),o||(n+="</"+p+">")}if(o=Pg("<span>"+n+"</span>","span")){if(1==(o=o.childNodes).length&&((s=o[0]).nodeType==Node.TEXT_NODE||s.nodeType==Node.CDATA_SECTION_NODE)){i.payload=$z(n);return}for(o=(n=t(o)).next();!o.done;o=n.next())!function aA(n,i,r){var o=i.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new zc,o.position=null,o.size=0,n.nodeType===Node.ELEMENT_NODE&&n.nodeName)for(var s=t(n.nodeName.split(/(?=[ .])+/g)),u=s.next();!u.done;u=s.next()){var p=u=u.value;if(p.startsWith(".voice-")){var y=p.split("-").pop();p='v[voice="'+y+'"]',r.has(p)||(p="v[voice="+y+"]")}switch(r.has(p)&&(p=r.get(p))&&(o.backgroundColor=bA(p.backgroundColor,o.backgroundColor),o.color=bA(p.color,o.color),o.fontFamily=bA(p.fontFamily,o.fontFamily),o.fontSize=bA(p.fontSize,o.fontSize),o.textShadow=bA(p.textShadow,o.textShadow),o.fontWeight=p.fontWeight,o.fontStyle=p.fontStyle,o.opacity=p.opacity,o.rubyTag=p.rubyTag,o.textCombineUpright=p.textCombineUpright,o.wrapLine=p.wrapLine),u){case"br":o=Kc(o.startTime,o.endTime),i.nestedCues.push(o);return;case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(u=n.getAttribute("color"))&&(o.color=u);break;case"div":if(!(u=n.getAttribute("time")))break;(u=Vz(new kt(u)))&&(o.startTime=u);break;case"ruby":case"rp":case"rt":o.rubyTag=u}}if(s=n.childNodes,Eg(n)||1==s.length&&Eg(s[0]))for(s=!0,n=(r=t(n.textContent.split("\n"))).next();!n.done;n=r.next())n=n.value,s||(s=Kc(o.startTime,o.endTime),i.nestedCues.push(s)),0<n.length&&((s=o.clone()).payload=$z(n),i.nestedCues.push(s)),s=!1;else for(i.nestedCues.push(o),n=(i=t(s)).next();!n.done;n=i.next())aA(n.value,o,r)}(o.value,i,r)}else i.payload=$z(n)}else i.payload=$z(n)}function bA(n,i){return n&&0<n.length?n:i}function Xz(n,i,r){var o,s,u;(o=/^align:(start|middle|center|end|left|right)$/.exec(i))?"middle"==(i=o[1])?n.textAlign=ek:n.textAlign=eI[i.toUpperCase()]:(o=/^vertical:(lr|rl)$/.exec(i))?n.writingMode="lr"==o[1]?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(i))?n.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(i))?(n.position=Number(o[1]),o[2]&&(i=o[2],n.positionAlign="line-left"==i||"start"==i?"line-left":"line-right"==i||"end"==i?"line-right":"center"==i||"middle"==i?"center":eS)):(o=/^region:(.*)$/.exec(i))?(s=r,u=o[1],(i=(s=s.filter(function(n){return n.id==u})).length?s[0]:null)&&(n.region=i)):(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(i))?(n.lineInterpretation=1,n.line=Number(r[1]),r[2]&&(n.lineAlign=eO[r[2].toUpperCase()])):(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(i))&&(n.lineInterpretation=eN,n.line=Number(r[1]),r[2]&&(n.lineAlign=eO[r[2].toUpperCase()]))}function Vz(n){if(null==(n=mt(n,rG)))return null;var i=Number(n[2]),r=Number(n[3]);return 59<i||59<r?null:Number(n[4])/1e3+r+60*i+3600*(Number(n[1])||0)}function $z(n){var i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"","&rlm;":""},r=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,o=RegExp(r.source);return n&&o.test(n)?n.replace(r,function(n){return i[n]||"'"}):n||""}eJ["application/ttml+xml"]=function(){return new qz},Tz.prototype.parseInit=function(n){var i=!1;if((new bg).box("moov",gg).box("trak",gg).box("mdia",gg).box("minf",gg).box("stbl",gg).T("stsd",ig).box("stpp",function(n){i=!0,n.parser.stop()}).parse(n),!i)throw new P(2,2,2007)},Tz.prototype.setSequenceMode=function(){},Tz.prototype.setManifestType=function(){},Tz.prototype.parseMedia=function(n,i,r){var o=this,s=!1,u=[];if((new bg).box("mdat",kg(function(n){s=!0,u=u.concat(o.g.parseMedia(n,i,r))})).parse(n,!1),!s)throw new P(2,2,2007);return u},L("shaka.text.Mp4TtmlParser",Tz),Tz.prototype.parseMedia=Tz.prototype.parseMedia,Tz.prototype.setManifestType=Tz.prototype.setManifestType,Tz.prototype.setSequenceMode=Tz.prototype.setSequenceMode,Tz.prototype.parseInit=Tz.prototype.parseInit,eJ['application/mp4; codecs="stpp"']=function(){return new Tz},eJ['application/mp4; codecs="stpp.ttml"']=function(){return new Tz},eJ['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Tz},eJ['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Tz},Uz.prototype.parseInit=function(){},Uz.prototype.setSequenceMode=function(n){this.h=n},Uz.prototype.setManifestType=function(n){this.g=n},Uz.prototype.parseMedia=function(n,i){var r=(n=(n=Tf(n)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new P(2,2,2e3);if(n=i.vttOffset,r[0].includes("X-TIMESTAMP-MAP")&&this.h){var o=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=r[0].match(/MPEGTS:(\d+)/m);if(o&&s){if(null==(n=Vz(new kt(o[1]))))throw new P(2,2,2e3);for(s=Number(s[1]),o=i.segmentStart-i.periodStart;95443.7176888889<=o;)o-=95443.7176888889,s+=8589934592;n=i.periodStart+s/9e4-n}}else r[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(n=i.segmentStart);for(i=[],o=(s=t(r[0].split("\n"))).next();!o.done;o=s.next())if(o=o.value,/^Region:/.test(o)){o=new kt(o);var u=new zc;nt(o),lt(o);for(var p=nt(o);p;){var y=u,A=p;(p=/^id=(.*)$/.exec(A))?y.id=p[1]:(p=/^width=(\d{1,2}|100)%$/.exec(A))?y.width=Number(p[1]):(p=/^lines=(\d+)$/.exec(A))?(y.height=Number(p[1]),y.heightUnits=2):(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(A))?(y.regionAnchorX=Number(p[1]),y.regionAnchorY=Number(p[2])):(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(A))?(y.viewportAnchorX=Number(p[1]),y.viewportAnchorY=Number(p[2])):/^scroll=up$/.exec(A)&&(y.scroll="up"),lt(o),p=nt(o)}i.push(u)}for(Wz(s=new Map),o=[],u=(r=t(r.slice(1))).next();!u.done;u=r.next()){if((1!=(u=u.value.split("\n")).length||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&"STYLE"==u[0]){for(A=1,y=[],p=-1;A<u.length;A++)u[A].includes("::cue")&&(y.push([]),p=y.length-1),-1!=p&&(y[p].push(u[A]),u[A].includes("}")&&(p=-1));for(p=(y=t(y)).next();!p.done;p=y.next()){var T=p.value;p="global",(A=T[0].match(/\((.*)\)/))&&(p=A.pop()),A=T.slice(1,-1),T[0].includes("}")&&(T=/\{(.*?)\}/.exec(T[0]))&&(A=T[1].split(";")),(T=s.get(p))||(T=new yc(0,0,""));for(var x=!1,C=0;C<A.length;C++){var I=/^\s*([^:]+):\s*(.*)/.exec(A[C]);if(I){var M=I[2].trim().replace(";","");switch(I[1].trim()){case"background-color":case"background":x=!0,T.backgroundColor=M;break;case"color":x=!0,T.color=M;break;case"font-family":x=!0,T.fontFamily=M;break;case"font-size":x=!0,T.fontSize=M;break;case"font-weight":(700<=parseInt(M,10)||"bold"==M)&&(x=!0,T.fontWeight=700);break;case"font-style":switch(M){case"normal":x=!0,T.fontStyle=eV;break;case"italic":x=!0,T.fontStyle="italic";break;case"oblique":x=!0,T.fontStyle="oblique"}break;case"opacity":x=!0,T.opacity=parseFloat(M);break;case"text-combine-upright":x=!0,T.textCombineUpright=M;break;case"text-shadow":x=!0,T.textShadow=M;break;case"white-space":x=!0,T.wrapLine="noWrap"!=M}}}x&&s.set(p,T)}}if(x=n,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])u=null;else if(y=null,u[0].includes("-->")||(y=u[0],u.splice(0,1)),A=Vz(p=new kt(u[0])),C=mt(p,/[ \t]+--\x3e[ \t]+/g),T=Vz(p),null==A||null==C||null==T)Ra("Failed to parse VTT time code. Cue skipped:",y,u),u=null;else{for(A+=x,T+=x,u=u.slice(1).join("\n").trim(),s.has("global")?((x=s.get("global").clone()).startTime=A,x.endTime=T,x.payload=""):x=new yc(A,T,""),lt(p),A=nt(p);A;)Xz(x,A,i),lt(p),A=nt(p);Yz(u,x,s),null!=y&&(x.id=y),u=x}u&&o.push(u)}return o},L("shaka.text.VttTextParser",Uz),Uz.prototype.parseMedia=Uz.prototype.parseMedia,Uz.prototype.setManifestType=Uz.prototype.setManifestType,Uz.prototype.setSequenceMode=Uz.prototype.setSequenceMode,Uz.prototype.parseInit=Uz.prototype.parseInit;var rG=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function dA(){this.g=null}function gA(){}function hA(n){if(null==(n=mt(n,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var i=Number(n[2]),r=Number(n[3]);return 59<i||59<r?null:Number(n[4])/1e3+r+60*i+3600*(Number(n[1])||0)}function iA(){this.g=new Uz}function jA(n){var i="WEBVTT\n\n";if(""==n)return i;n=t((n=(n=n.replace(/\r+/g,"")).trim()).split("\n\n"));for(var r=n.next();!r.done;r=n.next())(r=r.value.split(/\n/))[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),i+=r.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return i}function kA(){}function qA(n){return 0<=(n=parseInt(n.replace("&H",""),16))?"rgba("+(255&n)+","+(n>>8&255)+","+(n>>16&255)+","+(n>>24&255^255)/255+")":null}function oA(n){return 3600*((n=rX.exec(n))[1]?parseInt(n[1].replace(":",""),10):0)+60*parseInt(n[2],10)+parseFloat(n[3])}eJ["text/vtt"]=function(){return new Uz},eJ['text/vtt; codecs="vtt"']=function(){return new Uz},eJ['text/vtt; codecs="wvtt"']=function(){return new Uz},dA.prototype.parseInit=function(n){var i=this,r=!1;if((new bg).box("moov",gg).box("trak",gg).box("mdia",gg).T("mdhd",function(n){n=fi(n.reader,n.version),i.g=n.timescale}).box("minf",gg).box("stbl",gg).T("stsd",ig).box("wvtt",function(){r=!0}).parse(n),!this.g||!r)throw new P(2,2,2008)},dA.prototype.setSequenceMode=function(){},dA.prototype.setManifestType=function(){},dA.prototype.parseMedia=function(n,i){if(!n.length)return[];if(!this.g)throw new P(2,2,2008);var r,o=0,s=[],u=[],p=!1,y=!1,A=!1,T=null;if((new bg).box("moof",gg).box("traf",gg).T("tfdt",function(n){p=!0,o=ei(n.reader,n.version).baseMediaDecodeTime}).T("tfhd",function(n){T=di(n.reader,n.flags).Og}).T("trun",function(n){y=!0,s=gi(n.reader,n.version,n.flags).lh}).box("mdat",kg(function(n){A=!0,r=n})).parse(n,!1),!A&&!p&&!y)throw new P(2,2,2008);n=o;for(var x=new Zf(r,0),C=t(s),I=C.next();!I.done;I=C.next()){var M=(I=I.value).gg||T,N=I.Ke?o+I.Ke:n;n=N+(M||0);var _=0;do{var j=x.O();_+=j;var B=x.O(),z=null;"vttc"==fg(B)?8<j&&(z=x.Sb(j-8)):x.skip(j-8),M&&z&&(j=function(n,i,r){var o,s,u;return(new bg).box("payl",kg(function(n){o=Tf(n)})).box("iden",kg(function(n){s=Tf(n)})).box("sttg",kg(function(n){u=Tf(n)})).parse(n),o?function(n,i,r,o,s){if(Yz(n,o=new yc(o,s,""),new Map),i&&(o.id=i),r)for(i=nt(n=new kt(r));i;)Xz(o,i,[]),lt(n),i=nt(n);return o}(o,s,u,i,r):null}(z,i.periodStart+N/this.g,i.periodStart+n/this.g),u.push(j))}while(I.sampleSize&&_<I.sampleSize)}return u.filter(zd)},L("shaka.text.Mp4VttParser",dA),dA.prototype.parseMedia=dA.prototype.parseMedia,dA.prototype.setManifestType=dA.prototype.setManifestType,dA.prototype.setSequenceMode=dA.prototype.setSequenceMode,dA.prototype.parseInit=dA.prototype.parseInit,eJ['application/mp4; codecs="wvtt"']=function(){return new dA},gA.prototype.parseInit=function(){},gA.prototype.setSequenceMode=function(){},gA.prototype.setManifestType=function(){},gA.prototype.parseMedia=function(n){var i=Tf(n).replace(/\r+/g,"");if(i=i.trim(),n=[],""==i)return n;i=t(i.split("\n\n"));for(var r=i.next();!r.done;r=i.next()){r=r.value.split("\n");var o=new kt(r[0]),s=hA(o),u=mt(o,/,/g);if(o=hA(o),null==s||null==u||null==o)throw new P(2,2,2001,"Could not parse cue time range in SubViewer");n.push(new yc(s,o,r.slice(1).join("\n").trim()))}return n},L("shaka.text.SbvTextParser",gA),gA.prototype.parseMedia=gA.prototype.parseMedia,gA.prototype.setManifestType=gA.prototype.setManifestType,gA.prototype.setSequenceMode=gA.prototype.setSequenceMode,gA.prototype.parseInit=gA.prototype.parseInit,eJ["text/x-subviewer"]=function(){return new gA},iA.prototype.parseInit=function(){},iA.prototype.setSequenceMode=function(){},iA.prototype.setManifestType=function(){},iA.prototype.parseMedia=function(n,i,r){return n=lc(Xf(n=jA(n=Tf(n)))),this.g.parseMedia(n,i,r)},L("shaka.text.SrtTextParser",iA),iA.srt2webvtt=jA,iA.prototype.parseMedia=iA.prototype.parseMedia,iA.prototype.setManifestType=iA.prototype.setManifestType,iA.prototype.setSequenceMode=iA.prototype.setSequenceMode,iA.prototype.parseInit=iA.prototype.parseInit,eJ["text/srt"]=function(){return new iA},kA.prototype.parseInit=function(){},kA.prototype.setSequenceMode=function(){},kA.prototype.setManifestType=function(){},kA.prototype.parseMedia=function(n){var i="",r="";n=t(n=Tf(n).split(/\r?\n\s*\r?\n/));for(var o=n.next();!o.done;o=n.next()){var s=rH.exec(o.value);s&&(o=s[1],s=s[2],"V4 Styles"==o||"V4+ Styles"==o?i=s:"Events"==o&&(r=s))}n=[],o=null,i=t(i.split(/\r?\n/));for(var u=i.next();!u.done;u=i.next())if(s=u.value,!/^\s*;/.test(s)&&(u=rq.exec(s))){if(s=u[1].trim(),u=u[2].trim(),"Format"==s)o=u.split(rW);else if("Style"==s){s=u.split(rW),u={};for(var p=0;p<o.length&&p<s.length;p++)u[o[p]]=s[p];n.push(u)}}for(o=[],i=null,s={},u=(r=t(r.split(/\r?\n/))).next();!u.done;s={Ze:s.Ze},u=r.next())if(u=u.value,!/^\s*;/.test(u)&&(p=rq.exec(u))){if(u=p[1].trim(),p=p[2].trim(),"Format"==u)i=p.split(rW);else if("Dialogue"==u){p=p.split(rW),u={};for(var y=0;y<i.length&&y<p.length;y++)u[i[y]]=p[y];y=oA(u.Start);var A=oA(u.End);p=new yc(y,A,p.slice(i.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),s.Ze=u.Style,(u=n.find(function(n){return function(i){return i.Name==n.Ze}}(s)))&&function(n,i){var r=i.Fontname;if(r&&(n.fontFamily=r),(r=i.Fontsize)&&(n.fontSize=r+"px"),(r=i.PrimaryColour)&&(r=qA(r))&&(n.color=r),(r=i.BackColour)&&(r=qA(r))&&(n.backgroundColor=r),i.Bold&&(n.fontWeight=700),i.Italic&&(n.fontStyle="italic"),i.Underline&&n.textDecoration.push("underline"),(r=i.Spacing)&&(n.letterSpacing=r+"px"),r=i.Alignment)switch(parseInt(r,10)){case 1:n.displayAlign=eM,n.textAlign="start";break;case 2:n.displayAlign=eM,n.textAlign=ek;break;case 3:n.displayAlign=eM,n.textAlign="end";break;case 5:n.displayAlign="before",n.textAlign="start";break;case 6:n.displayAlign="before",n.textAlign=ek;break;case 7:n.displayAlign="before",n.textAlign="end";break;case 9:n.displayAlign="center",n.textAlign="start";break;case 10:n.displayAlign="center",n.textAlign=ek;break;case 11:n.displayAlign="center",n.textAlign="end"}(i=i.AlphaLevel)&&(n.opacity=parseFloat(i))}(p,u),o.push(p)}}return o},L("shaka.text.SsaTextParser",kA),kA.prototype.parseMedia=kA.prototype.parseMedia,kA.prototype.setManifestType=kA.prototype.setManifestType,kA.prototype.setSequenceMode=kA.prototype.setSequenceMode,kA.prototype.parseInit=kA.prototype.parseInit;var rH=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,rq=/^\s*([^:]+):\s*(.*)/,rW=/\s*,\s*/,rX=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function sA(n,i){var r=1&n[i+1]?7:9;return i+r<=n.length&&0<(n=((3&n[i+3])<<11|n[i+4]<<3|(224&n[i+5])>>>5)-r)?{me:r,X:n}:null}function tA(n,i){var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(60&n[i+2])>>>2;if(o>r.length-1)return null;var s=((192&n[i+2])>>>6)+1,u=(1&n[i+2])<<2;return{sampleRate:r[o],channelCount:u|=(192&n[i+3])>>>6,wa:"mp4a.40."+s}}function wA(n){this.i=n,this.h=0,this.g=new Map}function xA(n,i){if(i+8>n.length||11!==n[i]||119!==n[i+1])return null;var r=n[i+4]>>6;if(3<=r)return null;var o=63&n[i+4],s=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+r];if(i+s>n.length)return null;var u=n[i+6]>>5,p=0;2===u?p+=2:(1&u&&1!==u&&(p+=2),4&u&&(p+=2)),p=(n[i+6]<<8|n[i+7])>>12-p&1;var y=7&n[i+5];return n=new Uint8Array([r<<6|n[i+5]>>3<<1|y>>2,(3&y)<<6|u<<3|p<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][r],channelCount:[2,1,2,3,3,4,4,5][u]+p,qa:n,X:s}}function zA(n){this.i=n,this.h=0,this.g=new Map}function AA(n,i){if(i+8>n.length||2935!=(n[i]<<8|n[i+1]<<0))return null;var r=new mi(n.subarray(i+2));oi(r,2),oi(r,3);var o=pi(r,11)+1<<1,s=pi(r,2);if(3==s){s=[24e3,22060,16e3][s=pi(r,2)];var u=3}else s=[48e3,44100,32e3][s],u=pi(r,2);var p=pi(r,3),y=pi(r,1);return(r=pi(r,5),i+o>n.byteLength)?null:(n=Math.floor(o*s/(16*[1,2,3,6][u])),n=new Uint8Array([(8160&n)>>5,(31&n)<<3,s<<6|r<<1|0,0|p<<1|y<<0,0]),{sampleRate:s,channelCount:[2,1,2,3,3,4,4,5][p]+y,qa:n,X:o})}function BA(n){this.i=n,this.h=0,this.g=new Map}eJ["text/x-ssa"]=function(){return new kA},(N=wA.prototype).destroy=function(){this.g.clear()},N.isSupported=function(n){return"audio/aac"==n.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",n))},N.convertCodecs=function(n,i){return"audio/aac"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(nd(i)||"mp4a.40.2")+'"':i},N.getOriginalMimeType=function(){return this.i},N.transmux=function(n,i,r,o){for(var s=lc(n),u=ci(s),p=u.length;p<s.length&&!function(n,i){if(i+1<n.length&&255===n[i]&&240==(246&n[i+1])){var r=1&n[i+1]?7:9;if(i+r>=n.length)return!1;var o=(3&n[i+3])<<11|n[i+4]<<3|(224&n[i+5])>>>5;return!(o<=r)&&((i+=o)===n.length||i+1<n.length&&255===n[i]&&240==(246&n[i+1]))}return!1}(s,p);p++);if(n=1e3*r.endTime,(u=bi(u)).length&&r&&(r=u.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(n=r.data),!(r=tA(s,p)))return Promise.reject(new P(2,3,3018));for(i.audioSamplingRate=r.sampleRate,i.channelsCount=r.channelCount,u=[];p<s.length;){var y=sA(s,p);if(!y)return Promise.reject(new P(2,3,3018));var A=y.me+y.X;p+A<=s.length&&u.push({data:s.subarray(p+y.me,p+A),size:y.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),p+=A}return n=Math.floor(n*(s=r.sampleRate)/1e3),o={id:i.id,type:"audio",codecs:r.wa,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:s,duration:o,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:n,fb:u},stream:i},n=new Nu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Tu(n),this.g.set(i.id,o)),i=jv(n),this.h++,Promise.resolve(i=tg(o,i))},L("shaka.transmuxer.AacTransmuxer",wA),wA.prototype.transmux=wA.prototype.transmux,wA.prototype.getOriginalMimeType=wA.prototype.getOriginalMimeType,wA.prototype.convertCodecs=wA.prototype.convertCodecs,wA.prototype.isSupported=wA.prototype.isSupported,wA.prototype.destroy=wA.prototype.destroy,Wc("audio/aac",function(){return new wA("audio/aac")},eW),(N=zA.prototype).destroy=function(){this.g.clear()},N.isSupported=function(n){return"audio/ac3"==n.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",n))},N.convertCodecs=function(n,i){return"audio/ac3"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':i},N.getOriginalMimeType=function(){return this.i},N.transmux=function(n,i,r,o){n=lc(n);for(var s=ci(n),u=s.length;u<n.length&&!function(n,i){if(11===n[i]&&119===n[i+1]){var r,o,s=0,u=5;for(i+=5;0<u;){o=n[i];var p=Math.min(u,8),y=8-p;r=(o&(r=4278190080>>>24+y<<y))>>y,s=s?s<<p|r:r,i+=1,u-=p}if(16>s)return!0}return!1}(n,u);u++);var p=1e3*r.endTime;(s=bi(s)).length&&r&&(r=s.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(p=r.data),r=0,s=new Uint8Array([]);for(var y=[];u<n.length;){var A=xA(n,u);if(!A)return Promise.reject(new P(2,3,3018));i.audioSamplingRate=A.sampleRate,i.channelsCount=A.channelCount,r=A.sampleRate,s=A.qa,y.push({data:n.subarray(u,u+A.X),size:A.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=A.X}return n=Math.floor(p*r/1e3),o={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:r,duration:o,ib:[],qa:s,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:n,fb:y},stream:i},n=new Nu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Tu(n),this.g.set(i.id,o)),i=jv(n),this.h++,Promise.resolve(i=tg(o,i))},L("shaka.transmuxer.Ac3Transmuxer",zA),zA.prototype.transmux=zA.prototype.transmux,zA.prototype.getOriginalMimeType=zA.prototype.getOriginalMimeType,zA.prototype.convertCodecs=zA.prototype.convertCodecs,zA.prototype.isSupported=zA.prototype.isSupported,zA.prototype.destroy=zA.prototype.destroy,Wc("audio/ac3",function(){return new zA("audio/ac3")},eW),(N=BA.prototype).destroy=function(){this.g.clear()},N.isSupported=function(n){return"audio/ec3"==n.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",n))},N.convertCodecs=function(n,i){return"audio/ec3"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':i},N.getOriginalMimeType=function(){return this.i},N.transmux=function(n,i,r,o){n=lc(n);for(var s=ci(n),u=s.length;u<n.length&&2935!=(n[u]<<8|n[u+1]<<0);u++);var p=1e3*r.endTime;(s=bi(s)).length&&r&&(r=s.find(function(n){return"com.apple.streaming.transportStreamTimestamp"===n.description}))&&(p=r.data),r=0,s=new Uint8Array([]);for(var y=[];u<n.length;){var A=AA(n,u);if(!A)return Promise.reject(new P(2,3,3018));i.audioSamplingRate=A.sampleRate,i.channelsCount=A.channelCount,r=A.sampleRate,s=A.qa,y.push({data:n.subarray(u,u+A.X),size:A.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=A.X}return n=Math.floor(p*r/1e3),o={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:r,duration:o,ib:[],qa:s,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:n,fb:y},stream:i},n=new Nu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Tu(n),this.g.set(i.id,o)),i=jv(n),this.h++,Promise.resolve(i=tg(o,i))},L("shaka.transmuxer.Ec3Transmuxer",BA),BA.prototype.transmux=BA.prototype.transmux,BA.prototype.getOriginalMimeType=BA.prototype.getOriginalMimeType,BA.prototype.convertCodecs=BA.prototype.convertCodecs,BA.prototype.isSupported=BA.prototype.isSupported,BA.prototype.destroy=BA.prototype.destroy,Wc("audio/ec3",function(){return new BA("audio/ec3")},eW);var rY=[100,110,122,244,44,83,86,118,128,138,139,134];function KA(n,i){var r=n[i+1]>>3&3,o=n[i+1]>>1&3,s=n[i+2]>>4&15,u=n[i+2]>>2&3;if(1!==r&&0!==s&&15!==s&&3!==u){var p=n[i+3]>>6;s=1e3*rZ[14*(3===r?3-o:3===o?3:4)+s-1],u=rQ[3*(3===r?0:2===r?1:2)+u],r=rJ[r][o];var y=r$[o],A=Math.floor(r*s/u+(n[i+2]>>1&1))*y,T=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(T=T?parseInt(T[1],10):0)&&87>=T&&2===o&&224e3<=s&&0===p&&(n[i+3]|=128),{sampleRate:u,channelCount:3===p?1:2,X:A,kj:8*r*y}}return null}function PA(n,i){return 255===n[i]&&224==(224&n[i+1])&&0!=(6&n[i+1])}var rZ=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],rQ=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rJ=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],r$=[0,1,1,4];function QA(n){this.i=n,this.h=0,this.g=new Map}function RA(n){this.h=n,this.g=null}function SA(n){this.h=n,(this.g=iO.get("ISOBoxer")())&&function(n){function b(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(n){this._procEntryField(n,"BytesOfClearData","uint",16),this._procEntryField(n,"BytesOfEncryptedData","uint",32)}))})}n.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),n.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),n.g.addBoxProcessor("senc",b),n.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==r0[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),b.call(this))})}(this)}function VA(n,i){for(var r=8,o=0;o<n.boxes.length&&n.boxes[o].type!==i;o++)r+=n.boxes[o].size;return r}(N=QA.prototype).destroy=function(){this.g.clear()},N.isSupported=function(n){return"audio/mpeg"==n.toLowerCase().split(";")[0]&&ac(this.convertCodecs("audio",n))},N.convertCodecs=function(n,i){return"audio/mpeg"==i.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':i},N.getOriginalMimeType=function(){return this.i},N.transmux=function(n,i,r,o){for(r=ci(n=lc(n)).length;r<n.length;r++){var s,u=r;if(u+1<n.length&&PA(n,u)){var p=KA(n,u),y=4;p&&p.X&&(y=p.X),u+=y,u=u===n.length||u+1<n.length&&PA(n,u)}else u=!1;if(u)break}for(u=[];r<n.length;){if(!(p=KA(n,r)))return Promise.reject(new P(2,3,3018));s||(s=p),r+p.X<=n.length&&u.push({data:n.subarray(r,r+p.X),size:p.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),r+=p.X}return s?(n=9e4*s.kj/s.sampleRate*this.h,o={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:s.sampleRate,duration:o,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:n,fb:u},stream:i},s=new Nu([o]),this.g.has(i.id)?o=this.g.get(i.id):(o=Tu(s),this.g.set(i.id,o)),i=jv(s),this.h++,Promise.resolve(i=tg(o,i))):Promise.reject(new P(2,3,3018))},L("shaka.transmuxer.Mp3Transmuxer",QA),QA.prototype.transmux=QA.prototype.transmux,QA.prototype.getOriginalMimeType=QA.prototype.getOriginalMimeType,QA.prototype.convertCodecs=QA.prototype.convertCodecs,QA.prototype.isSupported=QA.prototype.isSupported,QA.prototype.destroy=QA.prototype.destroy,Wc("audio/mpeg",function(){return new QA("audio/mpeg")},eW),(N=RA.prototype).destroy=function(){},N.isSupported=function(n){if("video/mp2t"!=n.toLowerCase().split(";")[0])return!1;var i=nd(n).split(","),r=Cb("audio",i);return i=Cb("video",i),!!r&&!i&&"mp3"==hd(r)&&ac(this.convertCodecs("audio",n))},N.convertCodecs=function(n,i){return"video/mp2t"==i.toLowerCase().split(";")[0]?"audio/mpeg":i},N.getOriginalMimeType=function(){return this.h},N.transmux=function(n,i,r,o,s){if(this.g?this.g.clearData():this.g=new wi,n=lc(n),"mp3"!=(n=this.g.parse(n)).sd().audio||"audio"!=s)return Promise.reject(new P(2,3,3018));for(s=new Uint8Array([]),i=(n=t(n.qc())).next();!i.done;i=n.next())if(i=i.value.data)for(r=0;r<i.length;)(o=KA(i,r))?(r+o.X<=i.length&&(s=tg(s,i.subarray(r,r+o.X))),r+=o.X):r++;return Promise.resolve(s)},L("shaka.transmuxer.MpegTsTransmuxer",RA),RA.prototype.transmux=RA.prototype.transmux,RA.prototype.getOriginalMimeType=RA.prototype.getOriginalMimeType,RA.prototype.convertCodecs=RA.prototype.convertCodecs,RA.prototype.isSupported=RA.prototype.isSupported,RA.prototype.destroy=RA.prototype.destroy,Wc("video/mp2t",function(){return new RA("video/mp2t")},eX),(N=SA.prototype).destroy=function(){},N.isSupported=function(n,i){var r=n.startsWith("mss/");return!!this.g&&!!r&&(i?ac(this.convertCodecs(i,n)):(i=this.convertCodecs("audio",n),n=this.convertCodecs("video",n),ac(i)||ac(n)))},N.convertCodecs=function(n,i){return i.replace("mss/","")},N.getOriginalMimeType=function(){return this.h},N.transmux=function(n,i,r){if(!r)return Promise.resolve(lc(n));if(!i.mssPrivateData)return Promise.reject(new P(2,3,3020));try{var o,s=this.g.parseBuffer(n),u=s.fetch("tfhd");u.track_ID=i.id+1;var p=s.fetch("tfdt"),y=s.fetch("traf");null===p&&((p=this.g.createFullBox("tfdt",y,u)).version=1,p.flags=0,p.baseMediaDecodeTime=Math.floor(r.startTime*i.mssPrivateData.timescale));var A=s.fetch("trun"),T=s.fetch("tfxd");T&&T._parent.boxes.splice(T._parent.boxes.indexOf(T),1);var x=s.fetch("tfrf");x&&x._parent.boxes.splice(x._parent.boxes.indexOf(x),1);var C=s.fetch("sepiff");if(null!==C){C.type="senc",C.usertype=void 0;var I=s.fetch("saio");if(null===I){(I=this.g.createFullBox("saio",y)).version=0,I.flags=0,I.entry_count=1,I.offset=[0];var M=this.g.createFullBox("saiz",y);if(M.version=0,M.flags=0,M.sample_count=C.sample_count,M.default_sample_info_size=0,M.sample_info_size=[],2&C.flags)for(o=0;o<C.sample_count;o+=1)M.sample_info_size[o]=10+6*C.entry[o].NumberOfEntries;else M.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,A.flags|=1;var N=s.fetch("moof");A.data_offset=N.getLength()+8;var _=s.fetch("saio");null!==_&&(_.offset[0]=VA(N,"traf")+VA(y,"senc")+16);var j=lc(s.write());return Promise.resolve(j)}catch(n){return n instanceof P?Promise.reject(n):Promise.reject(new P(2,3,3022))}},L("shaka.transmuxer.MssTransmuxer",SA),SA.prototype.transmux=SA.prototype.transmux,SA.prototype.getOriginalMimeType=SA.prototype.getOriginalMimeType,SA.prototype.convertCodecs=SA.prototype.convertCodecs,SA.prototype.isSupported=SA.prototype.isSupported,SA.prototype.destroy=SA.prototype.destroy;var r0=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function WA(n){this.j=n,this.g=0,this.h=new Map,this.i=null}Wc("mss/audio/mp4",function(){return new SA("mss/audio/mp4")},eW),Wc("mss/video/mp4",function(){return new SA("mss/video/mp4")},eW),(N=WA.prototype).destroy=function(){this.h.clear()},N.isSupported=function(n,i){if("video/mp2t"!=n.toLowerCase().split(";")[0])return!1;var r=n;i&&(r=this.convertCodecs(i,n));var o=nd(r).split(",");return r=Cb("audio",o),o=Cb("video",o),(!r||!!r1.includes(r=hd(r)))&&(!o||!!r2.includes(r=hd(o)))&&(i?ac(this.convertCodecs(i,n)):(i=this.convertCodecs("audio",n),n=this.convertCodecs("video",n),ac(i)||ac(n)))},N.convertCodecs=function(n,i){return"video/mp2t"==i.toLowerCase().split(";")[0]?(i=nd(i).replace("mp4a.40.34","mp3").split(",").map(this.ai).join(","),"audio"==n?'audio/mp4; codecs="'+i+'"':'video/mp4; codecs="'+i+'"'):i},N.ai=function(n){if(n.includes("avc1")){var i=n.split(".");if(3==i.length)return n=i.shift()+"."+parseInt(i.shift(),10).toString(16)+("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}return n},N.getOriginalMimeType=function(){return this.j},N.transmux=function(n,i,r,o,s){this.i?this.i.clearData():this.i=new wi,n=lc(n);var u=this.i.parse(n);n=[];var p=u.sd();try{var y=null;if("video"==s){switch(p.video){case"avc":var A=[],T=null,x=[],C=u.Oc();if(!C.length)throw new P(2,3,3023);for(var I=0;I<C.length;I++){var M=C[I],N=M.nalus;x.push.apply(x,w(N));var _=function(n){var i=!1,r=[],o=n.find(function(n){return 7==n.type}),s=!1;n=t(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var p=!1;switch(u.type){case 1:p=s=!0;var y,A=u.data;o&&4<A.length&&(ti(y=new mi(A)),R(y),2===(A=R(y))||4===A||7===A||9===A)&&(i=!0);break;case 5:i=p=s=!0;break;case 6:case 7:case 8:case 12:p=!0;break;case 9:s=p=!0;break;default:p=!1}s&&p&&(p=u.fullData.byteLength,(A=new Uint8Array(4))[0]=p>>24&255,A[1]=p>>16&255,A[2]=p>>8&255,A[3]=255&p,r.push(tg(A,u.fullData)))}return r.length?{data:tg.apply(lg,w(r)),Bd:i}:null}(N);if(_){null==T&&(T=M.dts);var j=void 0;j=I+1<C.length?(C[I+1].dts||0)-(M.dts||0):1<C.length?(M.dts||0)-(C[I-1].dts||0):9e4*(r.endTime-r.startTime),A.push({data:_.data,size:_.data.byteLength,duration:j,kb:Math.round((M.pts||0)-(M.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:_.Bd?2:1,pb:_.Bd?0:1}})}}var B=function(n){if(!n.length)return null;var i=n.find(function(n){return 7==n.type});if(n=n.find(function(n){return 8==n.type}),!i||!n)return null;var r=new mi(i.data),o=ti(r);if(ti(r),ti(r),ri(r),rY.includes(o)&&(3===(o=R(r))&&oi(r,1),ri(r),ri(r),oi(r,1),S(r))){o=3!==o?8:12;for(var s=0;s<o;s++)S(r)&&(6>s?ui(r,16):ui(r,64))}if(ri(r),0===(o=R(r)))R(r);else if(1===o)for(oi(r,1),ri(r),ri(r),o=R(r),s=0;s<o;s++)ri(r);ri(r),oi(r,1);var u=R(r),p=R(r),y=pi(r,1);0===y&&oi(r,1),oi(r,1);var A=0,T=0,x=0,C=0;if(S(r)&&(A=R(r),T=R(r),x=R(r),C=R(r)),s=o=1,S(r)&&S(r)){var I=ti(r);0<I&&16>I?(o=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][I-1],s=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][I-1]):255===I&&(o=pi(r,16),s=pi(r,16))}return r=(2-y)*(p+1)*16-2*x-2*C,u=16*(u+1)-2*A-2*T,A=[],i=i.fullData,A.push(i.byteLength>>>8&255),A.push(255&i.byteLength),A=A.concat.apply(A,w(i)),i=[],n=n.fullData,i.push(n.byteLength>>>8&255),i.push(255&n.byteLength),i=i.concat.apply(i,w(n)),{height:r,width:u,Ca:n=new Uint8Array([1,A[3],A[4],A[5],255,225].concat(A,[1],i)),Ja:o,La:s}}(x);if(!B||null==T)throw new P(2,3,3018);i.height=B.height,i.width=B.width,y={id:i.id,type:"video",codecs:"avc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:o,ib:[],qa:new Uint8Array([]),Ca:B.Ca,Ja:B.Ja,La:B.La,data:{Cb:this.g,baseMediaDecodeTime:T,fb:A},stream:i};break;case"hvc":if(C=[],M=null,N=[],!(A=u.Oc()).length)throw new P(2,3,3023);for(_=0;_<A.length;_++){x=(T=A[_]).nalus,N.push.apply(N,w(x)),B=!1;var z=[],G=!1;for(j=(I=t(x)).next();!j.done;j=I.next()){var H=j.value;switch(H.type){case 1:case 0:var q=G=!0;break;case 19:case 20:case 21:B=q=G=!0;break;case 32:case 33:case 34:case 39:case 40:q=!0;break;case 35:G=q=!0;break;default:q=!1}if(G&&q){var Y=H.fullData.byteLength,Q=new Uint8Array(4);Q[0]=Y>>24&255,Q[1]=Y>>16&255,Q[2]=Y>>8&255,Q[3]=255&Y,z.push(tg(Q,H.fullData))}}var J=z.length?{data:tg.apply(lg,w(z)),Bd:B}:null;J&&(null==M&&null!=T.dts&&(M=T.dts),B=void 0,B=_+1<A.length?(A[_+1].dts||0)-(T.dts||0):1<A.length?(T.dts||0)-(A[_-1].dts||0):9e4*(r.endTime-r.startTime),C.push({data:J.data,size:J.data.byteLength,duration:B,kb:Math.round((T.pts||0)-(T.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:J.Bd?2:1,pb:J.Bd?0:1}}))}var $=function(n){if(!n.length)return null;var i,r,o,s,u,p,y,A,T,x,C=n.find(function(n){return 32==n.type}),I=n.find(function(n){return 33==n.type}),M=n.find(function(n){return 34==n.type});if(!C||!I||!M)return null;var N=(i=C.fullData,r=new mi(i,!0),ti(r),ti(r),pi(r,4),pi(r,2),pi(r,6),{Xf:(i=pi(r,3))+1,ug:r=S(r)});n=function(n){ti(n=new mi(n,!0)),ti(n);var i=0,r=0,o=0,s=0;pi(n,4);var u=pi(n,3);S(n);for(var p=pi(n,2),y=pi(n,1),A=pi(n,5),T=ti(n),x=ti(n),C=ti(n),I=ti(n),M=ti(n),N=ti(n),_=ti(n),j=ti(n),B=ti(n),z=ti(n),G=ti(n),H=[],q=[],Y=0;Y<u;Y++)H.push(S(n)),q.push(S(n));if(0<u)for(Y=u;8>Y;Y++)pi(n,2);for(Y=0;Y<u;Y++)H[Y]&&pi(n,88),q[Y]&&ti(n);R(n),3==(H=R(n))&&pi(n,1),q=R(n),Y=R(n),S(n)&&(i+=R(n),r+=R(n),o+=R(n),s+=R(n));var Q=R(n),J=R(n),$=R(n);if(S(n))for(var ea=0;ea<=u;ea++)R(n),R(n),R(n);else R(n),R(n),R(n);if(R(n),R(n),R(n),R(n),R(n),R(n),S(n)&&S(n))for(ea=0;4>ea;ea++)for(var es=0;es<(3===ea?2:6);es++)if(S(n)){var ec=Math.min(64,1<<4+(ea<<1));1<ea&&si(n);for(var ed=0;ed<ec;ed++)si(n)}else R(n);for(S(n),S(n),S(n)&&(ti(n),R(n),R(n),S(n)),ea=R(n),ec=es=0;ec<ea;ec++)if(ed=!1,0!==ec&&(ed=S(n)),ed){ec===ea&&R(n),S(n),R(n);for(var eh=ed=0;eh<=es;eh++){var ep=S(n),eg=!1;ep||(eg=S(n)),(ep||eg)&&ed++}es=ed}else{for(ep=0,es=(eh=R(n))+(ed=R(n));ep<eh;ep++)R(n),S(n);for(eh=0;eh<ed;eh++)R(n),S(n)}if(S(n))for(ea=R(n),es=0;es<ea;es++){for(ec=0;ec<$+4;ec++)pi(n,1);pi(n,1)}if(ea=$=1,es=0,S(n),S(n),S(n)){if(S(n)&&(ec=ti(n),ed=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],eh=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<ec&&16>ec?($=ed[ec-1],ea=eh[ec-1]):255===ec&&($=pi(n,16),ea=pi(n,16))),S(n)&&S(n),S(n)&&(pi(n,3),S(n),S(n)&&(ti(n),ti(n),ti(n))),S(n)&&(R(n),R(n)),S(n),S(n),S(n),(ec=S(n))&&(R(n),R(n),R(n),R(n)),S(n)&&(pi(n,32),pi(n,32),S(n)&&R(n),S(n)))for(eh=!1,ec=S(n),ed=S(n),(ec||ed)&&((eh=S(n))&&(ti(n),pi(n,5),S(n),pi(n,5)),pi(n,4),pi(n,4),eh&&pi(n,4),pi(n,5),pi(n,5),pi(n,5)),ep=0;ep<=u;ep++){var em=!0;eg=1,S(n)||(em=S(n));var ev=!1;if(em?R(n):ev=S(n),ev||(eg=R(n)+1),ec||ed){for(em=0;em<eg;em++)R(n),R(n),eh&&(R(n),R(n));S(n)}}S(n)&&(S(n),S(n),S(n),es=R(n),R(n),R(n),R(n),R(n))}return{xf:G,Df:p,Ef:y,Cf:A,yf:T,zf:x,Af:C,Bf:I,qf:M,rf:N,tf:_,uf:j,vf:B,wf:z,Ae:es,mf:0,lf:H,jf:Q,hf:J,width:q-(i+r)*(1===H||2===H?2:1),height:Y-(o+s)*(1===H?2:1),mj:$,lj:ea}}(I.fullData);var _=(o=M.fullData,s=new mi(o,!0),ti(s),ti(s),R(s),R(s),S(s),S(s),pi(s,3),S(s),S(s),R(s),R(s),si(s),S(s),S(s),S(s)&&R(s),si(s),si(s),S(s),S(s),S(s),S(s),o=S(s),s=S(s),u=1,s&&o?u=0:s?u=3:o&&(u=2),{$f:u});return p=C.fullData,y=I.fullData,A=M.fullData,T={Xf:N.Xf,ug:N.ug,Df:n.Df,Ef:n.Ef,xf:n.xf,Cf:n.Cf,yf:n.yf,zf:n.zf,Af:n.Af,Bf:n.Bf,qf:n.qf,rf:n.rf,tf:n.tf,uf:n.uf,vf:n.vf,wf:n.wf,mf:n.mf,Ae:n.Ae,lf:n.lf,jf:n.jf,hf:n.hf,$f:_.$f},(x=new Uint8Array(23+(5+p.byteLength)+(5+y.byteLength)+(5+A.byteLength)))[0]=1,x[1]=(3&T.Df)<<6|(T.Ef?1:0)<<5|31&T.Cf,x[2]=T.yf,x[3]=T.zf,x[4]=T.Af,x[5]=T.Bf,x[6]=T.qf,x[7]=T.rf,x[8]=T.tf,x[9]=T.uf,x[10]=T.vf,x[11]=T.wf,x[12]=T.xf,x[13]=240|(3840&T.Ae)>>8,x[14]=255&T.Ae,x[15]=252|3&T.$f,x[16]=252|3&T.lf,x[17]=248|7&T.jf,x[18]=248|7&T.hf,x[19]=0,x[20]=0,x[21]=(3&T.mf)<<6|(7&T.Xf)<<3|(T.ug?1:0)<<2|3,x[22]=3,x[23]=160,x[24]=0,x[25]=1,x[26]=(65280&p.byteLength)>>8,x[27]=(255&p.byteLength)>>0,x.set(p,28),x[23+(5+p.byteLength)]=161,x[p.byteLength+29]=0,x[p.byteLength+30]=1,x[p.byteLength+31]=(65280&y.byteLength)>>8,x[p.byteLength+32]=(255&y.byteLength)>>0,x.set(y,p.byteLength+33),x[23+(p.byteLength+10+y.byteLength)]=162,x[p.byteLength+10+y.byteLength+24]=0,x[p.byteLength+10+y.byteLength+25]=1,x[p.byteLength+10+y.byteLength+26]=(65280&A.byteLength)>>8,x[p.byteLength+10+y.byteLength+27]=(255&A.byteLength)>>0,x.set(A,p.byteLength+10+y.byteLength+28),C=x,{height:n.height,width:n.width,Ca:C,Ja:n.mj,La:n.lj}}(N);if(!$||null==M)throw new P(2,3,3018);i.height=$.height,i.width=$.width,y={id:i.id,type:"video",codecs:"hvc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:o,ib:[],qa:new Uint8Array([]),Ca:$.Ca,Ja:$.Ja,La:$.La,data:{Cb:this.g,baseMediaDecodeTime:M,fb:C},stream:i}}y&&(n.push(y),y=null)}if("audio"==s){switch(p.audio){case"aac":for(var ea,es=[],ec=null,ed=t(u.qc()),eh=ed.next();!eh.done;eh=ed.next()){var ep=eh.value,eg=ep.data;if(eg){var em=0;if(!(ea=tA(eg,em)))throw new P(2,3,3018);for(i.audioSamplingRate=ea.sampleRate,i.channelsCount=ea.channelCount,null==ec&&null!==ep.pts&&(ec=ep.pts);em<eg.length;){var ev=sA(eg,em);if(ev){var eb=ev.me+ev.X;em+eb<=eg.length&&es.push({data:eg.subarray(em+ev.me,em+eb),size:ev.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),em+=eb}else em++}}}if(!ea||null==ec){if(!u.Oc().length)throw new P(2,3,3018);ec=9e4*r.startTime;var eA=Cb("audio",i.codecs.split(","));if(!eA||!i.channelsCount||!i.audioSamplingRate)throw new P(2,3,3018);ea={sampleRate:i.audioSamplingRate,channelCount:i.channelsCount,wa:eA};var eT=function(n,i){if("mp4a.40.2"===n){if(1===i)return new Uint8Array([0,200,0,128,35,128]);if(2===i)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===i)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===i)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===i||3===i)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(eA,i.channelsCount);if(!eT)throw new P(2,3,3018);var eS=ec+9e4*(r.endTime-r.startTime);for(u=ec;u<eS;)es.push({data:eT,size:eT.byteLength,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=1024/ea.sampleRate*9e4}var ek=ea.sampleRate;u=ec/9e4*ek,y={id:i.id,type:"audio",codecs:ea.wa,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:ek,duration:o,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:u,fb:es},stream:i};break;case"ac3":ea=[],ek=0,es=new Uint8Array([]),ec=null,em=t(u.qc());for(var eI=em.next();!eI.done;eI=em.next()){var eM=eI.value,eL=eM.data;for(null==ec&&null!==eM.pts&&(ec=eM.pts),u=0;u<eL.length;){var eP=xA(eL,u);eP?(i.audioSamplingRate=eP.sampleRate,i.channelsCount=eP.channelCount,ek=eP.sampleRate,es=eP.qa,ea.push({data:eL.subarray(u,u+eP.X),size:eP.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=eP.X):u++}}if(0==ek||0==es.byteLength||null==ec)throw new P(2,3,3018);u=ec/9e4*ek,y={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:ek,duration:o,ib:[],qa:es,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:u,fb:ea},stream:i};break;case"ec3":ea=[],ek=0,ec=new Uint8Array([]),es=null;for(var eR=t(u.qc()),eN=eR.next();!eN.done;eN=eR.next()){var eU=eN.value,eO=eU.data;for(null==es&&null!==eU.pts&&(es=eU.pts),u=0;u<eO.length;){var e_=AA(eO,u);e_?(i.audioSamplingRate=e_.sampleRate,i.channelsCount=e_.channelCount,ek=e_.sampleRate,ec=e_.qa,ea.push({data:eO.subarray(u,u+e_.X),size:e_.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=e_.X):u++}}if(0==ek||0==ec.byteLength||null==es)throw new P(2,3,3018);u=es/9e4*ek,y={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:ek,duration:o,ib:[],qa:ec,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:u,fb:ea},stream:i};break;case"mp3":ea=[],ek=null;for(var ej,eF=t(u.qc()),eV=eF.next();!eV.done;eV=eF.next()){var eK=eV.value,eG=eK.data;if(eG)for(null==ek&&null!==eK.pts&&(ek=eK.pts),u=0;u<eG.length;){var eH=KA(eG,u);eH?(ej||(ej=eH),u+eH.X<=eG.length&&ea.push({data:eG.subarray(u,u+eH.X),size:eH.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),u+=eH.X):u++}}if(!ej||null==ek)throw new P(2,3,3018);var eq=ej.sampleRate;u=ek/9e4*eq,y={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:eq,duration:o,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:u,fb:ea},stream:i}}y&&n.push(y)}}catch(n){return n&&3023==n.code?Promise.resolve(new Uint8Array([])):Promise.reject(n)}return n.length?(n=new Nu(n),this.h.has(i.id)?o=this.h.get(i.id):(o=Tu(n),this.h.set(i.id,o)),i=jv(n),this.g++,Promise.resolve(i=tg(o,i))):Promise.reject(new P(2,3,3018))},L("shaka.transmuxer.TsTransmuxer",WA),WA.prototype.transmux=WA.prototype.transmux,WA.prototype.getOriginalMimeType=WA.prototype.getOriginalMimeType,WA.prototype.convertCodecs=WA.prototype.convertCodecs,WA.prototype.isSupported=WA.prototype.isSupported,WA.prototype.destroy=WA.prototype.destroy;var r1=["aac","ac-3","ec-3","mp3"],r2=["avc","hevc"];function ZA(){}function aB(){x?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(x=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=bB):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function bB(n,i){var r,o=this;return K(function(s){return 1==s.g?(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),D(s,x.call(o,n,i),2)):cB(r=s.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=x,s.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=dB,s.return(dB.call(o,n,i)))})}function dB(n,i){var r,o,s,u,p,y,A,T,C,I,M=this;return K(function(N){if(1==N.g){for(console.assert(M==navigator,'bad "this" for requestMediaKeySystemAccess'),r=eB(n),o=[],u=(s=t(i)).next();!u.done;u=s.next())y=fB((p=u.value).videoCapabilities,r),A=fB(p.audioCapabilities,r),p.videoCapabilities&&p.videoCapabilities.length&&!y.length||p.audioCapabilities&&p.audioCapabilities.length&&!A.length||((T=Object.assign({},p)).videoCapabilities=y,T.audioCapabilities=A,o.push(T));if(!o.length)throw(C=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",C.code=DOMException.NOT_SUPPORTED_ERR,C;return D(N,x.call(M,n,o),2)}return I=N.h,N.return(new gB(I,r))})}function fB(n,i){return n?n.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==i}):n}function hB(){}function jB(){C?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(C=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=kB):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function kB(n){var i,r,o,s=this;return K(function(u){switch(u.g){case 1:return console.assert(s==navigator.mediaCapabilities,'bad "this" for decodingInfo'),D(u,C.call(s,n),2);case 2:if(i=u.h,!n.keySystemConfiguration)return u.return(i);if((r=i.keySystemAccess)&&cB(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=C,u.return(i);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=lB,r){u.F(3);break}return o=i,D(u,mB(n),4);case 4:return o.keySystemAccess=u.h,u.return(i);case 3:return u.return(lB.call(s,n))}})}function lB(n){var i,r,o,s,u,p,y,A,T=this;return K(function(x){switch(x.g){case 1:return console.assert(T==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=null,n.keySystemConfiguration&&(o=(r=n.keySystemConfiguration).keySystem,s=r.audio&&r.audio.encryptionScheme,u=r.video&&r.video.encryptionScheme,i=eB(o),p={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:n},s&&s!=i||u&&u!=i)?x.return(p):D(x,C.call(T,n),2);case 2:if((y=x.h).keySystemAccess){y.keySystemAccess=new gB(y.keySystemAccess,i),x.F(3);break}if(!n.keySystemConfiguration){x.F(3);break}return A=y,D(x,mB(n),5);case 5:A.keySystemAccess=x.h;case 3:return x.return(y)}})}function mB(n){var i,r;return K(function(o){if(1==o.g){var s=n.keySystemConfiguration,u=[],p=[];return s.audio&&u.push({robustness:s.audio.robustness||"",contentType:n.audio.contentType}),s.video&&p.push({robustness:s.video.robustness||"",contentType:n.video.contentType}),s={initDataTypes:s.initDataType?[s.initDataType]:[],distinctiveIdentifier:s.distinctiveIdentifier,persistentState:s.persistentState,sessionTypes:s.sessionTypes},u.length&&(s.audioCapabilities=u),p.length&&(s.videoCapabilities=p),i=s,D(o,navigator.requestMediaKeySystemAccess(n.keySystemConfiguration.keySystem,[i]),2)}return r=o.h,o.return(r)})}function gB(n,i){this.h=n,this.g=i,this.keySystem=n.keySystem}function eB(n){return n.startsWith("com.widevine")||n.startsWith("com.microsoft")||n.startsWith("com.chromecast")||n.startsWith("com.adobe")||n.startsWith("org.w3")?"cenc":n.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",n,"Please contribute!"),null)}function cB(n){var i=(n=n.getConfiguration()).audioCapabilities&&n.audioCapabilities[0];return!!(n=n.videoCapabilities&&n.videoCapabilities[0]||i)&&void 0!==n.encryptionScheme}function nB(){}function Kx(){aB(),jB()}Wc("video/mp2t",function(){return new WA("video/mp2t")},eY),L("EmeEncryptionSchemePolyfill",ZA),ZA.install=aB,L("McEncryptionSchemePolyfill",hB),hB.install=jB,gB.prototype.getConfiguration=function(){var n=this.h.getConfiguration();if(n.videoCapabilities)for(var i=t(n.videoCapabilities),r=i.next();!r.done;r=i.next())r.value.encryptionScheme=this.g;if(n.audioCapabilities)for(r=(i=t(n.audioCapabilities)).next();!r.done;r=i.next())r.value.encryptionScheme=this.g;return n},gB.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},L("EncryptionSchemePolyfills",nB),nB.install=Kx,void 0!==r&&r.exports&&(r.exports=nB);for(var r3={ach:{A:"Lwo",B:"Acholi"},ady:{A:"",B:"Adyghe"},af:{A:"Afrikaans",B:"Afrikaans"},"af-NA":{A:"Afrikaans (Namibia)",B:"Afrikaans (Namibia)"},"af-ZA":{A:"Afrikaans (South Africa)",B:"Afrikaans (South Africa)"},ak:{A:"Ti",B:"Akan"},ar:{A:"",B:"Arabic"},"ar-AR":{A:"",B:"Arabic"},"ar-MA":{A:"",B:"Arabic (Morocco)"},"ar-SA":{A:" ()",B:"Arabic (Saudi Arabia)"},"ay-BO":{A:"Aymar aru",B:"Aymara"},az:{A:"Azrbaycan dili",B:"Azerbaijani"},"az-AZ":{A:"Azrbaycan dili",B:"Azerbaijani"},"be-BY":{A:"",B:"Belarusian"},bg:{A:"",B:"Bulgarian"},"bg-BG":{A:"",B:"Bulgarian"},bn:{A:"",B:"Bengali"},"bn-IN":{A:" ()",B:"Bengali (India)"},"bn-BD":{A:"()",B:"Bengali (Bangladesh)"},"bs-BA":{A:"Bosanski",B:"Bosnian"},ca:{A:"Catal\xe0",B:"Catalan"},"ca-ES":{A:"Catal\xe0",B:"Catalan"},cak:{A:"Maya Kaqchikel",B:"Kaqchikel"},"ck-US":{A:" (tsalagi)",B:"Cherokee"},cs:{A:"etina",B:"Czech"},"cs-CZ":{A:"etina",B:"Czech"},cy:{A:"Cymraeg",B:"Welsh"},"cy-GB":{A:"Cymraeg",B:"Welsh"},da:{A:"Dansk",B:"Danish"},"da-DK":{A:"Dansk",B:"Danish"},de:{A:"Deutsch",B:"German"},"de-AT":{A:"Deutsch (\xd6sterreich)",B:"German (Austria)"},"de-DE":{A:"Deutsch (Deutschland)",B:"German (Germany)"},"de-CH":{A:"Deutsch (Schweiz)",B:"German (Switzerland)"},dsb:{A:"Dolnoserbina",B:"Lower Sorbian"},el:{A:"",B:"Greek"},"el-GR":{A:"",B:"Greek (Greece)"},en:{A:"English",B:"English"},"en-GB":{A:"English (UK)",B:"English (UK)"},"en-AU":{A:"English (Australia)",B:"English (Australia)"},"en-CA":{A:"English (Canada)",B:"English (Canada)"},"en-IE":{A:"English (Ireland)",B:"English (Ireland)"},"en-IN":{A:"English (India)",B:"English (India)"},"en-PI":{A:"English (Pirate)",B:"English (Pirate)"},"en-UD":{A:"English (Upside Down)",B:"English (Upside Down)"},"en-US":{A:"English (US)",B:"English (US)"},"en-ZA":{A:"English (South Africa)",B:"English (South Africa)"},"en@pirate":{A:"English (Pirate)",B:"English (Pirate)"},eo:{A:"Esperanto",B:"Esperanto"},"eo-EO":{A:"Esperanto",B:"Esperanto"},es:{A:"Espa\xf1ol",B:"Spanish"},"es-AR":{A:"Espa\xf1ol (Argentine)",B:"Spanish (Argentina)"},"es-419":{A:"Espa\xf1ol (Latinoam\xe9rica)",B:"Spanish (Latin America)"},"es-CL":{A:"Espa\xf1ol (Chile)",B:"Spanish (Chile)"},"es-CO":{A:"Espa\xf1ol (Colombia)",B:"Spanish (Colombia)"},"es-EC":{A:"Espa\xf1ol (Ecuador)",B:"Spanish (Ecuador)"},"es-ES":{A:"Espa\xf1ol (Espa\xf1a)",B:"Spanish (Spain)"},"es-LA":{A:"Espa\xf1ol (Latinoam\xe9rica)",B:"Spanish (Latin America)"},"es-NI":{A:"Espa\xf1ol (Nicaragua)",B:"Spanish (Nicaragua)"},"es-MX":{A:"Espa\xf1ol (M\xe9xico)",B:"Spanish (Mexico)"},"es-US":{A:"Espa\xf1ol (Estados Unidos)",B:"Spanish (United States)"},"es-VE":{A:"Espa\xf1ol (Venezuela)",B:"Spanish (Venezuela)"},et:{A:"eesti keel",B:"Estonian"},"et-EE":{A:"Eesti (Estonia)",B:"Estonian (Estonia)"},eu:{A:"Euskara",B:"Basque"},"eu-ES":{A:"Euskara",B:"Basque"},fa:{A:"",B:"Persian"},"fa-IR":{A:"",B:"Persian"},"fb-LT":{A:"Leet Speak",B:"Leet"},ff:{A:"Fulah",B:"Fulah"},fi:{A:"Suomi",B:"Finnish"},"fi-FI":{A:"Suomi",B:"Finnish"},"fo-FO":{A:"F\xf8royskt",B:"Faroese"},fr:{A:"Fran\xe7ais",B:"French"},"fr-CA":{A:"Fran\xe7ais (Canada)",B:"French (Canada)"},"fr-FR":{A:"Fran\xe7ais (France)",B:"French (France)"},"fr-BE":{A:"Fran\xe7ais (Belgique)",B:"French (Belgium)"},"fr-CH":{A:"Fran\xe7ais (Suisse)",B:"French (Switzerland)"},"fy-NL":{A:"Frysk",B:"Frisian (West)"},ga:{A:"Gaeilge",B:"Irish"},"ga-IE":{A:"Gaeilge (Gaelic)",B:"Irish (Gaelic)"},gl:{A:"Galego",B:"Galician"},"gl-ES":{A:"Galego",B:"Galician"},"gn-PY":{A:"Ava\xf1e'",B:"Guarani"},"gu-IN":{A:"",B:"Gujarati"},"gx-GR":{A:" ",B:"Classical Greek"},he:{A:"",B:"Hebrew"},"he-IL":{A:"",B:"Hebrew"},hi:{A:"",B:"Hindi"},"hi-IN":{A:"",B:"Hindi"},hr:{A:"Hrvatski",B:"Croatian"},"hr-HR":{A:"Hrvatski",B:"Croatian"},hsb:{A:"Hornjoserbina",B:"Upper Sorbian"},ht:{A:"Krey\xf2l",B:"Haitian Creole"},hu:{A:"Magyar",B:"Hungarian"},"hu-HU":{A:"Magyar",B:"Hungarian"},"hy-AM":{A:"",B:"Armenian"},id:{A:"Bahasa Indonesia",B:"Indonesian"},"id-ID":{A:"Bahasa Indonesia",B:"Indonesian"},is:{A:"\xcdslenska",B:"Icelandic"},"is-IS":{A:"\xcdslenska (Iceland)",B:"Icelandic (Iceland)"},it:{A:"Italiano",B:"Italian"},"it-IT":{A:"Italiano",B:"Italian"},ja:{A:"",B:"Japanese"},"ja-JP":{A:"",B:"Japanese"},"jv-ID":{A:"Basa Jawa",B:"Javanese"},"ka-GE":{A:"",B:"Georgian"},"kk-KZ":{A:"",B:"Kazakh"},km:{A:"",B:"Khmer"},"km-KH":{A:"",B:"Khmer"},kab:{A:"Taqbaylit",B:"Kabyle"},kn:{A:"",B:"Kannada"},"kn-IN":{A:" (India)",B:"Kannada (India)"},ko:{A:"",B:"Korean"},"ko-KR":{A:" ()",B:"Korean (Korea)"},ku:{A:"Kurd\xee",B:"Kurdish"},"ku-TR":{A:"Kurd\xee",B:"Kurdish"},la:{A:"Latin",B:"Latin"},"la-VA":{A:"Latin",B:"Latin"},lb:{A:"L\xebtzebuergesch",B:"Luxembourgish"},"li-NL":{A:"L\xe8mb\xf6rgs",B:"Limburgish"},lt:{A:"Lietuvi",B:"Lithuanian"},"lt-LT":{A:"Lietuvi",B:"Lithuanian"},lv:{A:"Latvieu",B:"Latvian"},"lv-LV":{A:"Latvieu",B:"Latvian"},mai:{A:", ",B:"Maithili"},"mg-MG":{A:"Malagasy",B:"Malagasy"},mk:{A:"",B:"Macedonian"},"mk-MK":{A:" ()",B:"Macedonian (Macedonian)"},ml:{A:"",B:"Malayalam"},"ml-IN":{A:"",B:"Malayalam"},"mn-MN":{A:"",B:"Mongolian"},mr:{A:"",B:"Marathi"},"mr-IN":{A:"",B:"Marathi"},ms:{A:"Bahasa Melayu",B:"Malay"},"ms-MY":{A:"Bahasa Melayu",B:"Malay"},mt:{A:"Malti",B:"Maltese"},"mt-MT":{A:"Malti",B:"Maltese"},my:{A:"",B:"Burmese"},nb:{A:"Norsk (bokm\xe5l)",B:"Norwegian (bokmal)"},"nb-NO":{A:"Norsk (bokm\xe5l)",B:"Norwegian (bokmal)"},ne:{A:"",B:"Nepali"},"ne-NP":{A:"",B:"Nepali"},nl:{A:"Nederlands",B:"Dutch"},"nl-BE":{A:"Nederlands (Belgi\xeb)",B:"Dutch (Belgium)"},"nl-NL":{A:"Nederlands (Nederland)",B:"Dutch (Netherlands)"},"nn-NO":{A:"Norsk (nynorsk)",B:"Norwegian (nynorsk)"},no:{A:"Norsk",B:"Norwegian"},oc:{A:"Occitan",B:"Occitan"},"or-IN":{A:"",B:"Oriya"},pa:{A:"",B:"Punjabi"},"pa-IN":{A:" ( )",B:"Punjabi (India)"},pl:{A:"Polski",B:"Polish"},"pl-PL":{A:"Polski",B:"Polish"},"ps-AF":{A:"",B:"Pashto"},pt:{A:"Portugu\xeas",B:"Portuguese"},"pt-BR":{A:"Portugu\xeas (Brasil)",B:"Portuguese (Brazil)"},"pt-PT":{A:"Portugu\xeas (Portugal)",B:"Portuguese (Portugal)"},"qu-PE":{A:"Qhichwa",B:"Quechua"},"rm-CH":{A:"Rumantsch",B:"Romansh"},ro:{A:"Rom\xe2n",B:"Romanian"},"ro-RO":{A:"Rom\xe2n",B:"Romanian"},ru:{A:"",B:"Russian"},"ru-RU":{A:"",B:"Russian"},"sa-IN":{A:"",B:"Sanskrit"},"se-NO":{A:"Davvis\xe1megiella",B:"Northern S\xe1mi"},"si-LK":{A:"",B:"Sinhala (Sri Lanka)"},sk:{A:"Slovenina",B:"Slovak"},"sk-SK":{A:"Slovenina (Slovakia)",B:"Slovak (Slovakia)"},sl:{A:"Slovenina",B:"Slovenian"},"sl-SI":{A:"Slovenina",B:"Slovenian"},"so-SO":{A:"Soomaaliga",B:"Somali"},sq:{A:"Shqip",B:"Albanian"},"sq-AL":{A:"Shqip",B:"Albanian"},sr:{A:"",B:"Serbian"},"sr-RS":{A:" (Serbia)",B:"Serbian (Serbia)"},su:{A:"Basa Sunda",B:"Sundanese"},sv:{A:"Svenska",B:"Swedish"},"sv-SE":{A:"Svenska",B:"Swedish"},sw:{A:"Kiswahili",B:"Swahili"},"sw-KE":{A:"Kiswahili",B:"Swahili (Kenya)"},ta:{A:"",B:"Tamil"},"ta-IN":{A:"",B:"Tamil"},te:{A:"",B:"Telugu"},"te-IN":{A:"",B:"Telugu"},tg:{A:" ",B:"Tajik"},"tg-TJ":{A:"",B:"Tajik"},th:{A:"",B:"Thai"},"th-TH":{A:" ()",B:"Thai (Thailand)"},tl:{A:"Filipino",B:"Filipino"},"tl-PH":{A:"Filipino",B:"Filipino"},tlh:{A:"tlhIngan-Hol",B:"Klingon"},tr:{A:"T\xfcrk\xe7e",B:"Turkish"},"tr-TR":{A:"T\xfcrk\xe7e",B:"Turkish"},"tt-RU":{A:"",B:"Tatar"},uk:{A:"",B:"Ukrainian"},"uk-UA":{A:"",B:"Ukrainian"},ur:{A:"",B:"Urdu"},"ur-PK":{A:"",B:"Urdu"},uz:{A:"O'zbek",B:"Uzbek"},"uz-UZ":{A:"O'zbek",B:"Uzbek"},vi:{A:"Ting Vit",B:"Vietnamese"},"vi-VN":{A:"Ting Vit",B:"Vietnamese"},"xh-ZA":{A:"isiXhosa",B:"Xhosa"},yi:{A:"",B:"Yiddish"},"yi-DE":{A:" (German)",B:"Yiddish (German)"},zh:{A:"",B:"Chinese"},"zh-HANS":{A:"",B:"Chinese Simplified"},"zh-HANT":{A:"",B:"Chinese Traditional"},"zh-CN":{A:"",B:"Chinese Simplified (China)"},"zh-HK":{A:"",B:"Chinese Traditional (Hong Kong)"},"zh-SG":{A:"",B:"Chinese Simplified (Singapore)"},"zh-TW":{A:"",B:"Chinese Traditional (Taiwan)"},"zu-ZA":{A:"isiZulu",B:"Zulu"}},r4=t(Object.keys(r3)),r5=r4.next();!r5.done;r5=r4.next()){var r8=r5.value;r3[r8.toLowerCase()]=r3[r8]}function sB(n,i){var r=this;this.parent=n,this.controls=i,this.eventManager=new Kf,this.localization=this.controls.va,this.player=this.controls.Mc(),this.video=this.controls.cc(),this.adManager=this.player.ee(),this.ad=i.getAd(),this.eventManager.o(this.adManager,"ad-started",function(n){r.ad=n.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.ad=null})}function tB(n){return uB(n,"shaka-back-to-overflow-button")}function uB(n,i){return(n=n.getElementsByClassName(i)).length?n[0]:null}function vB(n){n&&(n=uB(n,"shaka-chosen-item"))&&n.parentElement.focus()}function wB(){var n=U("i");return n.classList.add("material-icons-round"),n.classList.add("shaka-chosen-item"),n.textContent="done",n.ariaHidden="true",n}function xB(n,i){n&&(i?n.classList.remove("shaka-hidden"):n.classList.add("shaka-hidden"))}function yB(n,i){var r=Math.floor(n/3600),o=Math.floor(n/60%60);return 10>(n=Math.floor(n%60))&&(n="0"+n),n=o+":"+n,i&&(10>o&&(n="0"+n),n=r+":"+n),n}function zB(n,i){sB.call(this,n,i);var r=this;this.i=U("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=U("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new Dd(function(){var n=Math.round(r.ad.getRemainingTime()),i=r.ad.getDuration();-1!=n&&-1!=i&&(0<n?(n=yB(i-n,!1)+" / "+yB(i,!1),1<r.ad.getSequenceLength()?r.h.textContent=n:(i=r.localization.resolve("AD_TIME"),r.h.textContent=i.replace("[AD_TIME]",n))):(r.g.stop(),r.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){r.g.Qa(),r.g.za(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.g.stop(),r.h.textContent=""}),this.ad&&(this.g.Qa(),this.g.za(.5))}function AB(n,i){sB.call(this,n,i);var r=this;this.g=U("div"),this.g.classList.add("shaka-ad-position"),xB(this.g,!1),this.parent.appendChild(this.g),this.h=U("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){r.ad&&BB(r)}),this.eventManager.o(this.localization,"locale-changed",function(){r.ad&&BB(r)}),this.eventManager.o(this.adManager,"ad-started",function(){BB(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.h.textContent="",xB(r.g,!1)}),this.ad&&BB(this)}function BB(n){var i=n.ad.getSequenceLength();if(1<i){var r=n.ad.getPositionInSequence();n.h.textContent=n.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(r)).replace("[NUM_ADS]",String(i)),xB(n.g,!0)}}function CB(n,i){sB.call(this,n,i);var r=this;this.button=el(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){r.g()}),this.eventManager.o(this.localization,"locale-changed",function(){r.g()}),this.eventManager.o(this.video,"play",function(){r.g(),r.h()}),this.eventManager.o(this.video,"pause",function(){r.g(),r.h()}),this.eventManager.o(this.video,"seeking",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-started",function(){r.g(),r.h()}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.g(),r.h()}),this.eventManager.o(this.button,"click",function(){r.ad&&r.ad.isLinear()?DB(r.controls):EB(r.controls)}),this.ad&&(this.g(),this.h())}function FB(n,i){CB.call(this,n,i),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}function GB(i,r){sB.call(this,i,r);var o=this;this.j=this.controls.g,this.h=this.controls.h,this.i=[],this.g=U("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(n){if(o.g.classList.contains("shaka-hidden")){n.preventDefault();var i=o.h.getBoundingClientRect();o.g.style.left=n.clientX-i.left+"px",o.g.style.top=n.clientY-i.top+"px",xB(o.g,!0)}else xB(o.g,!1)}),this.eventManager.o(n,"click",function(){xB(o.g,!1)}),function(n){for(var i=t(n.j.contextMenuElements),r=i.next();!r.done;r=i.next()){r=r.value;var o=r6.get(r);o?n.i.push(o.create(n.g,n.controls)):Ra("Unrecognized context menu element:",r)}}(this)}function IB(n,i){r6.set(n,i)}sB.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},L("shaka.ui.Element",sB),sB.prototype.release=sB.prototype.release,pa(zB,sB),zB.prototype.release=function(){this.g.stop(),this.g=null,sB.prototype.release.call(this)},L("shaka.ui.AdCounter",zB),pa(AB,sB),L("shaka.ui.AdPosition",AB),pa(CB,sB),CB.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var n=this.ad.isPaused();else n=(n=this.controls).u.paused&&!n.W;return n},CB.prototype.isEnded=function(){return!(this.ad&&this.ad.isLinear())&&this.video.ended},CB.prototype.g=function(){},CB.prototype.h=function(){},L("shaka.ui.PlayButton",CB),pa(FB,CB),FB.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},FB.prototype.g=function(){var n=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(n)},L("shaka.ui.BigPlayButton",FB),pa(GB,sB),GB.prototype.release=function(){this.h=null;for(var n=t(this.i),i=n.next();!i.done;i=n.next())i.value.release();this.i=[],sB.prototype.release.call(this)},L("shaka.ui.ContextMenu",GB),GB.registerElement=IB;var r6=new Map;function KB(n,i){sB.call(this,n,i);var r=this;this.m=null,this.s=!1,this.j=new Dd(function(){0!=parseInt(r.h.textContent,10)&&(r.video.currentTime=r.controls.Hf()+parseInt(r.h.textContent,10)),r.g.style.opacity="0",r.s=!1,r.h.textContent="0s"}),this.g=U("div"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"touchend",function(n){r.controls.dc()&&(r.controls.nd()?(n.preventDefault(),r.controls.uc()):0<r.controls.g.tapSeekDistance&&((n.preventDefault(),n=r.controls.g.tapSeekDistance,r.s)?r.m+1e3>Date.now()&&(r.j.stop(),r.m=Date.now(),r.h.textContent=(r.l?parseInt(r.h.textContent,10)-n:parseInt(r.h.textContent,10)+n).toString()+"s",r.g.style.opacity="1",r.j.S(1)):(r.s=!0,r.m=Date.now(),r.j.S(1))))}),this.h=U("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.i=U("span"),this.i.classList.add("shaka-forward-rewind-container-icon"),this.g.appendChild(this.i),this.l=!1}function LB(n,i){KB.call(this,n,i),this.g.classList.add("shaka-fast-foward-container"),this.i.textContent="fast_forward",this.l=!1}function MB(n,i){KB.call(this,n,i),this.g.classList.add("shaka-rewind-container"),this.i.textContent="fast_rewind",this.l=!0}function NB(n,i,r,o){sB.call(this,n,i);var s=this;this.container=U("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,w(r)),this.h=!1,this.bar=document.createElement("input"),this.G=new Dd(function(){s.onChangeEnd(),s.h=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,w(o)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(){s.controls.dc()&&(s.h=!0,s.onChangeStart())}),this.eventManager.o(this.bar,"touchstart",function(n){s.controls.dc()&&(s.h=!0,OB(s,n),s.onChangeStart())}),this.eventManager.o(this.bar,"input",function(){s.onChange()}),this.eventManager.o(this.bar,"touchmove",function(n){s.h&&(OB(s,n),s.onChange())}),this.eventManager.o(this.bar,"touchend",function(n){s.h&&(s.h=!1,OB(s,n),s.onChangeEnd())}),this.eventManager.o(this.bar,"touchcancel",function(n){s.h&&(s.h=!1,OB(s,n),s.onChangeEnd())}),this.eventManager.o(this.bar,"mouseup",function(){s.h&&(s.h=!1,s.onChangeEnd())}),this.eventManager.o(this.bar,"blur",function(){s.h&&(s.h=!1,s.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(n){n.preventDefault(),n.stopPropagation()})}function OB(n,i){i.preventDefault();var r=i.changedTouches[0],o=n.bar.getBoundingClientRect();i=parseFloat(n.bar.min);var s=parseFloat(n.bar.max);(r=i+(s-i)/o.width*(r.clientX-o.left))<i?r=i:r>s&&(r=s),n.bar.value=r}function PB(n,i){NB.call(this,n,i,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var r=this;this.D=U("div"),this.D.classList.add("shaka-ad-markers"),this.container.insertBefore(this.D,this.container.childNodes[0]),this.H=this.controls.g,this.s=new Dd(function(){var n=r.getValue();r.player.R()||n==r.video.duration&&(n-=.001),r.video.currentTime=n}),this.I=new Dd(function(){QB(r)}),this.K=!1,this.i=U("div"),this.i.id="shaka-player-ui-thumbnail-container",this.g=U("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.u=U("div"),this.u.id="shaka-player-ui-thumbnail-time",this.i.appendChild(this.g),this.i.appendChild(this.u),this.container.appendChild(this.i),this.j=this.l=null,this.J=!1,this.m=new Dd(function(){RB(r)}),this.C=[],this.eventManager.o(this.localization,"locale-updated",function(){return SB(r)}),this.eventManager.o(this.localization,"locale-changed",function(){return SB(r)}),this.eventManager.o(this.adManager,"ad-started",function(){TB(r)||xB(r.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){TB(r)&&xB(r.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(n){r.C=n.cuepoints,UB(r)}),this.eventManager.o(this.player,"unloading",function(){r.C=[],UB(r),r.j&&(r.j.abort(),r.j=null),r.l=null,RB(r)}),this.eventManager.o(this.bar,"mousemove",function(n){if(r.player.fe().length){var i=r.bar.getBoundingClientRect(),o=parseFloat(r.bar.min);VB(r,n=n.clientX-i.left,Math.round(o+(parseFloat(r.bar.max)-o)/i.width*n))}else RB(r)}),this.eventManager.o(this.container,"mouseleave",function(){r.m.stop(),r.m.S(.25)}),this.setValue(this.video.currentTime),this.update(),SB(this),this.ad&&xB(this.container,!1)}function QB(n){if(n.C.length){for(var i=n.player.Ha(),r=i.end-i.start,o=["to right"],s=[],u=n.H.seekBarColors.adBreaks,p=!1,y=t(n.C),A=y.next();!A.done;A=y.next())if(-1!=(A=A.value).start||A.end||(p=!0),A.start>=i.start&&A.start<i.end&&!(A.end&&A.end>i.end)){var T=(A.start-i.start)/r||0,x=T+.01;A.end&&(x=(A.end-i.start)/r||0),s.push({start:T,end:x})}for(A=(i=t(s)).next();!A.done;A=i.next())o.push("transparent "+100*(r=A.value).start+"%"),o.push(u+" "+100*r.start+"%"),o.push(u+" "+100*r.end+"%"),o.push("transparent "+100*r.end+"%");p&&(o.push("transparent 99%"),o.push(u+" 99%")),n.D.style.background="linear-gradient("+o.join(",")+")"}else n.D.style.background="transparent"}function UB(n){QB(n);var i=n.player.Ha();i=i.end-i.start,n.player.R()&&5<i&&n.I.za(1)}function TB(n){var i=n.player.Ha();return i=i.end-i.start,(!n.player.R()||!(5>i))&&(null==n.ad||!n.ad.isLinear())}function SB(n){n.bar.ariaLabel=n.localization.resolve("SEEK")}function VB(n,i,r){var o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G;K(function(H){switch(H.g){case 1:if(!(o=function(n){var i=n.player.fe();if(!i.length)return null;for(var r={},o=t(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),s=o.next();!s.done;r={Ve:r.Ve,Te:r.Te},s=o.next())if(r.Ve=s.value,r.Te=n.player.getStats().estimatedBandwidth,(s=i.filter(function(n){return function(i){return i.mimeType.toLowerCase()===n.Ve&&i.bandwidth<.01*n.Te}}(r)).sort(function(n,i){return i.bandwidth-n.bandwidth}))&&s.length)return s[0];return i.find(function(n){return"application/mp4"==n.mimeType&&"mjpg"==n.codecs})||i[0]}(n)))return RB(n),H.return();return 0>r&&(r=0),u=Math.max(Math.ceil((s=n.player.Ha()).start),Math.min(Math.floor(s.end),r)),D(H,n.player.Kf(o.id,u),2);case 2:if(!(p=H.h)||!p.uris.length)return RB(n),H.return();if(n.player.R()?(y=s.end-r,n.u.textContent=1>y?n.localization.resolve("LIVE"):"-"+XB(y)):n.u.textContent=XB(r),A=-10,x=Math.floor(9*(T=n.i.clientWidth)/16),n.i.style.height=x+"px",n.i.style.top=-(x-A)+"px",C=Math.min(n.bar.offsetWidth-T,Math.max(0,i-T/2)),n.i.style.left=C+"px",n.i.style.visibility="visible",I=p.uris[0].split("#xywh=")[0],n.l&&I===n.l.uris[0].split("#xywh=")[0]&&p.segment.Pb()==n.l.segment.Pb()&&p.segment.Mb()==n.l.segment.Mb()){H.F(3);break}if(n.l=p,n.j&&(n.j.abort(),n.j=null),"mjpg"!=o.codecs&&!I.startsWith("offline:")){H.F(4);break}return n.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',ta(H,5),M=e7,N=ok(p.segment.ba(),p.segment.Pb(),p.segment.Mb(),n.player.getConfiguration().streaming.retryParameters),n.j=n.player.Zb().request(M,N,{type:1}),D(H,n.j.promise,7);case 7:_=H.h,n.j=null,"mjpg"==o.codecs?(new bg).box("mdat",kg(function(n){I=URL.createObjectURL(new Blob([n],{type:"image/jpeg"}))})).parse(_.data,!1):(j=o.mimeType||"image/jpeg",B=new Blob([_.data],{type:j}),I=URL.createObjectURL(B)),va(H,4);break;case 5:if(7001==(z=wa(H)).code)return H.return();throw z;case 4:try{n.i.removeChild(n.g)}catch(n){}n.g=U("img"),n.g.id="shaka-player-ui-thumbnail-image",n.g.draggable=!1,n.g.src=I,n.g.onload=function(){I.startsWith("blob:")&&URL.revokeObjectURL(I)},n.i.insertBefore(n.g,n.i.firstChild);case 3:G=T/p.width,p.imageHeight?n.g.height=p.imageHeight:p.sprite||(n.g.style.height="100%",n.g.style.objectFit="contain"),p.imageWidth?n.g.width=p.imageWidth:p.sprite||(n.g.style.width="100%",n.g.style.objectFit="contain"),n.g.style.left="-"+G*p.positionX+"px",n.g.style.top="-"+G*p.positionY+"px",n.g.style.transform="scale("+G+")",n.g.style.transformOrigin="left top",x=Math.floor(T*p.height/p.width),n.i.style.height=x+"px",n.i.style.top=-(x-A)+"px",F(H)}})}function RB(n){n.i.style.visibility="hidden",n.u.textContent=""}function XB(n){var i=Math.round(n);n=Math.floor(i/3600);var r=Math.floor((i-3600*n)/60);return 10>(i=i-3600*n-60*r)&&(i="0"+i),0<n?(10>r&&(r="0"+r),n+":"+r+":"+i):r+":"+i}function YB(){}function Z(i,r,o,s){$a.call(this);var u,p,y=this;this.N=!0,this.g=s,this.C=new Oo(o,i,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.ua=!0,this.u=this.C.cc(),this.s=o,this.G=this.C.Mc(),this.sa=i,this.j=r,this.Wa=this.G.ee(),this.l=this.m=null,this.W=!1,this.H=[],this.Xb=[],this.Ib=!1,this.Z=new Dd(function(){y.j.style.cursor="none",y.Ib=!1,ZB(y)}),this.aa=new Dd(function(){y.h.removeAttribute("shown"),y.I.S(2)}),this.I=new Dd(function(){for(var n=t(y.H),i=n.next();!i.done;i=n.next())xB(i.value,!1)}),this.Ra=new Dd(function(){y.dc()&&$B(y)}),this.J=null,this.D=[],this.va=((u=new Ub("en")).ya("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),u.ya("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung\xa0[AD_ON] von\xa0[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zur\xfcck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Aufl\xf6sung"],["REWIND","Zur\xfcckspulen"],["SEEK","Suche"],["SKIP_AD","\xdcberspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautst\xe4rke"]])),u.ya("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),u.ya("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),u.ya("es",new Map([["AD_DURATION","Duraci\xf3n del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Autom\xe1tico"],["BACK","Atr\xe1s"],["CAPTIONS","Subt\xedtulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el v\xeddeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el v\xeddeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar r\xe1pidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","M\xe1s ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducci\xf3n"],["RESOLUTION","Resoluci\xf3n"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al v\xeddeo en directo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),u.ya("es-419",new Map([["AD_DURATION","Duraci\xf3n del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Autom\xe1tico"],["BACK","Atr\xe1s"],["CAPTIONS","Subt\xedtulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetici\xf3n indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","M\xe1s opciones de configuraci\xf3n"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducci\xf3n"],["RESOLUTION","Resoluci\xf3n"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisi\xf3n en vivo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),u.ya("fr",new Map([["AD_DURATION","Dur\xe9e de l'annonce"],["AD_PROGRESS","Annonce\xa0[AD_ON] sur\xa0[NUM_ADS]"],["AD_TIME","Annonce\xa0: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vid\xe9o en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein \xe9cran"],["EXIT_LOOP_MODE","Arr\xeater la lecture en boucle de la vid\xe9o en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode\xa0PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein \xe9cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","R\xe9p\xe9ter"],["MORE_SETTINGS","Plus de param\xe8tres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","D\xe9sactiv\xe9e"],["ON","Activ\xe9e"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","R\xe9solution"],["REWIND","Retour arri\xe8re"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Acc\xe9der \xe0 la partie la plus r\xe9cente du direct"],["UNDETERMINED_LANGUAGE","Langue ind\xe9termin\xe9e"],["UNMUTE","R\xe9activer le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),u.ya("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi\xf9 lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit\xe0 di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),u.ya("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),u.ya("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),u.ya("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),u.ya("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama\xa0[AD_ON] z\xa0[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film w\xa0ptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu w\xa0obrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu w\xa0ptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu w\xa0obrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj w\xa0ptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzyk\xf3w"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w\xa0obrazie"],["PLAY","Odtw\xf3rz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),u.ya("pt-BR",new Map([["AD_DURATION","Dura\xe7\xe3o do an\xfancio"],["AD_PROGRESS","An\xfancio [AD_ON] de [NUM_ADS]"],["AD_TIME","An\xfancio: [AD_TIME]"],["AUTO_QUALITY","Autom\xe1tica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o v\xeddeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repeti\xe7\xe3o do v\xeddeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avan\xe7ar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais defini\xe7\xf5es"],["MULTIPLE_LANGUAGES","V\xe1rios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","N\xe3o relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodu\xe7\xe3o"],["RESOLUTION","Resolu\xe7\xe3o"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular an\xfancio"],["SKIP_TO_LIVE","Pular para transmiss\xe3o ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","N\xe3o reconhecido"],["VOLUME","Volume"]])),u.ya("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),u.ya("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),u.ya("tr",new Map([["AD_DURATION","Reklam s\xfcresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu d\xf6ng\xfcye al"],["ENTER_PICTURE_IN_PICTURE","Pencere i\xe7inde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan \xe7k"],["EXIT_LOOP_MODE","Mevcut videonun d\xf6ng\xfcs\xfcn\xfc durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere \xe7inde Pencereden \xc7k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","D\xf6ng\xfc"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden \xe7ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Ge\xe7erli deil"],["OFF","Kapal"],["ON","A\xe7k"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere \xe7inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","\xc7alma hz"],["RESOLUTION","\xc7\xf6z\xfcn\xfcrl\xfck"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a\xe7"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),u.ya("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),u.ya("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),u.Ig(navigator.languages||[]),u),this.i=new Kf,this.configure(this.g),p=this,p.i.o(p.G,"buffering",function(){p.N&&xB(p.$,p.G.yd())}),p.N&&xB(p.$,p.G.yd()),p.i.o(n,"keydown",function(i){(function(i,r){i.ha.add(r.key);var o=i.nd();"Tab"==r.key&&(i.h.classList.add("shaka-keyboard-navigation"),ZB(i),i.i.o(n,"mousedown",function(){i.i.hc(n,"mousedown")})),"Escape"==r.key&&i.I.Qa(),o&&i.ha.has("Tab")&&function(n,i){var r=n.H.filter(function(n){return!n.classList.contains("shaka-hidden")});if(r.length){var o=r[0];if(o.childNodes.length){for(r=o.firstElementChild;r&&r.classList.contains("shaka-hidden");)r=r.nextElementSibling;for(o=o.lastElementChild;o&&o.classList.contains("shaka-hidden");)o=o.previousElementSibling;var s=document.activeElement;n.ha.has("Shift")?s==r&&(i.preventDefault(),o.focus()):s==o&&(i.preventDefault(),r.focus())}}}(i,r)})(p,i)}),p.i.o(n,"click",function(){return p.uc()}),p.i.o(p,"submenuopen",function(){p.uc()}),p.i.o(p.u,"play",function(){ZB(p)}),p.i.o(p.u,"pause",function(){ZB(p)}),p.i.o(p.j,"mousemove",function(n){tC(p,n)}),p.i.o(p.j,"touchmove",function(n){tC(p,n)},{passive:!0}),p.i.o(p.j,"touchend",function(n){tC(p,n)},{passive:!0}),p.i.o(p.j,"mouseleave",function(){p.J||p.Z.Qa()}),p.i.o(p.C,"caststatuschanged",function(){cC(p)}),p.i.o(p.j,"keydown",function(n){var i=document.activeElement,r=!!i&&!!i.classList&&i.classList.contains("shaka-volume-bar"),o=i&&i.classList&&i.classList.contains("shaka-seek-bar");if(p.h.contains(i)&&tC(p,n),p.g.enableKeyboardPlaybackControls){i=p.g.keyboardSeekDistance;var s=p.g.keyboardLargeSeekDistance;switch(n.key){case"ArrowLeft":p.l&&!r&&0<i&&(n.preventDefault(),yC(p,p.l.getValue()-i));break;case"ArrowRight":p.l&&!r&&0<i&&(n.preventDefault(),yC(p,p.l.getValue()+i));break;case"PageDown":p.l&&o&&0<i&&(n.preventDefault(),yC(p,p.l.getValue()-s));break;case"PageUp":p.l&&o&&0<i&&(n.preventDefault(),yC(p,p.l.getValue()+s));break;case"Home":p.l&&yC(p,p.G.Ha().start);break;case"End":p.l&&yC(p,p.G.Ha().end);break;case"f":p.zd()&&p.Pe();break;case"m":p.m&&p.m.isLinear()?p.m.setMuted(!p.m.isMuted()):p.s.muted=!p.s.muted;break;case"p":p.qe()&&p.Od();break;case" ":o&&zC(p)}}}),p.i.o(p.j,"keyup",function(n){p.ha.delete(n.key)}),p.i.o(p.Wa,"ad-started",function(n){p.m=n.ad,p.uh()}),p.i.o(p.Wa,"ad-stopped",function(){p.m=null,p.Wg()}),screen.orientation&&p.i.o(screen.orientation,"change",function(){return K(function(n){var i;return D(n,(i=p,K(function(n){return i.u&&0!=i.u.readyState&&!i.C.Ba()&&i.g.enableFullscreenOnRotation&&i.zd()?screen.orientation.type.includes("landscape")&&!i.Qc()?D(n,pC(i),0):screen.orientation.type.includes("portrait")&&i.Qc()?D(n,qC(i),0):n.F(0):n.return()})),0)})}),this.ha=new Set,cC(this),this.Ra.za(.125),this.i.o(this.va,"locale-changed",function(n){y.Wa.setLocale(n.locales[0])})}function dC(n){for(var i=t(n.D),r=i.next();!r.done;r=i.next())r.value.release();n.D=[]}function eC(n,i){r9.set(n,i)}function pC(n){var i,r;return K(function(o){switch(o.g){case 1:if(ta(o,2),!document.fullscreenEnabled){(i=n.s).webkitSupportsFullscreen&&i.webkitEnterFullscreen(),o.F(4);break}if(!document.pictureInPictureElement){o.F(5);break}return D(o,document.exitPictureInPicture(),5);case 5:return D(o,n.g.fullScreenElement.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!n.g.forceLandscapeOnFullscreen||!screen.orientation){o.F(4);break}return ta(o,9),D(o,screen.orientation.lock("landscape"),11);case 11:va(o,4,2);break;case 9:wa(o,2);case 4:va(o,0);break;case 2:r=wa(o),n.dispatchEvent(new O("error",(new Map).set("detail",r))),F(o)}})}function qC(n){var i;return K(function(r){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),D(r,document.exitFullscreen(),0)):((i=n.s).webkitSupportsFullscreen&&i.webkitExitFullscreen(),r.F(0))})}function EB(n){n.N&&n.u.duration&&(n.G.od(),n.u.paused&&!n.W?n.u.play():n.u.pause())}function DB(n){n.m&&n.m.isPaused()?n.m.play():n.m&&n.m.pause()}function tC(n,i){"mousemove"==i.type&&(n.h.classList.remove("shaka-keyboard-navigation"),ZB(n)),"touchstart"==i.type||"touchmove"==i.type||"touchend"==i.type||"keyup"==i.type?n.J=Date.now():n.J+1e3<Date.now()&&(n.J=null),n.J&&"mousemove"==i.type||(n.j.style.cursor="",n.Ib=!0,n.I.stop(),n.dc()||($B(n),ZB(n)),n.Z.stop(),"touchend"!=i.type&&"keyup"!=i.type&&n.J||n.Z.S(3))}function ZB(i){var r=!!i.m&&i.m.isPaused(),o=i.u.paused&&!i.W,s=i.h.classList.contains("shaka-keyboard-navigation");r||(!i.m||!i.m.isLinear())&&o||i.Ib||s||n.matchMedia("hover: hover").matches&&i.Xb.some(function(n){return n.matches(":hover")})?($B(i),i.h.setAttribute("shown","true"),i.aa.stop()):i.aa.S(i.g.fadeDelay)}function uC(n){n.N&&(n.nd()?n.I.Qa():n.g.singleClickForPlayAndPause&&zC(n))}function zC(n){n.m&&n.m.isLinear()?DB(n):EB(n)}function cC(n){var i=n.C.Ba();n.dispatchEvent(new O("caststatuschanged",(new Map).set("newStatus",i))),i?n.h.setAttribute("casting","true"):n.h.removeAttribute("casting")}function yC(n,i){n.l.changeTo(i),n.dc()&&$B(n)}function $B(n){if(n.l){if(n.l.setValue(n.u.currentTime),n.l.update(),n.l.isShowing())for(var i=t(n.H),r=i.next();!r.done;r=i.next())r.value.classList.remove("shaka-low-position");else for(r=(i=t(n.H)).next();!r.done;r=i.next())r.value.classList.add("shaka-low-position")}n.dispatchEvent(new O("timeandseekrangeupdated"))}pa(KB,sB),L("shaka.ui.HiddenSeekButton",KB),pa(LB,KB),L("shaka.ui.HiddenFastForwardButton",LB),pa(MB,KB),L("shaka.ui.HiddenRewindButton",MB),pa(NB,sB),(N=NB.prototype).release=function(){this.G&&(this.G.stop(),this.G=null),sB.prototype.release.call(this)},N.setRange=function(n,i){this.bar.min=n,this.bar.max=i},N.onChangeStart=function(){},N.onChange=function(){},N.onChangeEnd=function(){},N.changeTo=function(n){this.h||(this.h=!0,this.onChangeStart());var i=parseFloat(this.bar.min),r=parseFloat(this.bar.max);this.bar.value=n>r?r:n<i?i:n,this.onChange(),this.G.S(.5)},N.getValue=function(){return parseFloat(this.bar.value)},N.setValue=function(n){this.h||(this.bar.value=n)},L("shaka.ui.RangeElement",NB),NB.prototype.setValue=NB.prototype.setValue,NB.prototype.getValue=NB.prototype.getValue,NB.prototype.changeTo=NB.prototype.changeTo,NB.prototype.onChangeEnd=NB.prototype.onChangeEnd,NB.prototype.onChange=NB.prototype.onChange,NB.prototype.onChangeStart=NB.prototype.onChangeStart,NB.prototype.setRange=NB.prototype.setRange,pa(PB,NB),(N=PB.prototype).release=function(){this.s&&(this.s.stop(),this.s=null,this.I.stop(),this.I=null),NB.prototype.release.call(this)},N.onChangeStart=function(){this.K=!this.video.paused,this.controls.qg(!0),this.video.pause(),this.m.stop(),this.J=!0},N.onChange=function(){if(this.video.duration){if(this.update(),this.s.S(.125),this.player.fe().length){var n=parseFloat(this.bar.min),i=parseFloat(this.bar.max),r=this.bar.getBoundingClientRect(),o=Math.round(this.getValue());VB(this,(o-n)/((i-n)/r.width),o)}else RB(this)}},N.onChangeEnd=function(){this.s.Qa(),this.controls.qg(!1),this.K&&this.video.play(),this.J&&(this.J=!1,this.m.stop(),this.m.S(.25))},N.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},N.update=function(){var n=this.H.seekBarColors,i=this.getValue(),r=this.video.buffered.length,o=r?this.video.buffered.start(0):0,s=r?this.video.buffered.end(r-1):0,u=this.player.Ha(),p=u.end-u.start;this.setRange(u.start,u.end),TB(this)?(xB(this.container,!0),0==r?this.container.style.background=n.base:(r=(Math.max(o,u.start)-u.start)/p||0,s=(Math.min(s,u.end)-u.start)/p||0,i=(Math.min(Math.max(i,u.start),u.end)-u.start)/p||0,this.container.style.background="linear-gradient("+["to right",(this.H.showUnbufferedStart?n.base:n.played)+" "+100*r+"%",n.played+" "+100*r+"%",n.played+" "+100*i+"%",n.buffered+" "+100*i+"%",n.buffered+" "+100*s+"%",n.base+" "+100*s+"%"].join()+")")):xB(this.container,!1)},L("shaka.ui.SeekBar",PB),YB.prototype.create=function(n,i){return new PB(n,i)},PB.Factory=YB,pa(Z,$a),(N=Z.prototype).destroy=function(){var n=this;return K(function(i){switch(i.g){case 1:if(document.pictureInPictureElement!=n.s){i.F(2);break}return D(i,document.exitPictureInPicture(),2);case 2:if(n.i&&(n.i.release(),n.i=null),n.Z&&(n.Z.stop(),n.Z=null),n.aa&&(n.aa.stop(),n.aa=null),n.I&&(n.I.stop(),n.I=null),n.Ra&&(n.Ra.stop(),n.Ra=null),dC(n),n.h&&(n.j.removeChild(n.h),n.h=null),!n.C){i.F(4);break}return D(i,n.C.destroy(),5);case 5:n.C=null;case 4:if(!n.sa){i.F(6);break}return D(i,n.sa.destroy(),7);case 7:n.sa=null;case 6:n.G=null,n.s=null,n.u=null,n.va=null,n.ha.clear(),$a.prototype.release.call(n),F(i)}})},N.Kh=function(n){this.ua=n,cC(this)},N.Ri=function(){ZB(this)},N.configure=function(n){this.g=n,this.C.Jg(n.castReceiverAppId,n.castAndroidReceiverCompatible),this.l&&(this.l=null),this.Fb&&(this.Fb=null),this.Xa&&(this.Xa=null),this.h?(fl(this.h),dC(this)):(i=this,i.h=U("div"),i.h.classList.add("shaka-controls-container"),i.j.appendChild(i.h),i.j.setAttribute("shaka-controls","true"),i.i.o(i.h,"touchstart",function(n){i.u.duration&&(i.dc()?i.J=Date.now():(tC(i,n),n.cancelable&&n.preventDefault()))},{passive:!1}),i.i.o(i.h,"click",function(){uC(i)}),i.i.o(i.h,"dblclick",function(){i.g.doubleClickForFullscreen&&i.zd()&&i.Pe()}),r=this,r.M=U("div"),r.M.classList.add("shaka-client-side-ad-container"),xB(r.M,!1),r.i.o(r.M,"click",function(){uC(r)}),r.j.appendChild(r.M)),this.j.classList.add("shaka-video-container"),this.s.classList.add("shaka-video"),o=this,(s=U("div")).classList.add("shaka-scrim-container"),o.h.appendChild(s),this.g.addBigPlayButton&&(u=this,(p=U("div")).classList.add("shaka-play-button-container"),u.h.appendChild(p),u.Fb=new FB(p,u),u.D.push(u.Fb)),this.g.customContextMenu&&(this.Xa=new GB(this.V,this),this.D.push(this.Xa)),this.$||(y=this,y.$=U("div"),y.$.classList.add("shaka-spinner-container"),y.j.appendChild(y.$),(A=U("div")).classList.add("shaka-spinner"),y.$.appendChild(A),(y=document.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("shaka-spinner-svg"),y.setAttribute("viewBox","0 0 30 30"),A.appendChild(y),(A=document.createElementNS("http://www.w3.org/2000/svg","circle")).classList.add("shaka-spinner-path"),A.setAttribute("cx","15"),A.setAttribute("cy","15"),A.setAttribute("r","14.5"),A.setAttribute("fill","none"),A.setAttribute("stroke-width","1"),A.setAttribute("stroke-miterlimit","10"),y.appendChild(A)),this.g.seekOnTaps&&(T=this,(x=U("div")).classList.add("shaka-hidden-fast-forward-container"),T.h.appendChild(x),T.nc=new LB(x,T),T.D.push(T.nc),C=this,(I=U("div")).classList.add("shaka-hidden-rewind-container"),C.h.appendChild(I),C.tc=new MB(I,C),C.D.push(C.tc)),this.xb=U("div"),this.xb.classList.add("shaka-server-side-ad-container"),this.h.appendChild(this.xb),function(n){n.L=U("div"),n.L.classList.add("shaka-bottom-controls"),n.L.classList.add("shaka-no-propagation"),n.h.appendChild(n.L),n.i.o(n.L,"click",function(i){i.target.closest(".shaka-overflow-button")||n.uc()}),n.K=U("div"),n.K.classList.add("shaka-ad-controls"),i=null!=n.m&&n.m.isLinear(),xB(n.K,i),n.L.appendChild(n.K),i=new AB(n.K,n),n.D.push(i),i=new zB(n.K,n),n.D.push(i),n.V=U("div"),n.V.classList.add("shaka-controls-button-panel"),n.V.classList.add("shaka-show-controls-on-mouse-over"),n.g.enableTooltips&&n.V.classList.add("shaka-tooltips-on"),n.L.appendChild(n.V);for(var i,r=t(n.g.controlPanelElements),o=r.next();!o.done;o=r.next())o=o.value,r9.get(o)?(o=r9.get(o).create(n.V,n),n.D.push(o)):Ra("Unrecognized control panel element requested:",o)}(this),this.H=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.H.push.apply(this.H,w(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),function(n){if(n.g.addSeekBar)n.l=r7.create(n.L,n),n.D.push(n.l);else{n=t(n.H);for(var i=n.next();!i.done;i=n.next())i.value.classList.add("shaka-low-position")}}(this),this.Xb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),ZB(this),n=t(this.j.getElementsByClassName("shaka-no-propagation"));for(var i,r,o,s,u,p,y,A,T,x,C,I,M=n.next();!M.done;M=n.next()){M=M.value;var c=function(n){return n.stopPropagation()};this.i.o(M,"click",c),this.i.o(M,"dblclick",c)}},N.lg=function(n){(this.N=n)?(this.j.setAttribute("shaka-controls","true"),this.s.tabIndex=-1,this.s.controls=!1):this.j.removeAttribute("shaka-controls"),ZB(this)},N.ph=function(n){this.s.controls=n,this.s.tabIndex=n?0:-1,n&&this.lg(!1)},N.getAd=function(){return this.m},N.Vh=function(){return this.C},N.ji=function(){return this.va},N.Di=function(){return this.j},N.cc=function(){return this.u},N.ii=function(){return this.s},N.Mc=function(){return this.G},N.gi=function(){return this.sa},N.$h=function(){return this.h},N.ti=function(){return this.xb},N.Xh=function(){return this.M},N.Yh=function(){return this.g},N.Oi=function(){return this.W},N.qg=function(n){this.W=n},N.Ii=function(){return this.ua},N.Hf=function(){return this.l?this.l.getValue():this.u.currentTime},N.qh=function(n){this.J=n},N.nd=function(){return this.H.some(function(n){return!n.classList.contains("shaka-hidden")})},N.uc=function(){this.I.Qa()},N.zd=function(){return!!document.fullscreenEnabled||!!this.s.webkitSupportsFullscreen},N.Qc=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var n=this.s;return!!n.webkitSupportsFullscreen&&n.webkitDisplayingFullscreen},N.Pe=function(){var n=this;return K(function(i){return n.Qc()?D(i,qC(n),0):D(i,pC(n),0)})},N.qe=function(){return!this.C.Ba()&&("documentPictureInPicture"in n&&!!this.g.preferDocumentPictureInPicture||!!document.pictureInPictureEnabled)&&!this.s.disablePictureInPicture},N.re=function(){return"documentPictureInPicture"in n&&this.g.preferDocumentPictureInPicture?!!n.documentPictureInPicture.window:!!document.pictureInPictureElement},N.Od=function(){var i,r=this;return K(function(o){var s,u,p,y,A,T,x;return 1==o.g?(ta(o,2),"documentPictureInPicture"in n&&r.g.preferDocumentPictureInPicture?D(o,(s=r,K(function(i){var r,o,C;if(1==i.g)return n.documentPictureInPicture.window?(n.documentPictureInPicture.window.close(),i.return()):(p=(u=s.j).getBoundingClientRect(),D(i,n.documentPictureInPicture.requestWindow({width:p.width,height:p.height}),2));r=y=i.h,o=[].concat(w(document.styleSheets)).map(function(n){try{return[].concat(w(n.cssRules)).map(function(n){return n.cssText}).join("")}catch(o){var i=document.createElement("link");i.rel="stylesheet",i.type=n.type,i.media=n.media,i.href=n.href,r.document.head.appendChild(i)}return""}).filter(Boolean).join("\n"),(C=document.createElement("style")).textContent=o,r.document.head.appendChild(C),A=u.parentNode||document.body,(T=s.j.cloneNode(!0)).style.visibility="hidden",T.style.height=getComputedStyle(u).height,A.appendChild(T),(x=document.createElement("style")).append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}"),y.document.head.append(x),y.document.body.append(u),s.i.na(y,"pagehide",function(){T.replaceWith(u)}),F(i)})),5):document.pictureInPictureElement?D(o,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),D(o,r.s.requestPictureInPicture(),5))):2!=o.g?va(o,0):void(i=wa(o),r.dispatchEvent(new O("error",(new Map).set("detail",i))),F(o))})},N.uh=function(){xB(this.K,!0),xB(this.M,!0),this.h.setAttribute("ad-active","true")},N.Wg=function(){xB(this.K,!1),xB(this.M,!1),this.h.removeAttribute("ad-active")},N.dc=function(){return!!this.N&&(null!=this.h.getAttribute("shown")||null!=this.h.getAttribute("casting"))},L("shaka.ui.Controls",Z),Z.prototype.isOpaque=Z.prototype.dc,Z.prototype.hideAdUI=Z.prototype.Wg,Z.prototype.showAdUI=Z.prototype.uh,Z.prototype.togglePiP=Z.prototype.Od,Z.prototype.isPiPEnabled=Z.prototype.re,Z.prototype.isPiPAllowed=Z.prototype.qe,Z.prototype.toggleFullScreen=Z.prototype.Pe,Z.prototype.isFullScreenEnabled=Z.prototype.Qc,Z.prototype.isFullScreenSupported=Z.prototype.zd,Z.prototype.hideSettingsMenus=Z.prototype.uc,Z.prototype.anySettingsMenusAreOpen=Z.prototype.nd,Z.prototype.setLastTouchEventTime=Z.prototype.qh,Z.prototype.getDisplayTime=Z.prototype.Hf,Z.prototype.isCastAllowed=Z.prototype.Ii,Z.prototype.setSeeking=Z.prototype.qg,Z.prototype.isSeeking=Z.prototype.Oi,Z.prototype.getConfig=Z.prototype.Yh,Z.prototype.getClientSideAdContainer=Z.prototype.Xh,Z.prototype.getServerSideAdContainer=Z.prototype.ti,Z.prototype.getControlsContainer=Z.prototype.$h,Z.prototype.getLocalPlayer=Z.prototype.gi,Z.prototype.getPlayer=Z.prototype.Mc,Z.prototype.getLocalVideo=Z.prototype.ii,Z.prototype.getVideo=Z.prototype.cc,Z.prototype.getVideoContainer=Z.prototype.Di,Z.prototype.getLocalization=Z.prototype.ji,Z.prototype.getCastProxy=Z.prototype.Vh,Z.prototype.getAd=Z.prototype.getAd,Z.prototype.setEnabledNativeControls=Z.prototype.ph,Z.prototype.setEnabledShakaControls=Z.prototype.lg,Z.prototype.configure=Z.prototype.configure,Z.prototype.loadComplete=Z.prototype.Ri,Z.prototype.allowCast=Z.prototype.Kh,Z.registerSeekBar=function(n){r7=n},Z.registerElement=eC,Z.prototype.destroy=Z.prototype.destroy;var r9=new Map,r7=new YB;function DC(n,i){sB.call(this,n,i);var r=this;this.l=this.controls.g,this.j=this.controls.h,this.i=[],this.g=el(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=U("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),function(n){for(var i=t(n.l.overflowMenuButtons),r=i.next();!r.done;r=i.next())r=r.value,ae.get(r)?(r=ae.get(r),n.i.push(r.create(n.h,n.controls))):Ra("Unrecognized overflow menu element requested:",r)}(this),this.eventManager.o(this.localization,"locale-updated",function(){FC(r)}),this.eventManager.o(this.localization,"locale-changed",function(){FC(r)}),this.eventManager.o(this.adManager,"ad-started",function(){r.ad&&r.ad.isLinear()&&xB(r.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){xB(r.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){xB(r.h,!1)}),this.eventManager.o(this.h,"touchstart",function(n){r.controls.qh(Date.now()),n.stopPropagation()}),this.eventManager.o(this.g,"click",function(){(function(n){if(n.controls.nd())n.controls.uc();else{xB(n.h,!0),ZB(n.controls);var b=function(n){return 0==n.classList.contains("shaka-hidden")};cb(n.h.childNodes,b)&&db(n.h.childNodes,b)[0].focus()}})(r)}),FC(this),this.ad&&this.ad.isLinear()&&xB(this.g,!1)}function HC(n,i){ae.set(n,i)}function FC(n){n.g.ariaLabel=n.localization.resolve("MORE_SETTINGS")}function JC(){}pa(DC,sB),DC.prototype.release=function(){this.j=null;for(var n=t(this.i),i=n.next();!i.done;i=n.next())i.value.release();this.i=[],sB.prototype.release.call(this)},L("shaka.ui.OverflowMenu",DC),DC.registerElement=HC,JC.prototype.create=function(n,i){return new DC(n,i)},eC("overflow_menu",new JC);var ae=new Map;function KC(i,r){sB.call(this,i,r);var o=this;this.g=el(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=U("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),n.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),(i=U("label")).classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.j=U("span"),i.appendChild(this.j),this.i=U("span"),this.i.classList.add("shaka-current-selection-span"),i.appendChild(this.i),this.g.appendChild(i),this.parent.appendChild(this.g),LC(this),MC(this),this.eventManager.o(this.localization,"locale-updated",function(){LC(o)}),this.eventManager.o(this.localization,"locale-changed",function(){LC(o)}),this.eventManager.o(this.g,"click",function(){o.controls.cc().webkitShowPlaybackTargetPicker()}),i=this.controls.cc(),this.eventManager.o(i,"webkitplaybacktargetavailabilitychanged",function(n){var i=o.player.ie()==t8;xB(o.g,"available"==n.availability&&i)}),this.eventManager.o(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){MC(o)})}function MC(n){var i=n.controls.cc();n.g.ariaPressed=i&&i.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function LC(n){n.g.ariaLabel=n.localization.resolve("AIRPLAY"),n.j.textContent=n.localization.resolve("AIRPLAY")}function NC(){}function OC(n,i,r){this.i=n,this.j=i,this.h=PC(this),i.dataset.shakaPlayerContainer="",i.ui=this,this.Nf()&&i.classList.add("shaka-mobile"),this.g=new Z(n,i,r,this.h),this.configure({}),r.controls||n.rg(i),i.ui=this,r.ui=this}function PC(i){var r={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:an,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:i.j,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!0,tapSeekDistance:10};return"remote"in HTMLMediaElement.prototype?r.overflowMenuButtons.push("remote"):n.WebKitPlaybackTargetAvailabilityEvent&&r.overflowMenuButtons.push("airplay"),i.Nf()&&(r.addBigPlayButton=!0,r.controlPanelElements=r.controlPanelElements.filter(function(n){return"play_pause"!=n&&"volume"!=n})),r}function RC(){var n,i,r,o,s,u,p,y,A,T,x,C,I,M,N,_,j,B,z,G;return K(function(H){switch(H.g){case 1:if(zx(),!tm())return SC("shaka-ui-load-failed",ai),H.return();if(n=document.querySelectorAll("[data-shaka-player-container]"),i=document.querySelectorAll("[data-shaka-player]"),r=document.querySelectorAll("[data-shaka-player-canvas]"),!i.length&&!n.length){H.F(2);break}if(i.length&&!n.length){for(s=(o=t(i)).next();!s.done;s=o.next())if(!(u=s.value).ui){for(p=document.createElement("div"),u.parentElement.replaceChild(p,u),p.appendChild(u),y=null,T=(A=t(r)).next();!T.done;T=A.next())if((x=T.value).parentElement==p){y=x;break}y||((y=document.createElement("canvas")).classList.add("shaka-canvas-container"),p.appendChild(y)),UC(p,u,y)}H.F(2);break}I=(C=t(n)).next();case 4:if(I.done){H.F(2);break}if((M=I.value).ui){H.F(5);break}for(N=null,s=(_=t(i)).next();!s.done;s=_.next())if((j=s.value).parentElement==M){N=j;break}for(N||((N=document.createElement("video")).setAttribute("playsinline",""),M.appendChild(N)),B=null,T=(z=t(r)).next();!T.done;T=z.next())if((G=T.value).parentElement==M){B=G;break}return B||((B=document.createElement("canvas")).classList.add("shaka-canvas-container"),M.appendChild(B)),ta(H,7),D(H,UC(M,N,B),9);case 9:va(H,5);break;case 7:return wa(H),SC("shaka-ui-load-failed",ar),H.return();case 5:I=C.next(),H.F(4);break;case 2:SC("shaka-ui-loaded"),F(H)}})}function SC(n,i){var r=null;void 0!=i&&(r={reasonCode:i}),n=new CustomEvent(n,{detail:r}),document.dispatchEvent(n)}function UC(n,i,r){var o,s,u,p,y,A,T,x,C;return K(function(I){switch(I.g){case 1:o=new V,s=new OC(o,n,i),o.Eg(r),u="",p=!1,n.dataset&&n.dataset.shakaPlayerCastReceiverId?(u=n.dataset.shakaPlayerCastReceiverId,p="true"===n.dataset.shakaPlayerCastAndroidReceiverCompatible):i.dataset&&i.dataset.shakaPlayerCastReceiverId&&(u=i.dataset.shakaPlayerCastReceiverId,p="true"===i.dataset.shakaPlayerCastAndroidReceiverCompatible),u.length&&s.configure({castReceiverAppId:u,castAndroidReceiverCompatible:p}),i.controls&&s.g.ph(!0),(y=i.getAttribute("src"))&&((A=document.createElement("source")).setAttribute("src",y),i.appendChild(A),i.removeAttribute("src")),x=(T=t(i.querySelectorAll("source"))).next();case 2:if(x.done){I.F(4);break}return C=x.value,ta(I,5),D(I,s.g.Mc().load(C.getAttribute("src")),7);case 7:I.F(4);break;case 5:wa(I);case 3:x=T.next(),I.F(2);break;case 4:return D(I,o.Gc(i),0)}})}pa(KC,sB),L("shaka.ui.AirPlayButton",KC),NC.prototype.create=function(n,i){return new KC(n,i)},HC("airplay",new NC),eC("airplay",new NC),(N=OC.prototype).destroy=function(){var n=this;return K(function(i){return 1==i.g?n.g?D(i,n.g.destroy(),2):i.F(2):4!=i.g?(n.g=null,n.i?D(i,n.i.destroy(),4):i.F(4)):void(n.i=null,F(i))})},N.Nf=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||Pd()&&1<navigator.maxTouchPoints},N.getConfiguration=function(){var n=PC(this);return Pl(n,this.h,PC(this),{},""),n},N.configure=function(n,i){2==arguments.length&&"string"==typeof n&&(n=Ql(n,i)),Pl(this.h,n,PC(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new O("uiupdated"))},N.Zh=function(){return this.g},N.tj=function(n){this.g.lg(n)},L("shaka.ui.Overlay",OC),OC.prototype.setEnabled=OC.prototype.tj,OC.prototype.getControls=OC.prototype.Zh,OC.prototype.configure=OC.prototype.configure,OC.prototype.getConfiguration=OC.prototype.getConfiguration,OC.prototype.isMobile=OC.prototype.Nf,OC.prototype.destroy=OC.prototype.destroy;var an=0;OC.TrackLabelFormat={LANGUAGE:an,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var ai=0,ar=1;function WC(n,i,r,o,s,u,p,y){function k(n){var i="";return 5<=n&&(i=" "+u.resolve("SURROUND")),i}function l(n,i,r,o){return n=[n,i],y&&null!=o&&n.push(o),r&&3==p&&n.push(r),n.join(": ")}function m(n){return"variant"==n.type?n.audioRoles?n.audioRoles.join(", "):void 0:n.roles.join(", ")}var A=n.find(function(n){return 1==n.active}),T=tB(i);fl(i),i.appendChild(T),T=new Map;for(var x=t(n),C=x.next();!C.done;C=x.next())C=C.value,T.has(C.language)||T.set(C.language,new Set),T.get(C.language).add(m(C));for(T=new Set,A=A?l(A.language,m(A),A.label,A.channelsCount):"",x={},C=(n=t(n)).next();!C.done;x={vb:x.vb},C=n.next()){x.vb=C.value,C=x.vb.language;var I=x.vb.forced,M=u.resolve("SUBTITLE_FORCED"),N=m(x.vb),_=x.vb.label,j=x.vb.channelsCount,B=l(C,N,_,j);if(!T.has(B)){T.add(B);var z=el();z.addEventListener("click",function(n){return function(){r(n.vb)}}(x));var G=U("span");switch(z.appendChild(G),G.textContent=function(n,i){if(!n&&!i)return"";switch(n){case"mul":return i.resolve("MULTIPLE_LANGUAGES");case"und":return i.resolve("UNDETERMINED_LANGUAGE");case"zxx":return i.resolve("NOT_APPLICABLE")}var r=Qb(n);return n in r3?r3[n].A:r in r3?r3[r].A+" ("+n+")":i.resolve("UNRECOGNIZED_LANGUAGE")+" ("+n+")"}(C,u),p){case an:y&&(G.textContent+=k(j)),I&&(G.textContent+=" ("+M+")");break;case 1:y&&(G.textContent+=k(j)),N?G.textContent=N:(Ra("Track #"+x.vb.id+" does not have a role, but the UI is configured to only show role."),G.textContent="?"),I&&(G.textContent+=" ("+M+")");break;case 2:y&&(G.textContent+=k(j)),N&&(G.textContent+=": "+N),I&&(G.textContent+=" ("+M+")");break;case 3:_?G.textContent=_:(Ra("Track #"+x.vb.id+" does not have a label, but the UI is configured to only show labels."),G.textContent="?")}o&&B==A&&(z.appendChild(wB()),G.classList.add("shaka-chosen-item"),z.ariaSelected="true",s.textContent=G.textContent),i.appendChild(z)}}}function YC(n,i,r){sB.call(this,n,i);var o,s,u,p,y,A=this;o=this,s=r,o.button=el(),o.button.classList.add("shaka-overflow-button"),o.icon=U("i"),o.icon.classList.add("material-icons-round"),o.icon.textContent=s,o.button.appendChild(o.icon),(s=U("label")).classList.add("shaka-overflow-button-label"),s.classList.add("shaka-overflow-menu-only"),o.nameSpan=U("span"),s.appendChild(o.nameSpan),o.currentSelection=U("span"),o.currentSelection.classList.add("shaka-current-selection-span"),s.appendChild(o.currentSelection),o.button.appendChild(s),o.parent.appendChild(o.button),u=this,u.menu=U("div"),u.menu.classList.add("shaka-no-propagation"),u.menu.classList.add("shaka-show-controls-on-mouse-over"),u.menu.classList.add("shaka-settings-menu"),u.menu.classList.add("shaka-hidden"),u.backButton=el(),u.backButton.classList.add("shaka-back-to-overflow-button"),u.menu.appendChild(u.backButton),u.eventManager.o(u.backButton,"click",function(){u.controls.uc()}),(p=U("i")).classList.add("material-icons-round"),p.textContent="close",u.backButton.appendChild(p),u.backSpan=U("span"),u.backButton.appendChild(u.backSpan),u.controls.h.appendChild(u.menu),y=this,y.parent.classList.contains("shaka-overflow-menu")&&(y.backButton.firstChild.textContent="arrow_back",y.eventManager.o(y.backButton,"click",function(){function b(n){return 0==n.classList.contains("shaka-hidden")}xB(y.parent,!0),cb(y.parent.childNodes,b)&&db(y.parent.childNodes,b)[0].focus(),ZB(y.controls)})),this.eventManager.o(this.button,"click",function(){A.menu.classList.contains("shaka-hidden")?(A.controls.dispatchEvent(new O("submenuopen")),xB(A.menu,!0),vB(A.menu)):xB(A.menu,!1)})}function bD(n,i){YC.call(this,n,i,"language");var r=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){cD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){cD(r)}),this.eventManager.o(this.player,"trackschanged",function(){var n=0<r.player.mb().length;xB(r.button,n),dD(r)}),this.eventManager.o(this.player,"variantchanged",function(){dD(r)}),cD(this),dD(this)}function dD(n){WC(n.player.mb(),n.menu,function(i){i.channelsCount&&n.controls.g.showAudioChannelCountVariants?n.player.Le(i.language,i.roles[0],i.channelsCount):n.player.Le(i.language,i.roles[0])},!0,n.currentSelection,n.localization,n.controls.g.trackLabelFormat,n.controls.g.showAudioChannelCountVariants),vB(n.menu),n.controls.dispatchEvent(new O("languageselectionupdated")),n.button.setAttribute("shaka-status",n.currentSelection.innerText),xB(n.button,2<n.menu.getElementsByTagName("button").length)}function cD(n){n.backButton.ariaLabel=n.localization.resolve("BACK"),n.button.ariaLabel=n.localization.resolve("LANGUAGE"),n.nameSpan.textContent=n.localization.resolve("LANGUAGE"),n.backSpan.textContent=n.localization.resolve("LANGUAGE")}function eD(){}function fD(n,i){sB.call(this,n,i);var r=this;this.h=this.controls.C,this.g=el(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=U("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),(n=U("label")).classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),this.l=U("span"),n.appendChild(this.l),this.j=U("span"),this.j.classList.add("shaka-current-selection-span"),n.appendChild(this.j),this.g.appendChild(n),this.parent.appendChild(this.g),gD(this),hD(this),this.eventManager.o(this.localization,"locale-updated",function(){gD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){gD(r)}),this.eventManager.o(this.g,"click",function(){var n,i;n=r,K(function(r){return 1==r.g?n.h.Ba()?(n.h.vh(),r.F(0)):(ta(r,3),n.g.disabled=!0,D(r,n.h.cast(),5)):3!=r.g?(n.g.disabled=!1,va(r,0)):void(i=wa(r),n.g.disabled=!1,8004!=i.code&&n.controls.dispatchEvent(new O("error",(new Map).set("detail",i))),F(r))})}),this.eventManager.o(this.controls,"caststatuschanged",function(){hD(r)})}function hD(n){var i=n.h.kf()&&n.controls.ua,r=n.h.Ba();xB(n.g,i),n.i.textContent=r?"cast_connected":"cast",i&&(n.g.ariaPressed=r?"true":"false"),jD(n)}function jD(n){n.j.textContent=n.h.Ba()?n.h.Je():n.localization.resolve("OFF")}function gD(n){n.g.ariaLabel=n.localization.resolve("CAST"),n.l.textContent=n.localization.resolve("CAST"),jD(n)}function kD(){}function lD(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),mD(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){mD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){mD(r)}),this.eventManager.o(this.g,"click",function(){if(r.video.duration){var n=r.h.indexOf(r.player.Nb())+1;n=n!=r.h.length?r.h[n]:r.h[0],r.player.Pd(n),r.g.setAttribute("shaka-status",n+"x")}})}function mD(n){n.g.ariaLabel=n.localization.resolve("FAST_FORWARD")}function nD(){}function oD(n,i){sB.call(this,n,i);var r=this;this.h=this.controls.s,this.g=el(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),pD(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),qD(this),this.eventManager.o(this.localization,"locale-updated",function(){qD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){qD(r)}),this.eventManager.o(this.g,"click",function(){return K(function(n){return D(n,r.controls.Pe(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){r.g.textContent=r.controls.Qc()?"fullscreen_exit":"fullscreen",qD(r)}),this.eventManager.o(this.h,"loadedmetadata",function(){pD(r)}),this.eventManager.o(this.h,"loadeddata",function(){pD(r)})}function pD(n){n.controls.zd()?n.g.classList.remove("shaka-hidden"):n.g.classList.add("shaka-hidden")}function qD(n){n.g.ariaLabel=n.localization.resolve(n.controls.Qc()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}function rD(){}function sD(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=U("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),(n=U("label")).classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),this.j=U("span"),this.j.textContent=this.localization.resolve("LOOP"),n.appendChild(this.j),this.l=U("span"),this.l.classList.add("shaka-current-selection-span"),n.appendChild(this.l),this.g.appendChild(n),tD(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){tD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){tD(r)}),this.eventManager.o(this.g,"click",function(){r.video.loop=!r.video.loop,r.h.Qa(),r.h.za(1)}),this.m=this.video.loop,this.h=new Dd(function(){r.m!=r.video.loop&&(tD(r),r.m=r.video.loop)}),this.h.za(1)}function tD(n){n.j.textContent=n.localization.resolve("LOOP"),n.l.textContent=n.localization.resolve(n.video.loop?"ON":"OFF"),n.i.textContent=n.video.loop?"repeat_on":"repeat",n.g.ariaLabel=n.localization.resolve(n.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function uD(){}function vD(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),wD(this),xD(this),this.eventManager.o(this.localization,"locale-updated",function(){wD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){wD(r)}),this.eventManager.o(this.g,"click",function(){r.ad&&r.ad.isLinear()?r.ad.setMuted(!r.ad.isMuted()):r.video.muted=!r.video.muted}),this.eventManager.o(this.video,"volumechange",function(){wD(r),xD(r)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){wD(r),xD(r)}),this.eventManager.o(this.adManager,"ad-muted",function(){wD(r),xD(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.ad=null,wD(r),xD(r)})}function wD(n){var i=n.ad?n.ad.isMuted()?"UNMUTE":"MUTE":n.video.muted?"UNMUTE":"MUTE";n.g.ariaLabel=n.localization.resolve(i)}function xD(n){var i=n.ad?n.ad.isMuted()?"volume_off":"volume_up":n.video.muted?"volume_off":"volume_up";n.g.textContent=i}function yD(){}function zD(i,r){sB.call(this,i,r);var o=this;this.l=this.controls.s,this.g=el(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=U("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),(i=U("label")).classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.j=U("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),i.appendChild(this.j),this.h=U("span"),this.h.classList.add("shaka-current-selection-span"),i.appendChild(this.h),this.g.appendChild(i),AD(this),this.parent.appendChild(this.g),this.controls.qe()||xB(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){AD(o)}),this.eventManager.o(this.localization,"locale-changed",function(){AD(o)}),this.eventManager.o(this.g,"click",function(){o.controls.Od()}),this.eventManager.o(this.l,"enterpictureinpicture",function(){BD(o)}),this.eventManager.o(this.l,"leavepictureinpicture",function(){CD(o)}),this.eventManager.o(this.controls,"caststatuschanged",function(){DD(o)}),this.eventManager.o(this.player,"trackschanged",function(){DD(o)}),"documentPictureInPicture"in n&&this.eventManager.o(n.documentPictureInPicture,"enter",function(n){BD(o),o.eventManager.na(n.window,"pagehide",function(){CD(o)})})}function BD(n){n.i.textContent="branding_watermark",n.g.ariaLabel=n.localization.resolve("EXIT_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("ON")}function CD(n){n.i.textContent="picture_in_picture_alt",n.g.ariaLabel=n.localization.resolve("ENTER_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("OFF")}function AD(n){n.j.textContent=n.localization.resolve("PICTURE_IN_PICTURE");var i=n.controls.re();n.g.ariaLabel=n.localization.resolve(i?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve(i?"ON":"OFF")}function DD(n){K(function(i){return n.controls.qe()?n.player&&n.player.Pc()?(xB(n.g,!1),n.controls.re()?D(i,n.controls.Od(),0):i.F(0)):(xB(n.g,!0),i.F(0)):(xB(n.g,!1),n.controls.re()?D(i,n.controls.Od(),0):i.F(0))})}function ED(){}function FD(n,i){YC.call(this,n,i,"slow_motion_video");var r=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){GD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){GD(r)}),this.eventManager.o(this.player,"loaded",function(){HD(r,r.player.Nb())}),this.eventManager.o(this.player,"ratechange",function(){HD(r,r.player.Nb())}),this.g=new Map(this.controls.g.playbackRates.map(function(n){return[n+"x",n]})),GD(this),function(n){for(var i={},r=t(n.g.keys()),o=r.next();!o.done;i={cd:i.cd},o=r.next()){i.cd=o.value,o=el();var s=U("span");s.textContent=i.cd,o.appendChild(s),n.eventManager.o(o,"click",function(i){return function(){n.video.playbackRate=n.g.get(i.cd),n.video.defaultPlaybackRate=n.g.get(i.cd)}}(i)),n.menu.appendChild(o)}vB(n.menu)}(this),HD(this,this.player.Nb())}function GD(n){n.backButton.ariaLabel=n.localization.resolve("BACK"),n.button.ariaLabel=n.localization.resolve("PLAYBACK_RATE"),n.nameSpan.textContent=n.localization.resolve("PLAYBACK_RATE"),n.backSpan.textContent=n.localization.resolve("PLAYBACK_RATE")}function HD(n,i){var r=uB(n.menu,"material-icons-round shaka-chosen-item");if(r){var o=r.parentElement;o.removeAttribute("aria-selected"),o.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),o.removeChild(r)}(r=Array.from(n.menu.querySelectorAll("span")).find(function(r){return n.g.get(r.textContent)==i}))&&((o=r.parentElement).appendChild(wB()),o.ariaSelected="true",r.classList.add("shaka-chosen-item")),n.currentSelection.textContent=i+"x",n.button.setAttribute("shaka-status",i+"x")}function JD(){}function KD(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("shaka-current-time"),LD(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){r.player.R()&&(r.video.currentTime=r.player.Ha().end)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var n=r.controls.W,i=r.controls.Hf(),o=r.player.Ha(),s=o.end-o.start;r.player.R()?(i=Math.max(0,Math.floor(o.end-i)),s=3600<=s,1<=i||n?(LD(r,"- "+yB(i,s)),r.g.disabled=!1):(LD(r,r.localization.resolve("LIVE")),r.g.disabled=!0)):(n=3600<=s,i=yB(Math.max(0,i-o.start),n),s&&(i+=" / "+yB(s,n)),LD(r,i),r.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){r.player.R()&&(r.g.ariaLabel=r.localization.resolve("SKIP_TO_LIVE"))})}function LD(n,i){i!=n.g.textContent&&(n.g.textContent=i)}function MD(){}function ND(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=U("i"),this.i.classList.add("material-icons-round"),n="cast",(i=Rd())&&13<=i&&(n="airplay"),this.i.textContent=n,this.g.appendChild(this.i),(n=U("label")).classList.add("shaka-overflow-button-label"),n.classList.add("shaka-overflow-menu-only"),this.l=U("span"),n.appendChild(this.l),this.j=U("span"),this.j.classList.add("shaka-current-selection-span"),n.appendChild(this.j),this.g.appendChild(n),this.parent.appendChild(this.g),this.h=-1,OD(this),xB(this.g,!1),!this.video.remote||this.video.disableRemotePlayback?this.g.classList.add("shaka-hidden"):(this.eventManager.o(this.localization,"locale-updated",function(){OD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){OD(r)}),this.eventManager.o(this.controls,"caststatuschanged",function(){PD(r)}),this.eventManager.o(this.g,"click",function(){r.video.remote.prompt()}),this.eventManager.o(this.video.remote,"connect",function(){PD(r)}),this.eventManager.o(this.video.remote,"connecting",function(){PD(r)}),this.eventManager.o(this.video.remote,"disconnect",function(){PD(r)}),this.eventManager.o(this.player,"loaded",function(){PD(r)}),PD(this))}function PD(n){var i,r;K(function(o){switch(o.g){case 1:if(n.controls.C.kf()&&n.controls.ua){xB(n.g,!1),-1!=n.h&&(n.video.remote.cancelWatchAvailability(n.h),n.h=-1),o.F(0);break}if("disconnected"==n.video.remote.state){if(i=function(i){n.player?xB(n.g,n.player.ie()==t8&&i):xB(n.g,!1)},ta(o,7),-1==n.h){o.F(9);break}return D(o,n.video.remote.cancelWatchAvailability(n.h),10)}if(-1==n.h){o.F(0);break}return D(o,n.video.remote.cancelWatchAvailability(n.h),6);case 6:n.h=-1,o.F(0);break;case 10:n.h=-1;case 9:va(o,8);break;case 7:wa(o);case 8:return ta(o,11),D(o,n.video.remote.watchAvailability(i),13);case 13:r=o.h,n.h=r,va(o,0);break;case 11:wa(o),i(!0),F(o)}})}function OD(n){var i=n.localization.resolve("CAST"),r=Rd();r&&13<=r&&(i=n.localization.resolve("AIRPLAY")),n.g.ariaLabel=i,n.l.textContent=i}function QD(){}function RD(n,i){YC.call(this,n,i,"settings");var r=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){SD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){SD(r)}),this.eventManager.o(this.player,"variantchanged",function(){TD(r)}),this.eventManager.o(this.player,"trackschanged",function(){TD(r)}),this.eventManager.o(this.player,"abrstatuschanged",function(){TD(r)}),TD(this)}function TD(n){var i=[];n.player.ie()!=t8&&(i=n.player.mb());var r=i.find(function(n){return n.active});r&&(i=i.filter(function(n){return n.language==r.language&&n.channelsCount==r.channelsCount})),i=i.filter(function(r,o){return(n.player.Pc()?i.findIndex(function(n){return n.bandwidth==r.bandwidth}):i.findIndex(function(n){return n.height==r.height&&n.frameRate==r.frameRate&&n.hdr==r.hdr&&n.videoLayout==r.videoLayout}))==o}),n.player.Pc()?i.sort(function(n,i){return i.bandwidth-n.bandwidth}):i.sort(function(n,i){return i.height-n.height});var o=tB(n.menu);fl(n.menu),n.menu.appendChild(o),o=n.player.getConfiguration().abr.enabled;for(var s={},u=t(i),p=u.next();!p.done;s={Hb:s.Hb},p=u.next()){s.Hb=p.value,(p=el()).classList.add("explicit-resolution"),n.eventManager.o(p,"click",function(i){return function(){var r=i.Hb;n.player.configure({abr:{enabled:!1}}),n.player.Me(r,n.controls.g.clearBufferOnQualityChange)}}(s));var y=U("span");y.textContent=n.player.Pc()&&s.Hb.bandwidth?Math.round(s.Hb.bandwidth/1e3)+" kbits/s":s.Hb.height&&s.Hb.width?function(n){var i=n.height||0,r=n.width||0,o=i;return r/i>16/9&&(o=Math.round(9*r/16)),i=o+"p",2160==o&&(i="4K"),(o=n.frameRate)&&(50<=o||20>=o)&&(i+=Math.round(n.frameRate)),("PQ"==n.hdr||"HLG"==n.hdr)&&(i+=" (HDR)"),"CH-STEREO"==n.videoLayout&&(i+=" (3D)"),i}(s.Hb):"Unknown",p.appendChild(y),o||s.Hb!=r||(p.ariaSelected="true",p.appendChild(wB()),y.classList.add("shaka-chosen-item"),n.currentSelection.textContent=y.textContent),n.menu.appendChild(p)}(s=el()).classList.add("shaka-enable-abr-button"),n.eventManager.o(s,"click",function(){n.player.configure({abr:{enabled:!0}}),TD(n)}),n.g=U("span"),n.g.classList.add("shaka-auto-span"),n.g.textContent=n.localization.resolve("AUTO_QUALITY"),s.appendChild(n.g),o&&(s.ariaSelected="true",s.appendChild(wB()),n.g.classList.add("shaka-chosen-item"),n.currentSelection.textContent=n.localization.resolve("AUTO_QUALITY")),n.button.setAttribute("shaka-status",n.currentSelection.textContent),n.menu.appendChild(s),vB(n.menu),n.controls.dispatchEvent(new O("resolutionselectionupdated")),SD(n),xB(n.button,0<i.length)}function SD(n){var i=n.player.Pc()?"QUALITY":"RESOLUTION";n.button.ariaLabel=n.localization.resolve(i),n.backButton.ariaLabel=n.localization.resolve(i),n.backSpan.textContent=n.localization.resolve(i),n.nameSpan.textContent=n.localization.resolve(i),n.g.textContent=n.localization.resolve("AUTO_QUALITY"),n.player.getConfiguration().abr.enabled&&(n.currentSelection.textContent=n.localization.resolve("AUTO_QUALITY"))}function VD(){}function WD(n,i){sB.call(this,n,i);var r=this;this.g=el(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),XD(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){XD(r)}),this.eventManager.o(this.localization,"locale-changed",function(){XD(r)}),this.eventManager.o(this.g,"click",function(){if(r.video.duration){var n=r.h.indexOf(r.player.Nb())+1;n=n!=r.h.length?r.h[n]:r.h[0],r.player.Pd(n),r.g.setAttribute("shaka-status",n+"x")}})}function XD(n){n.g.ariaLabel=n.localization.resolve("REWIND")}function YD(){}function ZD(n,i){sB.call(this,n,i);var r=this;this.j=U("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=U("div"),this.h.classList.add("shaka-skip-ad-counter"),xB(this.h,!1),this.j.appendChild(this.h),this.g=el(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,xB(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),$D(this),this.i=new Dd(function(){var n=Math.round(r.ad.getTimeUntilSkippable());0<n?r.h.textContent=n:(r.i.stop(),xB(r.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){$D(r)}),this.eventManager.o(this.localization,"locale-changed",function(){$D(r)}),this.eventManager.o(this.adManager,"ad-started",function(){aE(r)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){r.ad.canSkipNow()&&(r.g.disabled=!1,r.i.stop(),xB(r.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){r.i.stop(),r.g.disabled=!0,xB(r.g,!1),xB(r.h,!1)}),this.eventManager.o(this.g,"click",function(){r.ad.skip()}),this.ad&&aE(this)}function $D(n){n.g.textContent=n.localization.resolve("SKIP_AD")}function aE(n){n.ad.isSkippable()&&(xB(n.g,!0),xB(n.h,!0),n.h.textContent="",n.i.Qa(),n.i.za(.5))}function bE(n,i){CB.call(this,n,i),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}function cE(){}function dE(n,i){sB.call(this,n,i),(n=U("div")).classList.add("shaka-spacer"),n.ariaHidden="true",this.parent.appendChild(n)}function eE(){}function fE(n,i){function c(n){return yB(r.h[n],!1)+" (m)"}function d(n){return Math.round(r.h[n]/1e3)+" (kbits/s)"}function e(n){return r.h[n].toFixed(2)+" (s)"}function f(n){return r.h[n]+" (frames)"}function g(n){return r.h[n]+" (px)"}sB.call(this,n,i);var r=this;this.i=el(),this.i.classList.add("shaka-statistics-button"),this.j=U("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),(n=U("label")).classList.add("shaka-overflow-button-label"),this.s=U("span"),n.appendChild(this.s),this.m=U("span"),this.m.classList.add("shaka-current-selection-span"),n.appendChild(this.m),this.i.appendChild(n),this.parent.appendChild(this.i),this.g=U("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.h.appendChild(this.g),this.D=[],this.G=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.u={},this.C={width:g,height:g,completionPercent:function(n){return r.h[n]+" (%)"},bufferingTime:e,drmTimeSeconds:e,licenseTime:e,liveLatency:e,loadLatency:e,manifestTimeSeconds:e,estimatedBandwidth:d,streamBandwidth:d,maxSegmentDuration:c,pauseTime:c,playTime:c,corruptedFrames:f,decodedFrames:f,droppedFrames:f,stallsDetected:function(n){return r.h[n]+" (stalls)"},gapsJumped:function(n){return r.h[n]+" (gaps)"}},this.l=new Dd(function(){r.h=r.player.getStats();for(var n=t(r.D),i=n.next();!i.done;i=n.next())i=i.value,r.u[i].textContent=r.C[i](i)}),gE(this),function(n){for(var i=t(n.controls.g.statisticsList),r=i.next();!r.done;r=i.next())if((r=r.value)in n.h&&!n.G.includes(r)){var o=n.g,s=o.appendChild,u=U("div"),p=U("label");p.textContent=r+":",u.appendChild(p),(p=U("span")).textContent=n.C[r](r),u.appendChild(p),n.u[r]=p,s.call(o,u),n.D.push(r)}else Ra("Unrecognized statistic element:",r)}(this),this.eventManager.o(this.localization,"locale-updated",function(){gE(r)}),this.eventManager.o(this.localization,"locale-changed",function(){gE(r)}),this.eventManager.o(this.i,"click",function(){xB(r.parent,!1),r.g.classList.contains("shaka-hidden")?(r.j.textContent="insert_chart",r.l.za(.1),xB(r.g,!0)):(r.j.textContent="insert_chart_outlined",r.l.stop(),xB(r.g,!1)),gE(r)})}function gE(n){n.s.textContent=n.localization.resolve("STATISTICS"),n.i.ariaLabel=n.localization.resolve("STATISTICS"),n.m.textContent=n.localization.resolve(n.g.classList.contains("shaka-hidden")?"OFF":"ON")}function iE(){}function jE(n,i){YC.call(this,n,i,"closed_caption");var r,o,s=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.xc()?this.button.ariaPressed="true":this.button.ariaPressed="false",r=this,(o=el()).ariaSelected="true",r.menu.appendChild(o),o.appendChild(wB()),r.g=U("span"),r.g.classList.add("shaka-auto-span"),o.appendChild(r.g),this.eventManager.o(this.localization,"locale-updated",function(){lE(s),mE(s)}),this.eventManager.o(this.localization,"locale-changed",function(){lE(s),mE(s)}),this.eventManager.o(this.player,"texttrackvisibility",function(){nE(s),mE(s)}),this.eventManager.o(this.player,"textchanged",function(){mE(s)}),this.eventManager.o(this.player,"trackschanged",function(){oE(s)}),nE(this),lE(this),mE(this),oE(this)}function nE(n){n.player.xc()?(n.icon.textContent="closed_caption",n.button.ariaPressed="true"):(n.icon.textContent="closed_caption_disabled",n.button.ariaPressed="false"),n.controls.dispatchEvent(new O("captionselectionupdated"))}function mE(n){var i=n.player.bc();WC(i,n.menu,function(i){var r,o;return r=n,o=i,K(function(n){return r.player.jg(o),D(n,r.player.Oe(!0),0)})},n.player.xc(),n.currentSelection,n.localization,n.controls.g.trackLabelFormat,n.controls.g.showAudioChannelCountVariants),(i=el()).classList.add("shaka-turn-captions-off-button"),n.eventManager.o(i,"click",function(){n.player.Oe(!1),mE(n)}),i.appendChild(n.g),n.menu.appendChild(i),n.player.xc()||(i.ariaSelected="true",i.appendChild(wB()),n.g.classList.add("shaka-chosen-item"),n.currentSelection.textContent=n.localization.resolve("OFF")),n.button.setAttribute("shaka-status",n.currentSelection.textContent),vB(n.menu),n.controls.dispatchEvent(new O("captionselectionupdated"))}function lE(n){n.button.ariaLabel=n.localization.resolve("CAPTIONS"),n.backButton.ariaLabel=n.localization.resolve("BACK"),n.nameSpan.textContent=n.localization.resolve("CAPTIONS"),n.backSpan.textContent=n.localization.resolve("CAPTIONS"),n.g.textContent=n.localization.resolve("OFF")}function oE(n){var i=0<n.player.bc().length;xB(n.button,i),mE(n)}function qE(){}function rE(n,i){NB.call(this,n,i,["shaka-volume-bar-container"],["shaka-volume-bar"]);var r=this;this.g=this.controls.g,this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return sE(r)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return tE(r)}),this.eventManager.o(this.adManager,"ad-muted",function(){return tE(r)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return sE(r)}),this.eventManager.o(this.localization,"locale-updated",function(){return uE(r)}),this.eventManager.o(this.localization,"locale-changed",function(){return uE(r)}),sE(this),uE(this),this.ad&&this.onChange()}function sE(n){n.video.muted?n.setValue(0):n.setValue(100*n.video.volume),vE(n)}function tE(n){var i=n.ad.getVolume();n.setValue(100*i),vE(n)}function vE(n){var i=n.g.volumeBarColors,r=["to right"];r.push(i.level+n.getValue()+"%"),r.push(i.base+n.getValue()+"%"),r.push(i.base+"100%"),n.container.style.background="linear-gradient("+r.join(",")+")"}function uE(n){n.bar.ariaLabel=n.localization.resolve("VOLUME")}function wE(){}OC.FailReasonCode={NO_BROWSER_SUPPORT:ai,PLAYER_FAILED_TO_LOAD:ar},"complete"==document.readyState?K(function(n){if(1==n.g)return D(n,Promise.resolve(),2);RC(),F(n)}):n.addEventListener("load",RC),pa(YC,sB),L("shaka.ui.SettingsMenu",YC),pa(bD,YC),L("shaka.ui.AudioLanguageSelection",bD),eD.prototype.create=function(n,i){return new bD(n,i)},HC("language",new eD),eC("language",new eD),pa(fD,sB),L("shaka.ui.CastButton",fD),kD.prototype.create=function(n,i){return new fD(n,i)},HC("cast",new kD),eC("cast",new kD),pa(lD,sB),L("shaka.ui.FastForwardButton",lD),nD.prototype.create=function(n,i){return new lD(n,i)},eC("fast_forward",new nD),pa(oD,sB),L("shaka.ui.FullscreenButton",oD),rD.prototype.create=function(n,i){return new oD(n,i)},eC("fullscreen",new rD),pa(sD,sB),sD.prototype.release=function(){this.h.stop(),this.h=null,sB.prototype.release.call(this)},L("shaka.ui.LoopButton",sD),uD.prototype.create=function(n,i){return new sD(n,i)},HC("loop",new uD),eC("loop",new uD),IB("loop",new uD),pa(vD,sB),L("shaka.ui.MuteButton",vD),yD.prototype.create=function(n,i){return new vD(n,i)},eC("mute",new yD),pa(zD,sB),L("shaka.ui.PipButton",zD),ED.prototype.create=function(n,i){return new zD(n,i)},HC("picture_in_picture",new ED),eC("picture_in_picture",new ED),IB("picture_in_picture",new ED),pa(FD,YC),L("shaka.ui.PlaybackRateSelection",FD),JD.prototype.create=function(n,i){return new FD(n,i)},HC("playback_rate",new JD),eC("playback_rate",new JD),pa(KD,sB),L("shaka.ui.PresentationTimeTracker",KD),MD.prototype.create=function(n,i){return new KD(n,i)},eC("time_and_duration",new MD),pa(ND,sB),ND.prototype.release=function(){this.video.remote&&-1!=this.h&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),sB.prototype.release.call(this)},L("shaka.ui.RemoteButton",ND),QD.prototype.create=function(n,i){return new ND(n,i)},HC("remote",new QD),eC("remote",new QD),pa(RD,YC),L("shaka.ui.ResolutionSelection",RD),VD.prototype.create=function(n,i){return new RD(n,i)},HC("quality",new VD),eC("quality",new VD),pa(WD,sB),L("shaka.ui.RewindButton",WD),YD.prototype.create=function(n,i){return new WD(n,i)},eC("rewind",new YD),pa(ZD,sB),ZD.prototype.release=function(){this.i.stop(),this.i=null,sB.prototype.release.call(this)},L("shaka.ui.SkipAdButton",ZD),pa(bE,CB),bE.prototype.h=function(){this.isEnded()?this.button.textContent="replay":this.button.textContent=this.isPaused()?"play_arrow":"pause"},bE.prototype.g=function(){if(this.isEnded())this.button.ariaLabel=this.localization.resolve("REPLAY");else{var n=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(n)}},L("shaka.ui.SmallPlayButton",bE),cE.prototype.create=function(n,i){return new bE(n,i)},eC("play_pause",new cE),pa(dE,sB),L("shaka.ui.Spacer",dE),eE.prototype.create=function(n,i){return new dE(n,i)},eC("spacer",new eE),pa(fE,sB),fE.prototype.release=function(){this.l.stop(),this.l=null,sB.prototype.release.call(this)},L("shaka.ui.StatisticsButton",fE),iE.prototype.create=function(n,i){return new fE(n,i)},HC("statistics",new iE),IB("statistics",new iE),pa(jE,YC),L("shaka.ui.TextSelection",jE),qE.prototype.create=function(n,i){return new jE(n,i)},HC("captions",new qE),eC("captions",new qE),pa(rE,NB),rE.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,this.video.muted=0==this.video.volume)},L("shaka.ui.VolumeBar",rE),wE.prototype.create=function(n,i){return new rE(n,i)},eC("volume",new wE)}).call(o,n,n,void 0),o.shaka)i[s]=o.shaka[s]}()}}]);