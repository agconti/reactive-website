(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{29504:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"cartCreate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CartInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cartCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cart"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkoutUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"field"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:173}};t.loc.source={body:"mutation cartCreate($input: CartInput!) {\n  cartCreate(input: $input) {\n    cart {\n      checkoutUrl\n    }\n    userErrors {\n      field\n      code\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function findOperation(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}t.definitions.forEach(function(e){if(e.name){var t=new Set;(function collectFragmentReferences(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){collectFragmentReferences(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){collectFragmentReferences(e,t)}),e.definitions&&e.definitions.forEach(function(e){collectFragmentReferences(e,t)})})(e,t),i[e.name.value]=t}}),e.exports=t,e.exports.cartCreate=function(e,t){var n={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,a=new Set,o=new Set;for(r.forEach(function(e){o.add(e)});o.size>0;){var u=o;o=new Set,u.forEach(function(e){a.has(e)||(a.add(e),(i[e]||new Set).forEach(function(e){o.add(e)}))})}return a.forEach(function(t){var i=findOperation(e,t);i&&n.definitions.push(i)}),n}(t,"cartCreate")},2022:function(e,t,i){"use strict";i.d(t,{m:function(){return getAffiliateAttributionInformationForUser},h:function(){return initalizeAffiliateTracking}});let SquaredanceCampaign=class SquaredanceCampaign{toString(){return"Squaredance Campaign for merchant ".concat(this.merchantSiteHost,":").concat(this.merchantId," and campaign ").concat(reactiveAffiliateCampaignId)}constructor(e,t,i){if(![e,t,i].every(Boolean))throw Error("Could not initialize campaign due to missing data. ".concat(e," ").concat(t," ").concat(i));this.merchantSiteHost=e,this.merchantId=t,this.reactiveAffiliateCampaignId=i}};let getAffiliateLinkAttributionInformation=async e=>{if((null==e?void 0:e.affiliate_link)===void 0)return null;let t=encodeURIComponent(e.affiliate_link);try{let e=await fetch("".concat("/api","/chats/attribution/link?url=").concat(t));if(!e.ok)return null;let{search_string:i}=await e.json();return i}catch(t){return console.info("Could not get affiliate information for link ".concat(e.affiliate_link,".")),console.error(t),null}},manInTheMiddleAffiliateAttribution=async e=>{let t=await getAffiliateLinkAttributionInformation(e);return null!==t&&(history.replaceState(history.state,"","".concat(location.origin).concat(location.pathname).concat(t)),!0)},initalizeAwinForActiveClients=async e=>{try{var t;let i=window.hasOwnProperty("AWIN")&&(null===(t=window.AWIN)||void 0===t?void 0:t.Tracking)!==void 0;if(!i)return;let n=await manInTheMiddleAffiliateAttribution(e);if(!n){console.error("There was an issue attributing this session through Awin because manInTheMiddleAffiliateAttribution failed.");return}AWIN.Tracking.StorageProvider?AWIN.Tracking.StorageProvider.get(AWIN.Tracking.getCookiesAsString(),function(e){AWIN.Tracking.run(e),AWIN.Tracking.runScripts()}):(AWIN.Tracking.run(),AWIN.Tracking.runScripts())}catch(e){console.error("There was an issue attributing this session through awin",e)}},initalizePepperjamForActiveClients=async e=>{try{let t=void 0===window.hasOwnProperty("PepperjamTracking");if(t)return;let i=await manInTheMiddleAffiliateAttribution(e);if(!i){console.error("There was an issue attributing this session through Pepperjam because manInTheMiddleAffiliateAttribution failed.");return}window.PepperjamTracking(window)}catch(e){console.error("There was an issue attributing this session through pepperjam",e)}},initalizeCommonJunctionAttributionForActiveClients=async e=>{try{let t=void 0===window.hasOwnProperty("CJApi");if(t)return;let i=await manInTheMiddleAffiliateAttribution(e);if(!i){console.error("There was an issue attributing this session through Common Junction because manInTheMiddleAffiliateAttribution failed.");return}CJApi.default({win:(void 0).window,date:new Date,integrationDomain:"www.emjcd.com",integrationType:1,tagId:e.merchant_id,path:"",reporterType:"ERROR_ONLY",flags:{enablePerformance:!1},countryCode:"US",reporterUrl:"https://www.mczbf.com",partnership:{liveRamp:{enabled:!0,periodInDays:5},revLifter:{enabled:!0}}})}catch(e){console.error("There was an issue attributing this session through Common Junction",e)}},initalizePartnerStackForActiveClients=async e=>{try{let t=void 0===window.hasOwnProperty("growsumo");if(t)return;let i=await manInTheMiddleAffiliateAttribution(e);if(!i){console.error("There was an issue attributing this session through Partner Stack because manInTheMiddleAffiliateAttribution failed.");return}growsumo._initialize(e.merchant_id),"function"==typeof growsumoInit&&growsumoInit()}catch(e){console.error("There was an issue attributing this session through Partner Stack",e)}},initalizeShareASaleForActiveClients=async e=>{try{var t,i;let n=await manInTheMiddleAffiliateAttribution(e);if(!n){console.error("There was an issue attributing this session through ShareAsSale because manInTheMiddleAffiliateAttribution failed.");return}let r=null===(i=Array.from(document.scripts).find(e=>e.src.includes("www.dwin1.com")))||void 0===i?void 0:null===(t=i.src.split("/").pop())||void 0===t?void 0:t.slice(0,-3);if(!r){console.error("Could not find a master tag id to attribute sale too.");return}let a=document.createElement("script");a.src="https://www.dwin1.com/".concat(r,".js?cacheBreaker=").concat(Date.now()),document.head.appendChild(a),console.debug("Initialized shareasale tracking.",e)}catch(e){console.error("There was an issue attributing this session through ShareASale",e)}},getAffiliateConfigurationForUser=async e=>{if(!e)return null;try{let t=await fetch("".concat("/api","/affiliate-configurations/?user=").concat(e));if(!t.ok)return null;let{results:i}=await t.json(),n=i.shift();return n}catch(t){return console.info("Could not get affiliate information for user ".concat(e,".")),console.error(t),null}},getAffiliateConfigurationForHost=async()=>{let e=btoa(location.host);if(!e)return null;try{let t=await fetch("".concat("/api","/affiliate-configurations/").concat(e,"/"));if(!t.ok)return null;let i=await t.json();return i}catch(t){return console.info("Could not get affiliate information for host ".concat(e,".")),console.error(t),null}},n={jumbleberry:e=>{try{let t=window.hasOwnProperty("jumbleberry");if(!t)return;let{host:i,merchant_id:n,campaign_id:r}=e,a=new SquaredanceCampaign(i,n,r);jumbleberry("init",a.merchantId,a.reactiveAffiliateCampaignId)}catch(e){console.error("There was an issue attributing this session on Jumbleberry",e)}},awin:initalizeAwinForActiveClients,pepperjam:initalizePepperjamForActiveClients,commonjunction:initalizeCommonJunctionAttributionForActiveClients,partnerstack:initalizePartnerStackForActiveClients,shareasale:initalizeShareASaleForActiveClients},initalizeAffiliateTracking=async()=>{try{let e=await getAffiliateConfigurationForHost();if(null===e)return;let t=n[e.platform];if(void 0===t)throw Error("Campaign data was for unconfigured platform ".concat(e.platform,"."));await t(e.campaign_data)}catch(e){console.error("There was an issue initalizing affiliate tracking",e)}},getAffiliateAttributionInformationForUser=async e=>{let t=await getAffiliateConfigurationForUser(e);if(!t)return;let i=await getAffiliateLinkAttributionInformation(t.campaign_data);return{search_string:i,configuration:t}}},89978:function(e,t,i){"use strict";i.d(t,{BT:function(){return v},FJ:function(){return h},KM:function(){return getRedirectionURL},X1:function(){return m},Xq:function(){return p}});var n=i(99597),r=i(69433),a=i(29504),o=i.n(a),u=i(96592),l=i(26674),s=i(41366),c=i(4545),d=i(87029),f=i(2022);let checkoutLineItemSerializer=e=>({quantity:1,merchandiseId:e.merchandiseId});let CheckoutUserError=class CheckoutUserError extends Error{constructor(e){var t;let i=(null===(t=e[0])||void 0===t?void 0:t.message)||"There was an error processing your checkout.";super(i),this.errors=e}};let getAdAttributionInformation=()=>{let e=localStorage.getItem("cntr_attr");if(null===e)return{};let t=JSON.parse(e);return{adTrackingIds:t}},checkUserOutFromCart=async e=>{var t,i;let{gqlClient:n,streamId:r,cart:a,discountCodes:u,isAd:l,affiliateAttributionInformation:s}=e,c=a.find(e=>!!e.checkoutRedirectOverride);if(c)return c.checkoutRedirectOverride.value;let d=a.map(checkoutLineItemSerializer),{errors:f,data:{cartCreate:h,checkoutUserErrors:m}}=await n.mutate({mutation:o(),variables:{input:{lines:d,discountCodes:u,attributes:[{key:"reactive-checkout",value:JSON.stringify({streamId:r,adAttributionInformation:getAdAttributionInformation(),affiliateAttributionInformation:s,fromAd:l})}]}}});if(f){let e=new CheckoutUserError(f);throw console.error("In checkUserOutFromCart",e),e}if(m){let e=new CheckoutUserError(m);throw console.error("In checkUserOutFromCart",e),e}if(null==h?void 0:null===(t=h.userErrors)||void 0===t?void 0:t.length){let e=new CheckoutUserError(h.userErrors);throw console.error("In checkUserOutFromCart",e),e}let p=null==h?void 0:null===(i=h.cart)||void 0===i?void 0:i.checkoutUrl;if(!p)throw Error("No checkout url from cart create.");return p},findVariantId=e=>{var t,i,n,r;let{selectedVariants:a}=e,o=Object.keys(a).sort().map(e=>a[e]),u=o.join(" / "),l=null==e?void 0:null===(r=e.variants)||void 0===r?void 0:null===(n=r.edges)||void 0===n?void 0:null===(i=n.find(e=>(null==e?void 0:e.node.title)===u))||void 0===i?void 0:null===(t=i.node)||void 0===t?void 0:t.id;return l},getAdNetworkRedirectURL=e=>{if(e)return e;let t=new URL(location.toString()).searchParams.get("clickTag");return t},getRedirectionURL=async e=>{let{isAd:t,clickUrl:i,clickId:n,destinationUrl:r,storeFrontAccessToken:a,affiliateAttributionInformation:o}=e,u=new URL(r);if(!t)return u.href;let l=getAdNetworkRedirectURL(i);if(u.searchParams.set("utm_source","reactive"),u.searchParams.set("utm_medium","shoppable_ad"),a&&u.searchParams.set("access_token",a),n&&u.searchParams.set("s2",n),null==o?void 0:o.search_string){let e=new URLSearchParams(null==o?void 0:o.search_string);for(let[t,i]of e.entries())u.searchParams.append(t,i)}return l?"".concat(l).concat(encodeURIComponent(u.href)):u.href},redirectToCart=(e,t,i)=>{let open=(e,t)=>t?(t.location.href=e,t):window.open(e);setTimeout(()=>{let n=open(t,i);e||null!==n||window.location.assign(t)})},h=(0,n.hg)("purchase/directCheckout",async(e,t)=>{let{gqlClient:i,windowOpenRef:n}=e,{getState:a,dispatch:o}=t,d=a(),h=(0,s.SO)(d),m=(0,s.He)(d),p=(0,s.T)(d),v=r.dV(d),g=(0,l.Tj)(d),w=(0,c.Cg)(d),b=(0,u.yN)(d),k=b.id,y=b.producer,A=v.map(e=>{let{discountCode:t}=e;return t}),_=[w,...A].filter(Boolean);try{let e=await (0,f.m)(y),t=await checkUserOutFromCart({gqlClient:i,streamId:k,cart:v,discountCodes:_,isAd:h,affiliateAttributionInformation:e}),a=await getRedirectionURL({isAd:h,clickUrl:m,clickId:p,destinationUrl:t,storeFrontAccessToken:g,affiliateAttributionInformation:e});o((0,s.KL)()),o(r.LL()),redirectToCart(h,a,n)}catch(e){if(console.error("There was an issue checking out",e),"Too many requests. Please try again in a few seconds"===e.message){o((0,s.KL)()),o((0,s.uH)("Please try again in a few seconds. We were unable to apply all of your discounts due to too many requests."));return}if(e.message){o((0,s.uH)(e.message));return}o((0,s.uH)("Unable to complete checkout. Please try again."))}}),m=(0,n.hg)("purchase/add-to-reactive-bag",async(e,t)=>{var i,n,a,o,u,l,s;let{getState:f,dispatch:h}=t,m=f(),p=r.yI(m),v=r.Ap(m),g=r.e7(m),w=(0,c.YW)(m);if(!p)return;let b=findVariantId(p);h(r.dA({id:p.id,merchandiseId:b,discountCode:w,checkoutRedirectOverride:p.checkoutRedirectOverride})),v&&h(r.dA({id:v.id,merchandiseId:findVariantId(v),discountCode:g,checkoutRedirectOverride:v.checkoutRedirectOverride}));let k=null==p?void 0:null===(o=p.images)||void 0===o?void 0:null===(a=o.edges)||void 0===a?void 0:null===(n=a.slice(0)[0])||void 0===n?void 0:null===(i=n.node)||void 0===i?void 0:i.thumbnail,y=null==p?void 0:null===(l=p.variants)||void 0===l?void 0:null===(u=l.edges)||void 0===u?void 0:u.find(e=>{var t;return(null==e?void 0:null===(t=e.node)||void 0===t?void 0:t.id)===b}).node;h((0,d.CQ)({id:b,name:null==p?void 0:p.title,variant:null==y?void 0:y.title,quantity:1,price:null==y?void 0:null===(s=y.price)||void 0===s?void 0:s.amount,imageUrl:k})),null!==w&&h((0,c.ts)())}),p=(0,n.hg)("purchase/add-to-cart",async(e,t)=>{let{dispatch:i}=t;try{await Promise.all([(0,f.h)(),i(m()).unwrap()])}catch(e){console.error("There was an issue adding item to the cart",e),i((0,s.uH)("Unable to add item. Please try again."))}}),v=(0,n.hg)("purchase/buy-now",async(e,t)=>{let{gqlClient:i,windowOpenRef:n}=e,{dispatch:r,rejectWithValue:a}=t;try{await r(p()).unwrap(),await r(h({gqlClient:i,windowOpenRef:n})).unwrap()}catch(e){console.error("There was an issue buying now",e),r((0,s.uH)("Unable to complete checkout. Please try again.")),a(e)}})},23633:function(e,t,i){"use strict";i.d(t,{I4:function(){return getProductThumbnailImage},K8:function(){return getSubtitleFromSelectedVariants},hv:function(){return getProductImageFull}});let getSubtitleFromSelectedVariants=e=>{if(!e)return null;let{selectedVariants:t={}}=e,i="Default Title"===t["0"];return i?null:Object.values(t).join(", ")},getProductThumbnailImage=e=>{var t,i,n;return null==e?void 0:null===(n=e.images)||void 0===n?void 0:null===(i=n.edges)||void 0===i?void 0:null===(t=i.slice(0)[0])||void 0===t?void 0:t.node.thumbnail},getProductImageFull=e=>{var t,i,n;return null==e?void 0:null===(n=e.images)||void 0===n?void 0:null===(i=n.edges)||void 0===i?void 0:null===(t=i.slice(0)[0])||void 0===t?void 0:t.node.original}},40065:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t,i){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i)return(0,n.default)(e,t,i);if("object"==typeof e&&void 0===t&&void 0===i)return(0,n.default)(e.hue,e.saturation,e.lightness);throw new r.default(1)};var n=_interopRequireDefault(i(34769)),r=_interopRequireDefault(i(47796));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},39205:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e,t,i,o){if("number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof o)return o>=1?(0,n.default)(e,t,i):"rgba("+(0,r.default)(e,t,i)+","+o+")";if("object"==typeof e&&void 0===t&&void 0===i&&void 0===o)return e.alpha>=1?(0,n.default)(e.hue,e.saturation,e.lightness):"rgba("+(0,r.default)(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new a.default(2)};var n=_interopRequireDefault(i(34769)),r=_interopRequireDefault(i(72286)),a=_interopRequireDefault(i(47796));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},35695:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=_interopRequireDefault(i(53603)),r=_interopRequireDefault(i(30678)),a=_interopRequireDefault(i(39624)),o=_interopRequireDefault(i(52852));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var u=(0,n.default)(function(e,t){if("transparent"===t)return t;var i=(0,a.default)(t);return(0,o.default)(_extends({},i,{lightness:(0,r.default)(0,1,i.lightness+parseFloat(e))}))});t.default=u,e.exports=t.default},39624:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){return(0,r.default)((0,n.default)(e))};var n=_interopRequireDefault(i(84148)),r=_interopRequireDefault(i(95061));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},52852:function(e,t,i){"use strict";t.__esModule=!0,t.default=function(e){if("object"!=typeof e)throw new u.default(8);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha)return(0,o.default)(e);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha))return(0,a.default)(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha)return(0,r.default)(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha))return(0,n.default)(e);throw new u.default(8)};var n=_interopRequireDefault(i(40065)),r=_interopRequireDefault(i(39205)),a=_interopRequireDefault(i(26488)),o=_interopRequireDefault(i(13799)),u=_interopRequireDefault(i(47796));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},34769:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=_interopRequireDefault(i(72286)),r=_interopRequireDefault(i(52434)),a=_interopRequireDefault(i(68342));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function colorToHex(e){return(0,a.default)(Math.round(255*e))}function convertToHex(e,t,i){return(0,r.default)("#"+colorToHex(e)+colorToHex(t)+colorToHex(i))}t.default=function(e,t,i){return(0,n.default)(e,t,i,convertToHex)},e.exports=t.default},95061:function(e,t){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){var t,i=e.red/255,n=e.green/255,r=e.blue/255,a=Math.max(i,n,r),o=Math.min(i,n,r),u=(a+o)/2;if(a===o)return void 0!==e.alpha?{hue:0,saturation:0,lightness:u,alpha:e.alpha}:{hue:0,saturation:0,lightness:u};var l=a-o,s=u>.5?l/(2-a-o):l/(a+o);switch(a){case i:t=(n-r)/l+(n<r?6:0);break;case n:t=(r-i)/l+2;break;default:t=(i-n)/l+4}return(t*=60,void 0!==e.alpha)?{hue:t,saturation:s,lightness:u,alpha:e.alpha}:{hue:t,saturation:s,lightness:u}},e.exports=t.default}}]);